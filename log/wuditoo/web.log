[I 120526 11:01:50 web:1359] 200 GET / (127.0.0.1) 1259.49ms
[I 120526 11:02:19 web:1359] 200 GET /about (127.0.0.1) 124.44ms
[I 120526 11:02:57 web:1359] 200 GET / (127.0.0.1) 79.30ms
[I 120526 11:17:02 web:1359] 200 GET /photos/hot (127.0.0.1) 28.79ms
[I 120526 11:17:02 web:1359] 200 GET /photos/latest (127.0.0.1) 35.99ms
[I 120526 11:17:02 web:1359] 200 GET / (127.0.0.1) 96.12ms
[I 120526 11:17:02 web:1359] 200 GET /about (127.0.0.1) 15.64ms
[I 120526 11:17:15 web:1359] 200 GET / (127.0.0.1) 80.11ms
[I 120526 11:17:19 web:1359] 200 GET /about (127.0.0.1) 16.34ms
[I 120526 11:17:47 web:1359] 200 GET / (127.0.0.1) 86.54ms
[I 120526 16:53:32 web:1359] 200 GET / (127.0.0.1) 416.00ms
[I 120526 16:53:52 web:1359] 302 POST /login (127.0.0.1) 127.10ms
[I 120526 16:53:52 web:1359] 200 GET /login?error=%E8%AF%A5%E7%94%A8%E6%88%B7%E4%B8%8D%E5%AD%98%E5%9C%A8 (127.0.0.1) 27.28ms
[I 120526 17:18:00 web:1359] 200 GET / (127.0.0.1) 1452.36ms
[I 120526 17:18:11 web:1359] 302 POST /login (127.0.0.1) 68.28ms
[I 120526 17:18:11 web:1359] 200 GET /login?error=%E8%AF%A5%E7%94%A8%E6%88%B7%E4%B8%8D%E5%AD%98%E5%9C%A8 (127.0.0.1) 59.66ms
[E 120712 10:38:26 web:1031] Uncaught exception GET / (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.109', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cookie': 'Hm_lvt_005883a40039a7a54e1234b1ec574be5=1342060704129; Hm_lpvt_005883a40039a7a54e1234b1ec574be5=1342060704129', 'X-Real-Ip': '192.168.0.109'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "/home/dk/work/python/wuditoo/src/sites/www/handlers/home.py", line 15, in get
        return self._render('hot')
      File "/home/dk/work/python/wuditoo/src/sites/www/handlers/base.py", line 52, in _render
        photos = (models.Photo().order_by('-karma')
      File "/home/dk/work/python/wuditoo/src/thing/thing/thing.py", line 140, in __init__
        self._init_env()
      File "/home/dk/work/python/wuditoo/src/thing/thing/thing.py", line 156, in _init_env
        self._selected_fields = [self.table]
      File "/home/dk/work/python/wuditoo/src/thing/thing/thing.py", line 378, in table
        Thing._table_schemas[self._tablename] = Table(self._tablename, MetaData(), autoload = True, autoload_with = conn)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/schema.py", line 314, in __new__
        table._init(name, metadata, *args, **kw)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/schema.py", line 377, in _init
        self._autoload(metadata, autoload_with, include_columns)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/schema.py", line 393, in _autoload
        self, include_columns, exclude_columns
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py", line 1968, in run_callable
        return callable_(self, *args, **kwargs)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/default.py", line 260, in reflecttable
        return insp.reflecttable(table, include_columns, exclude_columns)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/reflection.py", line 350, in reflecttable
        tbl_opts = self.get_table_options(table_name, schema, **table.kwargs)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/reflection.py", line 178, in get_table_options
        **kw)
      File "<string>", line 1, in <lambda>
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/reflection.py", line 47, in cache
        ret = fn(self, con, *args, **kw)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/dialects/mysql/base.py", line 2039, in get_table_options
        parsed_state = self._parsed_state_or_create(connection, table_name, schema, **kw)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/dialects/mysql/base.py", line 2138, in _parsed_state_or_create
        info_cache=kw.get('info_cache', None)
      File "<string>", line 1, in <lambda>
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/reflection.py", line 47, in cache
        ret = fn(self, con, *args, **kw)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/dialects/mysql/base.py", line 2163, in _setup_parser
        full_name=full_name)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/dialects/mysql/base.py", line 2247, in _show_create_table
        rp = connection.execute(st)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py", line 1450, in execute
        params)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py", line 1627, in _execute_text
        statement, parameters
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py", line 1697, in _execute_context
        context)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py", line 1690, in _execute_context
        context)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/default.py", line 331, in do_execute
        cursor.execute(statement, parameters)
      File "/usr/local/lib/python2.7/dist-packages/MySQLdb/cursors.py", line 174, in execute
        self.errorhandler(self, exc, value)
      File "/usr/local/lib/python2.7/dist-packages/MySQLdb/connections.py", line 36, in defaulterrorhandler
        raise errorclass, errorvalue
    NotSupportedError: (NotSupportedError) (1286, "Unknown table engine 'InnoDB'") 'SHOW CREATE TABLE `photo`' ()
[E 120712 10:38:27 web:1393] 500 GET / (127.0.0.1) 608.03ms
[W 120712 10:38:27 web:1393] 404 GET /favicon.ico (127.0.0.1) 1.11ms
[I 120712 12:17:59 web:1393] 200 GET / (127.0.0.1) 979.69ms
[I 120712 12:18:15 web:1393] 200 GET /about (127.0.0.1) 45.75ms
[I 120712 12:18:24 web:1393] 200 GET /photos/latest (127.0.0.1) 32.41ms
[I 120712 12:18:28 web:1393] 200 GET /photos/hot (127.0.0.1) 34.36ms
[I 120712 13:44:16 web:1393] 200 GET / (127.0.0.1) 139.93ms
[I 120712 14:20:46 web:1393] 200 GET / (127.0.0.1) 73971.97ms
[W 120712 14:21:07 web:1393] 404 GET /favicon.ico (127.0.0.1) 10118.59ms
[I 120712 14:21:16 web:1393] 200 GET / (127.0.0.1) 441.08ms
[I 120712 14:48:24 web:1393] 200 GET /register?invite_key=925ab9089978832b (127.0.0.1) 175.94ms
[I 120712 14:48:59 web:1393] 200 POST /register?invite_key=925ab9089978832b (127.0.0.1) 216.94ms
[I 120712 14:48:59 web:1393] 200 GET / (127.0.0.1) 134.93ms
[I 120712 14:49:10 web:1393] 200 GET /login (127.0.0.1) 22.59ms
[I 120712 14:49:26 web:1393] 302 POST /login (127.0.0.1) 7.72ms
[I 120712 14:49:26 web:1393] 200 GET / (127.0.0.1) 142.29ms
[I 120712 14:49:33 web:1393] 304 GET /photos/hot (127.0.0.1) 28.65ms
[I 120712 14:49:35 web:1393] 304 GET /photos/latest (127.0.0.1) 28.63ms
[I 120712 14:49:37 web:1393] 304 GET /photos/hot (127.0.0.1) 32.95ms
[I 120712 14:49:37 web:1393] 304 GET /photos/latest (127.0.0.1) 32.87ms
[I 120712 15:30:52 web:1393] 200 GET /about (127.0.0.1) 19.29ms
[E 120714 10:20:50 web:1031] Uncaught exception GET / (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.118', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cookie': 'Hm_lvt_005883a40039a7a54e1234b1ec574be5=1342060704129', 'X-Real-Ip': '192.168.0.118'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "src/sites/www/handlers/home.py", line 15, in get
        return self._render('hot')
      File "src/sites/www/handlers/base.py", line 52, in _render
        photos = (models.Photo().order_by('-karma')
      File "/home/dk/work/python/wuditoo/src/thing/thing/thing.py", line 140, in __init__
        self._init_env()
      File "/home/dk/work/python/wuditoo/src/thing/thing/thing.py", line 156, in _init_env
        self._selected_fields = [self.table]
      File "/home/dk/work/python/wuditoo/src/thing/thing/thing.py", line 377, in table
        conn = Thing._get_conn(self._tablename, True, self.sharding_strategy())
      File "/home/dk/work/python/wuditoo/src/thing/thing/thing.py", line 122, in _get_conn
        Thing._db_conn[section]= create_engine(url, **kwargs).connect().execution_options(autocommit=True)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py", line 2471, in connect
        return self._connection_cls(self, **kwargs)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py", line 881, in __init__
        self.__connection = connection or engine.raw_connection()
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py", line 2557, in raw_connection
        return self.pool.unique_connection()
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/pool.py", line 183, in unique_connection
        return _ConnectionFairy(self).checkout()
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/pool.py", line 387, in __init__
        rec = self._connection_record = pool._do_get()
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/pool.py", line 739, in _do_get
        con = self._create_connection()
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/pool.py", line 188, in _create_connection
        return _ConnectionRecord(self)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/pool.py", line 270, in __init__
        self.connection = self.__connect()
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/pool.py", line 330, in __connect
        connection = self.__pool._creator()
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/strategies.py", line 80, in connect
        return dialect.connect(*cargs, **cparams)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/default.py", line 281, in connect
        return self.dbapi.connect(*cargs, **cparams)
      File "/usr/local/lib/python2.7/dist-packages/MySQLdb/__init__.py", line 81, in Connect
        return Connection(*args, **kwargs)
      File "/usr/local/lib/python2.7/dist-packages/MySQLdb/connections.py", line 187, in __init__
        super(Connection, self).__init__(*args, **kwargs2)
    OperationalError: (OperationalError) (1045, "Access denied for user 'root'@'localhost' (using password: YES)") None None
[E 120714 10:20:50 web:1393] 500 GET / (127.0.0.1) 675.61ms
[W 120714 10:20:51 web:1393] 404 GET /favicon.ico (127.0.0.1) 4.07ms
[E 120714 10:21:26 web:1031] Uncaught exception GET / (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.118', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cookie': 'Hm_lvt_005883a40039a7a54e1234b1ec574be5=1342060704129', 'Cache-Control': 'max-age=0', 'X-Real-Ip': '192.168.0.118'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "/home/dk/work/python/wuditoo/src/sites/www/handlers/home.py", line 15, in get
        return self._render('hot')
      File "/home/dk/work/python/wuditoo/src/sites/www/handlers/base.py", line 52, in _render
        photos = (models.Photo().order_by('-karma')
      File "/home/dk/work/python/wuditoo/src/thing/thing/thing.py", line 140, in __init__
        self._init_env()
      File "/home/dk/work/python/wuditoo/src/thing/thing/thing.py", line 156, in _init_env
        self._selected_fields = [self.table]
      File "/home/dk/work/python/wuditoo/src/thing/thing/thing.py", line 377, in table
        conn = Thing._get_conn(self._tablename, True, self.sharding_strategy())
      File "/home/dk/work/python/wuditoo/src/thing/thing/thing.py", line 122, in _get_conn
        Thing._db_conn[section]= create_engine(url, **kwargs).connect().execution_options(autocommit=True)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py", line 2471, in connect
        return self._connection_cls(self, **kwargs)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py", line 881, in __init__
        self.__connection = connection or engine.raw_connection()
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py", line 2557, in raw_connection
        return self.pool.unique_connection()
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/pool.py", line 183, in unique_connection
        return _ConnectionFairy(self).checkout()
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/pool.py", line 387, in __init__
        rec = self._connection_record = pool._do_get()
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/pool.py", line 739, in _do_get
        con = self._create_connection()
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/pool.py", line 188, in _create_connection
        return _ConnectionRecord(self)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/pool.py", line 270, in __init__
        self.connection = self.__connect()
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/pool.py", line 330, in __connect
        connection = self.__pool._creator()
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/strategies.py", line 80, in connect
        return dialect.connect(*cargs, **cparams)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/default.py", line 281, in connect
        return self.dbapi.connect(*cargs, **cparams)
      File "/usr/local/lib/python2.7/dist-packages/MySQLdb/__init__.py", line 81, in Connect
        return Connection(*args, **kwargs)
      File "/usr/local/lib/python2.7/dist-packages/MySQLdb/connections.py", line 187, in __init__
        super(Connection, self).__init__(*args, **kwargs2)
    OperationalError: (OperationalError) (1045, "Access denied for user 'root'@'localhost' (using password: YES)") None None
[E 120714 10:21:26 web:1393] 500 GET / (127.0.0.1) 50.77ms
[W 120714 10:21:26 web:1393] 404 GET /favicon.ico (127.0.0.1) 2.72ms
[I 120714 10:45:43 web:1393] 200 GET / (127.0.0.1) 332.26ms
[E 120714 10:47:44 web:1031] Uncaught exception GET / (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.118', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cookie': 'Hm_lvt_005883a40039a7a54e1234b1ec574be5=1342060704129', 'Cache-Control': 'max-age=0', 'X-Real-Ip': '192.168.0.118', 'If-None-Match': '"68530431a120707e8a040e51cab93fa8ac4b87cf"'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "src/sites/www/handlers/home.py", line 15, in get
        return self._render('hot')
      File "src/sites/www/handlers/base.py", line 52, in _render
        photos = (models.Photo().order_by('-karma')
      File "/home/dk/work/python/wuditoo/src/thing/thing/thing.py", line 140, in __init__
        self._init_env()
      File "/home/dk/work/python/wuditoo/src/thing/thing/thing.py", line 156, in _init_env
        self._selected_fields = [self.table]
      File "/home/dk/work/python/wuditoo/src/thing/thing/thing.py", line 377, in table
        conn = Thing._get_conn(self._tablename, True, self.sharding_strategy())
      File "/home/dk/work/python/wuditoo/src/thing/thing/thing.py", line 122, in _get_conn
        Thing._db_conn[section]= create_engine(url, **kwargs).connect().execution_options(autocommit=True)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py", line 2471, in connect
        return self._connection_cls(self, **kwargs)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py", line 881, in __init__
        self.__connection = connection or engine.raw_connection()
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py", line 2557, in raw_connection
        return self.pool.unique_connection()
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/pool.py", line 183, in unique_connection
        return _ConnectionFairy(self).checkout()
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/pool.py", line 387, in __init__
        rec = self._connection_record = pool._do_get()
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/pool.py", line 739, in _do_get
        con = self._create_connection()
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/pool.py", line 188, in _create_connection
        return _ConnectionRecord(self)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/pool.py", line 270, in __init__
        self.connection = self.__connect()
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/pool.py", line 330, in __connect
        connection = self.__pool._creator()
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/strategies.py", line 80, in connect
        return dialect.connect(*cargs, **cparams)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/default.py", line 281, in connect
        return self.dbapi.connect(*cargs, **cparams)
      File "/usr/local/lib/python2.7/dist-packages/MySQLdb/__init__.py", line 81, in Connect
        return Connection(*args, **kwargs)
      File "/usr/local/lib/python2.7/dist-packages/MySQLdb/connections.py", line 187, in __init__
        super(Connection, self).__init__(*args, **kwargs2)
    OperationalError: (OperationalError) (1045, "Access denied for user 'root'@'localhost' (using password: YES)") None None
[E 120714 10:47:44 web:1393] 500 GET / (127.0.0.1) 157.84ms
[W 120714 10:47:45 web:1393] 404 GET /favicon.ico (127.0.0.1) 4.36ms
[I 120714 10:52:13 web:1393] 200 GET / (127.0.0.1) 1490.88ms
[I 120714 10:52:27 web:1393] 200 GET /login (127.0.0.1) 56.17ms
[I 120714 10:54:44 web:1393] 302 POST /login (127.0.0.1) 86275.90ms
[W 120714 10:54:44 web:1393] 404 GET /favicon.ico (127.0.0.1) 7.10ms
[I 120714 10:54:55 web:1393] 200 GET /login (127.0.0.1) 54.59ms
[I 120714 10:56:00 web:1393] 302 POST /login (127.0.0.1) 57538.28ms
[I 120714 10:56:00 web:1393] 200 GET /login?error=%E8%AF%A5%E7%94%A8%E6%88%B7%E4%B8%8D%E5%AD%98%E5%9C%A8 (127.0.0.1) 59.37ms
[I 120714 10:57:01 web:1393] 200 GET /login?error=%C3%A8%C2%AF%C2%A5%C3%A7%C2%94%C2%A8%C3%A6%C2%88%C2%B7%C3%A4%C2%B8%C2%8D%C3%A5%C2%AD%C2%98%C3%A5%C2%9C%C2%A8 (127.0.0.1) 60.40ms
[I 120714 10:57:12 web:1393] 302 POST /login?error=%C3%83%C2%A8%C3%82%C2%AF%C3%82%C2%A5%C3%83%C2%A7%C3%82%C2%94%C3%82%C2%A8%C3%83%C2%A6%C3%82%C2%88%C3%82%C2%B7%C3%83%C2%A4%C3%82%C2%B8%C3%82%C2%8D%C3%83%C2%A5%C3%82%C2%AD%C3%82%C2%98%C3%83%C2%A5%C3%82%C2%9C%C3%82%C2%A8 (127.0.0.1) 22.68ms
[I 120714 10:57:12 web:1393] 200 GET / (127.0.0.1) 393.71ms
[I 120714 10:57:26 web:1393] 302 GET /logout (127.0.0.1) 4.78ms
[I 120714 10:57:26 web:1393] 200 GET /login?next=%2Flogout (127.0.0.1) 59.70ms
[I 120714 10:57:34 web:1393] 302 POST /login?next=/logout (127.0.0.1) 23.15ms
[I 120714 10:57:34 web:1393] 200 GET / (127.0.0.1) 401.20ms
[I 120714 10:57:53 web:1393] 200 GET /login (127.0.0.1) 57.86ms
[I 120714 10:58:00 web:1393] 302 POST /login (127.0.0.1) 22.13ms
[I 120714 10:58:00 web:1393] 200 GET /login?error=%E8%AF%A5%E7%94%A8%E6%88%B7%E4%B8%8D%E5%AD%98%E5%9C%A8 (127.0.0.1) 60.59ms
[I 120714 10:59:27 web:1393] 200 GET /login (127.0.0.1) 72.37ms
[I 120714 11:11:57 web:1393] 302 POST /login (127.0.0.1) 737705.03ms
[W 120714 11:11:57 web:1393] 404 GET /favicon.ico (127.0.0.1) 6.10ms
[E 120714 17:15:36 web:1031] Uncaught exception POST /login (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='POST', uri='/login', version='HTTP/1.0', remote_ip='127.0.0.1', body='username=dinosaurkfb&password=123', headers={'Content-Length': '33', 'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Scheme': 'http', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Connection': 'close', 'X-Real-Ip': '192.168.0.118', 'Origin': 'http://192.168.0.189', 'X-Forwarded-For': '192.168.0.118', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Host': '192.168.0.189', 'Cookie': 'Hm_lvt_005883a40039a7a54e1234b1ec574be5=1342060704129', 'Cache-Control': 'max-age=0', 'Referer': 'http://192.168.0.189/login', 'Content-Type': 'application/x-www-form-urlencoded'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "src/sites/www/handlers/auth.py", line 55, in post
        user = models.User().find_by_username(username)
      File "/home/dk/work/python/wuditoo/src/thing/thing/thing.py", line 222, in __call__
        result = self.find()
      File "/home/dk/work/python/wuditoo/src/thing/thing/thing.py", line 467, in find
        if self._profile:
      File "/home/dk/work/python/wuditoo/src/thing/thing/thing.py", line 467, in find
        if self._profile:
      File "/usr/lib/python2.7/bdb.py", line 48, in trace_dispatch
        return self.dispatch_line(frame)
      File "/usr/lib/python2.7/bdb.py", line 67, in dispatch_line
        if self.quitting: raise BdbQuit
    BdbQuit
[E 120714 17:15:36 web:1393] 500 POST /login (127.0.0.1) 21743758.23ms
[W 120714 17:15:36 web:1393] 404 GET /favicon.ico (127.0.0.1) 1.07ms
[I 120716 06:45:56 web:1393] 200 GET / (127.0.0.1) 899.86ms
[I 120716 06:45:59 web:1393] 200 GET /about (127.0.0.1) 19.06ms
[I 120716 06:46:44 web:1393] 200 GET / (127.0.0.1) 104.07ms
[I 120716 06:47:25 web:1393] 200 GET /about (127.0.0.1) 22.00ms
[I 120716 06:54:49 web:1393] 200 GET /about (127.0.0.1) 14.29ms
[I 120716 06:54:54 web:1393] 200 GET / (127.0.0.1) 102.69ms
[I 120716 07:00:43 web:1393] 200 GET /about (127.0.0.1) 13.38ms
[I 120716 07:03:13 web:1393] 200 GET / (127.0.0.1) 103.05ms
[I 120716 07:09:43 web:1393] 200 GET / (127.0.0.1) 115.02ms
[I 120716 07:09:47 web:1393] 200 GET /about (127.0.0.1) 15.81ms
[I 120717 11:01:15 web:1393] 200 GET / (127.0.0.1) 664.15ms
[I 120717 11:01:23 web:1393] 200 GET /login (127.0.0.1) 45.93ms
[I 120717 11:11:18 web:1393] 200 GET / (127.0.0.1) 109.14ms
[I 120717 11:13:10 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/base.py modified; restarting server
[I 120717 11:15:15 web:1393] 200 GET / (127.0.0.1) 225.16ms
[I 120717 11:15:19 web:1393] 200 GET /about (127.0.0.1) 14.20ms
[I 120717 11:16:49 web:1393] 302 POST /login (127.0.0.1) 30.22ms
[I 120717 11:16:49 web:1393] 200 GET /login?error=%E8%AF%A5%E7%94%A8%E6%88%B7%E4%B8%8D%E5%AD%98%E5%9C%A8 (127.0.0.1) 14.79ms
[I 120717 11:16:56 web:1393] 302 POST /login?error=%C3%A8%C2%AF%C2%A5%C3%A7%C2%94%C2%A8%C3%A6%C2%88%C2%B7%C3%A4%C2%B8%C2%8D%C3%A5%C2%AD%C2%98%C3%A5%C2%9C%C2%A8 (127.0.0.1) 8.10ms
[I 120717 11:16:56 web:1393] 200 GET / (127.0.0.1) 106.66ms
[I 120717 11:17:25 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/base.py modified; restarting server
[I 120717 11:17:37 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/base.py modified; restarting server
[I 120717 11:17:46 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/base.py modified; restarting server
[I 120717 11:20:08 web:1393] 200 GET /photo/upload (127.0.0.1) 232.68ms
[I 120717 11:21:44 web:1393] 302 POST /login (127.0.0.1) 19.75ms
[I 120717 11:21:44 web:1393] 200 GET / (127.0.0.1) 129.09ms
[E 120717 11:22:02 web:1031] Uncaught exception GET /photo (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/photo', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.109', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cookie': 'Hm_lvt_005883a40039a7a54e1234b1ec574be5=1342060704129; __utma=148685175.2108842575.1342494076.1342494076.1342494076.1; __utmb=148685175.11.10.1342494076; __utmc=148685175; __utmz=148685175.1342494076.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)', 'X-Real-Ip': '192.168.0.109'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
    TypeError: get() takes exactly 2 arguments (1 given)
[E 120717 11:22:02 web:1393] 500 GET /photo (127.0.0.1) 136.74ms
[W 120717 11:22:02 web:1393] 404 GET /favicon.ico (127.0.0.1) 1.07ms
[I 120717 11:22:15 web:1393] 200 GET /photo/upload (127.0.0.1) 78.46ms
[W 120717 11:28:51 web:1393] 403 POST /photo (127.0.0.1) 2.70ms
[I 120717 11:38:20 web:1393] 200 GET /photo/upload (127.0.0.1) 60.27ms
[E 120719 20:57:07 web:1031] Uncaught exception GET / (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.100', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cache-Control': 'max-age=0', 'X-Real-Ip': '192.168.0.100'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "src/sites/www/handlers/home.py", line 14, in get
        return self._render('hot')
      File "src/sites/www/handlers/base.py", line 52, in _render
        additives = (models.Additive().order_by('-karma')
      File "/home/dk/work/python/safood/src/thing/thing/thing.py", line 140, in __init__
        self._init_env()
      File "/home/dk/work/python/safood/src/thing/thing/thing.py", line 156, in _init_env
        self._selected_fields = [self.table]
      File "/home/dk/work/python/safood/src/thing/thing/thing.py", line 378, in table
        Thing._table_schemas[self._tablename] = Table(self._tablename, MetaData(), autoload = True, autoload_with = conn)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/schema.py", line 314, in __new__
        table._init(name, metadata, *args, **kw)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/schema.py", line 377, in _init
        self._autoload(metadata, autoload_with, include_columns)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/schema.py", line 393, in _autoload
        self, include_columns, exclude_columns
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py", line 1968, in run_callable
        return callable_(self, *args, **kwargs)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/default.py", line 260, in reflecttable
        return insp.reflecttable(table, include_columns, exclude_columns)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/reflection.py", line 350, in reflecttable
        tbl_opts = self.get_table_options(table_name, schema, **table.kwargs)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/reflection.py", line 178, in get_table_options
        **kw)
      File "<string>", line 1, in <lambda>
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/reflection.py", line 47, in cache
        ret = fn(self, con, *args, **kw)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/dialects/mysql/base.py", line 2039, in get_table_options
        parsed_state = self._parsed_state_or_create(connection, table_name, schema, **kw)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/dialects/mysql/base.py", line 2138, in _parsed_state_or_create
        info_cache=kw.get('info_cache', None)
      File "<string>", line 1, in <lambda>
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/reflection.py", line 47, in cache
        ret = fn(self, con, *args, **kw)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/dialects/mysql/base.py", line 2163, in _setup_parser
        full_name=full_name)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/dialects/mysql/base.py", line 2250, in _show_create_table
        raise exc.NoSuchTableError(full_name)
    NoSuchTableError: `additive`
[E 120719 20:57:07 web:1393] 500 GET / (127.0.0.1) 1168.36ms
[I 120719 22:01:23 autoreload:133] src/sites/www/handlers/additive.py modified; restarting server
[E 120719 22:06:19 web:1031] Uncaught exception GET / (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.100', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cache-Control': 'max-age=0', 'X-Real-Ip': '192.168.0.100'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "src/sites/www/handlers/home.py", line 14, in get
        return self._render('hot')
      File "src/sites/www/handlers/base.py", line 52, in _render
        additives = (models.Additive().order_by('-karma')
      File "/home/dk/work/python/safood/src/thing/thing/thing.py", line 140, in __init__
        self._init_env()
      File "/home/dk/work/python/safood/src/thing/thing/thing.py", line 156, in _init_env
        self._selected_fields = [self.table]
      File "/home/dk/work/python/safood/src/thing/thing/thing.py", line 378, in table
        Thing._table_schemas[self._tablename] = Table(self._tablename, MetaData(), autoload = True, autoload_with = conn)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/schema.py", line 314, in __new__
        table._init(name, metadata, *args, **kw)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/schema.py", line 377, in _init
        self._autoload(metadata, autoload_with, include_columns)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/schema.py", line 393, in _autoload
        self, include_columns, exclude_columns
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py", line 1968, in run_callable
        return callable_(self, *args, **kwargs)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/default.py", line 260, in reflecttable
        return insp.reflecttable(table, include_columns, exclude_columns)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/reflection.py", line 350, in reflecttable
        tbl_opts = self.get_table_options(table_name, schema, **table.kwargs)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/reflection.py", line 178, in get_table_options
        **kw)
      File "<string>", line 1, in <lambda>
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/reflection.py", line 47, in cache
        ret = fn(self, con, *args, **kw)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/dialects/mysql/base.py", line 2039, in get_table_options
        parsed_state = self._parsed_state_or_create(connection, table_name, schema, **kw)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/dialects/mysql/base.py", line 2138, in _parsed_state_or_create
        info_cache=kw.get('info_cache', None)
      File "<string>", line 1, in <lambda>
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/reflection.py", line 47, in cache
        ret = fn(self, con, *args, **kw)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/dialects/mysql/base.py", line 2163, in _setup_parser
        full_name=full_name)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/dialects/mysql/base.py", line 2250, in _show_create_table
        raise exc.NoSuchTableError(full_name)
    NoSuchTableError: `additive`
[E 120719 22:06:19 web:1393] 500 GET / (127.0.0.1) 943.27ms
[E 120719 22:07:44 web:1031] Uncaught exception GET / (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.100', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cache-Control': 'max-age=0', 'X-Real-Ip': '192.168.0.100'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "src/sites/www/handlers/home.py", line 14, in get
        return self._render('hot')
      File "src/sites/www/handlers/base.py", line 52, in _render
        additives = (models.Additive().order_by('-karma')
      File "/home/dk/work/python/safood/src/thing/thing/thing.py", line 140, in __init__
        self._init_env()
      File "/home/dk/work/python/safood/src/thing/thing/thing.py", line 156, in _init_env
        self._selected_fields = [self.table]
      File "/home/dk/work/python/safood/src/thing/thing/thing.py", line 378, in table
        Thing._table_schemas[self._tablename] = Table(self._tablename, MetaData(), autoload = True, autoload_with = conn)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/schema.py", line 314, in __new__
        table._init(name, metadata, *args, **kw)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/schema.py", line 377, in _init
        self._autoload(metadata, autoload_with, include_columns)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/schema.py", line 393, in _autoload
        self, include_columns, exclude_columns
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py", line 1968, in run_callable
        return callable_(self, *args, **kwargs)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/default.py", line 260, in reflecttable
        return insp.reflecttable(table, include_columns, exclude_columns)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/reflection.py", line 350, in reflecttable
        tbl_opts = self.get_table_options(table_name, schema, **table.kwargs)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/reflection.py", line 178, in get_table_options
        **kw)
      File "<string>", line 1, in <lambda>
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/reflection.py", line 47, in cache
        ret = fn(self, con, *args, **kw)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/dialects/mysql/base.py", line 2039, in get_table_options
        parsed_state = self._parsed_state_or_create(connection, table_name, schema, **kw)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/dialects/mysql/base.py", line 2138, in _parsed_state_or_create
        info_cache=kw.get('info_cache', None)
      File "<string>", line 1, in <lambda>
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/reflection.py", line 47, in cache
        ret = fn(self, con, *args, **kw)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/dialects/mysql/base.py", line 2163, in _setup_parser
        full_name=full_name)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/dialects/mysql/base.py", line 2250, in _show_create_table
        raise exc.NoSuchTableError(full_name)
    NoSuchTableError: `additive`
[E 120719 22:07:44 web:1393] 500 GET / (127.0.0.1) 865.73ms
[E 120719 22:09:06 web:1031] Uncaught exception GET / (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.100', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cache-Control': 'max-age=0', 'X-Real-Ip': '192.168.0.100'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "src/sites/www/handlers/home.py", line 14, in get
        return self._render('hot')
      File "src/sites/www/handlers/base.py", line 87, in _render
        current_additive = additive,
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 474, in render
        html = self.render_string(template_name, **kwargs)
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 573, in render_string
        t = loader.load(template_name)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 323, in load
        self.templates[name] = self._create_template(name)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 353, in _create_template
        f = open(path, "r")
    IOError: [Errno 2] No such file or directory: '/home/dk/work/python/safood/src/sites/www/templates/additives.html'
[E 120719 22:09:06 web:1393] 500 GET / (127.0.0.1) 86.54ms
[E 120719 22:14:46 template:256] additives.html code:
      1  def _execute():  # base.html:0
      2      _buffer = []  # base.html:0
      3      _append = _buffer.append  # base.html:0
      4      _append('<!doctype html>\n<head>\n<meta charset="UTF-8" />\n<meta content="True" name="HandheldFriendly" />\n<meta content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0; name=\'viewport\'" />\n<title>\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - \xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81')  # base.html:6
      5      _append('</title>\n<link rel="stylesheet" type="text/css" media="screen" href="/static/css/vendor/jquery.fancybox.css" />\n<link rel="stylesheet" type="text/css" media="screen" href="/static/css/main.css" />\n<link rel="shortcut icon" href="/static/img/favicon.ico" />\n<link rel="canonical" href="http://wuditoo.com/" />\n<meta name="description" content="\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - \xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81" />\n<script src="/static/js/vendor/jquery.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.history.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.fancybox.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.scrollTo.min.js" type="text/javascript"></script>\n')  # base.html:16
      6      _append('\n<script type="text/javascript">\n')  # additives.html:13 (via base.html:16)
      7      if current_additive:  # additives.html:13 (via base.html:16)
      8          _append('\nmeta_additive = {\nurl: "/additive/')  # additives.html:15 (via base.html:16)
      9          _tmp = current_additive.id  # additives.html:15 (via base.html:16)
     10          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # additives.html:15 (via base.html:16)
     11          else: _tmp = _utf8(str(_tmp))  # additives.html:15 (via base.html:16)
     12          _tmp = _utf8(xhtml_escape(_tmp))  # additives.html:15 (via base.html:16)
     13          _append(_tmp)  # additives.html:15 (via base.html:16)
     14          _append('",\nwidth: ')  # additives.html:16 (via base.html:16)
     15          _tmp = current_additive.width  # additives.html:16 (via base.html:16)
     16          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # additives.html:16 (via base.html:16)
     17          else: _tmp = _utf8(str(_tmp))  # additives.html:16 (via base.html:16)
     18          _tmp = _utf8(xhtml_escape(_tmp))  # additives.html:16 (via base.html:16)
     19          _append(_tmp)  # additives.html:16 (via base.html:16)
     20          _append(',\nheight: ')  # additives.html:17 (via base.html:16)
     21          _tmp = current_additive.height  # additives.html:17 (via base.html:16)
     22          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # additives.html:17 (via base.html:16)
     23          else: _tmp = _utf8(str(_tmp))  # additives.html:17 (via base.html:16)
     24          _tmp = _utf8(xhtml_escape(_tmp))  # additives.html:17 (via base.html:16)
     25          _append(_tmp)  # additives.html:17 (via base.html:16)
     26          _append('\n}\n')  # additives.html:19 (via base.html:16)
     27      _append('\n</script>\n')  # additives.html:21 (via base.html:16)
     28      _append('\n<script src="/static/js/main.js" type="text/javascript"></script>\n</head>\n<!--[if IE 7 ]><body class="ie7"><![endif]-->\n<!--[if gt IE 7]><body class="ie"><![endif]-->\n<!--[if !IE]><body><![endif]-->\n<div id="header">\n<div class="inner">\n<div id="logo"><a href="/">\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</a></div>\n<div id="slogon">\xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81</div>\n<div id="witticism">')  # base.html:27
     29      _tmp = home_sentence()  # base.html:27
     30      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:27
     31      else: _tmp = _utf8(str(_tmp))  # base.html:27
     32      _tmp = _utf8(xhtml_escape(_tmp))  # base.html:27
     33      _append(_tmp)  # base.html:27
     34      _append('</div>\n<!--\n<ul class="nav-right">\n</ul>\n-->\n</div>\n</div>\n<div id="container">\n<div class="inner">\n<div class="message alert alert-warn">\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0\xe5\x86\xac\xe7\x9c\xa0\xe4\xb8\xad\xef\xbc\x8c\xe8\x8b\x8f\xe9\x86\x92\xe6\x97\xb6\xe9\x97\xb4\xe5\xbe\x85\xe5\xae\x9a\xe3\x80\x82\xe8\xb0\xa2\xe8\xb0\xa2\xe6\x82\xa8\xe7\x9a\x84\xe5\x88\xb0\xe8\xae\xbf\xef\xbc\x9a\xef\xbc\x89</div>\n')  # base.html:38
     35      message = get_message()  # base.html:38
     36      _append('\n')  # base.html:39
     37      for message_type in ('error', 'success', 'info', 'warn'):  # base.html:39
     38          _append('\n')  # base.html:40
     39          if message and message_type == message[0]:  # base.html:40
     40              _append('\n<div id="')  # base.html:41
     41              _tmp = message_type  # base.html:41
     42              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     43              else: _tmp = _utf8(str(_tmp))  # base.html:41
     44              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     45              _append(_tmp)  # base.html:41
     46              _append('-message" class="message alert alert-')  # base.html:41
     47              _tmp = message_type  # base.html:41
     48              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     49              else: _tmp = _utf8(str(_tmp))  # base.html:41
     50              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     51              _append(_tmp)  # base.html:41
     52              _append('">')  # base.html:41
     53              _tmp = message[1]  # base.html:41
     54              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     55              else: _tmp = _utf8(str(_tmp))  # base.html:41
     56              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     57              _append(_tmp)  # base.html:41
     58              _append('</div>\n')  # base.html:42
     59          else:  # base.html:42
     60              _append('\n<div id="')  # base.html:43
     61              _tmp = message_type  # base.html:43
     62              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:43
     63              else: _tmp = _utf8(str(_tmp))  # base.html:43
     64              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:43
     65              _append(_tmp)  # base.html:43
     66              _append('-message" class="message alert alert-')  # base.html:43
     67              _tmp = message_type  # base.html:43
     68              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:43
     69              else: _tmp = _utf8(str(_tmp))  # base.html:43
     70              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:43
     71              _append(_tmp)  # base.html:43
     72              _append(' hide"></div>\n')  # base.html:44
     73          _append('\n')  # base.html:45
     74      _append('\n')  # base.html:47
     75      _append('\n<div id="main">\n')  # base.html:50
     76      _append('\n')  # additives.html:4 (via base.html:50)
     77      _append('<div class="box" id="additives">\n<div class="header">')  # partial/additives.html:2 (via additives.html:4, base.html:50)
     78      _tmp = additives_title  # partial/additives.html:2 (via additives.html:4, base.html:50)
     79      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:2 (via additives.html:4, base.html:50)
     80      else: _tmp = _utf8(str(_tmp))  # partial/additives.html:2 (via additives.html:4, base.html:50)
     81      _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:2 (via additives.html:4, base.html:50)
     82      _append(_tmp)  # partial/additives.html:2 (via additives.html:4, base.html:50)
     83      _append('</div>\n<div class="body main ul">\n')  # partial/additives.html:4 (via additives.html:4, base.html:50)
     84      for index, additive in enumerate(additives):  # partial/additives.html:4 (via additives.html:4, base.html:50)
     85          _append('\n')  # partial/additives.html:5 (via additives.html:4, base.html:50)
     86          creator = additive.creator  # partial/additives.html:5 (via additives.html:4, base.html:50)
     87          _append('\n<div class="additive-item">\n<div class="header">\n<a class="avatar" href="/user/')  # partial/additives.html:8 (via additives.html:4, base.html:50)
     88          _tmp = creator.username  # partial/additives.html:8 (via additives.html:4, base.html:50)
     89          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     90          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     91          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     92          _append(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     93          _append('"><img src="')  # partial/additives.html:8 (via additives.html:4, base.html:50)
     94          _tmp = get_avatar_url(creator, 's')  # partial/additives.html:8 (via additives.html:4, base.html:50)
     95          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     96          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     97          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     98          _append(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     99          _append('" /></a>')  # partial/additives.html:8 (via additives.html:4, base.html:50)
    100          _tmp = additive.name  # partial/additives.html:8 (via additives.html:4, base.html:50)
    101          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
    102          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
    103          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
    104          _append(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
    105          _append('\n</div>\n<div class="body">\n<div class="additive_alias">\xe5\x85\xb6\xe4\xbb\x96\xe5\x90\x8d\xe7\xa7\xb0:')  # partial/additives.html:11 (via additives.html:4, base.html:50)
    106          _tmp = additive.alias  # partial/additives.html:11 (via additives.html:4, base.html:50)
    107          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:11 (via additives.html:4, base.html:50)
    108          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:11 (via additives.html:4, base.html:50)
    109          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:11 (via additives.html:4, base.html:50)
    110          _append(_tmp)  # partial/additives.html:11 (via additives.html:4, base.html:50)
    111          _append('</div>\n<div class="additive_cns">CNS\xe5\x8f\xb7:')  # partial/additives.html:12 (via additives.html:4, base.html:50)
    112          _tmp = additive.cns  # partial/additives.html:12 (via additives.html:4, base.html:50)
    113          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:12 (via additives.html:4, base.html:50)
    114          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:12 (via additives.html:4, base.html:50)
    115          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:12 (via additives.html:4, base.html:50)
    116          _append(_tmp)  # partial/additives.html:12 (via additives.html:4, base.html:50)
    117          _append('</div>\n<div class="additive_ins">INS\xe5\x8f\xb7:')  # partial/additives.html:13 (via additives.html:4, base.html:50)
    118          _tmp = additive.ins  # partial/additives.html:13 (via additives.html:4, base.html:50)
    119          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:13 (via additives.html:4, base.html:50)
    120          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:13 (via additives.html:4, base.html:50)
    121          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:13 (via additives.html:4, base.html:50)
    122          _append(_tmp)  # partial/additives.html:13 (via additives.html:4, base.html:50)
    123          _append('</div>\n<div class="additive_effect">\xe5\x8a\x9f\xe8\x83\xbd:')  # partial/additives.html:14 (via additives.html:4, base.html:50)
    124          _tmp = additive.effect  # partial/additives.html:14 (via additives.html:4, base.html:50)
    125          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:14 (via additives.html:4, base.html:50)
    126          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:14 (via additives.html:4, base.html:50)
    127          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:14 (via additives.html:4, base.html:50)
    128          _append(_tmp)  # partial/additives.html:14 (via additives.html:4, base.html:50)
    129          _append('</div>\n</div>\n<div class="footer">\n<span class="meta">\n<ul>\n<li><i class="icon-view"></i> ')  # partial/additives.html:19 (via additives.html:4, base.html:50)
    130          _tmp = additive.views_count  # partial/additives.html:19 (via additives.html:4, base.html:50)
    131          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:19 (via additives.html:4, base.html:50)
    132          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:19 (via additives.html:4, base.html:50)
    133          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:19 (via additives.html:4, base.html:50)
    134          _append(_tmp)  # partial/additives.html:19 (via additives.html:4, base.html:50)
    135          _append('</li>\n</ul>\n</span>\n<span class="created">\n')  # partial/additives.html:23 (via additives.html:4, base.html:50)
    136          _tmp = timesince(additive.created)  # partial/additives.html:23 (via additives.html:4, base.html:50)
    137          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:23 (via additives.html:4, base.html:50)
    138          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:23 (via additives.html:4, base.html:50)
    139          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:23 (via additives.html:4, base.html:50)
    140          _append(_tmp)  # partial/additives.html:23 (via additives.html:4, base.html:50)
    141          _append('\n</span>\n</div>\n</div>\n')  # partial/additives.html:27 (via additives.html:4, base.html:50)
    142          _append('\n')  # partial/additives.html:28 (via additives.html:4, base.html:50)
    143          if index > 0 and (index + 1) % 3 == 0:  # partial/additives.html:28 (via additives.html:4, base.html:50)
    144              _append('\n<div class="clearfix"></div>\n')  # partial/additives.html:30 (via additives.html:4, base.html:50)
    145          _append('\n')  # partial/additives.html:32 (via additives.html:4, base.html:50)
    146      _append('\n')  # partial/additives.html:33 (via additives.html:4, base.html:50)
    147      page_type = 'additives'  # partial/additives.html:33 (via additives.html:4, base.html:50)
    148      _append('\n')  # partial/additives.html:34 (via additives.html:4, base.html:50)
    149      _append('\n')  # partial/pagination.html:3 (via partial/additives.html:34, additives.html:4, base.html:50)
    150      from macros.macro import ADDITIVES_PER_PAGE, USERS_PER_PAGE  # partial/pagination.html:3 (via partial/additives.html:34, additives.html:4, base.html:50)
    151      _append('\n')  # partial/pagination.html:4 (via partial/additives.html:34, additives.html:4, base.html:50)
    152      import math  # partial/pagination.html:4 (via partial/additives.html:34, additives.html:4, base.html:50)
    153      _append('\n')  # partial/pagination.html:6 (via partial/additives.html:34, additives.html:4, base.html:50)
    154      if page_type == 'additives':  # partial/pagination.html:6 (via partial/additives.html:34, additives.html:4, base.html:50)
    155          _append('\n')  # partial/pagination.html:7 (via partial/additives.html:34, additives.html:4, base.html:50)
    156          items_per_page = ADDITIVES_PER_PAGE  # partial/pagination.html:7 (via partial/additives.html:34, additives.html:4, base.html:50)
    157          _append('\n')  # partial/pagination.html:8 (via partial/additives.html:34, additives.html:4, base.html:50)
    158      else:  # partial/pagination.html:8 (via partial/additives.html:34, additives.html:4, base.html:50)
    159          _append('\n')  # partial/pagination.html:9 (via partial/additives.html:34, additives.html:4, base.html:50)
    160          items_per_page = USERS_PER_PAGE  # partial/pagination.html:9 (via partial/additives.html:34, additives.html:4, base.html:50)
    161          _append('\n')  # partial/pagination.html:10 (via partial/additives.html:34, additives.html:4, base.html:50)
    162      _append('\n')  # partial/pagination.html:12 (via partial/additives.html:34, additives.html:4, base.html:50)
    163      total_page = int(math.ceil(float(total_items) / items_per_page))  # partial/pagination.html:12 (via partial/additives.html:34, additives.html:4, base.html:50)
    164      _append('\n')  # partial/pagination.html:14 (via partial/additives.html:34, additives.html:4, base.html:50)
    165      current_page = int(handler.get_argument('page', 1))  # partial/pagination.html:14 (via partial/additives.html:34, additives.html:4, base.html:50)
    166      _append('\n')  # partial/pagination.html:16 (via partial/additives.html:34, additives.html:4, base.html:50)
    167      if current_page <=6:  # partial/pagination.html:16 (via partial/additives.html:34, additives.html:4, base.html:50)
    168          _append('\n')  # partial/pagination.html:17 (via partial/additives.html:34, additives.html:4, base.html:50)
    169          end_page = min(total_page, 10)  # partial/pagination.html:17 (via partial/additives.html:34, additives.html:4, base.html:50)
    170          _append('\n')  # partial/pagination.html:18 (via partial/additives.html:34, additives.html:4, base.html:50)
    171          start_page = 1  # partial/pagination.html:18 (via partial/additives.html:34, additives.html:4, base.html:50)
    172          _append('\n')  # partial/pagination.html:19 (via partial/additives.html:34, additives.html:4, base.html:50)
    173      else:  # partial/pagination.html:19 (via partial/additives.html:34, additives.html:4, base.html:50)
    174          _append('\n')  # partial/pagination.html:20 (via partial/additives.html:34, additives.html:4, base.html:50)
    175          end_page = min(total_page, current_page+4)  # partial/pagination.html:20 (via partial/additives.html:34, additives.html:4, base.html:50)
    176          _append('\n')  # partial/pagination.html:21 (via partial/additives.html:34, additives.html:4, base.html:50)
    177          start_page = current_page - 5  # partial/pagination.html:21 (via partial/additives.html:34, additives.html:4, base.html:50)
    178          _append('\n')  # partial/pagination.html:22 (via partial/additives.html:34, additives.html:4, base.html:50)
    179      _append('\n')  # partial/pagination.html:24 (via partial/additives.html:34, additives.html:4, base.html:50)
    180      if total_page > 1:  # partial/pagination.html:24 (via partial/additives.html:34, additives.html:4, base.html:50)
    181          _append('\n<div class="pagination">\n<ul>\n')  # partial/pagination.html:27 (via partial/additives.html:34, additives.html:4, base.html:50)
    182          if current_page == 1:  # partial/pagination.html:27 (via partial/additives.html:34, additives.html:4, base.html:50)
    183              _append('\n<li class="disabled">\xe2\x86\x90 </li>\n')  # partial/pagination.html:29 (via partial/additives.html:34, additives.html:4, base.html:50)
    184          else:  # partial/pagination.html:29 (via partial/additives.html:34, additives.html:4, base.html:50)
    185              _append('\n<li><a href="')  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    186              _tmp = page_path  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    187              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    188              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    189              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    190              _append(_tmp)  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    191              _append('?page=1">\xe2\x86\x90 </a></li>\n')  # partial/pagination.html:31 (via partial/additives.html:34, additives.html:4, base.html:50)
    192          _append('\n')  # partial/pagination.html:33 (via partial/additives.html:34, additives.html:4, base.html:50)
    193          for i in range(start_page, end_page + 1):  # partial/pagination.html:33 (via partial/additives.html:34, additives.html:4, base.html:50)
    194              _append('\n<li ')  # partial/pagination.html:34 (via partial/additives.html:34, additives.html:4, base.html:50)
    195              if current_page == i:  # partial/pagination.html:34 (via partial/additives.html:34, additives.html:4, base.html:50)
    196                  _append('class="active"')  # partial/pagination.html:34 (via partial/additives.html:34, additives.html:4, base.html:50)
    197              _append('>\n<a href="')  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    198              _tmp = page_path  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    199              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    200              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    201              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    202              _append(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    203              _append('?page=')  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    204              _tmp = i  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    205              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    206              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    207              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    208              _append(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    209              _append('">')  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    210              _tmp = i  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    211              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    212              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    213              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    214              _append(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    215              _append('</a>\n</li>\n')  # partial/pagination.html:37 (via partial/additives.html:34, additives.html:4, base.html:50)
    216          _append('\n')  # partial/pagination.html:39 (via partial/additives.html:34, additives.html:4, base.html:50)
    217          if current_page == total_page:  # partial/pagination.html:39 (via partial/additives.html:34, additives.html:4, base.html:50)
    218              _append('\n<li class="disabled">\xe2\x86\x92 </li>\n')  # partial/pagination.html:41 (via partial/additives.html:34, additives.html:4, base.html:50)
    219          else:  # partial/pagination.html:41 (via partial/additives.html:34, additives.html:4, base.html:50)
    220              _append('\n<li><a href="')  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    221              _tmp = page_path  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    222              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    223              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    224              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    225              _append(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    226              _append('?page=')  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    227              _tmp = current_page+1  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    228              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    229              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    230              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    231              _append(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    232              _append('">\xe2\x86\x92 </a></li>\n')  # partial/pagination.html:43 (via partial/additives.html:34, additives.html:4, base.html:50)
    233          _append('\n</ul>\n</div>\n')  # partial/pagination.html:46 (via partial/additives.html:34, additives.html:4, base.html:50)
    234      _append('\n')  # partial/pagination.html:47 (via partial/additives.html:34, additives.html:4, base.html:50)
    235      _append('\n</div>\n</div>\n')  # partial/additives.html:37 (via additives.html:4, base.html:50)
    236      _append('\n')  # additives.html:5 (via base.html:50)
    237      _append('\n</div>\n<div id="sidebar">\n')  # base.html:54
    238      _append('\n')  # additives.html:8 (via base.html:54)
    239      if current_user:  # partial/sidebar_global.html:1 (via additives.html:8, base.html:54)
    240          _append('\n')  # partial/sidebar_global.html:2 (via additives.html:8, base.html:54)
    241          _append('<div class="upload item ')  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    242          if not current_user.left_upload_count:  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    243              _append('disabled')  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    244          _append('" data-url="/photo/upload" data-title="\xe9\x87\x87\xe9\x9b\x86\xe7\x85\xa7\xe7\x89\x87" >\n<div class="left"></div>\n<div class="center">\n')  # partial/sidebar_upload.html:5 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    245          if current_user.left_upload_count:  # partial/sidebar_upload.html:5 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    246              _append('\n\xe9\x87\x87\xe9\x9b\x86\xe7\x85\xa7\xe7\x89\x87(\xe6\x9c\xac\xe5\x91\xa8\xe8\xbf\x98\xe5\x89\xa9')  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    247              _tmp = current_user.left_upload_count  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    248              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    249              else: _tmp = _utf8(str(_tmp))  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    250              _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    251              _append(_tmp)  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    252              _append('\xe5\xbc\xa0)\n')  # partial/sidebar_upload.html:7 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    253          else:  # partial/sidebar_upload.html:7 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    254              _append('\n\xe6\x9c\xac\xe5\x91\xa8\xe7\x9a\x84\xe9\x87\x87\xe9\x9b\x86\xe4\xbd\x99\xe9\xa2\x9d\xe5\xb7\xb2\xe7\x94\xa8\xe5\xae\x8c\xe4\xba\x86\n')  # partial/sidebar_upload.html:9 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    255          _append('\n</div>\n<div class="right"></div>\n</div>\n')  # partial/sidebar_upload.html:13 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    256          _append('\n')  # partial/sidebar_global.html:3 (via additives.html:8, base.html:54)
    257          _append('<div class="box" id="panel-me">\n<div class="header"><a class="right" href="/logout">\xe7\x99\xbb\xe5\x87\xba</a>\xe6\x88\x91\xe7\x9a\x84\xe4\xbf\xa1\xe6\x81\xaf</div>\n<div class="body">\n<div class="me">\n<a class="settings item" href="/settings" data-title="\xe8\xae\xbe\xe7\xbd\xae" data-url="/settings">\xe8\xae\xbe\xe7\xbd\xae</a>\n<a href="/user/')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    258          _tmp = current_user.username  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    259          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    260          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    261          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    262          _append(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    263          _append('"><img class="avatar" src="')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    264          _tmp = get_avatar_url(current_user, 's')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    265          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    266          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    267          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    268          _append(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    269          _append('" /></a>\n<a href="/user/')  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    270          _tmp = current_user.username  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    271          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    272          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    273          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    274          _append(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    275          _append('">')  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    276          _tmp = current_user.fullname  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    277          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    278          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    279          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    280          _append(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    281          _append('</a>\n<i class="level icon-level')  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    282          _tmp = current_user.level  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    283          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    284          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    285          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    286          _append(_tmp)  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    287          _append('"></i>\n</div>\n<div class="follow">\n<div class="following item" data-title="\xe6\x88\x91\xe5\x85\xb3\xe6\xb3\xa8\xe7\x9a\x84\xe4\xba\xba" data-url="/mine/following">\n<h3 class="anchor">')  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    288          _tmp = current_user.following_count  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    289          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    290          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    291          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    292          _append(_tmp)  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    293          _append('</h3>\n<span>following</span>\n</div>\n<div class="follower item" data-title="\xe5\x85\xb3\xe6\xb3\xa8\xe6\x88\x91\xe7\x9a\x84\xe4\xba\xba" data-url="/mine/follower">\n<h3 class="anchor">')  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    294          _tmp = current_user.follower_count  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    295          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    296          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    297          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    298          _append(_tmp)  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    299          _append('</h3>\n<span>followers</span>\n</div>\n</div>\n<ul>\n<li class="item" data-url="/mine/invite" data-title="\xe9\x82\x80\xe8\xaf\xb7\xe6\x9c\x8b\xe5\x8f\x8b\xe5\x8a\xa0\xe5\x85\xa5"> <span class="num">')  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    300          _tmp = current_user.unused_invite_key_count  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    301          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    302          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    303          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    304          _append(_tmp)  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    305          _append('</span><span class="anchor">\xe9\x82\x80\xe8\xaf\xb7\xe6\x9c\x8b\xe5\x8f\x8b\xe5\x8a\xa0\xe5\x85\xa5</span></li>\n<li class="item" data-title="\xe6\x88\x91\xe6\xb7\xbb\xe5\x8a\xa0\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87" data-url="/mine/photos"> <span class="num">')  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    306          _tmp = current_user.photo_count  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    307          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    308          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    309          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    310          _append(_tmp)  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    311          _append('</span><span class="anchor">\xe6\x88\x91\xe6\xb7\xbb\xe5\x8a\xa0\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87</span></li>\n<li class="item" data-title="\xe6\x88\x91\xe5\x96\x9c\xe6\xac\xa2\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87" data-url="/mine/likes_photos"><span class="num">')  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    312          _tmp = current_user.likes_count  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    313          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    314          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    315          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    316          _append(_tmp)  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    317          _append('</span><span class="anchor">\xe6\x88\x91\xe5\x96\x9c\xe6\xac\xa2\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87</span> </li>\n</ul>\n</div>\n</div>\n')  # partial/sidebar_me.html:27 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    318          _append('\n')  # partial/sidebar_global.html:4 (via additives.html:8, base.html:54)
    319      else:  # partial/sidebar_global.html:4 (via additives.html:8, base.html:54)
    320          _append('\n')  # partial/sidebar_global.html:5 (via additives.html:8, base.html:54)
    321          _append('<div class="box" id="panel-about">\n<div class="header">\xe5\x85\xb3\xe4\xba\x8e\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</div>\n<div class="body">\n<p>\xe5\x85\xb3\xe6\xb3\xa8\xe9\xa3\x9f\xe5\x93\x81\xe5\xae\x89\xe5\x85\xa8\xef\xbc\x8c\xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe4\xb8\x96\xe7\x95\x8c</p>\n<p>\xe6\x89\x80\xe6\x9c\x89\xe9\xa3\x9f\xe5\x93\x81\xe5\x92\x8c\xe6\xb7\xbb\xe5\x8a\xa0\xe5\x89\x82\xe8\xb5\x84\xe6\x96\x99\xe6\x9d\xa5\xe8\x87\xaa\xe4\xba\x8eiearth-\xe7\x88\xb1\xe5\x9c\xb0\xe7\x90\x83\xe7\x8e\xaf\xe4\xbf\x9d\xe6\x9c\xba\xe6\x9e\x84</p>\n</div>\n</div>\n')  # partial/sidebar_about.html:8 (via partial/sidebar_global.html:5, additives.html:8, base.html:54)
    322          _append('\n')  # partial/sidebar_global.html:6 (via additives.html:8, base.html:54)
    323          _append('<div class="box" id="panel-login">\n<div class="header">\xe7\x99\xbb\xe5\x85\xa5\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</div>\n<div class="body">\n<form action="/login" method="POST">\n<div class="section">\n<input type="TEXT" name="username" placeholder="\xe7\x94\xa8\xe6\x88\xb7\xe5\x90\x8d/Email" />\n</div>\n<div class="section">\n<input type="PASSWORD" name="password" placeholder="\xe5\xaf\x86\xe7\xa0\x81" />\n</div>\n<div class="section">\n<input type="SUBMIT" value="\xe7\x99\xbb\xe5\x85\xa5" class="btn primary-btn" />\n<span class="tip">\xe4\xbc\x9a\xe8\xae\xb0\xe4\xbd\x8f\xe7\x99\xbb\xe5\x85\xa5\xe4\xb8\x80\xe4\xb8\xaa\xe6\x9c\x88</span>\n</div>\n</form>\n<div class="alert alert-info">\xe5\x86\x85\xe6\xb5\x8b\xe4\xb8\xad\xef\xbc\x8c\xe5\x8f\xaa\xe6\x8e\xa5\xe5\x8f\x97\xe9\x82\x80\xe8\xaf\xb7\xe6\xb3\xa8\xe5\x86\x8c</div>\n</div>\n</div>\n')  # partial/sidebar_login.html:19 (via partial/sidebar_global.html:6, additives.html:8, base.html:54)
    324          _append('\n')  # partial/sidebar_global.html:8 (via additives.html:8, base.html:54)
    325      _append('\n')  # partial/sidebar_global.html:10 (via additives.html:8, base.html:54)
    326      _append('<div class="box">\n<div class="header">\xe6\xb5\x8f\xe8\xa7\x88\xe9\xa3\x9f\xe5\x93\x81</div>\n<div class="body">\n<ul>\n<li class="item" data-url="/photos/hot" data-title="\xe7\x83\xad\xe9\x97\xa8\xe9\xa3\x9f\xe5\x93\x81"><span class="anchor">\xe7\x83\xad\xe9\x97\xa8\xe9\xa3\x9f\xe5\x93\x81</span></li>\n<li class="item" data-url="/photos/latest" data-title="\xe6\x9c\x80\xe6\x96\xb0\xe9\xa3\x9f\xe5\x93\x81"><span class="anchor">\xe6\x9c\x80\xe6\x96\xb0\xe9\xa3\x9f\xe5\x93\x81</span></li>\n</ul>\n</div>\n</div>\n')  # partial/sidebar_photos_nav.html:10 (via partial/sidebar_global.html:10, additives.html:8, base.html:54)
    327      _append('\n')  # partial/sidebar_global.html:11 (via additives.html:8, base.html:54)
    328      import models  # partial/sidebar_tags.html:1 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    329      _append('\n')  # partial/sidebar_tags.html:2 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    330      hot_tags = models.Photo_Tag().hot_tags  # partial/sidebar_tags.html:2 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    331      _append('\n<div class="box" id="panel-tags">\n<div class="header">\xe7\x83\xad\xe9\x97\xa8\xe6\xb7\xbb\xe5\x8a\xa0\xe5\x89\x82</div>\n<div class="body">\n<ul>\n')  # partial/sidebar_tags.html:8 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    332      for tag in hot_tags:  # partial/sidebar_tags.html:8 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    333          _append('\n<li class="item" data-url="/tag/')  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    334          _tmp = tag  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    335          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    336          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    337          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    338          _append(_tmp)  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    339          _append('"><i class="icon-tag"></i><span class="anchor">')  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    340          _tmp = tag  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    341          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    342          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    343          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    344          _append(_tmp)  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    345          _append('</span></li>\n')  # partial/sidebar_tags.html:10 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    346      _append('\n</ul>\n</div>\n</div>\n')  # partial/sidebar_tags.html:14 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    347      _append('\n')  # partial/sidebar_global.html:12 (via additives.html:8, base.html:54)
    348      _append('\n')  # additives.html:9 (via base.html:54)
    349      _append('\n</div>\n</div>\n</div>\n<div id="footer">\n<div class="inner">\n<div class="right">\n<span class="belief">make the world a little better and easier</span>\n</div>\n<div class="left">\n<ul>\n<li><a href="/about">\xe5\x85\xb3\xe4\xba\x8e</a> <!--<span class="divider">/</span>--></li>\n<!--<li><a href="/feedback">\xe5\x8f\x8d\xe9\xa6\x88</a> <span class="divider">/</span></li>-->\n<!--<li><a href="/blog">\xe6\x97\xa5\xe5\xbf\x97</a></li>-->\n</ul>\n</div>\n</div>\n</div>\n<script type="text/javascript">\nvar _gaq = _gaq || [];\n_gaq.push([\'_setAccount\', \'UA-1281124-23\']);\n_gaq.push([\'_trackPageview\']);\n(function() {\nvar ga = document.createElement(\'script\'); ga.type = \'text/javascript\'; ga.async = true;\nga.src = (\'https:\' == document.location.protocol ? \'https://ssl\' : \'http://www\') + \'.google-analytics.com/ga.js\';\nvar s = document.getElementsByTagName(\'script\')[0]; s.parentNode.insertBefore(ga, s);\n})();\n</script>\n<!-- love your mom! -->\n</body>\n<meta name="description" content="\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - " />\n')  # base.html:89
    350      return _utf8('').join(_buffer)  # base.html:0
[E 120719 22:14:46 web:1031] Uncaught exception GET / (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.100', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cache-Control': 'max-age=0', 'X-Real-Ip': '192.168.0.100'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "src/sites/www/handlers/home.py", line 14, in get
        return self._render('hot')
      File "src/sites/www/handlers/base.py", line 87, in _render
        current_additive = additive,
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 474, in render
        html = self.render_string(template_name, **kwargs)
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 586, in render_string
        return t.generate(**args)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 253, in generate
        return execute()
      File "additives_html.generated.py", line 330, in _execute
        hot_tags = models.Photo_Tag().hot_tags  # partial/sidebar_tags.html:2 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    AttributeError: 'module' object has no attribute 'Photo_Tag'
[E 120719 22:14:46 web:1393] 500 GET / (127.0.0.1) 1592.92ms
[E 120719 22:19:44 template:256] additives.html code:
      1  def _execute():  # base.html:0
      2      _buffer = []  # base.html:0
      3      _append = _buffer.append  # base.html:0
      4      _append('<!doctype html>\n<head>\n<meta charset="UTF-8" />\n<meta content="True" name="HandheldFriendly" />\n<meta content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0; name=\'viewport\'" />\n<title>\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - \xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81')  # base.html:6
      5      _append('</title>\n<link rel="stylesheet" type="text/css" media="screen" href="/static/css/vendor/jquery.fancybox.css" />\n<link rel="stylesheet" type="text/css" media="screen" href="/static/css/main.css" />\n<link rel="shortcut icon" href="/static/img/favicon.ico" />\n<link rel="canonical" href="http://wuditoo.com/" />\n<meta name="description" content="\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - \xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81" />\n<script src="/static/js/vendor/jquery.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.history.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.fancybox.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.scrollTo.min.js" type="text/javascript"></script>\n')  # base.html:16
      6      _append('\n<script type="text/javascript">\n')  # additives.html:13 (via base.html:16)
      7      if current_additive:  # additives.html:13 (via base.html:16)
      8          _append('\nmeta_additive = {\nurl: "/additive/')  # additives.html:15 (via base.html:16)
      9          _tmp = current_additive.id  # additives.html:15 (via base.html:16)
     10          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # additives.html:15 (via base.html:16)
     11          else: _tmp = _utf8(str(_tmp))  # additives.html:15 (via base.html:16)
     12          _tmp = _utf8(xhtml_escape(_tmp))  # additives.html:15 (via base.html:16)
     13          _append(_tmp)  # additives.html:15 (via base.html:16)
     14          _append('",\nwidth: ')  # additives.html:16 (via base.html:16)
     15          _tmp = current_additive.width  # additives.html:16 (via base.html:16)
     16          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # additives.html:16 (via base.html:16)
     17          else: _tmp = _utf8(str(_tmp))  # additives.html:16 (via base.html:16)
     18          _tmp = _utf8(xhtml_escape(_tmp))  # additives.html:16 (via base.html:16)
     19          _append(_tmp)  # additives.html:16 (via base.html:16)
     20          _append(',\nheight: ')  # additives.html:17 (via base.html:16)
     21          _tmp = current_additive.height  # additives.html:17 (via base.html:16)
     22          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # additives.html:17 (via base.html:16)
     23          else: _tmp = _utf8(str(_tmp))  # additives.html:17 (via base.html:16)
     24          _tmp = _utf8(xhtml_escape(_tmp))  # additives.html:17 (via base.html:16)
     25          _append(_tmp)  # additives.html:17 (via base.html:16)
     26          _append('\n}\n')  # additives.html:19 (via base.html:16)
     27      _append('\n</script>\n')  # additives.html:21 (via base.html:16)
     28      _append('\n<script src="/static/js/main.js" type="text/javascript"></script>\n</head>\n<!--[if IE 7 ]><body class="ie7"><![endif]-->\n<!--[if gt IE 7]><body class="ie"><![endif]-->\n<!--[if !IE]><body><![endif]-->\n<div id="header">\n<div class="inner">\n<div id="logo"><a href="/">\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</a></div>\n<div id="slogon">\xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81</div>\n<div id="witticism">')  # base.html:27
     29      _tmp = home_sentence()  # base.html:27
     30      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:27
     31      else: _tmp = _utf8(str(_tmp))  # base.html:27
     32      _tmp = _utf8(xhtml_escape(_tmp))  # base.html:27
     33      _append(_tmp)  # base.html:27
     34      _append('</div>\n<!--\n<ul class="nav-right">\n</ul>\n-->\n</div>\n</div>\n<div id="container">\n<div class="inner">\n<div class="message alert alert-warn">\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0\xe5\x86\xac\xe7\x9c\xa0\xe4\xb8\xad\xef\xbc\x8c\xe8\x8b\x8f\xe9\x86\x92\xe6\x97\xb6\xe9\x97\xb4\xe5\xbe\x85\xe5\xae\x9a\xe3\x80\x82\xe8\xb0\xa2\xe8\xb0\xa2\xe6\x82\xa8\xe7\x9a\x84\xe5\x88\xb0\xe8\xae\xbf\xef\xbc\x9a\xef\xbc\x89</div>\n')  # base.html:38
     35      message = get_message()  # base.html:38
     36      _append('\n')  # base.html:39
     37      for message_type in ('error', 'success', 'info', 'warn'):  # base.html:39
     38          _append('\n')  # base.html:40
     39          if message and message_type == message[0]:  # base.html:40
     40              _append('\n<div id="')  # base.html:41
     41              _tmp = message_type  # base.html:41
     42              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     43              else: _tmp = _utf8(str(_tmp))  # base.html:41
     44              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     45              _append(_tmp)  # base.html:41
     46              _append('-message" class="message alert alert-')  # base.html:41
     47              _tmp = message_type  # base.html:41
     48              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     49              else: _tmp = _utf8(str(_tmp))  # base.html:41
     50              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     51              _append(_tmp)  # base.html:41
     52              _append('">')  # base.html:41
     53              _tmp = message[1]  # base.html:41
     54              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     55              else: _tmp = _utf8(str(_tmp))  # base.html:41
     56              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     57              _append(_tmp)  # base.html:41
     58              _append('</div>\n')  # base.html:42
     59          else:  # base.html:42
     60              _append('\n<div id="')  # base.html:43
     61              _tmp = message_type  # base.html:43
     62              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:43
     63              else: _tmp = _utf8(str(_tmp))  # base.html:43
     64              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:43
     65              _append(_tmp)  # base.html:43
     66              _append('-message" class="message alert alert-')  # base.html:43
     67              _tmp = message_type  # base.html:43
     68              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:43
     69              else: _tmp = _utf8(str(_tmp))  # base.html:43
     70              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:43
     71              _append(_tmp)  # base.html:43
     72              _append(' hide"></div>\n')  # base.html:44
     73          _append('\n')  # base.html:45
     74      _append('\n')  # base.html:47
     75      _append('\n<div id="main">\n')  # base.html:50
     76      _append('\n')  # additives.html:4 (via base.html:50)
     77      _append('<div class="box" id="additives">\n<div class="header">')  # partial/additives.html:2 (via additives.html:4, base.html:50)
     78      _tmp = additives_title  # partial/additives.html:2 (via additives.html:4, base.html:50)
     79      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:2 (via additives.html:4, base.html:50)
     80      else: _tmp = _utf8(str(_tmp))  # partial/additives.html:2 (via additives.html:4, base.html:50)
     81      _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:2 (via additives.html:4, base.html:50)
     82      _append(_tmp)  # partial/additives.html:2 (via additives.html:4, base.html:50)
     83      _append('</div>\n<div class="body main ul">\n')  # partial/additives.html:4 (via additives.html:4, base.html:50)
     84      for index, additive in enumerate(additives):  # partial/additives.html:4 (via additives.html:4, base.html:50)
     85          _append('\n')  # partial/additives.html:5 (via additives.html:4, base.html:50)
     86          creator = additive.creator  # partial/additives.html:5 (via additives.html:4, base.html:50)
     87          _append('\n<div class="additive-item">\n<div class="header">\n<a class="avatar" href="/user/')  # partial/additives.html:8 (via additives.html:4, base.html:50)
     88          _tmp = creator.username  # partial/additives.html:8 (via additives.html:4, base.html:50)
     89          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     90          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     91          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     92          _append(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     93          _append('"><img src="')  # partial/additives.html:8 (via additives.html:4, base.html:50)
     94          _tmp = get_avatar_url(creator, 's')  # partial/additives.html:8 (via additives.html:4, base.html:50)
     95          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     96          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     97          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     98          _append(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     99          _append('" /></a>')  # partial/additives.html:8 (via additives.html:4, base.html:50)
    100          _tmp = additive.name  # partial/additives.html:8 (via additives.html:4, base.html:50)
    101          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
    102          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
    103          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
    104          _append(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
    105          _append('\n</div>\n<div class="body">\n<div class="additive_alias">\xe5\x85\xb6\xe4\xbb\x96\xe5\x90\x8d\xe7\xa7\xb0:')  # partial/additives.html:11 (via additives.html:4, base.html:50)
    106          _tmp = additive.alias  # partial/additives.html:11 (via additives.html:4, base.html:50)
    107          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:11 (via additives.html:4, base.html:50)
    108          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:11 (via additives.html:4, base.html:50)
    109          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:11 (via additives.html:4, base.html:50)
    110          _append(_tmp)  # partial/additives.html:11 (via additives.html:4, base.html:50)
    111          _append('</div>\n<div class="additive_cns">CNS\xe5\x8f\xb7:')  # partial/additives.html:12 (via additives.html:4, base.html:50)
    112          _tmp = additive.cns  # partial/additives.html:12 (via additives.html:4, base.html:50)
    113          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:12 (via additives.html:4, base.html:50)
    114          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:12 (via additives.html:4, base.html:50)
    115          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:12 (via additives.html:4, base.html:50)
    116          _append(_tmp)  # partial/additives.html:12 (via additives.html:4, base.html:50)
    117          _append('</div>\n<div class="additive_ins">INS\xe5\x8f\xb7:')  # partial/additives.html:13 (via additives.html:4, base.html:50)
    118          _tmp = additive.ins  # partial/additives.html:13 (via additives.html:4, base.html:50)
    119          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:13 (via additives.html:4, base.html:50)
    120          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:13 (via additives.html:4, base.html:50)
    121          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:13 (via additives.html:4, base.html:50)
    122          _append(_tmp)  # partial/additives.html:13 (via additives.html:4, base.html:50)
    123          _append('</div>\n<div class="additive_effect">\xe5\x8a\x9f\xe8\x83\xbd:')  # partial/additives.html:14 (via additives.html:4, base.html:50)
    124          _tmp = additive.effect  # partial/additives.html:14 (via additives.html:4, base.html:50)
    125          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:14 (via additives.html:4, base.html:50)
    126          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:14 (via additives.html:4, base.html:50)
    127          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:14 (via additives.html:4, base.html:50)
    128          _append(_tmp)  # partial/additives.html:14 (via additives.html:4, base.html:50)
    129          _append('</div>\n</div>\n<div class="footer">\n<span class="meta">\n<ul>\n<li><i class="icon-view"></i> ')  # partial/additives.html:19 (via additives.html:4, base.html:50)
    130          _tmp = additive.views_count  # partial/additives.html:19 (via additives.html:4, base.html:50)
    131          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:19 (via additives.html:4, base.html:50)
    132          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:19 (via additives.html:4, base.html:50)
    133          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:19 (via additives.html:4, base.html:50)
    134          _append(_tmp)  # partial/additives.html:19 (via additives.html:4, base.html:50)
    135          _append('</li>\n</ul>\n</span>\n<span class="created">\n')  # partial/additives.html:23 (via additives.html:4, base.html:50)
    136          _tmp = timesince(additive.created)  # partial/additives.html:23 (via additives.html:4, base.html:50)
    137          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:23 (via additives.html:4, base.html:50)
    138          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:23 (via additives.html:4, base.html:50)
    139          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:23 (via additives.html:4, base.html:50)
    140          _append(_tmp)  # partial/additives.html:23 (via additives.html:4, base.html:50)
    141          _append('\n</span>\n</div>\n</div>\n')  # partial/additives.html:27 (via additives.html:4, base.html:50)
    142          _append('\n')  # partial/additives.html:28 (via additives.html:4, base.html:50)
    143          if index > 0 and (index + 1) % 3 == 0:  # partial/additives.html:28 (via additives.html:4, base.html:50)
    144              _append('\n<div class="clearfix"></div>\n')  # partial/additives.html:30 (via additives.html:4, base.html:50)
    145          _append('\n')  # partial/additives.html:32 (via additives.html:4, base.html:50)
    146      _append('\n')  # partial/additives.html:33 (via additives.html:4, base.html:50)
    147      page_type = 'additives'  # partial/additives.html:33 (via additives.html:4, base.html:50)
    148      _append('\n')  # partial/additives.html:34 (via additives.html:4, base.html:50)
    149      _append('\n')  # partial/pagination.html:3 (via partial/additives.html:34, additives.html:4, base.html:50)
    150      from macros.macro import ADDITIVES_PER_PAGE, USERS_PER_PAGE  # partial/pagination.html:3 (via partial/additives.html:34, additives.html:4, base.html:50)
    151      _append('\n')  # partial/pagination.html:4 (via partial/additives.html:34, additives.html:4, base.html:50)
    152      import math  # partial/pagination.html:4 (via partial/additives.html:34, additives.html:4, base.html:50)
    153      _append('\n')  # partial/pagination.html:6 (via partial/additives.html:34, additives.html:4, base.html:50)
    154      if page_type == 'additives':  # partial/pagination.html:6 (via partial/additives.html:34, additives.html:4, base.html:50)
    155          _append('\n')  # partial/pagination.html:7 (via partial/additives.html:34, additives.html:4, base.html:50)
    156          items_per_page = ADDITIVES_PER_PAGE  # partial/pagination.html:7 (via partial/additives.html:34, additives.html:4, base.html:50)
    157          _append('\n')  # partial/pagination.html:8 (via partial/additives.html:34, additives.html:4, base.html:50)
    158      else:  # partial/pagination.html:8 (via partial/additives.html:34, additives.html:4, base.html:50)
    159          _append('\n')  # partial/pagination.html:9 (via partial/additives.html:34, additives.html:4, base.html:50)
    160          items_per_page = USERS_PER_PAGE  # partial/pagination.html:9 (via partial/additives.html:34, additives.html:4, base.html:50)
    161          _append('\n')  # partial/pagination.html:10 (via partial/additives.html:34, additives.html:4, base.html:50)
    162      _append('\n')  # partial/pagination.html:12 (via partial/additives.html:34, additives.html:4, base.html:50)
    163      total_page = int(math.ceil(float(total_items) / items_per_page))  # partial/pagination.html:12 (via partial/additives.html:34, additives.html:4, base.html:50)
    164      _append('\n')  # partial/pagination.html:14 (via partial/additives.html:34, additives.html:4, base.html:50)
    165      current_page = int(handler.get_argument('page', 1))  # partial/pagination.html:14 (via partial/additives.html:34, additives.html:4, base.html:50)
    166      _append('\n')  # partial/pagination.html:16 (via partial/additives.html:34, additives.html:4, base.html:50)
    167      if current_page <=6:  # partial/pagination.html:16 (via partial/additives.html:34, additives.html:4, base.html:50)
    168          _append('\n')  # partial/pagination.html:17 (via partial/additives.html:34, additives.html:4, base.html:50)
    169          end_page = min(total_page, 10)  # partial/pagination.html:17 (via partial/additives.html:34, additives.html:4, base.html:50)
    170          _append('\n')  # partial/pagination.html:18 (via partial/additives.html:34, additives.html:4, base.html:50)
    171          start_page = 1  # partial/pagination.html:18 (via partial/additives.html:34, additives.html:4, base.html:50)
    172          _append('\n')  # partial/pagination.html:19 (via partial/additives.html:34, additives.html:4, base.html:50)
    173      else:  # partial/pagination.html:19 (via partial/additives.html:34, additives.html:4, base.html:50)
    174          _append('\n')  # partial/pagination.html:20 (via partial/additives.html:34, additives.html:4, base.html:50)
    175          end_page = min(total_page, current_page+4)  # partial/pagination.html:20 (via partial/additives.html:34, additives.html:4, base.html:50)
    176          _append('\n')  # partial/pagination.html:21 (via partial/additives.html:34, additives.html:4, base.html:50)
    177          start_page = current_page - 5  # partial/pagination.html:21 (via partial/additives.html:34, additives.html:4, base.html:50)
    178          _append('\n')  # partial/pagination.html:22 (via partial/additives.html:34, additives.html:4, base.html:50)
    179      _append('\n')  # partial/pagination.html:24 (via partial/additives.html:34, additives.html:4, base.html:50)
    180      if total_page > 1:  # partial/pagination.html:24 (via partial/additives.html:34, additives.html:4, base.html:50)
    181          _append('\n<div class="pagination">\n<ul>\n')  # partial/pagination.html:27 (via partial/additives.html:34, additives.html:4, base.html:50)
    182          if current_page == 1:  # partial/pagination.html:27 (via partial/additives.html:34, additives.html:4, base.html:50)
    183              _append('\n<li class="disabled">\xe2\x86\x90 </li>\n')  # partial/pagination.html:29 (via partial/additives.html:34, additives.html:4, base.html:50)
    184          else:  # partial/pagination.html:29 (via partial/additives.html:34, additives.html:4, base.html:50)
    185              _append('\n<li><a href="')  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    186              _tmp = page_path  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    187              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    188              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    189              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    190              _append(_tmp)  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    191              _append('?page=1">\xe2\x86\x90 </a></li>\n')  # partial/pagination.html:31 (via partial/additives.html:34, additives.html:4, base.html:50)
    192          _append('\n')  # partial/pagination.html:33 (via partial/additives.html:34, additives.html:4, base.html:50)
    193          for i in range(start_page, end_page + 1):  # partial/pagination.html:33 (via partial/additives.html:34, additives.html:4, base.html:50)
    194              _append('\n<li ')  # partial/pagination.html:34 (via partial/additives.html:34, additives.html:4, base.html:50)
    195              if current_page == i:  # partial/pagination.html:34 (via partial/additives.html:34, additives.html:4, base.html:50)
    196                  _append('class="active"')  # partial/pagination.html:34 (via partial/additives.html:34, additives.html:4, base.html:50)
    197              _append('>\n<a href="')  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    198              _tmp = page_path  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    199              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    200              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    201              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    202              _append(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    203              _append('?page=')  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    204              _tmp = i  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    205              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    206              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    207              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    208              _append(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    209              _append('">')  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    210              _tmp = i  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    211              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    212              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    213              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    214              _append(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    215              _append('</a>\n</li>\n')  # partial/pagination.html:37 (via partial/additives.html:34, additives.html:4, base.html:50)
    216          _append('\n')  # partial/pagination.html:39 (via partial/additives.html:34, additives.html:4, base.html:50)
    217          if current_page == total_page:  # partial/pagination.html:39 (via partial/additives.html:34, additives.html:4, base.html:50)
    218              _append('\n<li class="disabled">\xe2\x86\x92 </li>\n')  # partial/pagination.html:41 (via partial/additives.html:34, additives.html:4, base.html:50)
    219          else:  # partial/pagination.html:41 (via partial/additives.html:34, additives.html:4, base.html:50)
    220              _append('\n<li><a href="')  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    221              _tmp = page_path  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    222              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    223              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    224              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    225              _append(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    226              _append('?page=')  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    227              _tmp = current_page+1  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    228              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    229              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    230              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    231              _append(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    232              _append('">\xe2\x86\x92 </a></li>\n')  # partial/pagination.html:43 (via partial/additives.html:34, additives.html:4, base.html:50)
    233          _append('\n</ul>\n</div>\n')  # partial/pagination.html:46 (via partial/additives.html:34, additives.html:4, base.html:50)
    234      _append('\n')  # partial/pagination.html:47 (via partial/additives.html:34, additives.html:4, base.html:50)
    235      _append('\n</div>\n</div>\n')  # partial/additives.html:37 (via additives.html:4, base.html:50)
    236      _append('\n')  # additives.html:5 (via base.html:50)
    237      _append('\n</div>\n<div id="sidebar">\n')  # base.html:54
    238      _append('\n')  # additives.html:8 (via base.html:54)
    239      if current_user:  # partial/sidebar_global.html:1 (via additives.html:8, base.html:54)
    240          _append('\n')  # partial/sidebar_global.html:2 (via additives.html:8, base.html:54)
    241          _append('<div class="upload item ')  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    242          if not current_user.left_upload_count:  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    243              _append('disabled')  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    244          _append('" data-url="/photo/upload" data-title="\xe9\x87\x87\xe9\x9b\x86\xe7\x85\xa7\xe7\x89\x87" >\n<div class="left"></div>\n<div class="center">\n')  # partial/sidebar_upload.html:5 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    245          if current_user.left_upload_count:  # partial/sidebar_upload.html:5 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    246              _append('\n\xe9\x87\x87\xe9\x9b\x86\xe7\x85\xa7\xe7\x89\x87(\xe6\x9c\xac\xe5\x91\xa8\xe8\xbf\x98\xe5\x89\xa9')  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    247              _tmp = current_user.left_upload_count  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    248              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    249              else: _tmp = _utf8(str(_tmp))  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    250              _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    251              _append(_tmp)  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    252              _append('\xe5\xbc\xa0)\n')  # partial/sidebar_upload.html:7 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    253          else:  # partial/sidebar_upload.html:7 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    254              _append('\n\xe6\x9c\xac\xe5\x91\xa8\xe7\x9a\x84\xe9\x87\x87\xe9\x9b\x86\xe4\xbd\x99\xe9\xa2\x9d\xe5\xb7\xb2\xe7\x94\xa8\xe5\xae\x8c\xe4\xba\x86\n')  # partial/sidebar_upload.html:9 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    255          _append('\n</div>\n<div class="right"></div>\n</div>\n')  # partial/sidebar_upload.html:13 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    256          _append('\n')  # partial/sidebar_global.html:3 (via additives.html:8, base.html:54)
    257          _append('<div class="box" id="panel-me">\n<div class="header"><a class="right" href="/logout">\xe7\x99\xbb\xe5\x87\xba</a>\xe6\x88\x91\xe7\x9a\x84\xe4\xbf\xa1\xe6\x81\xaf</div>\n<div class="body">\n<div class="me">\n<a class="settings item" href="/settings" data-title="\xe8\xae\xbe\xe7\xbd\xae" data-url="/settings">\xe8\xae\xbe\xe7\xbd\xae</a>\n<a href="/user/')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    258          _tmp = current_user.username  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    259          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    260          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    261          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    262          _append(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    263          _append('"><img class="avatar" src="')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    264          _tmp = get_avatar_url(current_user, 's')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    265          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    266          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    267          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    268          _append(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    269          _append('" /></a>\n<a href="/user/')  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    270          _tmp = current_user.username  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    271          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    272          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    273          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    274          _append(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    275          _append('">')  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    276          _tmp = current_user.fullname  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    277          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    278          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    279          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    280          _append(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    281          _append('</a>\n<i class="level icon-level')  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    282          _tmp = current_user.level  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    283          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    284          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    285          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    286          _append(_tmp)  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    287          _append('"></i>\n</div>\n<div class="follow">\n<div class="following item" data-title="\xe6\x88\x91\xe5\x85\xb3\xe6\xb3\xa8\xe7\x9a\x84\xe4\xba\xba" data-url="/mine/following">\n<h3 class="anchor">')  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    288          _tmp = current_user.following_count  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    289          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    290          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    291          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    292          _append(_tmp)  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    293          _append('</h3>\n<span>following</span>\n</div>\n<div class="follower item" data-title="\xe5\x85\xb3\xe6\xb3\xa8\xe6\x88\x91\xe7\x9a\x84\xe4\xba\xba" data-url="/mine/follower">\n<h3 class="anchor">')  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    294          _tmp = current_user.follower_count  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    295          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    296          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    297          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    298          _append(_tmp)  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    299          _append('</h3>\n<span>followers</span>\n</div>\n</div>\n<ul>\n<li class="item" data-url="/mine/invite" data-title="\xe9\x82\x80\xe8\xaf\xb7\xe6\x9c\x8b\xe5\x8f\x8b\xe5\x8a\xa0\xe5\x85\xa5"> <span class="num">')  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    300          _tmp = current_user.unused_invite_key_count  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    301          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    302          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    303          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    304          _append(_tmp)  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    305          _append('</span><span class="anchor">\xe9\x82\x80\xe8\xaf\xb7\xe6\x9c\x8b\xe5\x8f\x8b\xe5\x8a\xa0\xe5\x85\xa5</span></li>\n<li class="item" data-title="\xe6\x88\x91\xe6\xb7\xbb\xe5\x8a\xa0\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87" data-url="/mine/photos"> <span class="num">')  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    306          _tmp = current_user.photo_count  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    307          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    308          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    309          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    310          _append(_tmp)  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    311          _append('</span><span class="anchor">\xe6\x88\x91\xe6\xb7\xbb\xe5\x8a\xa0\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87</span></li>\n<li class="item" data-title="\xe6\x88\x91\xe5\x96\x9c\xe6\xac\xa2\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87" data-url="/mine/likes_photos"><span class="num">')  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    312          _tmp = current_user.likes_count  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    313          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    314          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    315          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    316          _append(_tmp)  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    317          _append('</span><span class="anchor">\xe6\x88\x91\xe5\x96\x9c\xe6\xac\xa2\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87</span> </li>\n</ul>\n</div>\n</div>\n')  # partial/sidebar_me.html:27 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    318          _append('\n')  # partial/sidebar_global.html:4 (via additives.html:8, base.html:54)
    319      else:  # partial/sidebar_global.html:4 (via additives.html:8, base.html:54)
    320          _append('\n')  # partial/sidebar_global.html:5 (via additives.html:8, base.html:54)
    321          _append('<div class="box" id="panel-about">\n<div class="header">\xe5\x85\xb3\xe4\xba\x8e\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</div>\n<div class="body">\n<p>\xe5\x85\xb3\xe6\xb3\xa8\xe9\xa3\x9f\xe5\x93\x81\xe5\xae\x89\xe5\x85\xa8\xef\xbc\x8c\xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe4\xb8\x96\xe7\x95\x8c</p>\n<p>\xe6\x89\x80\xe6\x9c\x89\xe9\xa3\x9f\xe5\x93\x81\xe5\x92\x8c\xe6\xb7\xbb\xe5\x8a\xa0\xe5\x89\x82\xe8\xb5\x84\xe6\x96\x99\xe6\x9d\xa5\xe8\x87\xaa\xe4\xba\x8eiearth-\xe7\x88\xb1\xe5\x9c\xb0\xe7\x90\x83\xe7\x8e\xaf\xe4\xbf\x9d\xe6\x9c\xba\xe6\x9e\x84</p>\n</div>\n</div>\n')  # partial/sidebar_about.html:8 (via partial/sidebar_global.html:5, additives.html:8, base.html:54)
    322          _append('\n')  # partial/sidebar_global.html:6 (via additives.html:8, base.html:54)
    323          _append('<div class="box" id="panel-login">\n<div class="header">\xe7\x99\xbb\xe5\x85\xa5\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</div>\n<div class="body">\n<form action="/login" method="POST">\n<div class="section">\n<input type="TEXT" name="username" placeholder="\xe7\x94\xa8\xe6\x88\xb7\xe5\x90\x8d/Email" />\n</div>\n<div class="section">\n<input type="PASSWORD" name="password" placeholder="\xe5\xaf\x86\xe7\xa0\x81" />\n</div>\n<div class="section">\n<input type="SUBMIT" value="\xe7\x99\xbb\xe5\x85\xa5" class="btn primary-btn" />\n<span class="tip">\xe4\xbc\x9a\xe8\xae\xb0\xe4\xbd\x8f\xe7\x99\xbb\xe5\x85\xa5\xe4\xb8\x80\xe4\xb8\xaa\xe6\x9c\x88</span>\n</div>\n</form>\n<div class="alert alert-info">\xe5\x86\x85\xe6\xb5\x8b\xe4\xb8\xad\xef\xbc\x8c\xe5\x8f\xaa\xe6\x8e\xa5\xe5\x8f\x97\xe9\x82\x80\xe8\xaf\xb7\xe6\xb3\xa8\xe5\x86\x8c</div>\n</div>\n</div>\n')  # partial/sidebar_login.html:19 (via partial/sidebar_global.html:6, additives.html:8, base.html:54)
    324          _append('\n')  # partial/sidebar_global.html:8 (via additives.html:8, base.html:54)
    325      _append('\n')  # partial/sidebar_global.html:10 (via additives.html:8, base.html:54)
    326      _append('<div class="box">\n<div class="header">\xe6\xb5\x8f\xe8\xa7\x88\xe9\xa3\x9f\xe5\x93\x81</div>\n<div class="body">\n<ul>\n<li class="item" data-url="/photos/hot" data-title="\xe7\x83\xad\xe9\x97\xa8\xe9\xa3\x9f\xe5\x93\x81"><span class="anchor">\xe7\x83\xad\xe9\x97\xa8\xe9\xa3\x9f\xe5\x93\x81</span></li>\n<li class="item" data-url="/photos/latest" data-title="\xe6\x9c\x80\xe6\x96\xb0\xe9\xa3\x9f\xe5\x93\x81"><span class="anchor">\xe6\x9c\x80\xe6\x96\xb0\xe9\xa3\x9f\xe5\x93\x81</span></li>\n</ul>\n</div>\n</div>\n')  # partial/sidebar_photos_nav.html:10 (via partial/sidebar_global.html:10, additives.html:8, base.html:54)
    327      _append('\n<!--\n')  # partial/sidebar_global.html:12 (via additives.html:8, base.html:54)
    328      import models  # partial/sidebar_tags.html:1 (via partial/sidebar_global.html:12, additives.html:8, base.html:54)
    329      _append('\n')  # partial/sidebar_tags.html:2 (via partial/sidebar_global.html:12, additives.html:8, base.html:54)
    330      hot_tags = models.Additive_Tag().hot_tags  # partial/sidebar_tags.html:2 (via partial/sidebar_global.html:12, additives.html:8, base.html:54)
    331      _append('\n<div class="box" id="panel-tags">\n<div class="header">\xe7\x83\xad\xe9\x97\xa8\xe6\xb7\xbb\xe5\x8a\xa0\xe5\x89\x82</div>\n<div class="body">\n<ul>\n')  # partial/sidebar_tags.html:8 (via partial/sidebar_global.html:12, additives.html:8, base.html:54)
    332      for tag in hot_tags:  # partial/sidebar_tags.html:8 (via partial/sidebar_global.html:12, additives.html:8, base.html:54)
    333          _append('\n<li class="item" data-url="/tag/')  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:12, additives.html:8, base.html:54)
    334          _tmp = tag  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:12, additives.html:8, base.html:54)
    335          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:12, additives.html:8, base.html:54)
    336          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:12, additives.html:8, base.html:54)
    337          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:12, additives.html:8, base.html:54)
    338          _append(_tmp)  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:12, additives.html:8, base.html:54)
    339          _append('"><i class="icon-tag"></i><span class="anchor">')  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:12, additives.html:8, base.html:54)
    340          _tmp = tag  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:12, additives.html:8, base.html:54)
    341          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:12, additives.html:8, base.html:54)
    342          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:12, additives.html:8, base.html:54)
    343          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:12, additives.html:8, base.html:54)
    344          _append(_tmp)  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:12, additives.html:8, base.html:54)
    345          _append('</span></li>\n')  # partial/sidebar_tags.html:10 (via partial/sidebar_global.html:12, additives.html:8, base.html:54)
    346      _append('\n</ul>\n</div>\n</div>\n')  # partial/sidebar_tags.html:14 (via partial/sidebar_global.html:12, additives.html:8, base.html:54)
    347      _append('\n-->\n')  # partial/sidebar_global.html:14 (via additives.html:8, base.html:54)
    348      _append('\n')  # additives.html:9 (via base.html:54)
    349      _append('\n</div>\n</div>\n</div>\n<div id="footer">\n<div class="inner">\n<div class="right">\n<span class="belief">make the world a little better and easier</span>\n</div>\n<div class="left">\n<ul>\n<li><a href="/about">\xe5\x85\xb3\xe4\xba\x8e</a> <!--<span class="divider">/</span>--></li>\n<!--<li><a href="/feedback">\xe5\x8f\x8d\xe9\xa6\x88</a> <span class="divider">/</span></li>-->\n<!--<li><a href="/blog">\xe6\x97\xa5\xe5\xbf\x97</a></li>-->\n</ul>\n</div>\n</div>\n</div>\n<script type="text/javascript">\nvar _gaq = _gaq || [];\n_gaq.push([\'_setAccount\', \'UA-1281124-23\']);\n_gaq.push([\'_trackPageview\']);\n(function() {\nvar ga = document.createElement(\'script\'); ga.type = \'text/javascript\'; ga.async = true;\nga.src = (\'https:\' == document.location.protocol ? \'https://ssl\' : \'http://www\') + \'.google-analytics.com/ga.js\';\nvar s = document.getElementsByTagName(\'script\')[0]; s.parentNode.insertBefore(ga, s);\n})();\n</script>\n<!-- love your mom! -->\n</body>\n<meta name="description" content="\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - " />\n')  # base.html:89
    350      return _utf8('').join(_buffer)  # base.html:0
[E 120719 22:19:44 web:1031] Uncaught exception GET / (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.100', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cache-Control': 'max-age=0', 'X-Real-Ip': '192.168.0.100'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "src/sites/www/handlers/home.py", line 14, in get
        return self._render('hot')
      File "src/sites/www/handlers/base.py", line 87, in _render
        current_additive = additive,
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 474, in render
        html = self.render_string(template_name, **kwargs)
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 586, in render_string
        return t.generate(**args)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 253, in generate
        return execute()
      File "additives_html.generated.py", line 330, in _execute
        hot_tags = models.Additive_Tag().hot_tags  # partial/sidebar_tags.html:2 (via partial/sidebar_global.html:12, additives.html:8, base.html:54)
    AttributeError: 'module' object has no attribute 'Additive_Tag'
[E 120719 22:19:44 web:1393] 500 GET / (127.0.0.1) 1355.08ms
[I 120719 22:20:24 web:1393] 200 GET / (127.0.0.1) 1299.32ms
[E 120719 22:20:56 template:256] additives.html code:
      1  def _execute():  # base.html:0
      2      _buffer = []  # base.html:0
      3      _append = _buffer.append  # base.html:0
      4      _append('<!doctype html>\n<head>\n<meta charset="UTF-8" />\n<meta content="True" name="HandheldFriendly" />\n<meta content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0; name=\'viewport\'" />\n<title>\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - \xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81')  # base.html:6
      5      _append('</title>\n<link rel="stylesheet" type="text/css" media="screen" href="/static/css/vendor/jquery.fancybox.css" />\n<link rel="stylesheet" type="text/css" media="screen" href="/static/css/main.css" />\n<link rel="shortcut icon" href="/static/img/favicon.ico" />\n<link rel="canonical" href="http://wuditoo.com/" />\n<meta name="description" content="\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - \xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81" />\n<script src="/static/js/vendor/jquery.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.history.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.fancybox.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.scrollTo.min.js" type="text/javascript"></script>\n')  # base.html:16
      6      _append('\n<script type="text/javascript">\n')  # additives.html:13 (via base.html:16)
      7      if current_additive:  # additives.html:13 (via base.html:16)
      8          _append('\nmeta_additive = {\nurl: "/additive/')  # additives.html:15 (via base.html:16)
      9          _tmp = current_additive.id  # additives.html:15 (via base.html:16)
     10          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # additives.html:15 (via base.html:16)
     11          else: _tmp = _utf8(str(_tmp))  # additives.html:15 (via base.html:16)
     12          _tmp = _utf8(xhtml_escape(_tmp))  # additives.html:15 (via base.html:16)
     13          _append(_tmp)  # additives.html:15 (via base.html:16)
     14          _append('",\nwidth: ')  # additives.html:16 (via base.html:16)
     15          _tmp = current_additive.width  # additives.html:16 (via base.html:16)
     16          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # additives.html:16 (via base.html:16)
     17          else: _tmp = _utf8(str(_tmp))  # additives.html:16 (via base.html:16)
     18          _tmp = _utf8(xhtml_escape(_tmp))  # additives.html:16 (via base.html:16)
     19          _append(_tmp)  # additives.html:16 (via base.html:16)
     20          _append(',\nheight: ')  # additives.html:17 (via base.html:16)
     21          _tmp = current_additive.height  # additives.html:17 (via base.html:16)
     22          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # additives.html:17 (via base.html:16)
     23          else: _tmp = _utf8(str(_tmp))  # additives.html:17 (via base.html:16)
     24          _tmp = _utf8(xhtml_escape(_tmp))  # additives.html:17 (via base.html:16)
     25          _append(_tmp)  # additives.html:17 (via base.html:16)
     26          _append('\n}\n')  # additives.html:19 (via base.html:16)
     27      _append('\n</script>\n')  # additives.html:21 (via base.html:16)
     28      _append('\n<script src="/static/js/main.js" type="text/javascript"></script>\n</head>\n<!--[if IE 7 ]><body class="ie7"><![endif]-->\n<!--[if gt IE 7]><body class="ie"><![endif]-->\n<!--[if !IE]><body><![endif]-->\n<div id="header">\n<div class="inner">\n<div id="logo"><a href="/">\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</a></div>\n<div id="slogon">\xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81</div>\n<div id="witticism">')  # base.html:27
     29      _tmp = home_sentence()  # base.html:27
     30      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:27
     31      else: _tmp = _utf8(str(_tmp))  # base.html:27
     32      _tmp = _utf8(xhtml_escape(_tmp))  # base.html:27
     33      _append(_tmp)  # base.html:27
     34      _append('</div>\n<!--\n<ul class="nav-right">\n</ul>\n-->\n</div>\n</div>\n<div id="container">\n<div class="inner">\n<div class="message alert alert-warn">\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0\xe5\x86\xac\xe7\x9c\xa0\xe4\xb8\xad\xef\xbc\x8c\xe8\x8b\x8f\xe9\x86\x92\xe6\x97\xb6\xe9\x97\xb4\xe5\xbe\x85\xe5\xae\x9a\xe3\x80\x82\xe8\xb0\xa2\xe8\xb0\xa2\xe6\x82\xa8\xe7\x9a\x84\xe5\x88\xb0\xe8\xae\xbf\xef\xbc\x9a\xef\xbc\x89</div>\n')  # base.html:38
     35      message = get_message()  # base.html:38
     36      _append('\n')  # base.html:39
     37      for message_type in ('error', 'success', 'info', 'warn'):  # base.html:39
     38          _append('\n')  # base.html:40
     39          if message and message_type == message[0]:  # base.html:40
     40              _append('\n<div id="')  # base.html:41
     41              _tmp = message_type  # base.html:41
     42              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     43              else: _tmp = _utf8(str(_tmp))  # base.html:41
     44              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     45              _append(_tmp)  # base.html:41
     46              _append('-message" class="message alert alert-')  # base.html:41
     47              _tmp = message_type  # base.html:41
     48              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     49              else: _tmp = _utf8(str(_tmp))  # base.html:41
     50              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     51              _append(_tmp)  # base.html:41
     52              _append('">')  # base.html:41
     53              _tmp = message[1]  # base.html:41
     54              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     55              else: _tmp = _utf8(str(_tmp))  # base.html:41
     56              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     57              _append(_tmp)  # base.html:41
     58              _append('</div>\n')  # base.html:42
     59          else:  # base.html:42
     60              _append('\n<div id="')  # base.html:43
     61              _tmp = message_type  # base.html:43
     62              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:43
     63              else: _tmp = _utf8(str(_tmp))  # base.html:43
     64              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:43
     65              _append(_tmp)  # base.html:43
     66              _append('-message" class="message alert alert-')  # base.html:43
     67              _tmp = message_type  # base.html:43
     68              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:43
     69              else: _tmp = _utf8(str(_tmp))  # base.html:43
     70              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:43
     71              _append(_tmp)  # base.html:43
     72              _append(' hide"></div>\n')  # base.html:44
     73          _append('\n')  # base.html:45
     74      _append('\n')  # base.html:47
     75      _append('\n<div id="main">\n')  # base.html:50
     76      _append('\n')  # additives.html:4 (via base.html:50)
     77      _append('<div class="box" id="additives">\n<div class="header">')  # partial/additives.html:2 (via additives.html:4, base.html:50)
     78      _tmp = additives_title  # partial/additives.html:2 (via additives.html:4, base.html:50)
     79      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:2 (via additives.html:4, base.html:50)
     80      else: _tmp = _utf8(str(_tmp))  # partial/additives.html:2 (via additives.html:4, base.html:50)
     81      _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:2 (via additives.html:4, base.html:50)
     82      _append(_tmp)  # partial/additives.html:2 (via additives.html:4, base.html:50)
     83      _append('</div>\n<div class="body main ul">\n')  # partial/additives.html:4 (via additives.html:4, base.html:50)
     84      for index, additive in enumerate(additives):  # partial/additives.html:4 (via additives.html:4, base.html:50)
     85          _append('\n')  # partial/additives.html:5 (via additives.html:4, base.html:50)
     86          creator = additive.creator  # partial/additives.html:5 (via additives.html:4, base.html:50)
     87          _append('\n<div class="additive-item">\n<div class="header">\n<a class="avatar" href="/user/')  # partial/additives.html:8 (via additives.html:4, base.html:50)
     88          _tmp = creator.username  # partial/additives.html:8 (via additives.html:4, base.html:50)
     89          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     90          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     91          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     92          _append(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     93          _append('"><img src="')  # partial/additives.html:8 (via additives.html:4, base.html:50)
     94          _tmp = get_avatar_url(creator, 's')  # partial/additives.html:8 (via additives.html:4, base.html:50)
     95          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     96          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     97          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     98          _append(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     99          _append('" /></a>')  # partial/additives.html:8 (via additives.html:4, base.html:50)
    100          _tmp = additive.name  # partial/additives.html:8 (via additives.html:4, base.html:50)
    101          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
    102          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
    103          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
    104          _append(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
    105          _append('\n</div>\n<div class="body">\n<div class="additive_alias">\xe5\x85\xb6\xe4\xbb\x96\xe5\x90\x8d\xe7\xa7\xb0:')  # partial/additives.html:11 (via additives.html:4, base.html:50)
    106          _tmp = additive.alias  # partial/additives.html:11 (via additives.html:4, base.html:50)
    107          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:11 (via additives.html:4, base.html:50)
    108          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:11 (via additives.html:4, base.html:50)
    109          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:11 (via additives.html:4, base.html:50)
    110          _append(_tmp)  # partial/additives.html:11 (via additives.html:4, base.html:50)
    111          _append('</div>\n<div class="additive_cns">CNS\xe5\x8f\xb7:')  # partial/additives.html:12 (via additives.html:4, base.html:50)
    112          _tmp = additive.cns  # partial/additives.html:12 (via additives.html:4, base.html:50)
    113          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:12 (via additives.html:4, base.html:50)
    114          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:12 (via additives.html:4, base.html:50)
    115          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:12 (via additives.html:4, base.html:50)
    116          _append(_tmp)  # partial/additives.html:12 (via additives.html:4, base.html:50)
    117          _append('</div>\n<div class="additive_ins">INS\xe5\x8f\xb7:')  # partial/additives.html:13 (via additives.html:4, base.html:50)
    118          _tmp = additive.ins  # partial/additives.html:13 (via additives.html:4, base.html:50)
    119          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:13 (via additives.html:4, base.html:50)
    120          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:13 (via additives.html:4, base.html:50)
    121          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:13 (via additives.html:4, base.html:50)
    122          _append(_tmp)  # partial/additives.html:13 (via additives.html:4, base.html:50)
    123          _append('</div>\n<div class="additive_effect">\xe5\x8a\x9f\xe8\x83\xbd:')  # partial/additives.html:14 (via additives.html:4, base.html:50)
    124          _tmp = additive.effect  # partial/additives.html:14 (via additives.html:4, base.html:50)
    125          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:14 (via additives.html:4, base.html:50)
    126          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:14 (via additives.html:4, base.html:50)
    127          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:14 (via additives.html:4, base.html:50)
    128          _append(_tmp)  # partial/additives.html:14 (via additives.html:4, base.html:50)
    129          _append('</div>\n</div>\n<div class="footer">\n<span class="meta">\n<ul>\n<li><i class="icon-view"></i> ')  # partial/additives.html:19 (via additives.html:4, base.html:50)
    130          _tmp = additive.views_count  # partial/additives.html:19 (via additives.html:4, base.html:50)
    131          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:19 (via additives.html:4, base.html:50)
    132          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:19 (via additives.html:4, base.html:50)
    133          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:19 (via additives.html:4, base.html:50)
    134          _append(_tmp)  # partial/additives.html:19 (via additives.html:4, base.html:50)
    135          _append('</li>\n</ul>\n</span>\n<span class="created">\n')  # partial/additives.html:23 (via additives.html:4, base.html:50)
    136          _tmp = timesince(additive.created)  # partial/additives.html:23 (via additives.html:4, base.html:50)
    137          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:23 (via additives.html:4, base.html:50)
    138          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:23 (via additives.html:4, base.html:50)
    139          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:23 (via additives.html:4, base.html:50)
    140          _append(_tmp)  # partial/additives.html:23 (via additives.html:4, base.html:50)
    141          _append('\n</span>\n</div>\n</div>\n')  # partial/additives.html:27 (via additives.html:4, base.html:50)
    142          _append('\n')  # partial/additives.html:28 (via additives.html:4, base.html:50)
    143          if index > 0 and (index + 1) % 3 == 0:  # partial/additives.html:28 (via additives.html:4, base.html:50)
    144              _append('\n<div class="clearfix"></div>\n')  # partial/additives.html:30 (via additives.html:4, base.html:50)
    145          _append('\n')  # partial/additives.html:32 (via additives.html:4, base.html:50)
    146      _append('\n')  # partial/additives.html:33 (via additives.html:4, base.html:50)
    147      page_type = 'additives'  # partial/additives.html:33 (via additives.html:4, base.html:50)
    148      _append('\n')  # partial/additives.html:34 (via additives.html:4, base.html:50)
    149      _append('\n')  # partial/pagination.html:3 (via partial/additives.html:34, additives.html:4, base.html:50)
    150      from macros.macro import ADDITIVES_PER_PAGE, USERS_PER_PAGE  # partial/pagination.html:3 (via partial/additives.html:34, additives.html:4, base.html:50)
    151      _append('\n')  # partial/pagination.html:4 (via partial/additives.html:34, additives.html:4, base.html:50)
    152      import math  # partial/pagination.html:4 (via partial/additives.html:34, additives.html:4, base.html:50)
    153      _append('\n')  # partial/pagination.html:6 (via partial/additives.html:34, additives.html:4, base.html:50)
    154      if page_type == 'additives':  # partial/pagination.html:6 (via partial/additives.html:34, additives.html:4, base.html:50)
    155          _append('\n')  # partial/pagination.html:7 (via partial/additives.html:34, additives.html:4, base.html:50)
    156          items_per_page = ADDITIVES_PER_PAGE  # partial/pagination.html:7 (via partial/additives.html:34, additives.html:4, base.html:50)
    157          _append('\n')  # partial/pagination.html:8 (via partial/additives.html:34, additives.html:4, base.html:50)
    158      else:  # partial/pagination.html:8 (via partial/additives.html:34, additives.html:4, base.html:50)
    159          _append('\n')  # partial/pagination.html:9 (via partial/additives.html:34, additives.html:4, base.html:50)
    160          items_per_page = USERS_PER_PAGE  # partial/pagination.html:9 (via partial/additives.html:34, additives.html:4, base.html:50)
    161          _append('\n')  # partial/pagination.html:10 (via partial/additives.html:34, additives.html:4, base.html:50)
    162      _append('\n')  # partial/pagination.html:12 (via partial/additives.html:34, additives.html:4, base.html:50)
    163      total_page = int(math.ceil(float(total_items) / items_per_page))  # partial/pagination.html:12 (via partial/additives.html:34, additives.html:4, base.html:50)
    164      _append('\n')  # partial/pagination.html:14 (via partial/additives.html:34, additives.html:4, base.html:50)
    165      current_page = int(handler.get_argument('page', 1))  # partial/pagination.html:14 (via partial/additives.html:34, additives.html:4, base.html:50)
    166      _append('\n')  # partial/pagination.html:16 (via partial/additives.html:34, additives.html:4, base.html:50)
    167      if current_page <=6:  # partial/pagination.html:16 (via partial/additives.html:34, additives.html:4, base.html:50)
    168          _append('\n')  # partial/pagination.html:17 (via partial/additives.html:34, additives.html:4, base.html:50)
    169          end_page = min(total_page, 10)  # partial/pagination.html:17 (via partial/additives.html:34, additives.html:4, base.html:50)
    170          _append('\n')  # partial/pagination.html:18 (via partial/additives.html:34, additives.html:4, base.html:50)
    171          start_page = 1  # partial/pagination.html:18 (via partial/additives.html:34, additives.html:4, base.html:50)
    172          _append('\n')  # partial/pagination.html:19 (via partial/additives.html:34, additives.html:4, base.html:50)
    173      else:  # partial/pagination.html:19 (via partial/additives.html:34, additives.html:4, base.html:50)
    174          _append('\n')  # partial/pagination.html:20 (via partial/additives.html:34, additives.html:4, base.html:50)
    175          end_page = min(total_page, current_page+4)  # partial/pagination.html:20 (via partial/additives.html:34, additives.html:4, base.html:50)
    176          _append('\n')  # partial/pagination.html:21 (via partial/additives.html:34, additives.html:4, base.html:50)
    177          start_page = current_page - 5  # partial/pagination.html:21 (via partial/additives.html:34, additives.html:4, base.html:50)
    178          _append('\n')  # partial/pagination.html:22 (via partial/additives.html:34, additives.html:4, base.html:50)
    179      _append('\n')  # partial/pagination.html:24 (via partial/additives.html:34, additives.html:4, base.html:50)
    180      if total_page > 1:  # partial/pagination.html:24 (via partial/additives.html:34, additives.html:4, base.html:50)
    181          _append('\n<div class="pagination">\n<ul>\n')  # partial/pagination.html:27 (via partial/additives.html:34, additives.html:4, base.html:50)
    182          if current_page == 1:  # partial/pagination.html:27 (via partial/additives.html:34, additives.html:4, base.html:50)
    183              _append('\n<li class="disabled">\xe2\x86\x90 </li>\n')  # partial/pagination.html:29 (via partial/additives.html:34, additives.html:4, base.html:50)
    184          else:  # partial/pagination.html:29 (via partial/additives.html:34, additives.html:4, base.html:50)
    185              _append('\n<li><a href="')  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    186              _tmp = page_path  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    187              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    188              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    189              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    190              _append(_tmp)  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    191              _append('?page=1">\xe2\x86\x90 </a></li>\n')  # partial/pagination.html:31 (via partial/additives.html:34, additives.html:4, base.html:50)
    192          _append('\n')  # partial/pagination.html:33 (via partial/additives.html:34, additives.html:4, base.html:50)
    193          for i in range(start_page, end_page + 1):  # partial/pagination.html:33 (via partial/additives.html:34, additives.html:4, base.html:50)
    194              _append('\n<li ')  # partial/pagination.html:34 (via partial/additives.html:34, additives.html:4, base.html:50)
    195              if current_page == i:  # partial/pagination.html:34 (via partial/additives.html:34, additives.html:4, base.html:50)
    196                  _append('class="active"')  # partial/pagination.html:34 (via partial/additives.html:34, additives.html:4, base.html:50)
    197              _append('>\n<a href="')  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    198              _tmp = page_path  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    199              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    200              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    201              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    202              _append(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    203              _append('?page=')  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    204              _tmp = i  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    205              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    206              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    207              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    208              _append(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    209              _append('">')  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    210              _tmp = i  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    211              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    212              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    213              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    214              _append(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    215              _append('</a>\n</li>\n')  # partial/pagination.html:37 (via partial/additives.html:34, additives.html:4, base.html:50)
    216          _append('\n')  # partial/pagination.html:39 (via partial/additives.html:34, additives.html:4, base.html:50)
    217          if current_page == total_page:  # partial/pagination.html:39 (via partial/additives.html:34, additives.html:4, base.html:50)
    218              _append('\n<li class="disabled">\xe2\x86\x92 </li>\n')  # partial/pagination.html:41 (via partial/additives.html:34, additives.html:4, base.html:50)
    219          else:  # partial/pagination.html:41 (via partial/additives.html:34, additives.html:4, base.html:50)
    220              _append('\n<li><a href="')  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    221              _tmp = page_path  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    222              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    223              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    224              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    225              _append(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    226              _append('?page=')  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    227              _tmp = current_page+1  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    228              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    229              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    230              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    231              _append(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    232              _append('">\xe2\x86\x92 </a></li>\n')  # partial/pagination.html:43 (via partial/additives.html:34, additives.html:4, base.html:50)
    233          _append('\n</ul>\n</div>\n')  # partial/pagination.html:46 (via partial/additives.html:34, additives.html:4, base.html:50)
    234      _append('\n')  # partial/pagination.html:47 (via partial/additives.html:34, additives.html:4, base.html:50)
    235      _append('\n</div>\n</div>\n')  # partial/additives.html:37 (via additives.html:4, base.html:50)
    236      _append('\n')  # additives.html:5 (via base.html:50)
    237      _append('\n</div>\n<div id="sidebar">\n')  # base.html:54
    238      _append('\n')  # additives.html:8 (via base.html:54)
    239      if current_user:  # partial/sidebar_global.html:1 (via additives.html:8, base.html:54)
    240          _append('\n')  # partial/sidebar_global.html:2 (via additives.html:8, base.html:54)
    241          _append('<div class="upload item ')  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    242          if not current_user.left_upload_count:  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    243              _append('disabled')  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    244          _append('" data-url="/photo/upload" data-title="\xe9\x87\x87\xe9\x9b\x86\xe7\x85\xa7\xe7\x89\x87" >\n<div class="left"></div>\n<div class="center">\n')  # partial/sidebar_upload.html:5 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    245          if current_user.left_upload_count:  # partial/sidebar_upload.html:5 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    246              _append('\n\xe9\x87\x87\xe9\x9b\x86\xe7\x85\xa7\xe7\x89\x87(\xe6\x9c\xac\xe5\x91\xa8\xe8\xbf\x98\xe5\x89\xa9')  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    247              _tmp = current_user.left_upload_count  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    248              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    249              else: _tmp = _utf8(str(_tmp))  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    250              _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    251              _append(_tmp)  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    252              _append('\xe5\xbc\xa0)\n')  # partial/sidebar_upload.html:7 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    253          else:  # partial/sidebar_upload.html:7 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    254              _append('\n\xe6\x9c\xac\xe5\x91\xa8\xe7\x9a\x84\xe9\x87\x87\xe9\x9b\x86\xe4\xbd\x99\xe9\xa2\x9d\xe5\xb7\xb2\xe7\x94\xa8\xe5\xae\x8c\xe4\xba\x86\n')  # partial/sidebar_upload.html:9 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    255          _append('\n</div>\n<div class="right"></div>\n</div>\n')  # partial/sidebar_upload.html:13 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    256          _append('\n')  # partial/sidebar_global.html:3 (via additives.html:8, base.html:54)
    257          _append('<div class="box" id="panel-me">\n<div class="header"><a class="right" href="/logout">\xe7\x99\xbb\xe5\x87\xba</a>\xe6\x88\x91\xe7\x9a\x84\xe4\xbf\xa1\xe6\x81\xaf</div>\n<div class="body">\n<div class="me">\n<a class="settings item" href="/settings" data-title="\xe8\xae\xbe\xe7\xbd\xae" data-url="/settings">\xe8\xae\xbe\xe7\xbd\xae</a>\n<a href="/user/')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    258          _tmp = current_user.username  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    259          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    260          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    261          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    262          _append(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    263          _append('"><img class="avatar" src="')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    264          _tmp = get_avatar_url(current_user, 's')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    265          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    266          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    267          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    268          _append(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    269          _append('" /></a>\n<a href="/user/')  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    270          _tmp = current_user.username  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    271          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    272          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    273          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    274          _append(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    275          _append('">')  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    276          _tmp = current_user.fullname  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    277          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    278          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    279          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    280          _append(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    281          _append('</a>\n<i class="level icon-level')  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    282          _tmp = current_user.level  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    283          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    284          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    285          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    286          _append(_tmp)  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    287          _append('"></i>\n</div>\n<div class="follow">\n<div class="following item" data-title="\xe6\x88\x91\xe5\x85\xb3\xe6\xb3\xa8\xe7\x9a\x84\xe4\xba\xba" data-url="/mine/following">\n<h3 class="anchor">')  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    288          _tmp = current_user.following_count  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    289          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    290          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    291          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    292          _append(_tmp)  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    293          _append('</h3>\n<span>following</span>\n</div>\n<div class="follower item" data-title="\xe5\x85\xb3\xe6\xb3\xa8\xe6\x88\x91\xe7\x9a\x84\xe4\xba\xba" data-url="/mine/follower">\n<h3 class="anchor">')  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    294          _tmp = current_user.follower_count  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    295          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    296          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    297          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    298          _append(_tmp)  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    299          _append('</h3>\n<span>followers</span>\n</div>\n</div>\n<ul>\n<li class="item" data-url="/mine/invite" data-title="\xe9\x82\x80\xe8\xaf\xb7\xe6\x9c\x8b\xe5\x8f\x8b\xe5\x8a\xa0\xe5\x85\xa5"> <span class="num">')  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    300          _tmp = current_user.unused_invite_key_count  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    301          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    302          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    303          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    304          _append(_tmp)  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    305          _append('</span><span class="anchor">\xe9\x82\x80\xe8\xaf\xb7\xe6\x9c\x8b\xe5\x8f\x8b\xe5\x8a\xa0\xe5\x85\xa5</span></li>\n<li class="item" data-title="\xe6\x88\x91\xe6\xb7\xbb\xe5\x8a\xa0\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87" data-url="/mine/photos"> <span class="num">')  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    306          _tmp = current_user.photo_count  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    307          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    308          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    309          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    310          _append(_tmp)  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    311          _append('</span><span class="anchor">\xe6\x88\x91\xe6\xb7\xbb\xe5\x8a\xa0\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87</span></li>\n<li class="item" data-title="\xe6\x88\x91\xe5\x96\x9c\xe6\xac\xa2\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87" data-url="/mine/likes_photos"><span class="num">')  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    312          _tmp = current_user.likes_count  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    313          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    314          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    315          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    316          _append(_tmp)  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    317          _append('</span><span class="anchor">\xe6\x88\x91\xe5\x96\x9c\xe6\xac\xa2\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87</span> </li>\n</ul>\n</div>\n</div>\n')  # partial/sidebar_me.html:27 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    318          _append('\n')  # partial/sidebar_global.html:4 (via additives.html:8, base.html:54)
    319      else:  # partial/sidebar_global.html:4 (via additives.html:8, base.html:54)
    320          _append('\n')  # partial/sidebar_global.html:5 (via additives.html:8, base.html:54)
    321          _append('<div class="box" id="panel-about">\n<div class="header">\xe5\x85\xb3\xe4\xba\x8e\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</div>\n<div class="body">\n<p>\xe5\x85\xb3\xe6\xb3\xa8\xe9\xa3\x9f\xe5\x93\x81\xe5\xae\x89\xe5\x85\xa8\xef\xbc\x8c\xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe4\xb8\x96\xe7\x95\x8c</p>\n<p>\xe6\x89\x80\xe6\x9c\x89\xe9\xa3\x9f\xe5\x93\x81\xe5\x92\x8c\xe6\xb7\xbb\xe5\x8a\xa0\xe5\x89\x82\xe8\xb5\x84\xe6\x96\x99\xe6\x9d\xa5\xe8\x87\xaa\xe4\xba\x8eiearth-\xe7\x88\xb1\xe5\x9c\xb0\xe7\x90\x83\xe7\x8e\xaf\xe4\xbf\x9d\xe6\x9c\xba\xe6\x9e\x84</p>\n</div>\n</div>\n')  # partial/sidebar_about.html:8 (via partial/sidebar_global.html:5, additives.html:8, base.html:54)
    322          _append('\n')  # partial/sidebar_global.html:6 (via additives.html:8, base.html:54)
    323          _append('<div class="box" id="panel-login">\n<div class="header">\xe7\x99\xbb\xe5\x85\xa5\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</div>\n<div class="body">\n<form action="/login" method="POST">\n<div class="section">\n<input type="TEXT" name="username" placeholder="\xe7\x94\xa8\xe6\x88\xb7\xe5\x90\x8d/Email" />\n</div>\n<div class="section">\n<input type="PASSWORD" name="password" placeholder="\xe5\xaf\x86\xe7\xa0\x81" />\n</div>\n<div class="section">\n<input type="SUBMIT" value="\xe7\x99\xbb\xe5\x85\xa5" class="btn primary-btn" />\n<span class="tip">\xe4\xbc\x9a\xe8\xae\xb0\xe4\xbd\x8f\xe7\x99\xbb\xe5\x85\xa5\xe4\xb8\x80\xe4\xb8\xaa\xe6\x9c\x88</span>\n</div>\n</form>\n<div class="alert alert-info">\xe5\x86\x85\xe6\xb5\x8b\xe4\xb8\xad\xef\xbc\x8c\xe5\x8f\xaa\xe6\x8e\xa5\xe5\x8f\x97\xe9\x82\x80\xe8\xaf\xb7\xe6\xb3\xa8\xe5\x86\x8c</div>\n</div>\n</div>\n')  # partial/sidebar_login.html:19 (via partial/sidebar_global.html:6, additives.html:8, base.html:54)
    324          _append('\n')  # partial/sidebar_global.html:8 (via additives.html:8, base.html:54)
    325      _append('\n')  # partial/sidebar_global.html:10 (via additives.html:8, base.html:54)
    326      _append('<div class="box">\n<div class="header">\xe6\xb5\x8f\xe8\xa7\x88\xe9\xa3\x9f\xe5\x93\x81</div>\n<div class="body">\n<ul>\n<li class="item" data-url="/photos/hot" data-title="\xe7\x83\xad\xe9\x97\xa8\xe9\xa3\x9f\xe5\x93\x81"><span class="anchor">\xe7\x83\xad\xe9\x97\xa8\xe9\xa3\x9f\xe5\x93\x81</span></li>\n<li class="item" data-url="/photos/latest" data-title="\xe6\x9c\x80\xe6\x96\xb0\xe9\xa3\x9f\xe5\x93\x81"><span class="anchor">\xe6\x9c\x80\xe6\x96\xb0\xe9\xa3\x9f\xe5\x93\x81</span></li>\n</ul>\n</div>\n</div>\n')  # partial/sidebar_photos_nav.html:10 (via partial/sidebar_global.html:10, additives.html:8, base.html:54)
    327      _append('\n<!--\n#')  # partial/sidebar_global.html:12 (via additives.html:8, base.html:54)
    328      import models  # partial/sidebar_tags.html:1 (via partial/sidebar_global.html:12, additives.html:8, base.html:54)
    329      _append('\n')  # partial/sidebar_tags.html:2 (via partial/sidebar_global.html:12, additives.html:8, base.html:54)
    330      hot_tags = models.Additive_Tag().hot_tags  # partial/sidebar_tags.html:2 (via partial/sidebar_global.html:12, additives.html:8, base.html:54)
    331      _append('\n<div class="box" id="panel-tags">\n<div class="header">\xe7\x83\xad\xe9\x97\xa8\xe6\xb7\xbb\xe5\x8a\xa0\xe5\x89\x82</div>\n<div class="body">\n<ul>\n')  # partial/sidebar_tags.html:8 (via partial/sidebar_global.html:12, additives.html:8, base.html:54)
    332      for tag in hot_tags:  # partial/sidebar_tags.html:8 (via partial/sidebar_global.html:12, additives.html:8, base.html:54)
    333          _append('\n<li class="item" data-url="/tag/')  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:12, additives.html:8, base.html:54)
    334          _tmp = tag  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:12, additives.html:8, base.html:54)
    335          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:12, additives.html:8, base.html:54)
    336          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:12, additives.html:8, base.html:54)
    337          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:12, additives.html:8, base.html:54)
    338          _append(_tmp)  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:12, additives.html:8, base.html:54)
    339          _append('"><i class="icon-tag"></i><span class="anchor">')  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:12, additives.html:8, base.html:54)
    340          _tmp = tag  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:12, additives.html:8, base.html:54)
    341          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:12, additives.html:8, base.html:54)
    342          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:12, additives.html:8, base.html:54)
    343          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:12, additives.html:8, base.html:54)
    344          _append(_tmp)  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:12, additives.html:8, base.html:54)
    345          _append('</span></li>\n')  # partial/sidebar_tags.html:10 (via partial/sidebar_global.html:12, additives.html:8, base.html:54)
    346      _append('\n</ul>\n</div>\n</div>\n')  # partial/sidebar_tags.html:14 (via partial/sidebar_global.html:12, additives.html:8, base.html:54)
    347      _append('\n-->\n')  # partial/sidebar_global.html:14 (via additives.html:8, base.html:54)
    348      _append('\n')  # additives.html:9 (via base.html:54)
    349      _append('\n</div>\n</div>\n</div>\n<div id="footer">\n<div class="inner">\n<div class="right">\n<span class="belief">make the world a little better and easier</span>\n</div>\n<div class="left">\n<ul>\n<li><a href="/about">\xe5\x85\xb3\xe4\xba\x8e</a> <!--<span class="divider">/</span>--></li>\n<!--<li><a href="/feedback">\xe5\x8f\x8d\xe9\xa6\x88</a> <span class="divider">/</span></li>-->\n<!--<li><a href="/blog">\xe6\x97\xa5\xe5\xbf\x97</a></li>-->\n</ul>\n</div>\n</div>\n</div>\n<script type="text/javascript">\nvar _gaq = _gaq || [];\n_gaq.push([\'_setAccount\', \'UA-1281124-23\']);\n_gaq.push([\'_trackPageview\']);\n(function() {\nvar ga = document.createElement(\'script\'); ga.type = \'text/javascript\'; ga.async = true;\nga.src = (\'https:\' == document.location.protocol ? \'https://ssl\' : \'http://www\') + \'.google-analytics.com/ga.js\';\nvar s = document.getElementsByTagName(\'script\')[0]; s.parentNode.insertBefore(ga, s);\n})();\n</script>\n<!-- love your mom! -->\n</body>\n<meta name="description" content="\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - " />\n')  # base.html:89
    350      return _utf8('').join(_buffer)  # base.html:0
[E 120719 22:20:56 web:1031] Uncaught exception GET / (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.100', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cookie': '__utma=148685175.647871982.1342707625.1342707625.1342707625.1; __utmb=148685175.1.10.1342707625; __utmc=148685175; __utmz=148685175.1342707625.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)', 'Cache-Control': 'max-age=0', 'X-Real-Ip': '192.168.0.100', 'If-None-Match': '"580f5e1842dc3dfed068b7c3f741db9b85c2ed2e"'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "src/sites/www/handlers/home.py", line 14, in get
        return self._render('hot')
      File "src/sites/www/handlers/base.py", line 87, in _render
        current_additive = additive,
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 474, in render
        html = self.render_string(template_name, **kwargs)
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 586, in render_string
        return t.generate(**args)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 253, in generate
        return execute()
      File "additives_html.generated.py", line 330, in _execute
        hot_tags = models.Additive_Tag().hot_tags  # partial/sidebar_tags.html:2 (via partial/sidebar_global.html:12, additives.html:8, base.html:54)
    AttributeError: 'module' object has no attribute 'Additive_Tag'
[E 120719 22:20:56 web:1393] 500 GET / (127.0.0.1) 1521.40ms
[W 120719 22:20:56 web:1393] 404 GET /favicon.ico (127.0.0.1) 6.77ms
[E 120720 06:09:47 template:256] additives.html code:
      1  def _execute():  # base.html:0
      2      _buffer = []  # base.html:0
      3      _append = _buffer.append  # base.html:0
      4      _append('<!doctype html>\n<head>\n<meta charset="UTF-8" />\n<meta content="True" name="HandheldFriendly" />\n<meta content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0; name=\'viewport\'" />\n<title>\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - \xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81')  # base.html:6
      5      _append('</title>\n<link rel="stylesheet" type="text/css" media="screen" href="/static/css/vendor/jquery.fancybox.css" />\n<link rel="stylesheet" type="text/css" media="screen" href="/static/css/main.css" />\n<link rel="shortcut icon" href="/static/img/favicon.ico" />\n<link rel="canonical" href="http://wuditoo.com/" />\n<meta name="description" content="\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - \xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81" />\n<script src="/static/js/vendor/jquery.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.history.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.fancybox.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.scrollTo.min.js" type="text/javascript"></script>\n')  # base.html:16
      6      _append('\n<script type="text/javascript">\n')  # additives.html:13 (via base.html:16)
      7      if current_additive:  # additives.html:13 (via base.html:16)
      8          _append('\nmeta_additive = {\nurl: "/additive/')  # additives.html:15 (via base.html:16)
      9          _tmp = current_additive.id  # additives.html:15 (via base.html:16)
     10          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # additives.html:15 (via base.html:16)
     11          else: _tmp = _utf8(str(_tmp))  # additives.html:15 (via base.html:16)
     12          _tmp = _utf8(xhtml_escape(_tmp))  # additives.html:15 (via base.html:16)
     13          _append(_tmp)  # additives.html:15 (via base.html:16)
     14          _append('",\nwidth: ')  # additives.html:16 (via base.html:16)
     15          _tmp = current_additive.width  # additives.html:16 (via base.html:16)
     16          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # additives.html:16 (via base.html:16)
     17          else: _tmp = _utf8(str(_tmp))  # additives.html:16 (via base.html:16)
     18          _tmp = _utf8(xhtml_escape(_tmp))  # additives.html:16 (via base.html:16)
     19          _append(_tmp)  # additives.html:16 (via base.html:16)
     20          _append(',\nheight: ')  # additives.html:17 (via base.html:16)
     21          _tmp = current_additive.height  # additives.html:17 (via base.html:16)
     22          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # additives.html:17 (via base.html:16)
     23          else: _tmp = _utf8(str(_tmp))  # additives.html:17 (via base.html:16)
     24          _tmp = _utf8(xhtml_escape(_tmp))  # additives.html:17 (via base.html:16)
     25          _append(_tmp)  # additives.html:17 (via base.html:16)
     26          _append('\n}\n')  # additives.html:19 (via base.html:16)
     27      _append('\n</script>\n')  # additives.html:21 (via base.html:16)
     28      _append('\n<script src="/static/js/main.js" type="text/javascript"></script>\n</head>\n<!--[if IE 7 ]><body class="ie7"><![endif]-->\n<!--[if gt IE 7]><body class="ie"><![endif]-->\n<!--[if !IE]><body><![endif]-->\n<div id="header">\n<div class="inner">\n<div id="logo"><a href="/">\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</a></div>\n<div id="slogon">\xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81</div>\n<div id="witticism">')  # base.html:27
     29      _tmp = home_sentence()  # base.html:27
     30      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:27
     31      else: _tmp = _utf8(str(_tmp))  # base.html:27
     32      _tmp = _utf8(xhtml_escape(_tmp))  # base.html:27
     33      _append(_tmp)  # base.html:27
     34      _append('</div>\n<!--\n<ul class="nav-right">\n</ul>\n-->\n</div>\n</div>\n<div id="container">\n<div class="inner">\n<div class="message alert alert-warn">\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0\xe5\x86\xac\xe7\x9c\xa0\xe4\xb8\xad\xef\xbc\x8c\xe8\x8b\x8f\xe9\x86\x92\xe6\x97\xb6\xe9\x97\xb4\xe5\xbe\x85\xe5\xae\x9a\xe3\x80\x82\xe8\xb0\xa2\xe8\xb0\xa2\xe6\x82\xa8\xe7\x9a\x84\xe5\x88\xb0\xe8\xae\xbf\xef\xbc\x9a\xef\xbc\x89</div>\n')  # base.html:38
     35      message = get_message()  # base.html:38
     36      _append('\n')  # base.html:39
     37      for message_type in ('error', 'success', 'info', 'warn'):  # base.html:39
     38          _append('\n')  # base.html:40
     39          if message and message_type == message[0]:  # base.html:40
     40              _append('\n<div id="')  # base.html:41
     41              _tmp = message_type  # base.html:41
     42              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     43              else: _tmp = _utf8(str(_tmp))  # base.html:41
     44              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     45              _append(_tmp)  # base.html:41
     46              _append('-message" class="message alert alert-')  # base.html:41
     47              _tmp = message_type  # base.html:41
     48              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     49              else: _tmp = _utf8(str(_tmp))  # base.html:41
     50              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     51              _append(_tmp)  # base.html:41
     52              _append('">')  # base.html:41
     53              _tmp = message[1]  # base.html:41
     54              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     55              else: _tmp = _utf8(str(_tmp))  # base.html:41
     56              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     57              _append(_tmp)  # base.html:41
     58              _append('</div>\n')  # base.html:42
     59          else:  # base.html:42
     60              _append('\n<div id="')  # base.html:43
     61              _tmp = message_type  # base.html:43
     62              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:43
     63              else: _tmp = _utf8(str(_tmp))  # base.html:43
     64              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:43
     65              _append(_tmp)  # base.html:43
     66              _append('-message" class="message alert alert-')  # base.html:43
     67              _tmp = message_type  # base.html:43
     68              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:43
     69              else: _tmp = _utf8(str(_tmp))  # base.html:43
     70              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:43
     71              _append(_tmp)  # base.html:43
     72              _append(' hide"></div>\n')  # base.html:44
     73          _append('\n')  # base.html:45
     74      _append('\n')  # base.html:47
     75      _append('\n<div id="main">\n')  # base.html:50
     76      _append('\n')  # additives.html:4 (via base.html:50)
     77      _append('<div class="box" id="additives">\n<div class="header">')  # partial/additives.html:2 (via additives.html:4, base.html:50)
     78      _tmp = additives_title  # partial/additives.html:2 (via additives.html:4, base.html:50)
     79      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:2 (via additives.html:4, base.html:50)
     80      else: _tmp = _utf8(str(_tmp))  # partial/additives.html:2 (via additives.html:4, base.html:50)
     81      _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:2 (via additives.html:4, base.html:50)
     82      _append(_tmp)  # partial/additives.html:2 (via additives.html:4, base.html:50)
     83      _append('</div>\n<div class="body main ul">\n')  # partial/additives.html:4 (via additives.html:4, base.html:50)
     84      for index, additive in enumerate(additives):  # partial/additives.html:4 (via additives.html:4, base.html:50)
     85          _append('\n')  # partial/additives.html:5 (via additives.html:4, base.html:50)
     86          creator = additive.creator  # partial/additives.html:5 (via additives.html:4, base.html:50)
     87          _append('\n<div class="additive-item">\n<div class="header">\n<a class="avatar" href="/user/')  # partial/additives.html:8 (via additives.html:4, base.html:50)
     88          _tmp = creator.username  # partial/additives.html:8 (via additives.html:4, base.html:50)
     89          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     90          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     91          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     92          _append(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     93          _append('"><img src="')  # partial/additives.html:8 (via additives.html:4, base.html:50)
     94          _tmp = get_avatar_url(creator, 's')  # partial/additives.html:8 (via additives.html:4, base.html:50)
     95          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     96          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     97          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     98          _append(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     99          _append('" /></a>')  # partial/additives.html:8 (via additives.html:4, base.html:50)
    100          _tmp = additive.name  # partial/additives.html:8 (via additives.html:4, base.html:50)
    101          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
    102          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
    103          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
    104          _append(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
    105          _append('\n</div>\n<div class="body">\n<div class="additive_alias">\xe5\x85\xb6\xe4\xbb\x96\xe5\x90\x8d\xe7\xa7\xb0:')  # partial/additives.html:11 (via additives.html:4, base.html:50)
    106          _tmp = additive.alias  # partial/additives.html:11 (via additives.html:4, base.html:50)
    107          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:11 (via additives.html:4, base.html:50)
    108          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:11 (via additives.html:4, base.html:50)
    109          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:11 (via additives.html:4, base.html:50)
    110          _append(_tmp)  # partial/additives.html:11 (via additives.html:4, base.html:50)
    111          _append('</div>\n<div class="additive_cns">CNS\xe5\x8f\xb7:')  # partial/additives.html:12 (via additives.html:4, base.html:50)
    112          _tmp = additive.cns  # partial/additives.html:12 (via additives.html:4, base.html:50)
    113          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:12 (via additives.html:4, base.html:50)
    114          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:12 (via additives.html:4, base.html:50)
    115          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:12 (via additives.html:4, base.html:50)
    116          _append(_tmp)  # partial/additives.html:12 (via additives.html:4, base.html:50)
    117          _append('</div>\n<div class="additive_ins">INS\xe5\x8f\xb7:')  # partial/additives.html:13 (via additives.html:4, base.html:50)
    118          _tmp = additive.ins  # partial/additives.html:13 (via additives.html:4, base.html:50)
    119          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:13 (via additives.html:4, base.html:50)
    120          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:13 (via additives.html:4, base.html:50)
    121          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:13 (via additives.html:4, base.html:50)
    122          _append(_tmp)  # partial/additives.html:13 (via additives.html:4, base.html:50)
    123          _append('</div>\n<div class="additive_effect">\xe5\x8a\x9f\xe8\x83\xbd:')  # partial/additives.html:14 (via additives.html:4, base.html:50)
    124          _tmp = additive.effect  # partial/additives.html:14 (via additives.html:4, base.html:50)
    125          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:14 (via additives.html:4, base.html:50)
    126          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:14 (via additives.html:4, base.html:50)
    127          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:14 (via additives.html:4, base.html:50)
    128          _append(_tmp)  # partial/additives.html:14 (via additives.html:4, base.html:50)
    129          _append('</div>\n</div>\n<div class="footer">\n<span class="meta">\n<ul>\n<li><i class="icon-view"></i> ')  # partial/additives.html:19 (via additives.html:4, base.html:50)
    130          _tmp = additive.views_count  # partial/additives.html:19 (via additives.html:4, base.html:50)
    131          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:19 (via additives.html:4, base.html:50)
    132          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:19 (via additives.html:4, base.html:50)
    133          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:19 (via additives.html:4, base.html:50)
    134          _append(_tmp)  # partial/additives.html:19 (via additives.html:4, base.html:50)
    135          _append('</li>\n</ul>\n</span>\n<span class="created">\n')  # partial/additives.html:23 (via additives.html:4, base.html:50)
    136          _tmp = timesince(additive.created)  # partial/additives.html:23 (via additives.html:4, base.html:50)
    137          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:23 (via additives.html:4, base.html:50)
    138          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:23 (via additives.html:4, base.html:50)
    139          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:23 (via additives.html:4, base.html:50)
    140          _append(_tmp)  # partial/additives.html:23 (via additives.html:4, base.html:50)
    141          _append('\n</span>\n</div>\n</div>\n')  # partial/additives.html:27 (via additives.html:4, base.html:50)
    142          _append('\n')  # partial/additives.html:28 (via additives.html:4, base.html:50)
    143          if index > 0 and (index + 1) % 3 == 0:  # partial/additives.html:28 (via additives.html:4, base.html:50)
    144              _append('\n<div class="clearfix"></div>\n')  # partial/additives.html:30 (via additives.html:4, base.html:50)
    145          _append('\n')  # partial/additives.html:32 (via additives.html:4, base.html:50)
    146      _append('\n')  # partial/additives.html:33 (via additives.html:4, base.html:50)
    147      page_type = 'additives'  # partial/additives.html:33 (via additives.html:4, base.html:50)
    148      _append('\n')  # partial/additives.html:34 (via additives.html:4, base.html:50)
    149      _append('\n')  # partial/pagination.html:3 (via partial/additives.html:34, additives.html:4, base.html:50)
    150      from macros.macro import ADDITIVES_PER_PAGE, USERS_PER_PAGE  # partial/pagination.html:3 (via partial/additives.html:34, additives.html:4, base.html:50)
    151      _append('\n')  # partial/pagination.html:4 (via partial/additives.html:34, additives.html:4, base.html:50)
    152      import math  # partial/pagination.html:4 (via partial/additives.html:34, additives.html:4, base.html:50)
    153      _append('\n')  # partial/pagination.html:6 (via partial/additives.html:34, additives.html:4, base.html:50)
    154      if page_type == 'additives':  # partial/pagination.html:6 (via partial/additives.html:34, additives.html:4, base.html:50)
    155          _append('\n')  # partial/pagination.html:7 (via partial/additives.html:34, additives.html:4, base.html:50)
    156          items_per_page = ADDITIVES_PER_PAGE  # partial/pagination.html:7 (via partial/additives.html:34, additives.html:4, base.html:50)
    157          _append('\n')  # partial/pagination.html:8 (via partial/additives.html:34, additives.html:4, base.html:50)
    158      else:  # partial/pagination.html:8 (via partial/additives.html:34, additives.html:4, base.html:50)
    159          _append('\n')  # partial/pagination.html:9 (via partial/additives.html:34, additives.html:4, base.html:50)
    160          items_per_page = USERS_PER_PAGE  # partial/pagination.html:9 (via partial/additives.html:34, additives.html:4, base.html:50)
    161          _append('\n')  # partial/pagination.html:10 (via partial/additives.html:34, additives.html:4, base.html:50)
    162      _append('\n')  # partial/pagination.html:12 (via partial/additives.html:34, additives.html:4, base.html:50)
    163      total_page = int(math.ceil(float(total_items) / items_per_page))  # partial/pagination.html:12 (via partial/additives.html:34, additives.html:4, base.html:50)
    164      _append('\n')  # partial/pagination.html:14 (via partial/additives.html:34, additives.html:4, base.html:50)
    165      current_page = int(handler.get_argument('page', 1))  # partial/pagination.html:14 (via partial/additives.html:34, additives.html:4, base.html:50)
    166      _append('\n')  # partial/pagination.html:16 (via partial/additives.html:34, additives.html:4, base.html:50)
    167      if current_page <=6:  # partial/pagination.html:16 (via partial/additives.html:34, additives.html:4, base.html:50)
    168          _append('\n')  # partial/pagination.html:17 (via partial/additives.html:34, additives.html:4, base.html:50)
    169          end_page = min(total_page, 10)  # partial/pagination.html:17 (via partial/additives.html:34, additives.html:4, base.html:50)
    170          _append('\n')  # partial/pagination.html:18 (via partial/additives.html:34, additives.html:4, base.html:50)
    171          start_page = 1  # partial/pagination.html:18 (via partial/additives.html:34, additives.html:4, base.html:50)
    172          _append('\n')  # partial/pagination.html:19 (via partial/additives.html:34, additives.html:4, base.html:50)
    173      else:  # partial/pagination.html:19 (via partial/additives.html:34, additives.html:4, base.html:50)
    174          _append('\n')  # partial/pagination.html:20 (via partial/additives.html:34, additives.html:4, base.html:50)
    175          end_page = min(total_page, current_page+4)  # partial/pagination.html:20 (via partial/additives.html:34, additives.html:4, base.html:50)
    176          _append('\n')  # partial/pagination.html:21 (via partial/additives.html:34, additives.html:4, base.html:50)
    177          start_page = current_page - 5  # partial/pagination.html:21 (via partial/additives.html:34, additives.html:4, base.html:50)
    178          _append('\n')  # partial/pagination.html:22 (via partial/additives.html:34, additives.html:4, base.html:50)
    179      _append('\n')  # partial/pagination.html:24 (via partial/additives.html:34, additives.html:4, base.html:50)
    180      if total_page > 1:  # partial/pagination.html:24 (via partial/additives.html:34, additives.html:4, base.html:50)
    181          _append('\n<div class="pagination">\n<ul>\n')  # partial/pagination.html:27 (via partial/additives.html:34, additives.html:4, base.html:50)
    182          if current_page == 1:  # partial/pagination.html:27 (via partial/additives.html:34, additives.html:4, base.html:50)
    183              _append('\n<li class="disabled">\xe2\x86\x90 </li>\n')  # partial/pagination.html:29 (via partial/additives.html:34, additives.html:4, base.html:50)
    184          else:  # partial/pagination.html:29 (via partial/additives.html:34, additives.html:4, base.html:50)
    185              _append('\n<li><a href="')  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    186              _tmp = page_path  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    187              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    188              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    189              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    190              _append(_tmp)  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    191              _append('?page=1">\xe2\x86\x90 </a></li>\n')  # partial/pagination.html:31 (via partial/additives.html:34, additives.html:4, base.html:50)
    192          _append('\n')  # partial/pagination.html:33 (via partial/additives.html:34, additives.html:4, base.html:50)
    193          for i in range(start_page, end_page + 1):  # partial/pagination.html:33 (via partial/additives.html:34, additives.html:4, base.html:50)
    194              _append('\n<li ')  # partial/pagination.html:34 (via partial/additives.html:34, additives.html:4, base.html:50)
    195              if current_page == i:  # partial/pagination.html:34 (via partial/additives.html:34, additives.html:4, base.html:50)
    196                  _append('class="active"')  # partial/pagination.html:34 (via partial/additives.html:34, additives.html:4, base.html:50)
    197              _append('>\n<a href="')  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    198              _tmp = page_path  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    199              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    200              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    201              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    202              _append(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    203              _append('?page=')  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    204              _tmp = i  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    205              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    206              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    207              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    208              _append(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    209              _append('">')  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    210              _tmp = i  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    211              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    212              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    213              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    214              _append(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    215              _append('</a>\n</li>\n')  # partial/pagination.html:37 (via partial/additives.html:34, additives.html:4, base.html:50)
    216          _append('\n')  # partial/pagination.html:39 (via partial/additives.html:34, additives.html:4, base.html:50)
    217          if current_page == total_page:  # partial/pagination.html:39 (via partial/additives.html:34, additives.html:4, base.html:50)
    218              _append('\n<li class="disabled">\xe2\x86\x92 </li>\n')  # partial/pagination.html:41 (via partial/additives.html:34, additives.html:4, base.html:50)
    219          else:  # partial/pagination.html:41 (via partial/additives.html:34, additives.html:4, base.html:50)
    220              _append('\n<li><a href="')  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    221              _tmp = page_path  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    222              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    223              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    224              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    225              _append(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    226              _append('?page=')  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    227              _tmp = current_page+1  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    228              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    229              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    230              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    231              _append(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    232              _append('">\xe2\x86\x92 </a></li>\n')  # partial/pagination.html:43 (via partial/additives.html:34, additives.html:4, base.html:50)
    233          _append('\n</ul>\n</div>\n')  # partial/pagination.html:46 (via partial/additives.html:34, additives.html:4, base.html:50)
    234      _append('\n')  # partial/pagination.html:47 (via partial/additives.html:34, additives.html:4, base.html:50)
    235      _append('\n</div>\n</div>\n')  # partial/additives.html:37 (via additives.html:4, base.html:50)
    236      _append('\n')  # additives.html:5 (via base.html:50)
    237      _append('\n</div>\n<div id="sidebar">\n')  # base.html:54
    238      _append('\n')  # additives.html:8 (via base.html:54)
    239      if current_user:  # partial/sidebar_global.html:1 (via additives.html:8, base.html:54)
    240          _append('\n')  # partial/sidebar_global.html:2 (via additives.html:8, base.html:54)
    241          _append('<div class="upload item ')  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    242          if not current_user.left_upload_count:  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    243              _append('disabled')  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    244          _append('" data-url="/photo/upload" data-title="\xe9\x87\x87\xe9\x9b\x86\xe7\x85\xa7\xe7\x89\x87" >\n<div class="left"></div>\n<div class="center">\n')  # partial/sidebar_upload.html:5 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    245          if current_user.left_upload_count:  # partial/sidebar_upload.html:5 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    246              _append('\n\xe9\x87\x87\xe9\x9b\x86\xe7\x85\xa7\xe7\x89\x87(\xe6\x9c\xac\xe5\x91\xa8\xe8\xbf\x98\xe5\x89\xa9')  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    247              _tmp = current_user.left_upload_count  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    248              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    249              else: _tmp = _utf8(str(_tmp))  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    250              _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    251              _append(_tmp)  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    252              _append('\xe5\xbc\xa0)\n')  # partial/sidebar_upload.html:7 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    253          else:  # partial/sidebar_upload.html:7 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    254              _append('\n\xe6\x9c\xac\xe5\x91\xa8\xe7\x9a\x84\xe9\x87\x87\xe9\x9b\x86\xe4\xbd\x99\xe9\xa2\x9d\xe5\xb7\xb2\xe7\x94\xa8\xe5\xae\x8c\xe4\xba\x86\n')  # partial/sidebar_upload.html:9 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    255          _append('\n</div>\n<div class="right"></div>\n</div>\n')  # partial/sidebar_upload.html:13 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    256          _append('\n')  # partial/sidebar_global.html:3 (via additives.html:8, base.html:54)
    257          _append('<div class="box" id="panel-me">\n<div class="header"><a class="right" href="/logout">\xe7\x99\xbb\xe5\x87\xba</a>\xe6\x88\x91\xe7\x9a\x84\xe4\xbf\xa1\xe6\x81\xaf</div>\n<div class="body">\n<div class="me">\n<a class="settings item" href="/settings" data-title="\xe8\xae\xbe\xe7\xbd\xae" data-url="/settings">\xe8\xae\xbe\xe7\xbd\xae</a>\n<a href="/user/')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    258          _tmp = current_user.username  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    259          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    260          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    261          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    262          _append(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    263          _append('"><img class="avatar" src="')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    264          _tmp = get_avatar_url(current_user, 's')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    265          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    266          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    267          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    268          _append(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    269          _append('" /></a>\n<a href="/user/')  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    270          _tmp = current_user.username  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    271          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    272          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    273          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    274          _append(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    275          _append('">')  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    276          _tmp = current_user.fullname  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    277          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    278          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    279          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    280          _append(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    281          _append('</a>\n<i class="level icon-level')  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    282          _tmp = current_user.level  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    283          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    284          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    285          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    286          _append(_tmp)  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    287          _append('"></i>\n</div>\n<div class="follow">\n<div class="following item" data-title="\xe6\x88\x91\xe5\x85\xb3\xe6\xb3\xa8\xe7\x9a\x84\xe4\xba\xba" data-url="/mine/following">\n<h3 class="anchor">')  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    288          _tmp = current_user.following_count  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    289          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    290          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    291          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    292          _append(_tmp)  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    293          _append('</h3>\n<span>following</span>\n</div>\n<div class="follower item" data-title="\xe5\x85\xb3\xe6\xb3\xa8\xe6\x88\x91\xe7\x9a\x84\xe4\xba\xba" data-url="/mine/follower">\n<h3 class="anchor">')  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    294          _tmp = current_user.follower_count  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    295          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    296          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    297          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    298          _append(_tmp)  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    299          _append('</h3>\n<span>followers</span>\n</div>\n</div>\n<ul>\n<li class="item" data-url="/mine/invite" data-title="\xe9\x82\x80\xe8\xaf\xb7\xe6\x9c\x8b\xe5\x8f\x8b\xe5\x8a\xa0\xe5\x85\xa5"> <span class="num">')  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    300          _tmp = current_user.unused_invite_key_count  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    301          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    302          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    303          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    304          _append(_tmp)  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    305          _append('</span><span class="anchor">\xe9\x82\x80\xe8\xaf\xb7\xe6\x9c\x8b\xe5\x8f\x8b\xe5\x8a\xa0\xe5\x85\xa5</span></li>\n<li class="item" data-title="\xe6\x88\x91\xe6\xb7\xbb\xe5\x8a\xa0\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87" data-url="/mine/photos"> <span class="num">')  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    306          _tmp = current_user.photo_count  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    307          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    308          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    309          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    310          _append(_tmp)  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    311          _append('</span><span class="anchor">\xe6\x88\x91\xe6\xb7\xbb\xe5\x8a\xa0\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87</span></li>\n<li class="item" data-title="\xe6\x88\x91\xe5\x96\x9c\xe6\xac\xa2\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87" data-url="/mine/likes_photos"><span class="num">')  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    312          _tmp = current_user.likes_count  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    313          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    314          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    315          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    316          _append(_tmp)  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    317          _append('</span><span class="anchor">\xe6\x88\x91\xe5\x96\x9c\xe6\xac\xa2\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87</span> </li>\n</ul>\n</div>\n</div>\n')  # partial/sidebar_me.html:27 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    318          _append('\n')  # partial/sidebar_global.html:4 (via additives.html:8, base.html:54)
    319      else:  # partial/sidebar_global.html:4 (via additives.html:8, base.html:54)
    320          _append('\n')  # partial/sidebar_global.html:5 (via additives.html:8, base.html:54)
    321          _append('<div class="box" id="panel-about">\n<div class="header">\xe5\x85\xb3\xe4\xba\x8e\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</div>\n<div class="body">\n<p>\xe5\x85\xb3\xe6\xb3\xa8\xe9\xa3\x9f\xe5\x93\x81\xe5\xae\x89\xe5\x85\xa8\xef\xbc\x8c\xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe4\xb8\x96\xe7\x95\x8c</p>\n<p>\xe6\x89\x80\xe6\x9c\x89\xe9\xa3\x9f\xe5\x93\x81\xe5\x92\x8c\xe6\xb7\xbb\xe5\x8a\xa0\xe5\x89\x82\xe8\xb5\x84\xe6\x96\x99\xe6\x9d\xa5\xe8\x87\xaa\xe4\xba\x8eiearth-\xe7\x88\xb1\xe5\x9c\xb0\xe7\x90\x83\xe7\x8e\xaf\xe4\xbf\x9d\xe6\x9c\xba\xe6\x9e\x84</p>\n</div>\n</div>\n')  # partial/sidebar_about.html:8 (via partial/sidebar_global.html:5, additives.html:8, base.html:54)
    322          _append('\n')  # partial/sidebar_global.html:6 (via additives.html:8, base.html:54)
    323          _append('<div class="box" id="panel-login">\n<div class="header">\xe7\x99\xbb\xe5\x85\xa5\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</div>\n<div class="body">\n<form action="/login" method="POST">\n<div class="section">\n<input type="TEXT" name="username" placeholder="\xe7\x94\xa8\xe6\x88\xb7\xe5\x90\x8d/Email" />\n</div>\n<div class="section">\n<input type="PASSWORD" name="password" placeholder="\xe5\xaf\x86\xe7\xa0\x81" />\n</div>\n<div class="section">\n<input type="SUBMIT" value="\xe7\x99\xbb\xe5\x85\xa5" class="btn primary-btn" />\n<span class="tip">\xe4\xbc\x9a\xe8\xae\xb0\xe4\xbd\x8f\xe7\x99\xbb\xe5\x85\xa5\xe4\xb8\x80\xe4\xb8\xaa\xe6\x9c\x88</span>\n</div>\n</form>\n<div class="alert alert-info">\xe5\x86\x85\xe6\xb5\x8b\xe4\xb8\xad\xef\xbc\x8c\xe5\x8f\xaa\xe6\x8e\xa5\xe5\x8f\x97\xe9\x82\x80\xe8\xaf\xb7\xe6\xb3\xa8\xe5\x86\x8c</div>\n</div>\n</div>\n')  # partial/sidebar_login.html:19 (via partial/sidebar_global.html:6, additives.html:8, base.html:54)
    324          _append('\n')  # partial/sidebar_global.html:8 (via additives.html:8, base.html:54)
    325      _append('\n')  # partial/sidebar_global.html:10 (via additives.html:8, base.html:54)
    326      _append('<div class="box">\n<div class="header">\xe6\xb5\x8f\xe8\xa7\x88\xe9\xa3\x9f\xe5\x93\x81</div>\n<div class="body">\n<ul>\n<li class="item" data-url="/photos/hot" data-title="\xe7\x83\xad\xe9\x97\xa8\xe9\xa3\x9f\xe5\x93\x81"><span class="anchor">\xe7\x83\xad\xe9\x97\xa8\xe9\xa3\x9f\xe5\x93\x81</span></li>\n<li class="item" data-url="/photos/latest" data-title="\xe6\x9c\x80\xe6\x96\xb0\xe9\xa3\x9f\xe5\x93\x81"><span class="anchor">\xe6\x9c\x80\xe6\x96\xb0\xe9\xa3\x9f\xe5\x93\x81</span></li>\n</ul>\n</div>\n</div>\n')  # partial/sidebar_photos_nav.html:10 (via partial/sidebar_global.html:10, additives.html:8, base.html:54)
    327      _append('\n')  # partial/sidebar_global.html:11 (via additives.html:8, base.html:54)
    328      import models  # partial/sidebar_tags.html:1 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    329      _append('\n')  # partial/sidebar_tags.html:2 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    330      hot_tags = models.Additive_Tag().hot_tags  # partial/sidebar_tags.html:2 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    331      _append('\n<div class="box" id="panel-tags">\n<div class="header">\xe7\x83\xad\xe9\x97\xa8\xe6\xb7\xbb\xe5\x8a\xa0\xe5\x89\x82</div>\n<div class="body">\n<ul>\n')  # partial/sidebar_tags.html:8 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    332      for tag in hot_tags:  # partial/sidebar_tags.html:8 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    333          _append('\n<li class="item" data-url="/tag/')  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    334          _tmp = tag  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    335          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    336          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    337          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    338          _append(_tmp)  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    339          _append('"><i class="icon-tag"></i><span class="anchor">')  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    340          _tmp = tag  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    341          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    342          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    343          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    344          _append(_tmp)  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    345          _append('</span></li>\n')  # partial/sidebar_tags.html:10 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    346      _append('\n</ul>\n</div>\n</div>\n')  # partial/sidebar_tags.html:14 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    347      _append('\n')  # partial/sidebar_global.html:12 (via additives.html:8, base.html:54)
    348      _append('\n')  # additives.html:9 (via base.html:54)
    349      _append('\n</div>\n</div>\n</div>\n<div id="footer">\n<div class="inner">\n<div class="right">\n<span class="belief">make the world a little better and easier</span>\n</div>\n<div class="left">\n<ul>\n<li><a href="/about">\xe5\x85\xb3\xe4\xba\x8e</a> <!--<span class="divider">/</span>--></li>\n<!--<li><a href="/feedback">\xe5\x8f\x8d\xe9\xa6\x88</a> <span class="divider">/</span></li>-->\n<!--<li><a href="/blog">\xe6\x97\xa5\xe5\xbf\x97</a></li>-->\n</ul>\n</div>\n</div>\n</div>\n<script type="text/javascript">\nvar _gaq = _gaq || [];\n_gaq.push([\'_setAccount\', \'UA-1281124-23\']);\n_gaq.push([\'_trackPageview\']);\n(function() {\nvar ga = document.createElement(\'script\'); ga.type = \'text/javascript\'; ga.async = true;\nga.src = (\'https:\' == document.location.protocol ? \'https://ssl\' : \'http://www\') + \'.google-analytics.com/ga.js\';\nvar s = document.getElementsByTagName(\'script\')[0]; s.parentNode.insertBefore(ga, s);\n})();\n</script>\n<!-- love your mom! -->\n</body>\n<meta name="description" content="\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - " />\n')  # base.html:89
    350      return _utf8('').join(_buffer)  # base.html:0
[E 120720 06:09:47 web:1031] Uncaught exception GET / (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.100', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cookie': '__utma=148685175.647871982.1342707625.1342707625.1342707625.1; __utmz=148685175.1342707625.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)', 'Cache-Control': 'max-age=0', 'X-Real-Ip': '192.168.0.100'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "src/sites/www/handlers/home.py", line 14, in get
        return self._render('hot')
      File "src/sites/www/handlers/base.py", line 87, in _render
        current_additive = additive,
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 474, in render
        html = self.render_string(template_name, **kwargs)
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 586, in render_string
        return t.generate(**args)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 253, in generate
        return execute()
      File "additives_html.generated.py", line 330, in _execute
        hot_tags = models.Additive_Tag().hot_tags  # partial/sidebar_tags.html:2 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    AttributeError: 'module' object has no attribute 'Additive_Tag'
[E 120720 06:09:47 web:1393] 500 GET / (127.0.0.1) 1960.84ms
[W 120720 06:09:47 web:1393] 404 GET /favicon.ico (127.0.0.1) 20.66ms
[E 120720 07:25:49 template:256] additives.html code:
      1  def _execute():  # base.html:0
      2      _buffer = []  # base.html:0
      3      _append = _buffer.append  # base.html:0
      4      _append('<!doctype html>\n<head>\n<meta charset="UTF-8" />\n<meta content="True" name="HandheldFriendly" />\n<meta content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0; name=\'viewport\'" />\n<title>\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - \xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81')  # base.html:6
      5      _append('</title>\n<link rel="stylesheet" type="text/css" media="screen" href="/static/css/vendor/jquery.fancybox.css" />\n<link rel="stylesheet" type="text/css" media="screen" href="/static/css/main.css" />\n<link rel="shortcut icon" href="/static/img/favicon.ico" />\n<link rel="canonical" href="http://wuditoo.com/" />\n<meta name="description" content="\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - \xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81" />\n<script src="/static/js/vendor/jquery.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.history.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.fancybox.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.scrollTo.min.js" type="text/javascript"></script>\n')  # base.html:16
      6      _append('\n<script type="text/javascript">\n')  # additives.html:13 (via base.html:16)
      7      if current_additive:  # additives.html:13 (via base.html:16)
      8          _append('\nmeta_additive = {\nurl: "/additive/')  # additives.html:15 (via base.html:16)
      9          _tmp = current_additive.id  # additives.html:15 (via base.html:16)
     10          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # additives.html:15 (via base.html:16)
     11          else: _tmp = _utf8(str(_tmp))  # additives.html:15 (via base.html:16)
     12          _tmp = _utf8(xhtml_escape(_tmp))  # additives.html:15 (via base.html:16)
     13          _append(_tmp)  # additives.html:15 (via base.html:16)
     14          _append('",\nwidth: ')  # additives.html:16 (via base.html:16)
     15          _tmp = current_additive.width  # additives.html:16 (via base.html:16)
     16          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # additives.html:16 (via base.html:16)
     17          else: _tmp = _utf8(str(_tmp))  # additives.html:16 (via base.html:16)
     18          _tmp = _utf8(xhtml_escape(_tmp))  # additives.html:16 (via base.html:16)
     19          _append(_tmp)  # additives.html:16 (via base.html:16)
     20          _append(',\nheight: ')  # additives.html:17 (via base.html:16)
     21          _tmp = current_additive.height  # additives.html:17 (via base.html:16)
     22          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # additives.html:17 (via base.html:16)
     23          else: _tmp = _utf8(str(_tmp))  # additives.html:17 (via base.html:16)
     24          _tmp = _utf8(xhtml_escape(_tmp))  # additives.html:17 (via base.html:16)
     25          _append(_tmp)  # additives.html:17 (via base.html:16)
     26          _append('\n}\n')  # additives.html:19 (via base.html:16)
     27      _append('\n</script>\n')  # additives.html:21 (via base.html:16)
     28      _append('\n<script src="/static/js/main.js" type="text/javascript"></script>\n</head>\n<!--[if IE 7 ]><body class="ie7"><![endif]-->\n<!--[if gt IE 7]><body class="ie"><![endif]-->\n<!--[if !IE]><body><![endif]-->\n<div id="header">\n<div class="inner">\n<div id="logo"><a href="/">\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</a></div>\n<div id="slogon">\xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81</div>\n<div id="witticism">')  # base.html:27
     29      _tmp = home_sentence()  # base.html:27
     30      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:27
     31      else: _tmp = _utf8(str(_tmp))  # base.html:27
     32      _tmp = _utf8(xhtml_escape(_tmp))  # base.html:27
     33      _append(_tmp)  # base.html:27
     34      _append('</div>\n<!--\n<ul class="nav-right">\n</ul>\n-->\n</div>\n</div>\n<div id="container">\n<div class="inner">\n<div class="message alert alert-warn">\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0\xe5\x86\xac\xe7\x9c\xa0\xe4\xb8\xad\xef\xbc\x8c\xe8\x8b\x8f\xe9\x86\x92\xe6\x97\xb6\xe9\x97\xb4\xe5\xbe\x85\xe5\xae\x9a\xe3\x80\x82\xe8\xb0\xa2\xe8\xb0\xa2\xe6\x82\xa8\xe7\x9a\x84\xe5\x88\xb0\xe8\xae\xbf\xef\xbc\x9a\xef\xbc\x89</div>\n')  # base.html:38
     35      message = get_message()  # base.html:38
     36      _append('\n')  # base.html:39
     37      for message_type in ('error', 'success', 'info', 'warn'):  # base.html:39
     38          _append('\n')  # base.html:40
     39          if message and message_type == message[0]:  # base.html:40
     40              _append('\n<div id="')  # base.html:41
     41              _tmp = message_type  # base.html:41
     42              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     43              else: _tmp = _utf8(str(_tmp))  # base.html:41
     44              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     45              _append(_tmp)  # base.html:41
     46              _append('-message" class="message alert alert-')  # base.html:41
     47              _tmp = message_type  # base.html:41
     48              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     49              else: _tmp = _utf8(str(_tmp))  # base.html:41
     50              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     51              _append(_tmp)  # base.html:41
     52              _append('">')  # base.html:41
     53              _tmp = message[1]  # base.html:41
     54              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     55              else: _tmp = _utf8(str(_tmp))  # base.html:41
     56              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     57              _append(_tmp)  # base.html:41
     58              _append('</div>\n')  # base.html:42
     59          else:  # base.html:42
     60              _append('\n<div id="')  # base.html:43
     61              _tmp = message_type  # base.html:43
     62              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:43
     63              else: _tmp = _utf8(str(_tmp))  # base.html:43
     64              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:43
     65              _append(_tmp)  # base.html:43
     66              _append('-message" class="message alert alert-')  # base.html:43
     67              _tmp = message_type  # base.html:43
     68              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:43
     69              else: _tmp = _utf8(str(_tmp))  # base.html:43
     70              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:43
     71              _append(_tmp)  # base.html:43
     72              _append(' hide"></div>\n')  # base.html:44
     73          _append('\n')  # base.html:45
     74      _append('\n')  # base.html:47
     75      _append('\n<div id="main">\n')  # base.html:50
     76      _append('\n')  # additives.html:4 (via base.html:50)
     77      _append('<div class="box" id="additives">\n<div class="header">')  # partial/additives.html:2 (via additives.html:4, base.html:50)
     78      _tmp = additives_title  # partial/additives.html:2 (via additives.html:4, base.html:50)
     79      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:2 (via additives.html:4, base.html:50)
     80      else: _tmp = _utf8(str(_tmp))  # partial/additives.html:2 (via additives.html:4, base.html:50)
     81      _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:2 (via additives.html:4, base.html:50)
     82      _append(_tmp)  # partial/additives.html:2 (via additives.html:4, base.html:50)
     83      _append('</div>\n<div class="body main ul">\n')  # partial/additives.html:4 (via additives.html:4, base.html:50)
     84      for index, additive in enumerate(additives):  # partial/additives.html:4 (via additives.html:4, base.html:50)
     85          _append('\n')  # partial/additives.html:5 (via additives.html:4, base.html:50)
     86          creator = additive.creator  # partial/additives.html:5 (via additives.html:4, base.html:50)
     87          _append('\n<div class="additive-item">\n<div class="header">\n<a class="avatar" href="/user/')  # partial/additives.html:8 (via additives.html:4, base.html:50)
     88          _tmp = creator.username  # partial/additives.html:8 (via additives.html:4, base.html:50)
     89          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     90          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     91          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     92          _append(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     93          _append('"><img src="')  # partial/additives.html:8 (via additives.html:4, base.html:50)
     94          _tmp = get_avatar_url(creator, 's')  # partial/additives.html:8 (via additives.html:4, base.html:50)
     95          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     96          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     97          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     98          _append(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     99          _append('" /></a>')  # partial/additives.html:8 (via additives.html:4, base.html:50)
    100          _tmp = additive.name  # partial/additives.html:8 (via additives.html:4, base.html:50)
    101          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
    102          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
    103          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
    104          _append(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
    105          _append('\n</div>\n<div class="body">\n<div class="additive_alias">\xe5\x85\xb6\xe4\xbb\x96\xe5\x90\x8d\xe7\xa7\xb0:')  # partial/additives.html:11 (via additives.html:4, base.html:50)
    106          _tmp = additive.alias  # partial/additives.html:11 (via additives.html:4, base.html:50)
    107          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:11 (via additives.html:4, base.html:50)
    108          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:11 (via additives.html:4, base.html:50)
    109          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:11 (via additives.html:4, base.html:50)
    110          _append(_tmp)  # partial/additives.html:11 (via additives.html:4, base.html:50)
    111          _append('</div>\n<div class="additive_cns">CNS\xe5\x8f\xb7:')  # partial/additives.html:12 (via additives.html:4, base.html:50)
    112          _tmp = additive.cns  # partial/additives.html:12 (via additives.html:4, base.html:50)
    113          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:12 (via additives.html:4, base.html:50)
    114          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:12 (via additives.html:4, base.html:50)
    115          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:12 (via additives.html:4, base.html:50)
    116          _append(_tmp)  # partial/additives.html:12 (via additives.html:4, base.html:50)
    117          _append('</div>\n<div class="additive_ins">INS\xe5\x8f\xb7:')  # partial/additives.html:13 (via additives.html:4, base.html:50)
    118          _tmp = additive.ins  # partial/additives.html:13 (via additives.html:4, base.html:50)
    119          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:13 (via additives.html:4, base.html:50)
    120          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:13 (via additives.html:4, base.html:50)
    121          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:13 (via additives.html:4, base.html:50)
    122          _append(_tmp)  # partial/additives.html:13 (via additives.html:4, base.html:50)
    123          _append('</div>\n<div class="additive_effect">\xe5\x8a\x9f\xe8\x83\xbd:')  # partial/additives.html:14 (via additives.html:4, base.html:50)
    124          _tmp = additive.effect  # partial/additives.html:14 (via additives.html:4, base.html:50)
    125          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:14 (via additives.html:4, base.html:50)
    126          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:14 (via additives.html:4, base.html:50)
    127          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:14 (via additives.html:4, base.html:50)
    128          _append(_tmp)  # partial/additives.html:14 (via additives.html:4, base.html:50)
    129          _append('</div>\n</div>\n<div class="footer">\n<span class="meta">\n<ul>\n<li><i class="icon-view"></i> ')  # partial/additives.html:19 (via additives.html:4, base.html:50)
    130          _tmp = additive.views_count  # partial/additives.html:19 (via additives.html:4, base.html:50)
    131          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:19 (via additives.html:4, base.html:50)
    132          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:19 (via additives.html:4, base.html:50)
    133          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:19 (via additives.html:4, base.html:50)
    134          _append(_tmp)  # partial/additives.html:19 (via additives.html:4, base.html:50)
    135          _append('</li>\n</ul>\n</span>\n<span class="created">\n')  # partial/additives.html:23 (via additives.html:4, base.html:50)
    136          _tmp = timesince(additive.created)  # partial/additives.html:23 (via additives.html:4, base.html:50)
    137          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:23 (via additives.html:4, base.html:50)
    138          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:23 (via additives.html:4, base.html:50)
    139          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:23 (via additives.html:4, base.html:50)
    140          _append(_tmp)  # partial/additives.html:23 (via additives.html:4, base.html:50)
    141          _append('\n</span>\n</div>\n</div>\n')  # partial/additives.html:27 (via additives.html:4, base.html:50)
    142          _append('\n')  # partial/additives.html:28 (via additives.html:4, base.html:50)
    143          if index > 0 and (index + 1) % 3 == 0:  # partial/additives.html:28 (via additives.html:4, base.html:50)
    144              _append('\n<div class="clearfix"></div>\n')  # partial/additives.html:30 (via additives.html:4, base.html:50)
    145          _append('\n')  # partial/additives.html:32 (via additives.html:4, base.html:50)
    146      _append('\n')  # partial/additives.html:33 (via additives.html:4, base.html:50)
    147      page_type = 'additives'  # partial/additives.html:33 (via additives.html:4, base.html:50)
    148      _append('\n')  # partial/additives.html:34 (via additives.html:4, base.html:50)
    149      _append('\n')  # partial/pagination.html:3 (via partial/additives.html:34, additives.html:4, base.html:50)
    150      from macros.macro import ADDITIVES_PER_PAGE, USERS_PER_PAGE  # partial/pagination.html:3 (via partial/additives.html:34, additives.html:4, base.html:50)
    151      _append('\n')  # partial/pagination.html:4 (via partial/additives.html:34, additives.html:4, base.html:50)
    152      import math  # partial/pagination.html:4 (via partial/additives.html:34, additives.html:4, base.html:50)
    153      _append('\n')  # partial/pagination.html:6 (via partial/additives.html:34, additives.html:4, base.html:50)
    154      if page_type == 'additives':  # partial/pagination.html:6 (via partial/additives.html:34, additives.html:4, base.html:50)
    155          _append('\n')  # partial/pagination.html:7 (via partial/additives.html:34, additives.html:4, base.html:50)
    156          items_per_page = ADDITIVES_PER_PAGE  # partial/pagination.html:7 (via partial/additives.html:34, additives.html:4, base.html:50)
    157          _append('\n')  # partial/pagination.html:8 (via partial/additives.html:34, additives.html:4, base.html:50)
    158      else:  # partial/pagination.html:8 (via partial/additives.html:34, additives.html:4, base.html:50)
    159          _append('\n')  # partial/pagination.html:9 (via partial/additives.html:34, additives.html:4, base.html:50)
    160          items_per_page = USERS_PER_PAGE  # partial/pagination.html:9 (via partial/additives.html:34, additives.html:4, base.html:50)
    161          _append('\n')  # partial/pagination.html:10 (via partial/additives.html:34, additives.html:4, base.html:50)
    162      _append('\n')  # partial/pagination.html:12 (via partial/additives.html:34, additives.html:4, base.html:50)
    163      total_page = int(math.ceil(float(total_items) / items_per_page))  # partial/pagination.html:12 (via partial/additives.html:34, additives.html:4, base.html:50)
    164      _append('\n')  # partial/pagination.html:14 (via partial/additives.html:34, additives.html:4, base.html:50)
    165      current_page = int(handler.get_argument('page', 1))  # partial/pagination.html:14 (via partial/additives.html:34, additives.html:4, base.html:50)
    166      _append('\n')  # partial/pagination.html:16 (via partial/additives.html:34, additives.html:4, base.html:50)
    167      if current_page <=6:  # partial/pagination.html:16 (via partial/additives.html:34, additives.html:4, base.html:50)
    168          _append('\n')  # partial/pagination.html:17 (via partial/additives.html:34, additives.html:4, base.html:50)
    169          end_page = min(total_page, 10)  # partial/pagination.html:17 (via partial/additives.html:34, additives.html:4, base.html:50)
    170          _append('\n')  # partial/pagination.html:18 (via partial/additives.html:34, additives.html:4, base.html:50)
    171          start_page = 1  # partial/pagination.html:18 (via partial/additives.html:34, additives.html:4, base.html:50)
    172          _append('\n')  # partial/pagination.html:19 (via partial/additives.html:34, additives.html:4, base.html:50)
    173      else:  # partial/pagination.html:19 (via partial/additives.html:34, additives.html:4, base.html:50)
    174          _append('\n')  # partial/pagination.html:20 (via partial/additives.html:34, additives.html:4, base.html:50)
    175          end_page = min(total_page, current_page+4)  # partial/pagination.html:20 (via partial/additives.html:34, additives.html:4, base.html:50)
    176          _append('\n')  # partial/pagination.html:21 (via partial/additives.html:34, additives.html:4, base.html:50)
    177          start_page = current_page - 5  # partial/pagination.html:21 (via partial/additives.html:34, additives.html:4, base.html:50)
    178          _append('\n')  # partial/pagination.html:22 (via partial/additives.html:34, additives.html:4, base.html:50)
    179      _append('\n')  # partial/pagination.html:24 (via partial/additives.html:34, additives.html:4, base.html:50)
    180      if total_page > 1:  # partial/pagination.html:24 (via partial/additives.html:34, additives.html:4, base.html:50)
    181          _append('\n<div class="pagination">\n<ul>\n')  # partial/pagination.html:27 (via partial/additives.html:34, additives.html:4, base.html:50)
    182          if current_page == 1:  # partial/pagination.html:27 (via partial/additives.html:34, additives.html:4, base.html:50)
    183              _append('\n<li class="disabled">\xe2\x86\x90 </li>\n')  # partial/pagination.html:29 (via partial/additives.html:34, additives.html:4, base.html:50)
    184          else:  # partial/pagination.html:29 (via partial/additives.html:34, additives.html:4, base.html:50)
    185              _append('\n<li><a href="')  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    186              _tmp = page_path  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    187              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    188              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    189              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    190              _append(_tmp)  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    191              _append('?page=1">\xe2\x86\x90 </a></li>\n')  # partial/pagination.html:31 (via partial/additives.html:34, additives.html:4, base.html:50)
    192          _append('\n')  # partial/pagination.html:33 (via partial/additives.html:34, additives.html:4, base.html:50)
    193          for i in range(start_page, end_page + 1):  # partial/pagination.html:33 (via partial/additives.html:34, additives.html:4, base.html:50)
    194              _append('\n<li ')  # partial/pagination.html:34 (via partial/additives.html:34, additives.html:4, base.html:50)
    195              if current_page == i:  # partial/pagination.html:34 (via partial/additives.html:34, additives.html:4, base.html:50)
    196                  _append('class="active"')  # partial/pagination.html:34 (via partial/additives.html:34, additives.html:4, base.html:50)
    197              _append('>\n<a href="')  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    198              _tmp = page_path  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    199              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    200              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    201              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    202              _append(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    203              _append('?page=')  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    204              _tmp = i  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    205              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    206              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    207              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    208              _append(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    209              _append('">')  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    210              _tmp = i  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    211              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    212              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    213              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    214              _append(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    215              _append('</a>\n</li>\n')  # partial/pagination.html:37 (via partial/additives.html:34, additives.html:4, base.html:50)
    216          _append('\n')  # partial/pagination.html:39 (via partial/additives.html:34, additives.html:4, base.html:50)
    217          if current_page == total_page:  # partial/pagination.html:39 (via partial/additives.html:34, additives.html:4, base.html:50)
    218              _append('\n<li class="disabled">\xe2\x86\x92 </li>\n')  # partial/pagination.html:41 (via partial/additives.html:34, additives.html:4, base.html:50)
    219          else:  # partial/pagination.html:41 (via partial/additives.html:34, additives.html:4, base.html:50)
    220              _append('\n<li><a href="')  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    221              _tmp = page_path  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    222              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    223              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    224              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    225              _append(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    226              _append('?page=')  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    227              _tmp = current_page+1  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    228              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    229              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    230              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    231              _append(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    232              _append('">\xe2\x86\x92 </a></li>\n')  # partial/pagination.html:43 (via partial/additives.html:34, additives.html:4, base.html:50)
    233          _append('\n</ul>\n</div>\n')  # partial/pagination.html:46 (via partial/additives.html:34, additives.html:4, base.html:50)
    234      _append('\n')  # partial/pagination.html:47 (via partial/additives.html:34, additives.html:4, base.html:50)
    235      _append('\n</div>\n</div>\n')  # partial/additives.html:37 (via additives.html:4, base.html:50)
    236      _append('\n')  # additives.html:5 (via base.html:50)
    237      _append('\n</div>\n<div id="sidebar">\n')  # base.html:54
    238      _append('\n')  # additives.html:8 (via base.html:54)
    239      if current_user:  # partial/sidebar_global.html:1 (via additives.html:8, base.html:54)
    240          _append('\n')  # partial/sidebar_global.html:2 (via additives.html:8, base.html:54)
    241          _append('<div class="upload item ')  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    242          if not current_user.left_upload_count:  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    243              _append('disabled')  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    244          _append('" data-url="/photo/upload" data-title="\xe9\x87\x87\xe9\x9b\x86\xe7\x85\xa7\xe7\x89\x87" >\n<div class="left"></div>\n<div class="center">\n')  # partial/sidebar_upload.html:5 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    245          if current_user.left_upload_count:  # partial/sidebar_upload.html:5 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    246              _append('\n\xe9\x87\x87\xe9\x9b\x86\xe7\x85\xa7\xe7\x89\x87(\xe6\x9c\xac\xe5\x91\xa8\xe8\xbf\x98\xe5\x89\xa9')  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    247              _tmp = current_user.left_upload_count  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    248              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    249              else: _tmp = _utf8(str(_tmp))  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    250              _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    251              _append(_tmp)  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    252              _append('\xe5\xbc\xa0)\n')  # partial/sidebar_upload.html:7 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    253          else:  # partial/sidebar_upload.html:7 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    254              _append('\n\xe6\x9c\xac\xe5\x91\xa8\xe7\x9a\x84\xe9\x87\x87\xe9\x9b\x86\xe4\xbd\x99\xe9\xa2\x9d\xe5\xb7\xb2\xe7\x94\xa8\xe5\xae\x8c\xe4\xba\x86\n')  # partial/sidebar_upload.html:9 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    255          _append('\n</div>\n<div class="right"></div>\n</div>\n')  # partial/sidebar_upload.html:13 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    256          _append('\n')  # partial/sidebar_global.html:3 (via additives.html:8, base.html:54)
    257          _append('<div class="box" id="panel-me">\n<div class="header"><a class="right" href="/logout">\xe7\x99\xbb\xe5\x87\xba</a>\xe6\x88\x91\xe7\x9a\x84\xe4\xbf\xa1\xe6\x81\xaf</div>\n<div class="body">\n<div class="me">\n<a class="settings item" href="/settings" data-title="\xe8\xae\xbe\xe7\xbd\xae" data-url="/settings">\xe8\xae\xbe\xe7\xbd\xae</a>\n<a href="/user/')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    258          _tmp = current_user.username  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    259          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    260          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    261          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    262          _append(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    263          _append('"><img class="avatar" src="')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    264          _tmp = get_avatar_url(current_user, 's')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    265          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    266          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    267          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    268          _append(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    269          _append('" /></a>\n<a href="/user/')  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    270          _tmp = current_user.username  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    271          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    272          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    273          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    274          _append(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    275          _append('">')  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    276          _tmp = current_user.fullname  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    277          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    278          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    279          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    280          _append(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    281          _append('</a>\n<i class="level icon-level')  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    282          _tmp = current_user.level  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    283          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    284          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    285          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    286          _append(_tmp)  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    287          _append('"></i>\n</div>\n<div class="follow">\n<div class="following item" data-title="\xe6\x88\x91\xe5\x85\xb3\xe6\xb3\xa8\xe7\x9a\x84\xe4\xba\xba" data-url="/mine/following">\n<h3 class="anchor">')  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    288          _tmp = current_user.following_count  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    289          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    290          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    291          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    292          _append(_tmp)  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    293          _append('</h3>\n<span>following</span>\n</div>\n<div class="follower item" data-title="\xe5\x85\xb3\xe6\xb3\xa8\xe6\x88\x91\xe7\x9a\x84\xe4\xba\xba" data-url="/mine/follower">\n<h3 class="anchor">')  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    294          _tmp = current_user.follower_count  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    295          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    296          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    297          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    298          _append(_tmp)  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    299          _append('</h3>\n<span>followers</span>\n</div>\n</div>\n<ul>\n<li class="item" data-url="/mine/invite" data-title="\xe9\x82\x80\xe8\xaf\xb7\xe6\x9c\x8b\xe5\x8f\x8b\xe5\x8a\xa0\xe5\x85\xa5"> <span class="num">')  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    300          _tmp = current_user.unused_invite_key_count  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    301          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    302          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    303          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    304          _append(_tmp)  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    305          _append('</span><span class="anchor">\xe9\x82\x80\xe8\xaf\xb7\xe6\x9c\x8b\xe5\x8f\x8b\xe5\x8a\xa0\xe5\x85\xa5</span></li>\n<li class="item" data-title="\xe6\x88\x91\xe6\xb7\xbb\xe5\x8a\xa0\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87" data-url="/mine/photos"> <span class="num">')  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    306          _tmp = current_user.photo_count  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    307          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    308          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    309          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    310          _append(_tmp)  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    311          _append('</span><span class="anchor">\xe6\x88\x91\xe6\xb7\xbb\xe5\x8a\xa0\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87</span></li>\n<li class="item" data-title="\xe6\x88\x91\xe5\x96\x9c\xe6\xac\xa2\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87" data-url="/mine/likes_photos"><span class="num">')  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    312          _tmp = current_user.likes_count  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    313          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    314          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    315          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    316          _append(_tmp)  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    317          _append('</span><span class="anchor">\xe6\x88\x91\xe5\x96\x9c\xe6\xac\xa2\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87</span> </li>\n</ul>\n</div>\n</div>\n')  # partial/sidebar_me.html:27 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    318          _append('\n')  # partial/sidebar_global.html:4 (via additives.html:8, base.html:54)
    319      else:  # partial/sidebar_global.html:4 (via additives.html:8, base.html:54)
    320          _append('\n')  # partial/sidebar_global.html:5 (via additives.html:8, base.html:54)
    321          _append('<div class="box" id="panel-about">\n<div class="header">\xe5\x85\xb3\xe4\xba\x8e\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</div>\n<div class="body">\n<p>\xe5\x85\xb3\xe6\xb3\xa8\xe9\xa3\x9f\xe5\x93\x81\xe5\xae\x89\xe5\x85\xa8\xef\xbc\x8c\xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe4\xb8\x96\xe7\x95\x8c</p>\n<p>\xe6\x89\x80\xe6\x9c\x89\xe9\xa3\x9f\xe5\x93\x81\xe5\x92\x8c\xe6\xb7\xbb\xe5\x8a\xa0\xe5\x89\x82\xe8\xb5\x84\xe6\x96\x99\xe6\x9d\xa5\xe8\x87\xaa\xe4\xba\x8eiearth-\xe7\x88\xb1\xe5\x9c\xb0\xe7\x90\x83\xe7\x8e\xaf\xe4\xbf\x9d\xe6\x9c\xba\xe6\x9e\x84</p>\n</div>\n</div>\n')  # partial/sidebar_about.html:8 (via partial/sidebar_global.html:5, additives.html:8, base.html:54)
    322          _append('\n')  # partial/sidebar_global.html:6 (via additives.html:8, base.html:54)
    323          _append('<div class="box" id="panel-login">\n<div class="header">\xe7\x99\xbb\xe5\x85\xa5\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</div>\n<div class="body">\n<form action="/login" method="POST">\n<div class="section">\n<input type="TEXT" name="username" placeholder="\xe7\x94\xa8\xe6\x88\xb7\xe5\x90\x8d/Email" />\n</div>\n<div class="section">\n<input type="PASSWORD" name="password" placeholder="\xe5\xaf\x86\xe7\xa0\x81" />\n</div>\n<div class="section">\n<input type="SUBMIT" value="\xe7\x99\xbb\xe5\x85\xa5" class="btn primary-btn" />\n<span class="tip">\xe4\xbc\x9a\xe8\xae\xb0\xe4\xbd\x8f\xe7\x99\xbb\xe5\x85\xa5\xe4\xb8\x80\xe4\xb8\xaa\xe6\x9c\x88</span>\n</div>\n</form>\n<div class="alert alert-info">\xe5\x86\x85\xe6\xb5\x8b\xe4\xb8\xad\xef\xbc\x8c\xe5\x8f\xaa\xe6\x8e\xa5\xe5\x8f\x97\xe9\x82\x80\xe8\xaf\xb7\xe6\xb3\xa8\xe5\x86\x8c</div>\n</div>\n</div>\n')  # partial/sidebar_login.html:19 (via partial/sidebar_global.html:6, additives.html:8, base.html:54)
    324          _append('\n')  # partial/sidebar_global.html:8 (via additives.html:8, base.html:54)
    325      _append('\n')  # partial/sidebar_global.html:10 (via additives.html:8, base.html:54)
    326      _append('<div class="box">\n<div class="header">\xe6\xb5\x8f\xe8\xa7\x88\xe9\xa3\x9f\xe5\x93\x81</div>\n<div class="body">\n<ul>\n<li class="item" data-url="/photos/hot" data-title="\xe7\x83\xad\xe9\x97\xa8\xe9\xa3\x9f\xe5\x93\x81"><span class="anchor">\xe7\x83\xad\xe9\x97\xa8\xe9\xa3\x9f\xe5\x93\x81</span></li>\n<li class="item" data-url="/photos/latest" data-title="\xe6\x9c\x80\xe6\x96\xb0\xe9\xa3\x9f\xe5\x93\x81"><span class="anchor">\xe6\x9c\x80\xe6\x96\xb0\xe9\xa3\x9f\xe5\x93\x81</span></li>\n</ul>\n</div>\n</div>\n')  # partial/sidebar_photos_nav.html:10 (via partial/sidebar_global.html:10, additives.html:8, base.html:54)
    327      _append('\n')  # partial/sidebar_global.html:11 (via additives.html:8, base.html:54)
    328      import models  # partial/sidebar_tags.html:1 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    329      _append('\n')  # partial/sidebar_tags.html:2 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    330      hot_tags = models.Additive_Tag().hot_tags  # partial/sidebar_tags.html:2 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    331      _append('\n<div class="box" id="panel-tags">\n<div class="header">\xe7\x83\xad\xe9\x97\xa8\xe6\x90\x9c\xe7\xb4\xa2</div>\n<div class="body">\n<ul>\n')  # partial/sidebar_tags.html:8 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    332      for tag in hot_tags:  # partial/sidebar_tags.html:8 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    333          _append('\n<li class="item" data-url="/tag/')  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    334          _tmp = tag  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    335          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    336          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    337          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    338          _append(_tmp)  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    339          _append('"><i class="icon-tag"></i><span class="anchor">')  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    340          _tmp = tag  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    341          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    342          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    343          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    344          _append(_tmp)  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    345          _append('</span></li>\n')  # partial/sidebar_tags.html:10 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    346      _append('\n</ul>\n</div>\n</div>\n')  # partial/sidebar_tags.html:14 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    347      _append('\n')  # partial/sidebar_global.html:12 (via additives.html:8, base.html:54)
    348      _append('\n')  # additives.html:9 (via base.html:54)
    349      _append('\n</div>\n</div>\n</div>\n<div id="footer">\n<div class="inner">\n<div class="right">\n<span class="belief">make the world a little better and easier</span>\n</div>\n<div class="left">\n<ul>\n<li><a href="/about">\xe5\x85\xb3\xe4\xba\x8e</a> <!--<span class="divider">/</span>--></li>\n<!--<li><a href="/feedback">\xe5\x8f\x8d\xe9\xa6\x88</a> <span class="divider">/</span></li>-->\n<!--<li><a href="/blog">\xe6\x97\xa5\xe5\xbf\x97</a></li>-->\n</ul>\n</div>\n</div>\n</div>\n<script type="text/javascript">\nvar _gaq = _gaq || [];\n_gaq.push([\'_setAccount\', \'UA-1281124-23\']);\n_gaq.push([\'_trackPageview\']);\n(function() {\nvar ga = document.createElement(\'script\'); ga.type = \'text/javascript\'; ga.async = true;\nga.src = (\'https:\' == document.location.protocol ? \'https://ssl\' : \'http://www\') + \'.google-analytics.com/ga.js\';\nvar s = document.getElementsByTagName(\'script\')[0]; s.parentNode.insertBefore(ga, s);\n})();\n</script>\n<!-- love your mom! -->\n</body>\n<meta name="description" content="\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - " />\n')  # base.html:89
    350      return _utf8('').join(_buffer)  # base.html:0
[E 120720 07:25:49 web:1031] Uncaught exception GET / (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.100', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cookie': '__utma=148685175.647871982.1342707625.1342707625.1342707625.1; __utmz=148685175.1342707625.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)', 'Cache-Control': 'max-age=0', 'X-Real-Ip': '192.168.0.100'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "src/sites/www/handlers/home.py", line 14, in get
        return self._render('hot')
      File "src/sites/www/handlers/base.py", line 87, in _render
        current_additive = additive,
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 474, in render
        html = self.render_string(template_name, **kwargs)
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 586, in render_string
        return t.generate(**args)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 253, in generate
        return execute()
      File "additives_html.generated.py", line 86, in _execute
        creator = additive.creator  # partial/additives.html:5 (via additives.html:4, base.html:50)
      File "/home/dk/work/python/safood/src/common/models/additive.py", line 60, in creator
        return models.User().find(self.user_id)
      File "/home/dk/work/python/safood/src/thing/thing/thing.py", line 140, in __init__
        self._init_env()
      File "/home/dk/work/python/safood/src/thing/thing/thing.py", line 156, in _init_env
        self._selected_fields = [self.table]
      File "/home/dk/work/python/safood/src/thing/thing/thing.py", line 378, in table
        Thing._table_schemas[self._tablename] = Table(self._tablename, MetaData(), autoload = True, autoload_with = conn)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/schema.py", line 314, in __new__
        table._init(name, metadata, *args, **kw)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/schema.py", line 377, in _init
        self._autoload(metadata, autoload_with, include_columns)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/schema.py", line 393, in _autoload
        self, include_columns, exclude_columns
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py", line 1968, in run_callable
        return callable_(self, *args, **kwargs)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/default.py", line 260, in reflecttable
        return insp.reflecttable(table, include_columns, exclude_columns)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/reflection.py", line 350, in reflecttable
        tbl_opts = self.get_table_options(table_name, schema, **table.kwargs)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/reflection.py", line 178, in get_table_options
        **kw)
      File "<string>", line 1, in <lambda>
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/reflection.py", line 47, in cache
        ret = fn(self, con, *args, **kw)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/dialects/mysql/base.py", line 2039, in get_table_options
        parsed_state = self._parsed_state_or_create(connection, table_name, schema, **kw)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/dialects/mysql/base.py", line 2138, in _parsed_state_or_create
        info_cache=kw.get('info_cache', None)
      File "<string>", line 1, in <lambda>
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/reflection.py", line 47, in cache
        ret = fn(self, con, *args, **kw)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/dialects/mysql/base.py", line 2163, in _setup_parser
        full_name=full_name)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/dialects/mysql/base.py", line 2250, in _show_create_table
        raise exc.NoSuchTableError(full_name)
    NoSuchTableError: `user`
[E 120720 07:25:49 web:1393] 500 GET / (127.0.0.1) 1513.11ms
[W 120720 07:25:50 web:1393] 404 GET /favicon.ico (127.0.0.1) 4.33ms
[E 120720 08:57:25 template:256] additives.html code:
      1  def _execute():  # base.html:0
      2      _buffer = []  # base.html:0
      3      _append = _buffer.append  # base.html:0
      4      _append('<!doctype html>\n<head>\n<meta charset="UTF-8" />\n<meta content="True" name="HandheldFriendly" />\n<meta content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0; name=\'viewport\'" />\n<title>\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - \xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81')  # base.html:6
      5      _append('</title>\n<link rel="stylesheet" type="text/css" media="screen" href="/static/css/vendor/jquery.fancybox.css" />\n<link rel="stylesheet" type="text/css" media="screen" href="/static/css/main.css" />\n<link rel="shortcut icon" href="/static/img/favicon.ico" />\n<link rel="canonical" href="http://wuditoo.com/" />\n<meta name="description" content="\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - \xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81" />\n<script src="/static/js/vendor/jquery.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.history.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.fancybox.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.scrollTo.min.js" type="text/javascript"></script>\n')  # base.html:16
      6      _append('\n<script type="text/javascript">\n')  # additives.html:13 (via base.html:16)
      7      if current_additive:  # additives.html:13 (via base.html:16)
      8          _append('\nmeta_additive = {\nurl: "/additive/')  # additives.html:15 (via base.html:16)
      9          _tmp = current_additive.id  # additives.html:15 (via base.html:16)
     10          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # additives.html:15 (via base.html:16)
     11          else: _tmp = _utf8(str(_tmp))  # additives.html:15 (via base.html:16)
     12          _tmp = _utf8(xhtml_escape(_tmp))  # additives.html:15 (via base.html:16)
     13          _append(_tmp)  # additives.html:15 (via base.html:16)
     14          _append('",\nwidth: ')  # additives.html:16 (via base.html:16)
     15          _tmp = current_additive.width  # additives.html:16 (via base.html:16)
     16          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # additives.html:16 (via base.html:16)
     17          else: _tmp = _utf8(str(_tmp))  # additives.html:16 (via base.html:16)
     18          _tmp = _utf8(xhtml_escape(_tmp))  # additives.html:16 (via base.html:16)
     19          _append(_tmp)  # additives.html:16 (via base.html:16)
     20          _append(',\nheight: ')  # additives.html:17 (via base.html:16)
     21          _tmp = current_additive.height  # additives.html:17 (via base.html:16)
     22          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # additives.html:17 (via base.html:16)
     23          else: _tmp = _utf8(str(_tmp))  # additives.html:17 (via base.html:16)
     24          _tmp = _utf8(xhtml_escape(_tmp))  # additives.html:17 (via base.html:16)
     25          _append(_tmp)  # additives.html:17 (via base.html:16)
     26          _append('\n}\n')  # additives.html:19 (via base.html:16)
     27      _append('\n</script>\n')  # additives.html:21 (via base.html:16)
     28      _append('\n<script src="/static/js/main.js" type="text/javascript"></script>\n</head>\n<!--[if IE 7 ]><body class="ie7"><![endif]-->\n<!--[if gt IE 7]><body class="ie"><![endif]-->\n<!--[if !IE]><body><![endif]-->\n<div id="header">\n<div class="inner">\n<div id="logo"><a href="/">\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</a></div>\n<div id="slogon">\xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81</div>\n<div id="witticism">')  # base.html:27
     29      _tmp = home_sentence()  # base.html:27
     30      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:27
     31      else: _tmp = _utf8(str(_tmp))  # base.html:27
     32      _tmp = _utf8(xhtml_escape(_tmp))  # base.html:27
     33      _append(_tmp)  # base.html:27
     34      _append('</div>\n<!--\n<ul class="nav-right">\n</ul>\n-->\n</div>\n</div>\n<div id="container">\n<div class="inner">\n<div class="message alert alert-warn">\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0\xe5\x86\xac\xe7\x9c\xa0\xe4\xb8\xad\xef\xbc\x8c\xe8\x8b\x8f\xe9\x86\x92\xe6\x97\xb6\xe9\x97\xb4\xe5\xbe\x85\xe5\xae\x9a\xe3\x80\x82\xe8\xb0\xa2\xe8\xb0\xa2\xe6\x82\xa8\xe7\x9a\x84\xe5\x88\xb0\xe8\xae\xbf\xef\xbc\x9a\xef\xbc\x89</div>\n')  # base.html:38
     35      message = get_message()  # base.html:38
     36      _append('\n')  # base.html:39
     37      for message_type in ('error', 'success', 'info', 'warn'):  # base.html:39
     38          _append('\n')  # base.html:40
     39          if message and message_type == message[0]:  # base.html:40
     40              _append('\n<div id="')  # base.html:41
     41              _tmp = message_type  # base.html:41
     42              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     43              else: _tmp = _utf8(str(_tmp))  # base.html:41
     44              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     45              _append(_tmp)  # base.html:41
     46              _append('-message" class="message alert alert-')  # base.html:41
     47              _tmp = message_type  # base.html:41
     48              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     49              else: _tmp = _utf8(str(_tmp))  # base.html:41
     50              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     51              _append(_tmp)  # base.html:41
     52              _append('">')  # base.html:41
     53              _tmp = message[1]  # base.html:41
     54              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     55              else: _tmp = _utf8(str(_tmp))  # base.html:41
     56              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     57              _append(_tmp)  # base.html:41
     58              _append('</div>\n')  # base.html:42
     59          else:  # base.html:42
     60              _append('\n<div id="')  # base.html:43
     61              _tmp = message_type  # base.html:43
     62              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:43
     63              else: _tmp = _utf8(str(_tmp))  # base.html:43
     64              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:43
     65              _append(_tmp)  # base.html:43
     66              _append('-message" class="message alert alert-')  # base.html:43
     67              _tmp = message_type  # base.html:43
     68              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:43
     69              else: _tmp = _utf8(str(_tmp))  # base.html:43
     70              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:43
     71              _append(_tmp)  # base.html:43
     72              _append(' hide"></div>\n')  # base.html:44
     73          _append('\n')  # base.html:45
     74      _append('\n')  # base.html:47
     75      _append('\n<div id="main">\n')  # base.html:50
     76      _append('\n')  # additives.html:4 (via base.html:50)
     77      _append('<div class="box" id="additives">\n<div class="header">')  # partial/additives.html:2 (via additives.html:4, base.html:50)
     78      _tmp = additives_title  # partial/additives.html:2 (via additives.html:4, base.html:50)
     79      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:2 (via additives.html:4, base.html:50)
     80      else: _tmp = _utf8(str(_tmp))  # partial/additives.html:2 (via additives.html:4, base.html:50)
     81      _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:2 (via additives.html:4, base.html:50)
     82      _append(_tmp)  # partial/additives.html:2 (via additives.html:4, base.html:50)
     83      _append('</div>\n<div class="body main ul">\n')  # partial/additives.html:4 (via additives.html:4, base.html:50)
     84      for index, additive in enumerate(additives):  # partial/additives.html:4 (via additives.html:4, base.html:50)
     85          _append('\n')  # partial/additives.html:5 (via additives.html:4, base.html:50)
     86          creator = additive.creator  # partial/additives.html:5 (via additives.html:4, base.html:50)
     87          _append('\n<div class="additive-item">\n<div class="header">\n<a class="avatar" href="/user/')  # partial/additives.html:8 (via additives.html:4, base.html:50)
     88          _tmp = creator.username  # partial/additives.html:8 (via additives.html:4, base.html:50)
     89          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     90          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     91          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     92          _append(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     93          _append('"><img src="')  # partial/additives.html:8 (via additives.html:4, base.html:50)
     94          _tmp = get_avatar_url(creator, 's')  # partial/additives.html:8 (via additives.html:4, base.html:50)
     95          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     96          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     97          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     98          _append(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     99          _append('" /></a>')  # partial/additives.html:8 (via additives.html:4, base.html:50)
    100          _tmp = additive.name  # partial/additives.html:8 (via additives.html:4, base.html:50)
    101          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
    102          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
    103          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
    104          _append(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
    105          _append('\n</div>\n<div class="body">\n<div class="additive_alias">\xe5\x85\xb6\xe4\xbb\x96\xe5\x90\x8d\xe7\xa7\xb0:')  # partial/additives.html:11 (via additives.html:4, base.html:50)
    106          _tmp = additive.alias  # partial/additives.html:11 (via additives.html:4, base.html:50)
    107          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:11 (via additives.html:4, base.html:50)
    108          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:11 (via additives.html:4, base.html:50)
    109          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:11 (via additives.html:4, base.html:50)
    110          _append(_tmp)  # partial/additives.html:11 (via additives.html:4, base.html:50)
    111          _append('</div>\n<div class="additive_cns">CNS\xe5\x8f\xb7:')  # partial/additives.html:12 (via additives.html:4, base.html:50)
    112          _tmp = additive.cns  # partial/additives.html:12 (via additives.html:4, base.html:50)
    113          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:12 (via additives.html:4, base.html:50)
    114          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:12 (via additives.html:4, base.html:50)
    115          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:12 (via additives.html:4, base.html:50)
    116          _append(_tmp)  # partial/additives.html:12 (via additives.html:4, base.html:50)
    117          _append('</div>\n<div class="additive_ins">INS\xe5\x8f\xb7:')  # partial/additives.html:13 (via additives.html:4, base.html:50)
    118          _tmp = additive.ins  # partial/additives.html:13 (via additives.html:4, base.html:50)
    119          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:13 (via additives.html:4, base.html:50)
    120          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:13 (via additives.html:4, base.html:50)
    121          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:13 (via additives.html:4, base.html:50)
    122          _append(_tmp)  # partial/additives.html:13 (via additives.html:4, base.html:50)
    123          _append('</div>\n<div class="additive_effect">\xe5\x8a\x9f\xe8\x83\xbd:')  # partial/additives.html:14 (via additives.html:4, base.html:50)
    124          _tmp = additive.effect  # partial/additives.html:14 (via additives.html:4, base.html:50)
    125          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:14 (via additives.html:4, base.html:50)
    126          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:14 (via additives.html:4, base.html:50)
    127          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:14 (via additives.html:4, base.html:50)
    128          _append(_tmp)  # partial/additives.html:14 (via additives.html:4, base.html:50)
    129          _append('</div>\n</div>\n<div class="footer">\n<span class="meta">\n<ul>\n<li><i class="icon-view"></i> ')  # partial/additives.html:19 (via additives.html:4, base.html:50)
    130          _tmp = additive.views_count  # partial/additives.html:19 (via additives.html:4, base.html:50)
    131          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:19 (via additives.html:4, base.html:50)
    132          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:19 (via additives.html:4, base.html:50)
    133          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:19 (via additives.html:4, base.html:50)
    134          _append(_tmp)  # partial/additives.html:19 (via additives.html:4, base.html:50)
    135          _append('</li>\n</ul>\n</span>\n<span class="created">\n')  # partial/additives.html:23 (via additives.html:4, base.html:50)
    136          _tmp = timesince(additive.created)  # partial/additives.html:23 (via additives.html:4, base.html:50)
    137          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:23 (via additives.html:4, base.html:50)
    138          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:23 (via additives.html:4, base.html:50)
    139          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:23 (via additives.html:4, base.html:50)
    140          _append(_tmp)  # partial/additives.html:23 (via additives.html:4, base.html:50)
    141          _append('\n</span>\n</div>\n</div>\n')  # partial/additives.html:27 (via additives.html:4, base.html:50)
    142          _append('\n')  # partial/additives.html:28 (via additives.html:4, base.html:50)
    143          if index > 0 and (index + 1) % 3 == 0:  # partial/additives.html:28 (via additives.html:4, base.html:50)
    144              _append('\n<div class="clearfix"></div>\n')  # partial/additives.html:30 (via additives.html:4, base.html:50)
    145          _append('\n')  # partial/additives.html:32 (via additives.html:4, base.html:50)
    146      _append('\n')  # partial/additives.html:33 (via additives.html:4, base.html:50)
    147      page_type = 'additives'  # partial/additives.html:33 (via additives.html:4, base.html:50)
    148      _append('\n')  # partial/additives.html:34 (via additives.html:4, base.html:50)
    149      _append('\n')  # partial/pagination.html:3 (via partial/additives.html:34, additives.html:4, base.html:50)
    150      from macros.macro import ADDITIVES_PER_PAGE, USERS_PER_PAGE  # partial/pagination.html:3 (via partial/additives.html:34, additives.html:4, base.html:50)
    151      _append('\n')  # partial/pagination.html:4 (via partial/additives.html:34, additives.html:4, base.html:50)
    152      import math  # partial/pagination.html:4 (via partial/additives.html:34, additives.html:4, base.html:50)
    153      _append('\n')  # partial/pagination.html:6 (via partial/additives.html:34, additives.html:4, base.html:50)
    154      if page_type == 'additives':  # partial/pagination.html:6 (via partial/additives.html:34, additives.html:4, base.html:50)
    155          _append('\n')  # partial/pagination.html:7 (via partial/additives.html:34, additives.html:4, base.html:50)
    156          items_per_page = ADDITIVES_PER_PAGE  # partial/pagination.html:7 (via partial/additives.html:34, additives.html:4, base.html:50)
    157          _append('\n')  # partial/pagination.html:8 (via partial/additives.html:34, additives.html:4, base.html:50)
    158      else:  # partial/pagination.html:8 (via partial/additives.html:34, additives.html:4, base.html:50)
    159          _append('\n')  # partial/pagination.html:9 (via partial/additives.html:34, additives.html:4, base.html:50)
    160          items_per_page = USERS_PER_PAGE  # partial/pagination.html:9 (via partial/additives.html:34, additives.html:4, base.html:50)
    161          _append('\n')  # partial/pagination.html:10 (via partial/additives.html:34, additives.html:4, base.html:50)
    162      _append('\n')  # partial/pagination.html:12 (via partial/additives.html:34, additives.html:4, base.html:50)
    163      total_page = int(math.ceil(float(total_items) / items_per_page))  # partial/pagination.html:12 (via partial/additives.html:34, additives.html:4, base.html:50)
    164      _append('\n')  # partial/pagination.html:14 (via partial/additives.html:34, additives.html:4, base.html:50)
    165      current_page = int(handler.get_argument('page', 1))  # partial/pagination.html:14 (via partial/additives.html:34, additives.html:4, base.html:50)
    166      _append('\n')  # partial/pagination.html:16 (via partial/additives.html:34, additives.html:4, base.html:50)
    167      if current_page <=6:  # partial/pagination.html:16 (via partial/additives.html:34, additives.html:4, base.html:50)
    168          _append('\n')  # partial/pagination.html:17 (via partial/additives.html:34, additives.html:4, base.html:50)
    169          end_page = min(total_page, 10)  # partial/pagination.html:17 (via partial/additives.html:34, additives.html:4, base.html:50)
    170          _append('\n')  # partial/pagination.html:18 (via partial/additives.html:34, additives.html:4, base.html:50)
    171          start_page = 1  # partial/pagination.html:18 (via partial/additives.html:34, additives.html:4, base.html:50)
    172          _append('\n')  # partial/pagination.html:19 (via partial/additives.html:34, additives.html:4, base.html:50)
    173      else:  # partial/pagination.html:19 (via partial/additives.html:34, additives.html:4, base.html:50)
    174          _append('\n')  # partial/pagination.html:20 (via partial/additives.html:34, additives.html:4, base.html:50)
    175          end_page = min(total_page, current_page+4)  # partial/pagination.html:20 (via partial/additives.html:34, additives.html:4, base.html:50)
    176          _append('\n')  # partial/pagination.html:21 (via partial/additives.html:34, additives.html:4, base.html:50)
    177          start_page = current_page - 5  # partial/pagination.html:21 (via partial/additives.html:34, additives.html:4, base.html:50)
    178          _append('\n')  # partial/pagination.html:22 (via partial/additives.html:34, additives.html:4, base.html:50)
    179      _append('\n')  # partial/pagination.html:24 (via partial/additives.html:34, additives.html:4, base.html:50)
    180      if total_page > 1:  # partial/pagination.html:24 (via partial/additives.html:34, additives.html:4, base.html:50)
    181          _append('\n<div class="pagination">\n<ul>\n')  # partial/pagination.html:27 (via partial/additives.html:34, additives.html:4, base.html:50)
    182          if current_page == 1:  # partial/pagination.html:27 (via partial/additives.html:34, additives.html:4, base.html:50)
    183              _append('\n<li class="disabled">\xe2\x86\x90 </li>\n')  # partial/pagination.html:29 (via partial/additives.html:34, additives.html:4, base.html:50)
    184          else:  # partial/pagination.html:29 (via partial/additives.html:34, additives.html:4, base.html:50)
    185              _append('\n<li><a href="')  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    186              _tmp = page_path  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    187              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    188              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    189              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    190              _append(_tmp)  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    191              _append('?page=1">\xe2\x86\x90 </a></li>\n')  # partial/pagination.html:31 (via partial/additives.html:34, additives.html:4, base.html:50)
    192          _append('\n')  # partial/pagination.html:33 (via partial/additives.html:34, additives.html:4, base.html:50)
    193          for i in range(start_page, end_page + 1):  # partial/pagination.html:33 (via partial/additives.html:34, additives.html:4, base.html:50)
    194              _append('\n<li ')  # partial/pagination.html:34 (via partial/additives.html:34, additives.html:4, base.html:50)
    195              if current_page == i:  # partial/pagination.html:34 (via partial/additives.html:34, additives.html:4, base.html:50)
    196                  _append('class="active"')  # partial/pagination.html:34 (via partial/additives.html:34, additives.html:4, base.html:50)
    197              _append('>\n<a href="')  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    198              _tmp = page_path  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    199              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    200              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    201              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    202              _append(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    203              _append('?page=')  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    204              _tmp = i  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    205              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    206              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    207              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    208              _append(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    209              _append('">')  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    210              _tmp = i  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    211              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    212              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    213              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    214              _append(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    215              _append('</a>\n</li>\n')  # partial/pagination.html:37 (via partial/additives.html:34, additives.html:4, base.html:50)
    216          _append('\n')  # partial/pagination.html:39 (via partial/additives.html:34, additives.html:4, base.html:50)
    217          if current_page == total_page:  # partial/pagination.html:39 (via partial/additives.html:34, additives.html:4, base.html:50)
    218              _append('\n<li class="disabled">\xe2\x86\x92 </li>\n')  # partial/pagination.html:41 (via partial/additives.html:34, additives.html:4, base.html:50)
    219          else:  # partial/pagination.html:41 (via partial/additives.html:34, additives.html:4, base.html:50)
    220              _append('\n<li><a href="')  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    221              _tmp = page_path  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    222              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    223              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    224              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    225              _append(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    226              _append('?page=')  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    227              _tmp = current_page+1  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    228              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    229              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    230              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    231              _append(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    232              _append('">\xe2\x86\x92 </a></li>\n')  # partial/pagination.html:43 (via partial/additives.html:34, additives.html:4, base.html:50)
    233          _append('\n</ul>\n</div>\n')  # partial/pagination.html:46 (via partial/additives.html:34, additives.html:4, base.html:50)
    234      _append('\n')  # partial/pagination.html:47 (via partial/additives.html:34, additives.html:4, base.html:50)
    235      _append('\n</div>\n</div>\n')  # partial/additives.html:37 (via additives.html:4, base.html:50)
    236      _append('\n')  # additives.html:5 (via base.html:50)
    237      _append('\n</div>\n<div id="sidebar">\n')  # base.html:54
    238      _append('\n')  # additives.html:8 (via base.html:54)
    239      if current_user:  # partial/sidebar_global.html:1 (via additives.html:8, base.html:54)
    240          _append('\n')  # partial/sidebar_global.html:2 (via additives.html:8, base.html:54)
    241          _append('<div class="upload item ')  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    242          if not current_user.left_upload_count:  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    243              _append('disabled')  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    244          _append('" data-url="/photo/upload" data-title="\xe9\x87\x87\xe9\x9b\x86\xe7\x85\xa7\xe7\x89\x87" >\n<div class="left"></div>\n<div class="center">\n')  # partial/sidebar_upload.html:5 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    245          if current_user.left_upload_count:  # partial/sidebar_upload.html:5 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    246              _append('\n\xe9\x87\x87\xe9\x9b\x86\xe7\x85\xa7\xe7\x89\x87(\xe6\x9c\xac\xe5\x91\xa8\xe8\xbf\x98\xe5\x89\xa9')  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    247              _tmp = current_user.left_upload_count  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    248              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    249              else: _tmp = _utf8(str(_tmp))  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    250              _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    251              _append(_tmp)  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    252              _append('\xe5\xbc\xa0)\n')  # partial/sidebar_upload.html:7 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    253          else:  # partial/sidebar_upload.html:7 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    254              _append('\n\xe6\x9c\xac\xe5\x91\xa8\xe7\x9a\x84\xe9\x87\x87\xe9\x9b\x86\xe4\xbd\x99\xe9\xa2\x9d\xe5\xb7\xb2\xe7\x94\xa8\xe5\xae\x8c\xe4\xba\x86\n')  # partial/sidebar_upload.html:9 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    255          _append('\n</div>\n<div class="right"></div>\n</div>\n')  # partial/sidebar_upload.html:13 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    256          _append('\n')  # partial/sidebar_global.html:3 (via additives.html:8, base.html:54)
    257          _append('<div class="box" id="panel-me">\n<div class="header"><a class="right" href="/logout">\xe7\x99\xbb\xe5\x87\xba</a>\xe6\x88\x91\xe7\x9a\x84\xe4\xbf\xa1\xe6\x81\xaf</div>\n<div class="body">\n<div class="me">\n<a class="settings item" href="/settings" data-title="\xe8\xae\xbe\xe7\xbd\xae" data-url="/settings">\xe8\xae\xbe\xe7\xbd\xae</a>\n<a href="/user/')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    258          _tmp = current_user.username  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    259          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    260          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    261          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    262          _append(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    263          _append('"><img class="avatar" src="')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    264          _tmp = get_avatar_url(current_user, 's')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    265          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    266          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    267          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    268          _append(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    269          _append('" /></a>\n<a href="/user/')  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    270          _tmp = current_user.username  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    271          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    272          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    273          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    274          _append(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    275          _append('">')  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    276          _tmp = current_user.fullname  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    277          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    278          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    279          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    280          _append(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    281          _append('</a>\n<i class="level icon-level')  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    282          _tmp = current_user.level  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    283          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    284          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    285          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    286          _append(_tmp)  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    287          _append('"></i>\n</div>\n<div class="follow">\n<div class="following item" data-title="\xe6\x88\x91\xe5\x85\xb3\xe6\xb3\xa8\xe7\x9a\x84\xe4\xba\xba" data-url="/mine/following">\n<h3 class="anchor">')  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    288          _tmp = current_user.following_count  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    289          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    290          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    291          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    292          _append(_tmp)  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    293          _append('</h3>\n<span>following</span>\n</div>\n<div class="follower item" data-title="\xe5\x85\xb3\xe6\xb3\xa8\xe6\x88\x91\xe7\x9a\x84\xe4\xba\xba" data-url="/mine/follower">\n<h3 class="anchor">')  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    294          _tmp = current_user.follower_count  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    295          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    296          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    297          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    298          _append(_tmp)  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    299          _append('</h3>\n<span>followers</span>\n</div>\n</div>\n<ul>\n<li class="item" data-url="/mine/invite" data-title="\xe9\x82\x80\xe8\xaf\xb7\xe6\x9c\x8b\xe5\x8f\x8b\xe5\x8a\xa0\xe5\x85\xa5"> <span class="num">')  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    300          _tmp = current_user.unused_invite_key_count  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    301          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    302          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    303          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    304          _append(_tmp)  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    305          _append('</span><span class="anchor">\xe9\x82\x80\xe8\xaf\xb7\xe6\x9c\x8b\xe5\x8f\x8b\xe5\x8a\xa0\xe5\x85\xa5</span></li>\n<li class="item" data-title="\xe6\x88\x91\xe6\xb7\xbb\xe5\x8a\xa0\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87" data-url="/mine/photos"> <span class="num">')  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    306          _tmp = current_user.photo_count  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    307          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    308          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    309          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    310          _append(_tmp)  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    311          _append('</span><span class="anchor">\xe6\x88\x91\xe6\xb7\xbb\xe5\x8a\xa0\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87</span></li>\n<li class="item" data-title="\xe6\x88\x91\xe5\x96\x9c\xe6\xac\xa2\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87" data-url="/mine/likes_photos"><span class="num">')  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    312          _tmp = current_user.likes_count  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    313          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    314          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    315          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    316          _append(_tmp)  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    317          _append('</span><span class="anchor">\xe6\x88\x91\xe5\x96\x9c\xe6\xac\xa2\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87</span> </li>\n</ul>\n</div>\n</div>\n')  # partial/sidebar_me.html:27 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    318          _append('\n')  # partial/sidebar_global.html:4 (via additives.html:8, base.html:54)
    319      else:  # partial/sidebar_global.html:4 (via additives.html:8, base.html:54)
    320          _append('\n')  # partial/sidebar_global.html:5 (via additives.html:8, base.html:54)
    321          _append('<div class="box" id="panel-about">\n<div class="header">\xe5\x85\xb3\xe4\xba\x8e\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</div>\n<div class="body">\n<p>\xe5\x85\xb3\xe6\xb3\xa8\xe9\xa3\x9f\xe5\x93\x81\xe5\xae\x89\xe5\x85\xa8\xef\xbc\x8c\xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe4\xb8\x96\xe7\x95\x8c</p>\n<p>\xe6\x89\x80\xe6\x9c\x89\xe9\xa3\x9f\xe5\x93\x81\xe5\x92\x8c\xe6\xb7\xbb\xe5\x8a\xa0\xe5\x89\x82\xe8\xb5\x84\xe6\x96\x99\xe6\x9d\xa5\xe8\x87\xaa\xe4\xba\x8eiearth-\xe7\x88\xb1\xe5\x9c\xb0\xe7\x90\x83\xe7\x8e\xaf\xe4\xbf\x9d\xe6\x9c\xba\xe6\x9e\x84</p>\n</div>\n</div>\n')  # partial/sidebar_about.html:8 (via partial/sidebar_global.html:5, additives.html:8, base.html:54)
    322          _append('\n')  # partial/sidebar_global.html:6 (via additives.html:8, base.html:54)
    323          _append('<div class="box" id="panel-login">\n<div class="header">\xe7\x99\xbb\xe5\x85\xa5\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</div>\n<div class="body">\n<form action="/login" method="POST">\n<div class="section">\n<input type="TEXT" name="username" placeholder="\xe7\x94\xa8\xe6\x88\xb7\xe5\x90\x8d/Email" />\n</div>\n<div class="section">\n<input type="PASSWORD" name="password" placeholder="\xe5\xaf\x86\xe7\xa0\x81" />\n</div>\n<div class="section">\n<input type="SUBMIT" value="\xe7\x99\xbb\xe5\x85\xa5" class="btn primary-btn" />\n<span class="tip">\xe4\xbc\x9a\xe8\xae\xb0\xe4\xbd\x8f\xe7\x99\xbb\xe5\x85\xa5\xe4\xb8\x80\xe4\xb8\xaa\xe6\x9c\x88</span>\n</div>\n</form>\n<div class="alert alert-info">\xe5\x86\x85\xe6\xb5\x8b\xe4\xb8\xad\xef\xbc\x8c\xe5\x8f\xaa\xe6\x8e\xa5\xe5\x8f\x97\xe9\x82\x80\xe8\xaf\xb7\xe6\xb3\xa8\xe5\x86\x8c</div>\n</div>\n</div>\n')  # partial/sidebar_login.html:19 (via partial/sidebar_global.html:6, additives.html:8, base.html:54)
    324          _append('\n')  # partial/sidebar_global.html:8 (via additives.html:8, base.html:54)
    325      _append('\n')  # partial/sidebar_global.html:10 (via additives.html:8, base.html:54)
    326      _append('<div class="box">\n<div class="header">\xe6\xb5\x8f\xe8\xa7\x88\xe9\xa3\x9f\xe5\x93\x81</div>\n<div class="body">\n<ul>\n<li class="item" data-url="/photos/hot" data-title="\xe7\x83\xad\xe9\x97\xa8\xe9\xa3\x9f\xe5\x93\x81"><span class="anchor">\xe7\x83\xad\xe9\x97\xa8\xe9\xa3\x9f\xe5\x93\x81</span></li>\n<li class="item" data-url="/photos/latest" data-title="\xe6\x9c\x80\xe6\x96\xb0\xe9\xa3\x9f\xe5\x93\x81"><span class="anchor">\xe6\x9c\x80\xe6\x96\xb0\xe9\xa3\x9f\xe5\x93\x81</span></li>\n</ul>\n</div>\n</div>\n')  # partial/sidebar_photos_nav.html:10 (via partial/sidebar_global.html:10, additives.html:8, base.html:54)
    327      _append('\n')  # partial/sidebar_global.html:11 (via additives.html:8, base.html:54)
    328      import models  # partial/sidebar_tags.html:1 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    329      _append('\n')  # partial/sidebar_tags.html:2 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    330      hot_tags = models.Additive_Tag().hot_tags  # partial/sidebar_tags.html:2 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    331      _append('\n<div class="box" id="panel-tags">\n<div class="header">\xe7\x83\xad\xe9\x97\xa8\xe6\x90\x9c\xe7\xb4\xa2</div>\n<div class="body">\n<ul>\n')  # partial/sidebar_tags.html:8 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    332      for tag in hot_tags:  # partial/sidebar_tags.html:8 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    333          _append('\n<li class="item" data-url="/tag/')  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    334          _tmp = tag  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    335          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    336          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    337          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    338          _append(_tmp)  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    339          _append('"><i class="icon-tag"></i><span class="anchor">')  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    340          _tmp = tag  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    341          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    342          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    343          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    344          _append(_tmp)  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    345          _append('</span></li>\n')  # partial/sidebar_tags.html:10 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    346      _append('\n</ul>\n</div>\n</div>\n')  # partial/sidebar_tags.html:14 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    347      _append('\n')  # partial/sidebar_global.html:12 (via additives.html:8, base.html:54)
    348      _append('\n')  # additives.html:9 (via base.html:54)
    349      _append('\n</div>\n</div>\n</div>\n<div id="footer">\n<div class="inner">\n<div class="right">\n<span class="belief">make the world a little better and easier</span>\n</div>\n<div class="left">\n<ul>\n<li><a href="/about">\xe5\x85\xb3\xe4\xba\x8e</a> <!--<span class="divider">/</span>--></li>\n<!--<li><a href="/feedback">\xe5\x8f\x8d\xe9\xa6\x88</a> <span class="divider">/</span></li>-->\n<!--<li><a href="/blog">\xe6\x97\xa5\xe5\xbf\x97</a></li>-->\n</ul>\n</div>\n</div>\n</div>\n<script type="text/javascript">\nvar _gaq = _gaq || [];\n_gaq.push([\'_setAccount\', \'UA-1281124-23\']);\n_gaq.push([\'_trackPageview\']);\n(function() {\nvar ga = document.createElement(\'script\'); ga.type = \'text/javascript\'; ga.async = true;\nga.src = (\'https:\' == document.location.protocol ? \'https://ssl\' : \'http://www\') + \'.google-analytics.com/ga.js\';\nvar s = document.getElementsByTagName(\'script\')[0]; s.parentNode.insertBefore(ga, s);\n})();\n</script>\n<!-- love your mom! -->\n</body>\n<meta name="description" content="\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - " />\n')  # base.html:89
    350      return _utf8('').join(_buffer)  # base.html:0
[E 120720 08:57:25 web:1031] Uncaught exception GET / (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.100', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cookie': '__utma=148685175.647871982.1342707625.1342707625.1342707625.1; __utmz=148685175.1342707625.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)', 'Cache-Control': 'max-age=0', 'X-Real-Ip': '192.168.0.100'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "src/sites/www/handlers/home.py", line 14, in get
        return self._render('hot')
      File "src/sites/www/handlers/base.py", line 87, in _render
        current_additive = additive,
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 474, in render
        html = self.render_string(template_name, **kwargs)
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 586, in render_string
        return t.generate(**args)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 253, in generate
        return execute()
      File "additives_html.generated.py", line 86, in _execute
        creator = additive.creator  # partial/additives.html:5 (via additives.html:4, base.html:50)
      File "/home/dk/work/python/safood/src/common/models/additive.py", line 60, in creator
        return models.User().find(self.user_id)
      File "/home/dk/work/python/safood/src/thing/thing/thing.py", line 215, in __getattr__
        raise ThingException('key:{key} not found'.format(key = key))
    ThingException: key:user_id not found
[E 120720 08:57:25 web:1393] 500 GET / (127.0.0.1) 1378.27ms
[W 120720 08:57:25 web:1393] 404 GET /favicon.ico (127.0.0.1) 5.42ms
[E 120720 09:40:48 template:256] additives.html code:
      1  def _execute():  # base.html:0
      2      _buffer = []  # base.html:0
      3      _append = _buffer.append  # base.html:0
      4      _append('<!doctype html>\n<head>\n<meta charset="UTF-8" />\n<meta content="True" name="HandheldFriendly" />\n<meta content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0; name=\'viewport\'" />\n<title>\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - \xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81')  # base.html:6
      5      _append('</title>\n<link rel="stylesheet" type="text/css" media="screen" href="/static/css/vendor/jquery.fancybox.css" />\n<link rel="stylesheet" type="text/css" media="screen" href="/static/css/main.css" />\n<link rel="shortcut icon" href="/static/img/favicon.ico" />\n<link rel="canonical" href="http://wuditoo.com/" />\n<meta name="description" content="\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - \xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81" />\n<script src="/static/js/vendor/jquery.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.history.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.fancybox.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.scrollTo.min.js" type="text/javascript"></script>\n')  # base.html:16
      6      _append('\n<script type="text/javascript">\n')  # additives.html:13 (via base.html:16)
      7      if current_additive:  # additives.html:13 (via base.html:16)
      8          _append('\nmeta_additive = {\nurl: "/additive/')  # additives.html:15 (via base.html:16)
      9          _tmp = current_additive.id  # additives.html:15 (via base.html:16)
     10          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # additives.html:15 (via base.html:16)
     11          else: _tmp = _utf8(str(_tmp))  # additives.html:15 (via base.html:16)
     12          _tmp = _utf8(xhtml_escape(_tmp))  # additives.html:15 (via base.html:16)
     13          _append(_tmp)  # additives.html:15 (via base.html:16)
     14          _append('",\nwidth: ')  # additives.html:16 (via base.html:16)
     15          _tmp = current_additive.width  # additives.html:16 (via base.html:16)
     16          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # additives.html:16 (via base.html:16)
     17          else: _tmp = _utf8(str(_tmp))  # additives.html:16 (via base.html:16)
     18          _tmp = _utf8(xhtml_escape(_tmp))  # additives.html:16 (via base.html:16)
     19          _append(_tmp)  # additives.html:16 (via base.html:16)
     20          _append(',\nheight: ')  # additives.html:17 (via base.html:16)
     21          _tmp = current_additive.height  # additives.html:17 (via base.html:16)
     22          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # additives.html:17 (via base.html:16)
     23          else: _tmp = _utf8(str(_tmp))  # additives.html:17 (via base.html:16)
     24          _tmp = _utf8(xhtml_escape(_tmp))  # additives.html:17 (via base.html:16)
     25          _append(_tmp)  # additives.html:17 (via base.html:16)
     26          _append('\n}\n')  # additives.html:19 (via base.html:16)
     27      _append('\n</script>\n')  # additives.html:21 (via base.html:16)
     28      _append('\n<script src="/static/js/main.js" type="text/javascript"></script>\n</head>\n<!--[if IE 7 ]><body class="ie7"><![endif]-->\n<!--[if gt IE 7]><body class="ie"><![endif]-->\n<!--[if !IE]><body><![endif]-->\n<div id="header">\n<div class="inner">\n<div id="logo"><a href="/">\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</a></div>\n<div id="slogon">\xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81</div>\n<div id="witticism">')  # base.html:27
     29      _tmp = home_sentence()  # base.html:27
     30      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:27
     31      else: _tmp = _utf8(str(_tmp))  # base.html:27
     32      _tmp = _utf8(xhtml_escape(_tmp))  # base.html:27
     33      _append(_tmp)  # base.html:27
     34      _append('</div>\n<!--\n<ul class="nav-right">\n</ul>\n-->\n</div>\n</div>\n<div id="container">\n<div class="inner">\n<div class="message alert alert-warn">\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0\xe5\x86\xac\xe7\x9c\xa0\xe4\xb8\xad\xef\xbc\x8c\xe8\x8b\x8f\xe9\x86\x92\xe6\x97\xb6\xe9\x97\xb4\xe5\xbe\x85\xe5\xae\x9a\xe3\x80\x82\xe8\xb0\xa2\xe8\xb0\xa2\xe6\x82\xa8\xe7\x9a\x84\xe5\x88\xb0\xe8\xae\xbf\xef\xbc\x9a\xef\xbc\x89</div>\n')  # base.html:38
     35      message = get_message()  # base.html:38
     36      _append('\n')  # base.html:39
     37      for message_type in ('error', 'success', 'info', 'warn'):  # base.html:39
     38          _append('\n')  # base.html:40
     39          if message and message_type == message[0]:  # base.html:40
     40              _append('\n<div id="')  # base.html:41
     41              _tmp = message_type  # base.html:41
     42              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     43              else: _tmp = _utf8(str(_tmp))  # base.html:41
     44              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     45              _append(_tmp)  # base.html:41
     46              _append('-message" class="message alert alert-')  # base.html:41
     47              _tmp = message_type  # base.html:41
     48              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     49              else: _tmp = _utf8(str(_tmp))  # base.html:41
     50              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     51              _append(_tmp)  # base.html:41
     52              _append('">')  # base.html:41
     53              _tmp = message[1]  # base.html:41
     54              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     55              else: _tmp = _utf8(str(_tmp))  # base.html:41
     56              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     57              _append(_tmp)  # base.html:41
     58              _append('</div>\n')  # base.html:42
     59          else:  # base.html:42
     60              _append('\n<div id="')  # base.html:43
     61              _tmp = message_type  # base.html:43
     62              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:43
     63              else: _tmp = _utf8(str(_tmp))  # base.html:43
     64              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:43
     65              _append(_tmp)  # base.html:43
     66              _append('-message" class="message alert alert-')  # base.html:43
     67              _tmp = message_type  # base.html:43
     68              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:43
     69              else: _tmp = _utf8(str(_tmp))  # base.html:43
     70              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:43
     71              _append(_tmp)  # base.html:43
     72              _append(' hide"></div>\n')  # base.html:44
     73          _append('\n')  # base.html:45
     74      _append('\n')  # base.html:47
     75      _append('\n<div id="main">\n')  # base.html:50
     76      _append('\n')  # additives.html:4 (via base.html:50)
     77      _append('<div class="box" id="additives">\n<div class="header">')  # partial/additives.html:2 (via additives.html:4, base.html:50)
     78      _tmp = additives_title  # partial/additives.html:2 (via additives.html:4, base.html:50)
     79      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:2 (via additives.html:4, base.html:50)
     80      else: _tmp = _utf8(str(_tmp))  # partial/additives.html:2 (via additives.html:4, base.html:50)
     81      _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:2 (via additives.html:4, base.html:50)
     82      _append(_tmp)  # partial/additives.html:2 (via additives.html:4, base.html:50)
     83      _append('</div>\n<div class="body main ul">\n')  # partial/additives.html:4 (via additives.html:4, base.html:50)
     84      for index, additive in enumerate(additives):  # partial/additives.html:4 (via additives.html:4, base.html:50)
     85          _append('\n')  # partial/additives.html:5 (via additives.html:4, base.html:50)
     86          creator = additive.creator  # partial/additives.html:5 (via additives.html:4, base.html:50)
     87          _append('\n<div class="additive-item">\n<div class="header">\n<a class="avatar" href="/user/')  # partial/additives.html:8 (via additives.html:4, base.html:50)
     88          _tmp = creator.username  # partial/additives.html:8 (via additives.html:4, base.html:50)
     89          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     90          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     91          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     92          _append(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     93          _append('"><img src="')  # partial/additives.html:8 (via additives.html:4, base.html:50)
     94          _tmp = get_avatar_url(creator, 's')  # partial/additives.html:8 (via additives.html:4, base.html:50)
     95          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     96          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     97          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     98          _append(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     99          _append('" /></a>')  # partial/additives.html:8 (via additives.html:4, base.html:50)
    100          _tmp = additive.name  # partial/additives.html:8 (via additives.html:4, base.html:50)
    101          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
    102          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
    103          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
    104          _append(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
    105          _append('\n</div>\n<div class="body">\n<div class="additive_alias">\xe5\x85\xb6\xe4\xbb\x96\xe5\x90\x8d\xe7\xa7\xb0:')  # partial/additives.html:11 (via additives.html:4, base.html:50)
    106          _tmp = additive.alias  # partial/additives.html:11 (via additives.html:4, base.html:50)
    107          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:11 (via additives.html:4, base.html:50)
    108          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:11 (via additives.html:4, base.html:50)
    109          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:11 (via additives.html:4, base.html:50)
    110          _append(_tmp)  # partial/additives.html:11 (via additives.html:4, base.html:50)
    111          _append('</div>\n<div class="additive_cns">CNS\xe5\x8f\xb7:')  # partial/additives.html:12 (via additives.html:4, base.html:50)
    112          _tmp = additive.cns  # partial/additives.html:12 (via additives.html:4, base.html:50)
    113          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:12 (via additives.html:4, base.html:50)
    114          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:12 (via additives.html:4, base.html:50)
    115          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:12 (via additives.html:4, base.html:50)
    116          _append(_tmp)  # partial/additives.html:12 (via additives.html:4, base.html:50)
    117          _append('</div>\n<div class="additive_ins">INS\xe5\x8f\xb7:')  # partial/additives.html:13 (via additives.html:4, base.html:50)
    118          _tmp = additive.ins  # partial/additives.html:13 (via additives.html:4, base.html:50)
    119          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:13 (via additives.html:4, base.html:50)
    120          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:13 (via additives.html:4, base.html:50)
    121          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:13 (via additives.html:4, base.html:50)
    122          _append(_tmp)  # partial/additives.html:13 (via additives.html:4, base.html:50)
    123          _append('</div>\n<div class="additive_effect">\xe5\x8a\x9f\xe8\x83\xbd:')  # partial/additives.html:14 (via additives.html:4, base.html:50)
    124          _tmp = additive.effect  # partial/additives.html:14 (via additives.html:4, base.html:50)
    125          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:14 (via additives.html:4, base.html:50)
    126          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:14 (via additives.html:4, base.html:50)
    127          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:14 (via additives.html:4, base.html:50)
    128          _append(_tmp)  # partial/additives.html:14 (via additives.html:4, base.html:50)
    129          _append('</div>\n</div>\n<div class="footer">\n<span class="meta">\n<ul>\n<li><i class="icon-view"></i> ')  # partial/additives.html:19 (via additives.html:4, base.html:50)
    130          _tmp = additive.views_count  # partial/additives.html:19 (via additives.html:4, base.html:50)
    131          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:19 (via additives.html:4, base.html:50)
    132          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:19 (via additives.html:4, base.html:50)
    133          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:19 (via additives.html:4, base.html:50)
    134          _append(_tmp)  # partial/additives.html:19 (via additives.html:4, base.html:50)
    135          _append('</li>\n</ul>\n</span>\n<span class="created">\n')  # partial/additives.html:23 (via additives.html:4, base.html:50)
    136          _tmp = timesince(additive.created)  # partial/additives.html:23 (via additives.html:4, base.html:50)
    137          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:23 (via additives.html:4, base.html:50)
    138          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:23 (via additives.html:4, base.html:50)
    139          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:23 (via additives.html:4, base.html:50)
    140          _append(_tmp)  # partial/additives.html:23 (via additives.html:4, base.html:50)
    141          _append('\n</span>\n</div>\n</div>\n')  # partial/additives.html:27 (via additives.html:4, base.html:50)
    142          _append('\n')  # partial/additives.html:28 (via additives.html:4, base.html:50)
    143          if index > 0 and (index + 1) % 3 == 0:  # partial/additives.html:28 (via additives.html:4, base.html:50)
    144              _append('\n<div class="clearfix"></div>\n')  # partial/additives.html:30 (via additives.html:4, base.html:50)
    145          _append('\n')  # partial/additives.html:32 (via additives.html:4, base.html:50)
    146      _append('\n')  # partial/additives.html:33 (via additives.html:4, base.html:50)
    147      page_type = 'additives'  # partial/additives.html:33 (via additives.html:4, base.html:50)
    148      _append('\n')  # partial/additives.html:34 (via additives.html:4, base.html:50)
    149      _append('\n')  # partial/pagination.html:3 (via partial/additives.html:34, additives.html:4, base.html:50)
    150      from macros.macro import ADDITIVES_PER_PAGE, USERS_PER_PAGE  # partial/pagination.html:3 (via partial/additives.html:34, additives.html:4, base.html:50)
    151      _append('\n')  # partial/pagination.html:4 (via partial/additives.html:34, additives.html:4, base.html:50)
    152      import math  # partial/pagination.html:4 (via partial/additives.html:34, additives.html:4, base.html:50)
    153      _append('\n')  # partial/pagination.html:6 (via partial/additives.html:34, additives.html:4, base.html:50)
    154      if page_type == 'additives':  # partial/pagination.html:6 (via partial/additives.html:34, additives.html:4, base.html:50)
    155          _append('\n')  # partial/pagination.html:7 (via partial/additives.html:34, additives.html:4, base.html:50)
    156          items_per_page = ADDITIVES_PER_PAGE  # partial/pagination.html:7 (via partial/additives.html:34, additives.html:4, base.html:50)
    157          _append('\n')  # partial/pagination.html:8 (via partial/additives.html:34, additives.html:4, base.html:50)
    158      else:  # partial/pagination.html:8 (via partial/additives.html:34, additives.html:4, base.html:50)
    159          _append('\n')  # partial/pagination.html:9 (via partial/additives.html:34, additives.html:4, base.html:50)
    160          items_per_page = USERS_PER_PAGE  # partial/pagination.html:9 (via partial/additives.html:34, additives.html:4, base.html:50)
    161          _append('\n')  # partial/pagination.html:10 (via partial/additives.html:34, additives.html:4, base.html:50)
    162      _append('\n')  # partial/pagination.html:12 (via partial/additives.html:34, additives.html:4, base.html:50)
    163      total_page = int(math.ceil(float(total_items) / items_per_page))  # partial/pagination.html:12 (via partial/additives.html:34, additives.html:4, base.html:50)
    164      _append('\n')  # partial/pagination.html:14 (via partial/additives.html:34, additives.html:4, base.html:50)
    165      current_page = int(handler.get_argument('page', 1))  # partial/pagination.html:14 (via partial/additives.html:34, additives.html:4, base.html:50)
    166      _append('\n')  # partial/pagination.html:16 (via partial/additives.html:34, additives.html:4, base.html:50)
    167      if current_page <=6:  # partial/pagination.html:16 (via partial/additives.html:34, additives.html:4, base.html:50)
    168          _append('\n')  # partial/pagination.html:17 (via partial/additives.html:34, additives.html:4, base.html:50)
    169          end_page = min(total_page, 10)  # partial/pagination.html:17 (via partial/additives.html:34, additives.html:4, base.html:50)
    170          _append('\n')  # partial/pagination.html:18 (via partial/additives.html:34, additives.html:4, base.html:50)
    171          start_page = 1  # partial/pagination.html:18 (via partial/additives.html:34, additives.html:4, base.html:50)
    172          _append('\n')  # partial/pagination.html:19 (via partial/additives.html:34, additives.html:4, base.html:50)
    173      else:  # partial/pagination.html:19 (via partial/additives.html:34, additives.html:4, base.html:50)
    174          _append('\n')  # partial/pagination.html:20 (via partial/additives.html:34, additives.html:4, base.html:50)
    175          end_page = min(total_page, current_page+4)  # partial/pagination.html:20 (via partial/additives.html:34, additives.html:4, base.html:50)
    176          _append('\n')  # partial/pagination.html:21 (via partial/additives.html:34, additives.html:4, base.html:50)
    177          start_page = current_page - 5  # partial/pagination.html:21 (via partial/additives.html:34, additives.html:4, base.html:50)
    178          _append('\n')  # partial/pagination.html:22 (via partial/additives.html:34, additives.html:4, base.html:50)
    179      _append('\n')  # partial/pagination.html:24 (via partial/additives.html:34, additives.html:4, base.html:50)
    180      if total_page > 1:  # partial/pagination.html:24 (via partial/additives.html:34, additives.html:4, base.html:50)
    181          _append('\n<div class="pagination">\n<ul>\n')  # partial/pagination.html:27 (via partial/additives.html:34, additives.html:4, base.html:50)
    182          if current_page == 1:  # partial/pagination.html:27 (via partial/additives.html:34, additives.html:4, base.html:50)
    183              _append('\n<li class="disabled">\xe2\x86\x90 </li>\n')  # partial/pagination.html:29 (via partial/additives.html:34, additives.html:4, base.html:50)
    184          else:  # partial/pagination.html:29 (via partial/additives.html:34, additives.html:4, base.html:50)
    185              _append('\n<li><a href="')  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    186              _tmp = page_path  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    187              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    188              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    189              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    190              _append(_tmp)  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    191              _append('?page=1">\xe2\x86\x90 </a></li>\n')  # partial/pagination.html:31 (via partial/additives.html:34, additives.html:4, base.html:50)
    192          _append('\n')  # partial/pagination.html:33 (via partial/additives.html:34, additives.html:4, base.html:50)
    193          for i in range(start_page, end_page + 1):  # partial/pagination.html:33 (via partial/additives.html:34, additives.html:4, base.html:50)
    194              _append('\n<li ')  # partial/pagination.html:34 (via partial/additives.html:34, additives.html:4, base.html:50)
    195              if current_page == i:  # partial/pagination.html:34 (via partial/additives.html:34, additives.html:4, base.html:50)
    196                  _append('class="active"')  # partial/pagination.html:34 (via partial/additives.html:34, additives.html:4, base.html:50)
    197              _append('>\n<a href="')  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    198              _tmp = page_path  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    199              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    200              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    201              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    202              _append(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    203              _append('?page=')  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    204              _tmp = i  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    205              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    206              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    207              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    208              _append(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    209              _append('">')  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    210              _tmp = i  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    211              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    212              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    213              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    214              _append(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    215              _append('</a>\n</li>\n')  # partial/pagination.html:37 (via partial/additives.html:34, additives.html:4, base.html:50)
    216          _append('\n')  # partial/pagination.html:39 (via partial/additives.html:34, additives.html:4, base.html:50)
    217          if current_page == total_page:  # partial/pagination.html:39 (via partial/additives.html:34, additives.html:4, base.html:50)
    218              _append('\n<li class="disabled">\xe2\x86\x92 </li>\n')  # partial/pagination.html:41 (via partial/additives.html:34, additives.html:4, base.html:50)
    219          else:  # partial/pagination.html:41 (via partial/additives.html:34, additives.html:4, base.html:50)
    220              _append('\n<li><a href="')  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    221              _tmp = page_path  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    222              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    223              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    224              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    225              _append(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    226              _append('?page=')  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    227              _tmp = current_page+1  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    228              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    229              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    230              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    231              _append(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    232              _append('">\xe2\x86\x92 </a></li>\n')  # partial/pagination.html:43 (via partial/additives.html:34, additives.html:4, base.html:50)
    233          _append('\n</ul>\n</div>\n')  # partial/pagination.html:46 (via partial/additives.html:34, additives.html:4, base.html:50)
    234      _append('\n')  # partial/pagination.html:47 (via partial/additives.html:34, additives.html:4, base.html:50)
    235      _append('\n</div>\n</div>\n')  # partial/additives.html:37 (via additives.html:4, base.html:50)
    236      _append('\n')  # additives.html:5 (via base.html:50)
    237      _append('\n</div>\n<div id="sidebar">\n')  # base.html:54
    238      _append('\n')  # additives.html:8 (via base.html:54)
    239      if current_user:  # partial/sidebar_global.html:1 (via additives.html:8, base.html:54)
    240          _append('\n')  # partial/sidebar_global.html:2 (via additives.html:8, base.html:54)
    241          _append('<div class="upload item ')  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    242          if not current_user.left_upload_count:  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    243              _append('disabled')  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    244          _append('" data-url="/photo/upload" data-title="\xe9\x87\x87\xe9\x9b\x86\xe7\x85\xa7\xe7\x89\x87" >\n<div class="left"></div>\n<div class="center">\n')  # partial/sidebar_upload.html:5 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    245          if current_user.left_upload_count:  # partial/sidebar_upload.html:5 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    246              _append('\n\xe9\x87\x87\xe9\x9b\x86\xe7\x85\xa7\xe7\x89\x87(\xe6\x9c\xac\xe5\x91\xa8\xe8\xbf\x98\xe5\x89\xa9')  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    247              _tmp = current_user.left_upload_count  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    248              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    249              else: _tmp = _utf8(str(_tmp))  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    250              _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    251              _append(_tmp)  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    252              _append('\xe5\xbc\xa0)\n')  # partial/sidebar_upload.html:7 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    253          else:  # partial/sidebar_upload.html:7 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    254              _append('\n\xe6\x9c\xac\xe5\x91\xa8\xe7\x9a\x84\xe9\x87\x87\xe9\x9b\x86\xe4\xbd\x99\xe9\xa2\x9d\xe5\xb7\xb2\xe7\x94\xa8\xe5\xae\x8c\xe4\xba\x86\n')  # partial/sidebar_upload.html:9 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    255          _append('\n</div>\n<div class="right"></div>\n</div>\n')  # partial/sidebar_upload.html:13 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    256          _append('\n')  # partial/sidebar_global.html:3 (via additives.html:8, base.html:54)
    257          _append('<div class="box" id="panel-me">\n<div class="header"><a class="right" href="/logout">\xe7\x99\xbb\xe5\x87\xba</a>\xe6\x88\x91\xe7\x9a\x84\xe4\xbf\xa1\xe6\x81\xaf</div>\n<div class="body">\n<div class="me">\n<a class="settings item" href="/settings" data-title="\xe8\xae\xbe\xe7\xbd\xae" data-url="/settings">\xe8\xae\xbe\xe7\xbd\xae</a>\n<a href="/user/')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    258          _tmp = current_user.username  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    259          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    260          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    261          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    262          _append(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    263          _append('"><img class="avatar" src="')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    264          _tmp = get_avatar_url(current_user, 's')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    265          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    266          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    267          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    268          _append(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    269          _append('" /></a>\n<a href="/user/')  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    270          _tmp = current_user.username  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    271          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    272          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    273          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    274          _append(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    275          _append('">')  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    276          _tmp = current_user.fullname  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    277          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    278          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    279          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    280          _append(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    281          _append('</a>\n<i class="level icon-level')  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    282          _tmp = current_user.level  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    283          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    284          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    285          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    286          _append(_tmp)  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    287          _append('"></i>\n</div>\n<div class="follow">\n<div class="following item" data-title="\xe6\x88\x91\xe5\x85\xb3\xe6\xb3\xa8\xe7\x9a\x84\xe4\xba\xba" data-url="/mine/following">\n<h3 class="anchor">')  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    288          _tmp = current_user.following_count  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    289          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    290          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    291          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    292          _append(_tmp)  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    293          _append('</h3>\n<span>following</span>\n</div>\n<div class="follower item" data-title="\xe5\x85\xb3\xe6\xb3\xa8\xe6\x88\x91\xe7\x9a\x84\xe4\xba\xba" data-url="/mine/follower">\n<h3 class="anchor">')  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    294          _tmp = current_user.follower_count  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    295          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    296          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    297          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    298          _append(_tmp)  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    299          _append('</h3>\n<span>followers</span>\n</div>\n</div>\n<ul>\n<li class="item" data-url="/mine/invite" data-title="\xe9\x82\x80\xe8\xaf\xb7\xe6\x9c\x8b\xe5\x8f\x8b\xe5\x8a\xa0\xe5\x85\xa5"> <span class="num">')  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    300          _tmp = current_user.unused_invite_key_count  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    301          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    302          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    303          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    304          _append(_tmp)  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    305          _append('</span><span class="anchor">\xe9\x82\x80\xe8\xaf\xb7\xe6\x9c\x8b\xe5\x8f\x8b\xe5\x8a\xa0\xe5\x85\xa5</span></li>\n<li class="item" data-title="\xe6\x88\x91\xe6\xb7\xbb\xe5\x8a\xa0\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87" data-url="/mine/photos"> <span class="num">')  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    306          _tmp = current_user.photo_count  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    307          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    308          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    309          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    310          _append(_tmp)  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    311          _append('</span><span class="anchor">\xe6\x88\x91\xe6\xb7\xbb\xe5\x8a\xa0\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87</span></li>\n<li class="item" data-title="\xe6\x88\x91\xe5\x96\x9c\xe6\xac\xa2\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87" data-url="/mine/likes_photos"><span class="num">')  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    312          _tmp = current_user.likes_count  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    313          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    314          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    315          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    316          _append(_tmp)  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    317          _append('</span><span class="anchor">\xe6\x88\x91\xe5\x96\x9c\xe6\xac\xa2\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87</span> </li>\n</ul>\n</div>\n</div>\n')  # partial/sidebar_me.html:27 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    318          _append('\n')  # partial/sidebar_global.html:4 (via additives.html:8, base.html:54)
    319      else:  # partial/sidebar_global.html:4 (via additives.html:8, base.html:54)
    320          _append('\n')  # partial/sidebar_global.html:5 (via additives.html:8, base.html:54)
    321          _append('<div class="box" id="panel-about">\n<div class="header">\xe5\x85\xb3\xe4\xba\x8e\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</div>\n<div class="body">\n<p>\xe5\x85\xb3\xe6\xb3\xa8\xe9\xa3\x9f\xe5\x93\x81\xe5\xae\x89\xe5\x85\xa8\xef\xbc\x8c\xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe4\xb8\x96\xe7\x95\x8c</p>\n<p>\xe6\x89\x80\xe6\x9c\x89\xe9\xa3\x9f\xe5\x93\x81\xe5\x92\x8c\xe6\xb7\xbb\xe5\x8a\xa0\xe5\x89\x82\xe8\xb5\x84\xe6\x96\x99\xe6\x9d\xa5\xe8\x87\xaa\xe4\xba\x8eiearth-\xe7\x88\xb1\xe5\x9c\xb0\xe7\x90\x83\xe7\x8e\xaf\xe4\xbf\x9d\xe6\x9c\xba\xe6\x9e\x84</p>\n</div>\n</div>\n')  # partial/sidebar_about.html:8 (via partial/sidebar_global.html:5, additives.html:8, base.html:54)
    322          _append('\n')  # partial/sidebar_global.html:6 (via additives.html:8, base.html:54)
    323          _append('<div class="box" id="panel-login">\n<div class="header">\xe7\x99\xbb\xe5\x85\xa5\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</div>\n<div class="body">\n<form action="/login" method="POST">\n<div class="section">\n<input type="TEXT" name="username" placeholder="\xe7\x94\xa8\xe6\x88\xb7\xe5\x90\x8d/Email" />\n</div>\n<div class="section">\n<input type="PASSWORD" name="password" placeholder="\xe5\xaf\x86\xe7\xa0\x81" />\n</div>\n<div class="section">\n<input type="SUBMIT" value="\xe7\x99\xbb\xe5\x85\xa5" class="btn primary-btn" />\n<span class="tip">\xe4\xbc\x9a\xe8\xae\xb0\xe4\xbd\x8f\xe7\x99\xbb\xe5\x85\xa5\xe4\xb8\x80\xe4\xb8\xaa\xe6\x9c\x88</span>\n</div>\n</form>\n<div class="alert alert-info">\xe5\x86\x85\xe6\xb5\x8b\xe4\xb8\xad\xef\xbc\x8c\xe5\x8f\xaa\xe6\x8e\xa5\xe5\x8f\x97\xe9\x82\x80\xe8\xaf\xb7\xe6\xb3\xa8\xe5\x86\x8c</div>\n</div>\n</div>\n')  # partial/sidebar_login.html:19 (via partial/sidebar_global.html:6, additives.html:8, base.html:54)
    324          _append('\n')  # partial/sidebar_global.html:8 (via additives.html:8, base.html:54)
    325      _append('\n')  # partial/sidebar_global.html:10 (via additives.html:8, base.html:54)
    326      _append('<div class="box">\n<div class="header">\xe6\xb5\x8f\xe8\xa7\x88\xe9\xa3\x9f\xe5\x93\x81</div>\n<div class="body">\n<ul>\n<li class="item" data-url="/photos/hot" data-title="\xe7\x83\xad\xe9\x97\xa8\xe9\xa3\x9f\xe5\x93\x81"><span class="anchor">\xe7\x83\xad\xe9\x97\xa8\xe9\xa3\x9f\xe5\x93\x81</span></li>\n<li class="item" data-url="/photos/latest" data-title="\xe6\x9c\x80\xe6\x96\xb0\xe9\xa3\x9f\xe5\x93\x81"><span class="anchor">\xe6\x9c\x80\xe6\x96\xb0\xe9\xa3\x9f\xe5\x93\x81</span></li>\n</ul>\n</div>\n</div>\n')  # partial/sidebar_photos_nav.html:10 (via partial/sidebar_global.html:10, additives.html:8, base.html:54)
    327      _append('\n')  # partial/sidebar_global.html:11 (via additives.html:8, base.html:54)
    328      import models  # partial/sidebar_tags.html:1 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    329      _append('\n')  # partial/sidebar_tags.html:2 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    330      hot_tags = models.Additive_Tag().hot_tags  # partial/sidebar_tags.html:2 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    331      _append('\n<div class="box" id="panel-tags">\n<div class="header">\xe7\x83\xad\xe9\x97\xa8\xe6\x90\x9c\xe7\xb4\xa2</div>\n<div class="body">\n<ul>\n')  # partial/sidebar_tags.html:8 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    332      for tag in hot_tags:  # partial/sidebar_tags.html:8 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    333          _append('\n<li class="item" data-url="/tag/')  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    334          _tmp = tag  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    335          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    336          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    337          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    338          _append(_tmp)  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    339          _append('"><i class="icon-tag"></i><span class="anchor">')  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    340          _tmp = tag  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    341          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    342          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    343          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    344          _append(_tmp)  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    345          _append('</span></li>\n')  # partial/sidebar_tags.html:10 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    346      _append('\n</ul>\n</div>\n</div>\n')  # partial/sidebar_tags.html:14 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    347      _append('\n')  # partial/sidebar_global.html:12 (via additives.html:8, base.html:54)
    348      _append('\n')  # additives.html:9 (via base.html:54)
    349      _append('\n</div>\n</div>\n</div>\n<div id="footer">\n<div class="inner">\n<div class="right">\n<span class="belief">make the world a little better and easier</span>\n</div>\n<div class="left">\n<ul>\n<li><a href="/about">\xe5\x85\xb3\xe4\xba\x8e</a> <!--<span class="divider">/</span>--></li>\n<!--<li><a href="/feedback">\xe5\x8f\x8d\xe9\xa6\x88</a> <span class="divider">/</span></li>-->\n<!--<li><a href="/blog">\xe6\x97\xa5\xe5\xbf\x97</a></li>-->\n</ul>\n</div>\n</div>\n</div>\n<script type="text/javascript">\nvar _gaq = _gaq || [];\n_gaq.push([\'_setAccount\', \'UA-1281124-23\']);\n_gaq.push([\'_trackPageview\']);\n(function() {\nvar ga = document.createElement(\'script\'); ga.type = \'text/javascript\'; ga.async = true;\nga.src = (\'https:\' == document.location.protocol ? \'https://ssl\' : \'http://www\') + \'.google-analytics.com/ga.js\';\nvar s = document.getElementsByTagName(\'script\')[0]; s.parentNode.insertBefore(ga, s);\n})();\n</script>\n<!-- love your mom! -->\n</body>\n<meta name="description" content="\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - " />\n')  # base.html:89
    350      return _utf8('').join(_buffer)  # base.html:0
[E 120720 09:40:48 web:1031] Uncaught exception GET / (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.109', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cookie': '__utma=148685175.647871982.1342707625.1342707625.1342707625.1; __utmz=148685175.1342707625.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)', 'Cache-Control': 'max-age=0', 'X-Real-Ip': '192.168.0.109'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "src/sites/www/handlers/home.py", line 14, in get
        return self._render('hot')
      File "src/sites/www/handlers/base.py", line 87, in _render
        current_additive = additive,
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 474, in render
        html = self.render_string(template_name, **kwargs)
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 586, in render_string
        return t.generate(**args)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 253, in generate
        return execute()
      File "additives_html.generated.py", line 86, in _execute
        creator = additive.creator  # partial/additives.html:5 (via additives.html:4, base.html:50)
      File "/home/dk/work/python/safood/src/common/models/additive.py", line 60, in creator
        return models.User().find(self.user_id)
      File "/home/dk/work/python/safood/src/thing/thing/thing.py", line 215, in __getattr__
        raise ThingException('key:{key} not found'.format(key = key))
    ThingException: key:user_id not found
[E 120720 09:40:48 web:1393] 500 GET / (127.0.0.1) 2001.58ms
[W 120720 09:40:49 web:1393] 404 GET /favicon.ico (127.0.0.1) 135.90ms
[E 120720 10:00:30 template:256] additives.html code:
      1  def _execute():  # base.html:0
      2      _buffer = []  # base.html:0
      3      _append = _buffer.append  # base.html:0
      4      _append('<!doctype html>\n<head>\n<meta charset="UTF-8" />\n<meta content="True" name="HandheldFriendly" />\n<meta content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0; name=\'viewport\'" />\n<title>\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - \xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81')  # base.html:6
      5      _append('</title>\n<link rel="stylesheet" type="text/css" media="screen" href="/static/css/vendor/jquery.fancybox.css" />\n<link rel="stylesheet" type="text/css" media="screen" href="/static/css/main.css" />\n<link rel="shortcut icon" href="/static/img/favicon.ico" />\n<link rel="canonical" href="http://wuditoo.com/" />\n<meta name="description" content="\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - \xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81" />\n<script src="/static/js/vendor/jquery.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.history.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.fancybox.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.scrollTo.min.js" type="text/javascript"></script>\n')  # base.html:16
      6      _append('\n<script type="text/javascript">\n')  # additives.html:13 (via base.html:16)
      7      if current_additive:  # additives.html:13 (via base.html:16)
      8          _append('\nmeta_additive = {\nurl: "/additive/')  # additives.html:15 (via base.html:16)
      9          _tmp = current_additive.id  # additives.html:15 (via base.html:16)
     10          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # additives.html:15 (via base.html:16)
     11          else: _tmp = _utf8(str(_tmp))  # additives.html:15 (via base.html:16)
     12          _tmp = _utf8(xhtml_escape(_tmp))  # additives.html:15 (via base.html:16)
     13          _append(_tmp)  # additives.html:15 (via base.html:16)
     14          _append('",\nwidth: ')  # additives.html:16 (via base.html:16)
     15          _tmp = current_additive.width  # additives.html:16 (via base.html:16)
     16          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # additives.html:16 (via base.html:16)
     17          else: _tmp = _utf8(str(_tmp))  # additives.html:16 (via base.html:16)
     18          _tmp = _utf8(xhtml_escape(_tmp))  # additives.html:16 (via base.html:16)
     19          _append(_tmp)  # additives.html:16 (via base.html:16)
     20          _append(',\nheight: ')  # additives.html:17 (via base.html:16)
     21          _tmp = current_additive.height  # additives.html:17 (via base.html:16)
     22          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # additives.html:17 (via base.html:16)
     23          else: _tmp = _utf8(str(_tmp))  # additives.html:17 (via base.html:16)
     24          _tmp = _utf8(xhtml_escape(_tmp))  # additives.html:17 (via base.html:16)
     25          _append(_tmp)  # additives.html:17 (via base.html:16)
     26          _append('\n}\n')  # additives.html:19 (via base.html:16)
     27      _append('\n</script>\n')  # additives.html:21 (via base.html:16)
     28      _append('\n<script src="/static/js/main.js" type="text/javascript"></script>\n</head>\n<!--[if IE 7 ]><body class="ie7"><![endif]-->\n<!--[if gt IE 7]><body class="ie"><![endif]-->\n<!--[if !IE]><body><![endif]-->\n<div id="header">\n<div class="inner">\n<div id="logo"><a href="/">\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</a></div>\n<div id="slogon">\xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81</div>\n<div id="witticism">')  # base.html:27
     29      _tmp = home_sentence()  # base.html:27
     30      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:27
     31      else: _tmp = _utf8(str(_tmp))  # base.html:27
     32      _tmp = _utf8(xhtml_escape(_tmp))  # base.html:27
     33      _append(_tmp)  # base.html:27
     34      _append('</div>\n<!--\n<ul class="nav-right">\n</ul>\n-->\n</div>\n</div>\n<div id="container">\n<div class="inner">\n<div class="message alert alert-warn">\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0\xe5\x86\xac\xe7\x9c\xa0\xe4\xb8\xad\xef\xbc\x8c\xe8\x8b\x8f\xe9\x86\x92\xe6\x97\xb6\xe9\x97\xb4\xe5\xbe\x85\xe5\xae\x9a\xe3\x80\x82\xe8\xb0\xa2\xe8\xb0\xa2\xe6\x82\xa8\xe7\x9a\x84\xe5\x88\xb0\xe8\xae\xbf\xef\xbc\x9a\xef\xbc\x89</div>\n')  # base.html:38
     35      message = get_message()  # base.html:38
     36      _append('\n')  # base.html:39
     37      for message_type in ('error', 'success', 'info', 'warn'):  # base.html:39
     38          _append('\n')  # base.html:40
     39          if message and message_type == message[0]:  # base.html:40
     40              _append('\n<div id="')  # base.html:41
     41              _tmp = message_type  # base.html:41
     42              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     43              else: _tmp = _utf8(str(_tmp))  # base.html:41
     44              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     45              _append(_tmp)  # base.html:41
     46              _append('-message" class="message alert alert-')  # base.html:41
     47              _tmp = message_type  # base.html:41
     48              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     49              else: _tmp = _utf8(str(_tmp))  # base.html:41
     50              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     51              _append(_tmp)  # base.html:41
     52              _append('">')  # base.html:41
     53              _tmp = message[1]  # base.html:41
     54              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     55              else: _tmp = _utf8(str(_tmp))  # base.html:41
     56              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     57              _append(_tmp)  # base.html:41
     58              _append('</div>\n')  # base.html:42
     59          else:  # base.html:42
     60              _append('\n<div id="')  # base.html:43
     61              _tmp = message_type  # base.html:43
     62              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:43
     63              else: _tmp = _utf8(str(_tmp))  # base.html:43
     64              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:43
     65              _append(_tmp)  # base.html:43
     66              _append('-message" class="message alert alert-')  # base.html:43
     67              _tmp = message_type  # base.html:43
     68              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:43
     69              else: _tmp = _utf8(str(_tmp))  # base.html:43
     70              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:43
     71              _append(_tmp)  # base.html:43
     72              _append(' hide"></div>\n')  # base.html:44
     73          _append('\n')  # base.html:45
     74      _append('\n')  # base.html:47
     75      _append('\n<div id="main">\n')  # base.html:50
     76      _append('\n')  # additives.html:4 (via base.html:50)
     77      _append('<div class="box" id="additives">\n<div class="header">')  # partial/additives.html:2 (via additives.html:4, base.html:50)
     78      _tmp = additives_title  # partial/additives.html:2 (via additives.html:4, base.html:50)
     79      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:2 (via additives.html:4, base.html:50)
     80      else: _tmp = _utf8(str(_tmp))  # partial/additives.html:2 (via additives.html:4, base.html:50)
     81      _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:2 (via additives.html:4, base.html:50)
     82      _append(_tmp)  # partial/additives.html:2 (via additives.html:4, base.html:50)
     83      _append('</div>\n<div class="body main ul">\n')  # partial/additives.html:4 (via additives.html:4, base.html:50)
     84      for index, additive in enumerate(additives):  # partial/additives.html:4 (via additives.html:4, base.html:50)
     85          _append('\n')  # partial/additives.html:5 (via additives.html:4, base.html:50)
     86          creator = additive.creator  # partial/additives.html:5 (via additives.html:4, base.html:50)
     87          _append('\n<div class="additive-item">\n<div class="header">\n<a class="avatar" href="/user/')  # partial/additives.html:8 (via additives.html:4, base.html:50)
     88          _tmp = creator.username  # partial/additives.html:8 (via additives.html:4, base.html:50)
     89          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     90          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     91          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     92          _append(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     93          _append('"><img src="')  # partial/additives.html:8 (via additives.html:4, base.html:50)
     94          _tmp = get_avatar_url(creator, 's')  # partial/additives.html:8 (via additives.html:4, base.html:50)
     95          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     96          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     97          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     98          _append(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     99          _append('" /></a>')  # partial/additives.html:8 (via additives.html:4, base.html:50)
    100          _tmp = additive.name  # partial/additives.html:8 (via additives.html:4, base.html:50)
    101          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
    102          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
    103          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
    104          _append(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
    105          _append('\n</div>\n<div class="body">\n<div class="additive_alias">\xe5\x85\xb6\xe4\xbb\x96\xe5\x90\x8d\xe7\xa7\xb0:')  # partial/additives.html:11 (via additives.html:4, base.html:50)
    106          _tmp = additive.alias  # partial/additives.html:11 (via additives.html:4, base.html:50)
    107          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:11 (via additives.html:4, base.html:50)
    108          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:11 (via additives.html:4, base.html:50)
    109          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:11 (via additives.html:4, base.html:50)
    110          _append(_tmp)  # partial/additives.html:11 (via additives.html:4, base.html:50)
    111          _append('</div>\n<div class="additive_cns">CNS\xe5\x8f\xb7:')  # partial/additives.html:12 (via additives.html:4, base.html:50)
    112          _tmp = additive.cns  # partial/additives.html:12 (via additives.html:4, base.html:50)
    113          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:12 (via additives.html:4, base.html:50)
    114          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:12 (via additives.html:4, base.html:50)
    115          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:12 (via additives.html:4, base.html:50)
    116          _append(_tmp)  # partial/additives.html:12 (via additives.html:4, base.html:50)
    117          _append('</div>\n<div class="additive_ins">INS\xe5\x8f\xb7:')  # partial/additives.html:13 (via additives.html:4, base.html:50)
    118          _tmp = additive.ins  # partial/additives.html:13 (via additives.html:4, base.html:50)
    119          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:13 (via additives.html:4, base.html:50)
    120          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:13 (via additives.html:4, base.html:50)
    121          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:13 (via additives.html:4, base.html:50)
    122          _append(_tmp)  # partial/additives.html:13 (via additives.html:4, base.html:50)
    123          _append('</div>\n<div class="additive_effect">\xe5\x8a\x9f\xe8\x83\xbd:')  # partial/additives.html:14 (via additives.html:4, base.html:50)
    124          _tmp = additive.effect  # partial/additives.html:14 (via additives.html:4, base.html:50)
    125          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:14 (via additives.html:4, base.html:50)
    126          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:14 (via additives.html:4, base.html:50)
    127          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:14 (via additives.html:4, base.html:50)
    128          _append(_tmp)  # partial/additives.html:14 (via additives.html:4, base.html:50)
    129          _append('</div>\n</div>\n<div class="footer">\n<span class="meta">\n<ul>\n<li><i class="icon-view"></i> ')  # partial/additives.html:19 (via additives.html:4, base.html:50)
    130          _tmp = additive.views_count  # partial/additives.html:19 (via additives.html:4, base.html:50)
    131          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:19 (via additives.html:4, base.html:50)
    132          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:19 (via additives.html:4, base.html:50)
    133          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:19 (via additives.html:4, base.html:50)
    134          _append(_tmp)  # partial/additives.html:19 (via additives.html:4, base.html:50)
    135          _append('</li>\n</ul>\n</span>\n<span class="created">\n')  # partial/additives.html:23 (via additives.html:4, base.html:50)
    136          _tmp = timesince(additive.created)  # partial/additives.html:23 (via additives.html:4, base.html:50)
    137          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:23 (via additives.html:4, base.html:50)
    138          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:23 (via additives.html:4, base.html:50)
    139          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:23 (via additives.html:4, base.html:50)
    140          _append(_tmp)  # partial/additives.html:23 (via additives.html:4, base.html:50)
    141          _append('\n</span>\n</div>\n</div>\n')  # partial/additives.html:27 (via additives.html:4, base.html:50)
    142          _append('\n')  # partial/additives.html:28 (via additives.html:4, base.html:50)
    143          if index > 0 and (index + 1) % 3 == 0:  # partial/additives.html:28 (via additives.html:4, base.html:50)
    144              _append('\n<div class="clearfix"></div>\n')  # partial/additives.html:30 (via additives.html:4, base.html:50)
    145          _append('\n')  # partial/additives.html:32 (via additives.html:4, base.html:50)
    146      _append('\n')  # partial/additives.html:33 (via additives.html:4, base.html:50)
    147      page_type = 'additives'  # partial/additives.html:33 (via additives.html:4, base.html:50)
    148      _append('\n')  # partial/additives.html:34 (via additives.html:4, base.html:50)
    149      _append('\n')  # partial/pagination.html:3 (via partial/additives.html:34, additives.html:4, base.html:50)
    150      from macros.macro import ADDITIVES_PER_PAGE, USERS_PER_PAGE  # partial/pagination.html:3 (via partial/additives.html:34, additives.html:4, base.html:50)
    151      _append('\n')  # partial/pagination.html:4 (via partial/additives.html:34, additives.html:4, base.html:50)
    152      import math  # partial/pagination.html:4 (via partial/additives.html:34, additives.html:4, base.html:50)
    153      _append('\n')  # partial/pagination.html:6 (via partial/additives.html:34, additives.html:4, base.html:50)
    154      if page_type == 'additives':  # partial/pagination.html:6 (via partial/additives.html:34, additives.html:4, base.html:50)
    155          _append('\n')  # partial/pagination.html:7 (via partial/additives.html:34, additives.html:4, base.html:50)
    156          items_per_page = ADDITIVES_PER_PAGE  # partial/pagination.html:7 (via partial/additives.html:34, additives.html:4, base.html:50)
    157          _append('\n')  # partial/pagination.html:8 (via partial/additives.html:34, additives.html:4, base.html:50)
    158      else:  # partial/pagination.html:8 (via partial/additives.html:34, additives.html:4, base.html:50)
    159          _append('\n')  # partial/pagination.html:9 (via partial/additives.html:34, additives.html:4, base.html:50)
    160          items_per_page = USERS_PER_PAGE  # partial/pagination.html:9 (via partial/additives.html:34, additives.html:4, base.html:50)
    161          _append('\n')  # partial/pagination.html:10 (via partial/additives.html:34, additives.html:4, base.html:50)
    162      _append('\n')  # partial/pagination.html:12 (via partial/additives.html:34, additives.html:4, base.html:50)
    163      total_page = int(math.ceil(float(total_items) / items_per_page))  # partial/pagination.html:12 (via partial/additives.html:34, additives.html:4, base.html:50)
    164      _append('\n')  # partial/pagination.html:14 (via partial/additives.html:34, additives.html:4, base.html:50)
    165      current_page = int(handler.get_argument('page', 1))  # partial/pagination.html:14 (via partial/additives.html:34, additives.html:4, base.html:50)
    166      _append('\n')  # partial/pagination.html:16 (via partial/additives.html:34, additives.html:4, base.html:50)
    167      if current_page <=6:  # partial/pagination.html:16 (via partial/additives.html:34, additives.html:4, base.html:50)
    168          _append('\n')  # partial/pagination.html:17 (via partial/additives.html:34, additives.html:4, base.html:50)
    169          end_page = min(total_page, 10)  # partial/pagination.html:17 (via partial/additives.html:34, additives.html:4, base.html:50)
    170          _append('\n')  # partial/pagination.html:18 (via partial/additives.html:34, additives.html:4, base.html:50)
    171          start_page = 1  # partial/pagination.html:18 (via partial/additives.html:34, additives.html:4, base.html:50)
    172          _append('\n')  # partial/pagination.html:19 (via partial/additives.html:34, additives.html:4, base.html:50)
    173      else:  # partial/pagination.html:19 (via partial/additives.html:34, additives.html:4, base.html:50)
    174          _append('\n')  # partial/pagination.html:20 (via partial/additives.html:34, additives.html:4, base.html:50)
    175          end_page = min(total_page, current_page+4)  # partial/pagination.html:20 (via partial/additives.html:34, additives.html:4, base.html:50)
    176          _append('\n')  # partial/pagination.html:21 (via partial/additives.html:34, additives.html:4, base.html:50)
    177          start_page = current_page - 5  # partial/pagination.html:21 (via partial/additives.html:34, additives.html:4, base.html:50)
    178          _append('\n')  # partial/pagination.html:22 (via partial/additives.html:34, additives.html:4, base.html:50)
    179      _append('\n')  # partial/pagination.html:24 (via partial/additives.html:34, additives.html:4, base.html:50)
    180      if total_page > 1:  # partial/pagination.html:24 (via partial/additives.html:34, additives.html:4, base.html:50)
    181          _append('\n<div class="pagination">\n<ul>\n')  # partial/pagination.html:27 (via partial/additives.html:34, additives.html:4, base.html:50)
    182          if current_page == 1:  # partial/pagination.html:27 (via partial/additives.html:34, additives.html:4, base.html:50)
    183              _append('\n<li class="disabled">\xe2\x86\x90 </li>\n')  # partial/pagination.html:29 (via partial/additives.html:34, additives.html:4, base.html:50)
    184          else:  # partial/pagination.html:29 (via partial/additives.html:34, additives.html:4, base.html:50)
    185              _append('\n<li><a href="')  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    186              _tmp = page_path  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    187              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    188              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    189              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    190              _append(_tmp)  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    191              _append('?page=1">\xe2\x86\x90 </a></li>\n')  # partial/pagination.html:31 (via partial/additives.html:34, additives.html:4, base.html:50)
    192          _append('\n')  # partial/pagination.html:33 (via partial/additives.html:34, additives.html:4, base.html:50)
    193          for i in range(start_page, end_page + 1):  # partial/pagination.html:33 (via partial/additives.html:34, additives.html:4, base.html:50)
    194              _append('\n<li ')  # partial/pagination.html:34 (via partial/additives.html:34, additives.html:4, base.html:50)
    195              if current_page == i:  # partial/pagination.html:34 (via partial/additives.html:34, additives.html:4, base.html:50)
    196                  _append('class="active"')  # partial/pagination.html:34 (via partial/additives.html:34, additives.html:4, base.html:50)
    197              _append('>\n<a href="')  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    198              _tmp = page_path  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    199              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    200              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    201              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    202              _append(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    203              _append('?page=')  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    204              _tmp = i  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    205              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    206              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    207              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    208              _append(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    209              _append('">')  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    210              _tmp = i  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    211              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    212              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    213              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    214              _append(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    215              _append('</a>\n</li>\n')  # partial/pagination.html:37 (via partial/additives.html:34, additives.html:4, base.html:50)
    216          _append('\n')  # partial/pagination.html:39 (via partial/additives.html:34, additives.html:4, base.html:50)
    217          if current_page == total_page:  # partial/pagination.html:39 (via partial/additives.html:34, additives.html:4, base.html:50)
    218              _append('\n<li class="disabled">\xe2\x86\x92 </li>\n')  # partial/pagination.html:41 (via partial/additives.html:34, additives.html:4, base.html:50)
    219          else:  # partial/pagination.html:41 (via partial/additives.html:34, additives.html:4, base.html:50)
    220              _append('\n<li><a href="')  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    221              _tmp = page_path  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    222              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    223              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    224              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    225              _append(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    226              _append('?page=')  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    227              _tmp = current_page+1  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    228              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    229              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    230              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    231              _append(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    232              _append('">\xe2\x86\x92 </a></li>\n')  # partial/pagination.html:43 (via partial/additives.html:34, additives.html:4, base.html:50)
    233          _append('\n</ul>\n</div>\n')  # partial/pagination.html:46 (via partial/additives.html:34, additives.html:4, base.html:50)
    234      _append('\n')  # partial/pagination.html:47 (via partial/additives.html:34, additives.html:4, base.html:50)
    235      _append('\n</div>\n</div>\n')  # partial/additives.html:37 (via additives.html:4, base.html:50)
    236      _append('\n')  # additives.html:5 (via base.html:50)
    237      _append('\n</div>\n<div id="sidebar">\n')  # base.html:54
    238      _append('\n')  # additives.html:8 (via base.html:54)
    239      if current_user:  # partial/sidebar_global.html:1 (via additives.html:8, base.html:54)
    240          _append('\n')  # partial/sidebar_global.html:2 (via additives.html:8, base.html:54)
    241          _append('<div class="upload item ')  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    242          if not current_user.left_upload_count:  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    243              _append('disabled')  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    244          _append('" data-url="/photo/upload" data-title="\xe9\x87\x87\xe9\x9b\x86\xe7\x85\xa7\xe7\x89\x87" >\n<div class="left"></div>\n<div class="center">\n')  # partial/sidebar_upload.html:5 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    245          if current_user.left_upload_count:  # partial/sidebar_upload.html:5 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    246              _append('\n\xe9\x87\x87\xe9\x9b\x86\xe7\x85\xa7\xe7\x89\x87(\xe6\x9c\xac\xe5\x91\xa8\xe8\xbf\x98\xe5\x89\xa9')  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    247              _tmp = current_user.left_upload_count  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    248              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    249              else: _tmp = _utf8(str(_tmp))  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    250              _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    251              _append(_tmp)  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    252              _append('\xe5\xbc\xa0)\n')  # partial/sidebar_upload.html:7 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    253          else:  # partial/sidebar_upload.html:7 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    254              _append('\n\xe6\x9c\xac\xe5\x91\xa8\xe7\x9a\x84\xe9\x87\x87\xe9\x9b\x86\xe4\xbd\x99\xe9\xa2\x9d\xe5\xb7\xb2\xe7\x94\xa8\xe5\xae\x8c\xe4\xba\x86\n')  # partial/sidebar_upload.html:9 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    255          _append('\n</div>\n<div class="right"></div>\n</div>\n')  # partial/sidebar_upload.html:13 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    256          _append('\n')  # partial/sidebar_global.html:3 (via additives.html:8, base.html:54)
    257          _append('<div class="box" id="panel-me">\n<div class="header"><a class="right" href="/logout">\xe7\x99\xbb\xe5\x87\xba</a>\xe6\x88\x91\xe7\x9a\x84\xe4\xbf\xa1\xe6\x81\xaf</div>\n<div class="body">\n<div class="me">\n<a class="settings item" href="/settings" data-title="\xe8\xae\xbe\xe7\xbd\xae" data-url="/settings">\xe8\xae\xbe\xe7\xbd\xae</a>\n<a href="/user/')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    258          _tmp = current_user.username  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    259          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    260          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    261          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    262          _append(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    263          _append('"><img class="avatar" src="')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    264          _tmp = get_avatar_url(current_user, 's')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    265          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    266          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    267          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    268          _append(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    269          _append('" /></a>\n<a href="/user/')  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    270          _tmp = current_user.username  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    271          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    272          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    273          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    274          _append(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    275          _append('">')  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    276          _tmp = current_user.fullname  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    277          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    278          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    279          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    280          _append(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    281          _append('</a>\n<i class="level icon-level')  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    282          _tmp = current_user.level  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    283          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    284          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    285          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    286          _append(_tmp)  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    287          _append('"></i>\n</div>\n<div class="follow">\n<div class="following item" data-title="\xe6\x88\x91\xe5\x85\xb3\xe6\xb3\xa8\xe7\x9a\x84\xe4\xba\xba" data-url="/mine/following">\n<h3 class="anchor">')  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    288          _tmp = current_user.following_count  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    289          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    290          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    291          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    292          _append(_tmp)  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    293          _append('</h3>\n<span>following</span>\n</div>\n<div class="follower item" data-title="\xe5\x85\xb3\xe6\xb3\xa8\xe6\x88\x91\xe7\x9a\x84\xe4\xba\xba" data-url="/mine/follower">\n<h3 class="anchor">')  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    294          _tmp = current_user.follower_count  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    295          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    296          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    297          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    298          _append(_tmp)  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    299          _append('</h3>\n<span>followers</span>\n</div>\n</div>\n<ul>\n<li class="item" data-url="/mine/invite" data-title="\xe9\x82\x80\xe8\xaf\xb7\xe6\x9c\x8b\xe5\x8f\x8b\xe5\x8a\xa0\xe5\x85\xa5"> <span class="num">')  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    300          _tmp = current_user.unused_invite_key_count  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    301          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    302          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    303          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    304          _append(_tmp)  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    305          _append('</span><span class="anchor">\xe9\x82\x80\xe8\xaf\xb7\xe6\x9c\x8b\xe5\x8f\x8b\xe5\x8a\xa0\xe5\x85\xa5</span></li>\n<li class="item" data-title="\xe6\x88\x91\xe6\xb7\xbb\xe5\x8a\xa0\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87" data-url="/mine/photos"> <span class="num">')  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    306          _tmp = current_user.photo_count  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    307          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    308          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    309          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    310          _append(_tmp)  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    311          _append('</span><span class="anchor">\xe6\x88\x91\xe6\xb7\xbb\xe5\x8a\xa0\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87</span></li>\n<li class="item" data-title="\xe6\x88\x91\xe5\x96\x9c\xe6\xac\xa2\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87" data-url="/mine/likes_photos"><span class="num">')  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    312          _tmp = current_user.likes_count  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    313          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    314          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    315          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    316          _append(_tmp)  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    317          _append('</span><span class="anchor">\xe6\x88\x91\xe5\x96\x9c\xe6\xac\xa2\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87</span> </li>\n</ul>\n</div>\n</div>\n')  # partial/sidebar_me.html:27 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    318          _append('\n')  # partial/sidebar_global.html:4 (via additives.html:8, base.html:54)
    319      else:  # partial/sidebar_global.html:4 (via additives.html:8, base.html:54)
    320          _append('\n')  # partial/sidebar_global.html:5 (via additives.html:8, base.html:54)
    321          _append('<div class="box" id="panel-about">\n<div class="header">\xe5\x85\xb3\xe4\xba\x8e\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</div>\n<div class="body">\n<p>\xe5\x85\xb3\xe6\xb3\xa8\xe9\xa3\x9f\xe5\x93\x81\xe5\xae\x89\xe5\x85\xa8\xef\xbc\x8c\xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe4\xb8\x96\xe7\x95\x8c</p>\n<p>\xe6\x89\x80\xe6\x9c\x89\xe9\xa3\x9f\xe5\x93\x81\xe5\x92\x8c\xe6\xb7\xbb\xe5\x8a\xa0\xe5\x89\x82\xe8\xb5\x84\xe6\x96\x99\xe6\x9d\xa5\xe8\x87\xaa\xe4\xba\x8eiearth-\xe7\x88\xb1\xe5\x9c\xb0\xe7\x90\x83\xe7\x8e\xaf\xe4\xbf\x9d\xe6\x9c\xba\xe6\x9e\x84</p>\n</div>\n</div>\n')  # partial/sidebar_about.html:8 (via partial/sidebar_global.html:5, additives.html:8, base.html:54)
    322          _append('\n')  # partial/sidebar_global.html:6 (via additives.html:8, base.html:54)
    323          _append('<div class="box" id="panel-login">\n<div class="header">\xe7\x99\xbb\xe5\x85\xa5\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</div>\n<div class="body">\n<form action="/login" method="POST">\n<div class="section">\n<input type="TEXT" name="username" placeholder="\xe7\x94\xa8\xe6\x88\xb7\xe5\x90\x8d/Email" />\n</div>\n<div class="section">\n<input type="PASSWORD" name="password" placeholder="\xe5\xaf\x86\xe7\xa0\x81" />\n</div>\n<div class="section">\n<input type="SUBMIT" value="\xe7\x99\xbb\xe5\x85\xa5" class="btn primary-btn" />\n<span class="tip">\xe4\xbc\x9a\xe8\xae\xb0\xe4\xbd\x8f\xe7\x99\xbb\xe5\x85\xa5\xe4\xb8\x80\xe4\xb8\xaa\xe6\x9c\x88</span>\n</div>\n</form>\n<div class="alert alert-info">\xe5\x86\x85\xe6\xb5\x8b\xe4\xb8\xad\xef\xbc\x8c\xe5\x8f\xaa\xe6\x8e\xa5\xe5\x8f\x97\xe9\x82\x80\xe8\xaf\xb7\xe6\xb3\xa8\xe5\x86\x8c</div>\n</div>\n</div>\n')  # partial/sidebar_login.html:19 (via partial/sidebar_global.html:6, additives.html:8, base.html:54)
    324          _append('\n')  # partial/sidebar_global.html:8 (via additives.html:8, base.html:54)
    325      _append('\n')  # partial/sidebar_global.html:10 (via additives.html:8, base.html:54)
    326      _append('<div class="box">\n<div class="header">\xe6\xb5\x8f\xe8\xa7\x88\xe9\xa3\x9f\xe5\x93\x81</div>\n<div class="body">\n<ul>\n<li class="item" data-url="/photos/hot" data-title="\xe7\x83\xad\xe9\x97\xa8\xe9\xa3\x9f\xe5\x93\x81"><span class="anchor">\xe7\x83\xad\xe9\x97\xa8\xe9\xa3\x9f\xe5\x93\x81</span></li>\n<li class="item" data-url="/photos/latest" data-title="\xe6\x9c\x80\xe6\x96\xb0\xe9\xa3\x9f\xe5\x93\x81"><span class="anchor">\xe6\x9c\x80\xe6\x96\xb0\xe9\xa3\x9f\xe5\x93\x81</span></li>\n</ul>\n</div>\n</div>\n')  # partial/sidebar_photos_nav.html:10 (via partial/sidebar_global.html:10, additives.html:8, base.html:54)
    327      _append('\n')  # partial/sidebar_global.html:11 (via additives.html:8, base.html:54)
    328      import models  # partial/sidebar_tags.html:1 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    329      _append('\n')  # partial/sidebar_tags.html:2 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    330      hot_tags = models.Additive_Tag().hot_tags  # partial/sidebar_tags.html:2 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    331      _append('\n<div class="box" id="panel-tags">\n<div class="header">\xe7\x83\xad\xe9\x97\xa8\xe6\x90\x9c\xe7\xb4\xa2</div>\n<div class="body">\n<ul>\n')  # partial/sidebar_tags.html:8 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    332      for tag in hot_tags:  # partial/sidebar_tags.html:8 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    333          _append('\n<li class="item" data-url="/tag/')  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    334          _tmp = tag  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    335          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    336          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    337          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    338          _append(_tmp)  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    339          _append('"><i class="icon-tag"></i><span class="anchor">')  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    340          _tmp = tag  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    341          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    342          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    343          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    344          _append(_tmp)  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    345          _append('</span></li>\n')  # partial/sidebar_tags.html:10 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    346      _append('\n</ul>\n</div>\n</div>\n')  # partial/sidebar_tags.html:14 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    347      _append('\n')  # partial/sidebar_global.html:12 (via additives.html:8, base.html:54)
    348      _append('\n')  # additives.html:9 (via base.html:54)
    349      _append('\n</div>\n</div>\n</div>\n<div id="footer">\n<div class="inner">\n<div class="right">\n<span class="belief">make the world a little better and easier</span>\n</div>\n<div class="left">\n<ul>\n<li><a href="/about">\xe5\x85\xb3\xe4\xba\x8e</a> <!--<span class="divider">/</span>--></li>\n<!--<li><a href="/feedback">\xe5\x8f\x8d\xe9\xa6\x88</a> <span class="divider">/</span></li>-->\n<!--<li><a href="/blog">\xe6\x97\xa5\xe5\xbf\x97</a></li>-->\n</ul>\n</div>\n</div>\n</div>\n<script type="text/javascript">\nvar _gaq = _gaq || [];\n_gaq.push([\'_setAccount\', \'UA-1281124-23\']);\n_gaq.push([\'_trackPageview\']);\n(function() {\nvar ga = document.createElement(\'script\'); ga.type = \'text/javascript\'; ga.async = true;\nga.src = (\'https:\' == document.location.protocol ? \'https://ssl\' : \'http://www\') + \'.google-analytics.com/ga.js\';\nvar s = document.getElementsByTagName(\'script\')[0]; s.parentNode.insertBefore(ga, s);\n})();\n</script>\n<!-- love your mom! -->\n</body>\n<meta name="description" content="\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - " />\n')  # base.html:89
    350      return _utf8('').join(_buffer)  # base.html:0
[E 120720 10:00:30 web:1031] Uncaught exception GET / (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.109', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cookie': '__utma=148685175.647871982.1342707625.1342707625.1342707625.1; __utmz=148685175.1342707625.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)', 'Cache-Control': 'max-age=0', 'X-Real-Ip': '192.168.0.109'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "src/sites/www/handlers/home.py", line 14, in get
        return self._render('hot')
      File "src/sites/www/handlers/base.py", line 87, in _render
        current_additive = additive,
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 474, in render
        html = self.render_string(template_name, **kwargs)
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 586, in render_string
        return t.generate(**args)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 253, in generate
        return execute()
      File "additives_html.generated.py", line 86, in _execute
        creator = additive.creator  # partial/additives.html:5 (via additives.html:4, base.html:50)
      File "/home/dk/work/python/safood/src/common/models/additive.py", line 60, in creator
      File "/home/dk/work/python/safood/src/thing/thing/thing.py", line 215, in __getattr__
        raise ThingException('key:{key} not found'.format(key = key))
      File "/home/dk/work/python/safood/src/thing/thing/thing.py", line 215, in __getattr__
        raise ThingException('key:{key} not found'.format(key = key))
      File "/usr/lib/python2.7/bdb.py", line 48, in trace_dispatch
        return self.dispatch_line(frame)
      File "/usr/lib/python2.7/bdb.py", line 67, in dispatch_line
        if self.quitting: raise BdbQuit
    BdbQuit
[E 120720 10:00:30 web:1393] 500 GET / (127.0.0.1) 830875.44ms
[I 120720 10:00:30 autoreload:133] /home/dk/work/python/safood/src/common/models/additive.py modified; restarting server
[E 120720 10:14:53 template:256] additives.html code:
      1  def _execute():  # base.html:0
      2      _buffer = []  # base.html:0
      3      _append = _buffer.append  # base.html:0
      4      _append('<!doctype html>\n<head>\n<meta charset="UTF-8" />\n<meta content="True" name="HandheldFriendly" />\n<meta content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0; name=\'viewport\'" />\n<title>\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - \xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81')  # base.html:6
      5      _append('</title>\n<link rel="stylesheet" type="text/css" media="screen" href="/static/css/vendor/jquery.fancybox.css" />\n<link rel="stylesheet" type="text/css" media="screen" href="/static/css/main.css" />\n<link rel="shortcut icon" href="/static/img/favicon.ico" />\n<link rel="canonical" href="http://wuditoo.com/" />\n<meta name="description" content="\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - \xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81" />\n<script src="/static/js/vendor/jquery.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.history.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.fancybox.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.scrollTo.min.js" type="text/javascript"></script>\n')  # base.html:16
      6      _append('\n<script type="text/javascript">\n')  # additives.html:13 (via base.html:16)
      7      if current_additive:  # additives.html:13 (via base.html:16)
      8          _append('\nmeta_additive = {\nurl: "/additive/')  # additives.html:15 (via base.html:16)
      9          _tmp = current_additive.id  # additives.html:15 (via base.html:16)
     10          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # additives.html:15 (via base.html:16)
     11          else: _tmp = _utf8(str(_tmp))  # additives.html:15 (via base.html:16)
     12          _tmp = _utf8(xhtml_escape(_tmp))  # additives.html:15 (via base.html:16)
     13          _append(_tmp)  # additives.html:15 (via base.html:16)
     14          _append('",\nwidth: ')  # additives.html:16 (via base.html:16)
     15          _tmp = current_additive.width  # additives.html:16 (via base.html:16)
     16          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # additives.html:16 (via base.html:16)
     17          else: _tmp = _utf8(str(_tmp))  # additives.html:16 (via base.html:16)
     18          _tmp = _utf8(xhtml_escape(_tmp))  # additives.html:16 (via base.html:16)
     19          _append(_tmp)  # additives.html:16 (via base.html:16)
     20          _append(',\nheight: ')  # additives.html:17 (via base.html:16)
     21          _tmp = current_additive.height  # additives.html:17 (via base.html:16)
     22          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # additives.html:17 (via base.html:16)
     23          else: _tmp = _utf8(str(_tmp))  # additives.html:17 (via base.html:16)
     24          _tmp = _utf8(xhtml_escape(_tmp))  # additives.html:17 (via base.html:16)
     25          _append(_tmp)  # additives.html:17 (via base.html:16)
     26          _append('\n}\n')  # additives.html:19 (via base.html:16)
     27      _append('\n</script>\n')  # additives.html:21 (via base.html:16)
     28      _append('\n<script src="/static/js/main.js" type="text/javascript"></script>\n</head>\n<!--[if IE 7 ]><body class="ie7"><![endif]-->\n<!--[if gt IE 7]><body class="ie"><![endif]-->\n<!--[if !IE]><body><![endif]-->\n<div id="header">\n<div class="inner">\n<div id="logo"><a href="/">\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</a></div>\n<div id="slogon">\xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81</div>\n<div id="witticism">')  # base.html:27
     29      _tmp = home_sentence()  # base.html:27
     30      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:27
     31      else: _tmp = _utf8(str(_tmp))  # base.html:27
     32      _tmp = _utf8(xhtml_escape(_tmp))  # base.html:27
     33      _append(_tmp)  # base.html:27
     34      _append('</div>\n<!--\n<ul class="nav-right">\n</ul>\n-->\n</div>\n</div>\n<div id="container">\n<div class="inner">\n<div class="message alert alert-warn">\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0\xe5\x86\xac\xe7\x9c\xa0\xe4\xb8\xad\xef\xbc\x8c\xe8\x8b\x8f\xe9\x86\x92\xe6\x97\xb6\xe9\x97\xb4\xe5\xbe\x85\xe5\xae\x9a\xe3\x80\x82\xe8\xb0\xa2\xe8\xb0\xa2\xe6\x82\xa8\xe7\x9a\x84\xe5\x88\xb0\xe8\xae\xbf\xef\xbc\x9a\xef\xbc\x89</div>\n')  # base.html:38
     35      message = get_message()  # base.html:38
     36      _append('\n')  # base.html:39
     37      for message_type in ('error', 'success', 'info', 'warn'):  # base.html:39
     38          _append('\n')  # base.html:40
     39          if message and message_type == message[0]:  # base.html:40
     40              _append('\n<div id="')  # base.html:41
     41              _tmp = message_type  # base.html:41
     42              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     43              else: _tmp = _utf8(str(_tmp))  # base.html:41
     44              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     45              _append(_tmp)  # base.html:41
     46              _append('-message" class="message alert alert-')  # base.html:41
     47              _tmp = message_type  # base.html:41
     48              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     49              else: _tmp = _utf8(str(_tmp))  # base.html:41
     50              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     51              _append(_tmp)  # base.html:41
     52              _append('">')  # base.html:41
     53              _tmp = message[1]  # base.html:41
     54              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     55              else: _tmp = _utf8(str(_tmp))  # base.html:41
     56              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     57              _append(_tmp)  # base.html:41
     58              _append('</div>\n')  # base.html:42
     59          else:  # base.html:42
     60              _append('\n<div id="')  # base.html:43
     61              _tmp = message_type  # base.html:43
     62              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:43
     63              else: _tmp = _utf8(str(_tmp))  # base.html:43
     64              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:43
     65              _append(_tmp)  # base.html:43
     66              _append('-message" class="message alert alert-')  # base.html:43
     67              _tmp = message_type  # base.html:43
     68              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:43
     69              else: _tmp = _utf8(str(_tmp))  # base.html:43
     70              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:43
     71              _append(_tmp)  # base.html:43
     72              _append(' hide"></div>\n')  # base.html:44
     73          _append('\n')  # base.html:45
     74      _append('\n')  # base.html:47
     75      _append('\n<div id="main">\n')  # base.html:50
     76      _append('\n')  # additives.html:4 (via base.html:50)
     77      _append('<div class="box" id="additives">\n<div class="header">')  # partial/additives.html:2 (via additives.html:4, base.html:50)
     78      _tmp = additives_title  # partial/additives.html:2 (via additives.html:4, base.html:50)
     79      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:2 (via additives.html:4, base.html:50)
     80      else: _tmp = _utf8(str(_tmp))  # partial/additives.html:2 (via additives.html:4, base.html:50)
     81      _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:2 (via additives.html:4, base.html:50)
     82      _append(_tmp)  # partial/additives.html:2 (via additives.html:4, base.html:50)
     83      _append('</div>\n<div class="body main ul">\n')  # partial/additives.html:4 (via additives.html:4, base.html:50)
     84      for index, additive in enumerate(additives):  # partial/additives.html:4 (via additives.html:4, base.html:50)
     85          _append('\n')  # partial/additives.html:5 (via additives.html:4, base.html:50)
     86          creator = additive.creator  # partial/additives.html:5 (via additives.html:4, base.html:50)
     87          _append('\n<div class="additive-item">\n<div class="header">\n<a class="avatar" href="/user/')  # partial/additives.html:8 (via additives.html:4, base.html:50)
     88          _tmp = creator.username  # partial/additives.html:8 (via additives.html:4, base.html:50)
     89          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     90          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     91          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     92          _append(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     93          _append('"><img src="')  # partial/additives.html:8 (via additives.html:4, base.html:50)
     94          _tmp = get_avatar_url(creator, 's')  # partial/additives.html:8 (via additives.html:4, base.html:50)
     95          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     96          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     97          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     98          _append(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     99          _append('" /></a>')  # partial/additives.html:8 (via additives.html:4, base.html:50)
    100          _tmp = additive.name  # partial/additives.html:8 (via additives.html:4, base.html:50)
    101          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
    102          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
    103          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
    104          _append(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
    105          _append('\n</div>\n<div class="body">\n<div class="additive_alias">\xe5\x85\xb6\xe4\xbb\x96\xe5\x90\x8d\xe7\xa7\xb0:')  # partial/additives.html:11 (via additives.html:4, base.html:50)
    106          _tmp = additive.alias  # partial/additives.html:11 (via additives.html:4, base.html:50)
    107          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:11 (via additives.html:4, base.html:50)
    108          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:11 (via additives.html:4, base.html:50)
    109          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:11 (via additives.html:4, base.html:50)
    110          _append(_tmp)  # partial/additives.html:11 (via additives.html:4, base.html:50)
    111          _append('</div>\n<div class="additive_cns">CNS\xe5\x8f\xb7:')  # partial/additives.html:12 (via additives.html:4, base.html:50)
    112          _tmp = additive.cns  # partial/additives.html:12 (via additives.html:4, base.html:50)
    113          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:12 (via additives.html:4, base.html:50)
    114          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:12 (via additives.html:4, base.html:50)
    115          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:12 (via additives.html:4, base.html:50)
    116          _append(_tmp)  # partial/additives.html:12 (via additives.html:4, base.html:50)
    117          _append('</div>\n<div class="additive_ins">INS\xe5\x8f\xb7:')  # partial/additives.html:13 (via additives.html:4, base.html:50)
    118          _tmp = additive.ins  # partial/additives.html:13 (via additives.html:4, base.html:50)
    119          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:13 (via additives.html:4, base.html:50)
    120          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:13 (via additives.html:4, base.html:50)
    121          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:13 (via additives.html:4, base.html:50)
    122          _append(_tmp)  # partial/additives.html:13 (via additives.html:4, base.html:50)
    123          _append('</div>\n<div class="additive_effect">\xe5\x8a\x9f\xe8\x83\xbd:')  # partial/additives.html:14 (via additives.html:4, base.html:50)
    124          _tmp = additive.effect  # partial/additives.html:14 (via additives.html:4, base.html:50)
    125          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:14 (via additives.html:4, base.html:50)
    126          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:14 (via additives.html:4, base.html:50)
    127          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:14 (via additives.html:4, base.html:50)
    128          _append(_tmp)  # partial/additives.html:14 (via additives.html:4, base.html:50)
    129          _append('</div>\n</div>\n<div class="footer">\n<span class="meta">\n<ul>\n<li><i class="icon-view"></i> ')  # partial/additives.html:19 (via additives.html:4, base.html:50)
    130          _tmp = additive.views_count  # partial/additives.html:19 (via additives.html:4, base.html:50)
    131          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:19 (via additives.html:4, base.html:50)
    132          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:19 (via additives.html:4, base.html:50)
    133          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:19 (via additives.html:4, base.html:50)
    134          _append(_tmp)  # partial/additives.html:19 (via additives.html:4, base.html:50)
    135          _append('</li>\n</ul>\n</span>\n<span class="created">\n')  # partial/additives.html:23 (via additives.html:4, base.html:50)
    136          _tmp = timesince(additive.created)  # partial/additives.html:23 (via additives.html:4, base.html:50)
    137          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:23 (via additives.html:4, base.html:50)
    138          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:23 (via additives.html:4, base.html:50)
    139          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:23 (via additives.html:4, base.html:50)
    140          _append(_tmp)  # partial/additives.html:23 (via additives.html:4, base.html:50)
    141          _append('\n</span>\n</div>\n</div>\n')  # partial/additives.html:27 (via additives.html:4, base.html:50)
    142          _append('\n')  # partial/additives.html:28 (via additives.html:4, base.html:50)
    143          if index > 0 and (index + 1) % 3 == 0:  # partial/additives.html:28 (via additives.html:4, base.html:50)
    144              _append('\n<div class="clearfix"></div>\n')  # partial/additives.html:30 (via additives.html:4, base.html:50)
    145          _append('\n')  # partial/additives.html:32 (via additives.html:4, base.html:50)
    146      _append('\n')  # partial/additives.html:33 (via additives.html:4, base.html:50)
    147      page_type = 'additives'  # partial/additives.html:33 (via additives.html:4, base.html:50)
    148      _append('\n')  # partial/additives.html:34 (via additives.html:4, base.html:50)
    149      _append('\n')  # partial/pagination.html:3 (via partial/additives.html:34, additives.html:4, base.html:50)
    150      from macros.macro import ADDITIVES_PER_PAGE, USERS_PER_PAGE  # partial/pagination.html:3 (via partial/additives.html:34, additives.html:4, base.html:50)
    151      _append('\n')  # partial/pagination.html:4 (via partial/additives.html:34, additives.html:4, base.html:50)
    152      import math  # partial/pagination.html:4 (via partial/additives.html:34, additives.html:4, base.html:50)
    153      _append('\n')  # partial/pagination.html:6 (via partial/additives.html:34, additives.html:4, base.html:50)
    154      if page_type == 'additives':  # partial/pagination.html:6 (via partial/additives.html:34, additives.html:4, base.html:50)
    155          _append('\n')  # partial/pagination.html:7 (via partial/additives.html:34, additives.html:4, base.html:50)
    156          items_per_page = ADDITIVES_PER_PAGE  # partial/pagination.html:7 (via partial/additives.html:34, additives.html:4, base.html:50)
    157          _append('\n')  # partial/pagination.html:8 (via partial/additives.html:34, additives.html:4, base.html:50)
    158      else:  # partial/pagination.html:8 (via partial/additives.html:34, additives.html:4, base.html:50)
    159          _append('\n')  # partial/pagination.html:9 (via partial/additives.html:34, additives.html:4, base.html:50)
    160          items_per_page = USERS_PER_PAGE  # partial/pagination.html:9 (via partial/additives.html:34, additives.html:4, base.html:50)
    161          _append('\n')  # partial/pagination.html:10 (via partial/additives.html:34, additives.html:4, base.html:50)
    162      _append('\n')  # partial/pagination.html:12 (via partial/additives.html:34, additives.html:4, base.html:50)
    163      total_page = int(math.ceil(float(total_items) / items_per_page))  # partial/pagination.html:12 (via partial/additives.html:34, additives.html:4, base.html:50)
    164      _append('\n')  # partial/pagination.html:14 (via partial/additives.html:34, additives.html:4, base.html:50)
    165      current_page = int(handler.get_argument('page', 1))  # partial/pagination.html:14 (via partial/additives.html:34, additives.html:4, base.html:50)
    166      _append('\n')  # partial/pagination.html:16 (via partial/additives.html:34, additives.html:4, base.html:50)
    167      if current_page <=6:  # partial/pagination.html:16 (via partial/additives.html:34, additives.html:4, base.html:50)
    168          _append('\n')  # partial/pagination.html:17 (via partial/additives.html:34, additives.html:4, base.html:50)
    169          end_page = min(total_page, 10)  # partial/pagination.html:17 (via partial/additives.html:34, additives.html:4, base.html:50)
    170          _append('\n')  # partial/pagination.html:18 (via partial/additives.html:34, additives.html:4, base.html:50)
    171          start_page = 1  # partial/pagination.html:18 (via partial/additives.html:34, additives.html:4, base.html:50)
    172          _append('\n')  # partial/pagination.html:19 (via partial/additives.html:34, additives.html:4, base.html:50)
    173      else:  # partial/pagination.html:19 (via partial/additives.html:34, additives.html:4, base.html:50)
    174          _append('\n')  # partial/pagination.html:20 (via partial/additives.html:34, additives.html:4, base.html:50)
    175          end_page = min(total_page, current_page+4)  # partial/pagination.html:20 (via partial/additives.html:34, additives.html:4, base.html:50)
    176          _append('\n')  # partial/pagination.html:21 (via partial/additives.html:34, additives.html:4, base.html:50)
    177          start_page = current_page - 5  # partial/pagination.html:21 (via partial/additives.html:34, additives.html:4, base.html:50)
    178          _append('\n')  # partial/pagination.html:22 (via partial/additives.html:34, additives.html:4, base.html:50)
    179      _append('\n')  # partial/pagination.html:24 (via partial/additives.html:34, additives.html:4, base.html:50)
    180      if total_page > 1:  # partial/pagination.html:24 (via partial/additives.html:34, additives.html:4, base.html:50)
    181          _append('\n<div class="pagination">\n<ul>\n')  # partial/pagination.html:27 (via partial/additives.html:34, additives.html:4, base.html:50)
    182          if current_page == 1:  # partial/pagination.html:27 (via partial/additives.html:34, additives.html:4, base.html:50)
    183              _append('\n<li class="disabled">\xe2\x86\x90 </li>\n')  # partial/pagination.html:29 (via partial/additives.html:34, additives.html:4, base.html:50)
    184          else:  # partial/pagination.html:29 (via partial/additives.html:34, additives.html:4, base.html:50)
    185              _append('\n<li><a href="')  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    186              _tmp = page_path  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    187              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    188              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    189              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    190              _append(_tmp)  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    191              _append('?page=1">\xe2\x86\x90 </a></li>\n')  # partial/pagination.html:31 (via partial/additives.html:34, additives.html:4, base.html:50)
    192          _append('\n')  # partial/pagination.html:33 (via partial/additives.html:34, additives.html:4, base.html:50)
    193          for i in range(start_page, end_page + 1):  # partial/pagination.html:33 (via partial/additives.html:34, additives.html:4, base.html:50)
    194              _append('\n<li ')  # partial/pagination.html:34 (via partial/additives.html:34, additives.html:4, base.html:50)
    195              if current_page == i:  # partial/pagination.html:34 (via partial/additives.html:34, additives.html:4, base.html:50)
    196                  _append('class="active"')  # partial/pagination.html:34 (via partial/additives.html:34, additives.html:4, base.html:50)
    197              _append('>\n<a href="')  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    198              _tmp = page_path  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    199              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    200              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    201              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    202              _append(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    203              _append('?page=')  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    204              _tmp = i  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    205              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    206              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    207              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    208              _append(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    209              _append('">')  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    210              _tmp = i  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    211              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    212              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    213              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    214              _append(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    215              _append('</a>\n</li>\n')  # partial/pagination.html:37 (via partial/additives.html:34, additives.html:4, base.html:50)
    216          _append('\n')  # partial/pagination.html:39 (via partial/additives.html:34, additives.html:4, base.html:50)
    217          if current_page == total_page:  # partial/pagination.html:39 (via partial/additives.html:34, additives.html:4, base.html:50)
    218              _append('\n<li class="disabled">\xe2\x86\x92 </li>\n')  # partial/pagination.html:41 (via partial/additives.html:34, additives.html:4, base.html:50)
    219          else:  # partial/pagination.html:41 (via partial/additives.html:34, additives.html:4, base.html:50)
    220              _append('\n<li><a href="')  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    221              _tmp = page_path  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    222              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    223              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    224              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    225              _append(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    226              _append('?page=')  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    227              _tmp = current_page+1  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    228              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    229              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    230              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    231              _append(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    232              _append('">\xe2\x86\x92 </a></li>\n')  # partial/pagination.html:43 (via partial/additives.html:34, additives.html:4, base.html:50)
    233          _append('\n</ul>\n</div>\n')  # partial/pagination.html:46 (via partial/additives.html:34, additives.html:4, base.html:50)
    234      _append('\n')  # partial/pagination.html:47 (via partial/additives.html:34, additives.html:4, base.html:50)
    235      _append('\n</div>\n</div>\n')  # partial/additives.html:37 (via additives.html:4, base.html:50)
    236      _append('\n')  # additives.html:5 (via base.html:50)
    237      _append('\n</div>\n<div id="sidebar">\n')  # base.html:54
    238      _append('\n')  # additives.html:8 (via base.html:54)
    239      if current_user:  # partial/sidebar_global.html:1 (via additives.html:8, base.html:54)
    240          _append('\n')  # partial/sidebar_global.html:2 (via additives.html:8, base.html:54)
    241          _append('<div class="upload item ')  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    242          if not current_user.left_upload_count:  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    243              _append('disabled')  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    244          _append('" data-url="/photo/upload" data-title="\xe9\x87\x87\xe9\x9b\x86\xe7\x85\xa7\xe7\x89\x87" >\n<div class="left"></div>\n<div class="center">\n')  # partial/sidebar_upload.html:5 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    245          if current_user.left_upload_count:  # partial/sidebar_upload.html:5 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    246              _append('\n\xe9\x87\x87\xe9\x9b\x86\xe7\x85\xa7\xe7\x89\x87(\xe6\x9c\xac\xe5\x91\xa8\xe8\xbf\x98\xe5\x89\xa9')  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    247              _tmp = current_user.left_upload_count  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    248              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    249              else: _tmp = _utf8(str(_tmp))  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    250              _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    251              _append(_tmp)  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    252              _append('\xe5\xbc\xa0)\n')  # partial/sidebar_upload.html:7 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    253          else:  # partial/sidebar_upload.html:7 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    254              _append('\n\xe6\x9c\xac\xe5\x91\xa8\xe7\x9a\x84\xe9\x87\x87\xe9\x9b\x86\xe4\xbd\x99\xe9\xa2\x9d\xe5\xb7\xb2\xe7\x94\xa8\xe5\xae\x8c\xe4\xba\x86\n')  # partial/sidebar_upload.html:9 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    255          _append('\n</div>\n<div class="right"></div>\n</div>\n')  # partial/sidebar_upload.html:13 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    256          _append('\n')  # partial/sidebar_global.html:3 (via additives.html:8, base.html:54)
    257          _append('<div class="box" id="panel-me">\n<div class="header"><a class="right" href="/logout">\xe7\x99\xbb\xe5\x87\xba</a>\xe6\x88\x91\xe7\x9a\x84\xe4\xbf\xa1\xe6\x81\xaf</div>\n<div class="body">\n<div class="me">\n<a class="settings item" href="/settings" data-title="\xe8\xae\xbe\xe7\xbd\xae" data-url="/settings">\xe8\xae\xbe\xe7\xbd\xae</a>\n<a href="/user/')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    258          _tmp = current_user.username  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    259          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    260          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    261          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    262          _append(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    263          _append('"><img class="avatar" src="')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    264          _tmp = get_avatar_url(current_user, 's')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    265          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    266          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    267          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    268          _append(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    269          _append('" /></a>\n<a href="/user/')  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    270          _tmp = current_user.username  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    271          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    272          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    273          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    274          _append(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    275          _append('">')  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    276          _tmp = current_user.fullname  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    277          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    278          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    279          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    280          _append(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    281          _append('</a>\n<i class="level icon-level')  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    282          _tmp = current_user.level  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    283          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    284          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    285          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    286          _append(_tmp)  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    287          _append('"></i>\n</div>\n<div class="follow">\n<div class="following item" data-title="\xe6\x88\x91\xe5\x85\xb3\xe6\xb3\xa8\xe7\x9a\x84\xe4\xba\xba" data-url="/mine/following">\n<h3 class="anchor">')  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    288          _tmp = current_user.following_count  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    289          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    290          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    291          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    292          _append(_tmp)  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    293          _append('</h3>\n<span>following</span>\n</div>\n<div class="follower item" data-title="\xe5\x85\xb3\xe6\xb3\xa8\xe6\x88\x91\xe7\x9a\x84\xe4\xba\xba" data-url="/mine/follower">\n<h3 class="anchor">')  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    294          _tmp = current_user.follower_count  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    295          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    296          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    297          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    298          _append(_tmp)  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    299          _append('</h3>\n<span>followers</span>\n</div>\n</div>\n<ul>\n<li class="item" data-url="/mine/invite" data-title="\xe9\x82\x80\xe8\xaf\xb7\xe6\x9c\x8b\xe5\x8f\x8b\xe5\x8a\xa0\xe5\x85\xa5"> <span class="num">')  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    300          _tmp = current_user.unused_invite_key_count  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    301          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    302          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    303          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    304          _append(_tmp)  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    305          _append('</span><span class="anchor">\xe9\x82\x80\xe8\xaf\xb7\xe6\x9c\x8b\xe5\x8f\x8b\xe5\x8a\xa0\xe5\x85\xa5</span></li>\n<li class="item" data-title="\xe6\x88\x91\xe6\xb7\xbb\xe5\x8a\xa0\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87" data-url="/mine/photos"> <span class="num">')  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    306          _tmp = current_user.photo_count  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    307          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    308          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    309          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    310          _append(_tmp)  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    311          _append('</span><span class="anchor">\xe6\x88\x91\xe6\xb7\xbb\xe5\x8a\xa0\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87</span></li>\n<li class="item" data-title="\xe6\x88\x91\xe5\x96\x9c\xe6\xac\xa2\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87" data-url="/mine/likes_photos"><span class="num">')  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    312          _tmp = current_user.likes_count  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    313          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    314          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    315          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    316          _append(_tmp)  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    317          _append('</span><span class="anchor">\xe6\x88\x91\xe5\x96\x9c\xe6\xac\xa2\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87</span> </li>\n</ul>\n</div>\n</div>\n')  # partial/sidebar_me.html:27 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    318          _append('\n')  # partial/sidebar_global.html:4 (via additives.html:8, base.html:54)
    319      else:  # partial/sidebar_global.html:4 (via additives.html:8, base.html:54)
    320          _append('\n')  # partial/sidebar_global.html:5 (via additives.html:8, base.html:54)
    321          _append('<div class="box" id="panel-about">\n<div class="header">\xe5\x85\xb3\xe4\xba\x8e\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</div>\n<div class="body">\n<p>\xe5\x85\xb3\xe6\xb3\xa8\xe9\xa3\x9f\xe5\x93\x81\xe5\xae\x89\xe5\x85\xa8\xef\xbc\x8c\xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe4\xb8\x96\xe7\x95\x8c</p>\n<p>\xe6\x89\x80\xe6\x9c\x89\xe9\xa3\x9f\xe5\x93\x81\xe5\x92\x8c\xe6\xb7\xbb\xe5\x8a\xa0\xe5\x89\x82\xe8\xb5\x84\xe6\x96\x99\xe6\x9d\xa5\xe8\x87\xaa\xe4\xba\x8eiearth-\xe7\x88\xb1\xe5\x9c\xb0\xe7\x90\x83\xe7\x8e\xaf\xe4\xbf\x9d\xe6\x9c\xba\xe6\x9e\x84</p>\n</div>\n</div>\n')  # partial/sidebar_about.html:8 (via partial/sidebar_global.html:5, additives.html:8, base.html:54)
    322          _append('\n')  # partial/sidebar_global.html:6 (via additives.html:8, base.html:54)
    323          _append('<div class="box" id="panel-login">\n<div class="header">\xe7\x99\xbb\xe5\x85\xa5\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</div>\n<div class="body">\n<form action="/login" method="POST">\n<div class="section">\n<input type="TEXT" name="username" placeholder="\xe7\x94\xa8\xe6\x88\xb7\xe5\x90\x8d/Email" />\n</div>\n<div class="section">\n<input type="PASSWORD" name="password" placeholder="\xe5\xaf\x86\xe7\xa0\x81" />\n</div>\n<div class="section">\n<input type="SUBMIT" value="\xe7\x99\xbb\xe5\x85\xa5" class="btn primary-btn" />\n<span class="tip">\xe4\xbc\x9a\xe8\xae\xb0\xe4\xbd\x8f\xe7\x99\xbb\xe5\x85\xa5\xe4\xb8\x80\xe4\xb8\xaa\xe6\x9c\x88</span>\n</div>\n</form>\n<div class="alert alert-info">\xe5\x86\x85\xe6\xb5\x8b\xe4\xb8\xad\xef\xbc\x8c\xe5\x8f\xaa\xe6\x8e\xa5\xe5\x8f\x97\xe9\x82\x80\xe8\xaf\xb7\xe6\xb3\xa8\xe5\x86\x8c</div>\n</div>\n</div>\n')  # partial/sidebar_login.html:19 (via partial/sidebar_global.html:6, additives.html:8, base.html:54)
    324          _append('\n')  # partial/sidebar_global.html:8 (via additives.html:8, base.html:54)
    325      _append('\n')  # partial/sidebar_global.html:10 (via additives.html:8, base.html:54)
    326      _append('<div class="box">\n<div class="header">\xe6\xb5\x8f\xe8\xa7\x88\xe9\xa3\x9f\xe5\x93\x81</div>\n<div class="body">\n<ul>\n<li class="item" data-url="/photos/hot" data-title="\xe7\x83\xad\xe9\x97\xa8\xe9\xa3\x9f\xe5\x93\x81"><span class="anchor">\xe7\x83\xad\xe9\x97\xa8\xe9\xa3\x9f\xe5\x93\x81</span></li>\n<li class="item" data-url="/photos/latest" data-title="\xe6\x9c\x80\xe6\x96\xb0\xe9\xa3\x9f\xe5\x93\x81"><span class="anchor">\xe6\x9c\x80\xe6\x96\xb0\xe9\xa3\x9f\xe5\x93\x81</span></li>\n</ul>\n</div>\n</div>\n')  # partial/sidebar_photos_nav.html:10 (via partial/sidebar_global.html:10, additives.html:8, base.html:54)
    327      _append('\n')  # partial/sidebar_global.html:11 (via additives.html:8, base.html:54)
    328      import models  # partial/sidebar_tags.html:1 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    329      _append('\n')  # partial/sidebar_tags.html:2 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    330      hot_tags = models.Additive_Tag().hot_tags  # partial/sidebar_tags.html:2 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    331      _append('\n<div class="box" id="panel-tags">\n<div class="header">\xe7\x83\xad\xe9\x97\xa8\xe6\x90\x9c\xe7\xb4\xa2</div>\n<div class="body">\n<ul>\n')  # partial/sidebar_tags.html:8 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    332      for tag in hot_tags:  # partial/sidebar_tags.html:8 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    333          _append('\n<li class="item" data-url="/tag/')  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    334          _tmp = tag  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    335          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    336          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    337          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    338          _append(_tmp)  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    339          _append('"><i class="icon-tag"></i><span class="anchor">')  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    340          _tmp = tag  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    341          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    342          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    343          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    344          _append(_tmp)  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    345          _append('</span></li>\n')  # partial/sidebar_tags.html:10 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    346      _append('\n</ul>\n</div>\n</div>\n')  # partial/sidebar_tags.html:14 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    347      _append('\n')  # partial/sidebar_global.html:12 (via additives.html:8, base.html:54)
    348      _append('\n')  # additives.html:9 (via base.html:54)
    349      _append('\n</div>\n</div>\n</div>\n<div id="footer">\n<div class="inner">\n<div class="right">\n<span class="belief">make the world a little better and easier</span>\n</div>\n<div class="left">\n<ul>\n<li><a href="/about">\xe5\x85\xb3\xe4\xba\x8e</a> <!--<span class="divider">/</span>--></li>\n<!--<li><a href="/feedback">\xe5\x8f\x8d\xe9\xa6\x88</a> <span class="divider">/</span></li>-->\n<!--<li><a href="/blog">\xe6\x97\xa5\xe5\xbf\x97</a></li>-->\n</ul>\n</div>\n</div>\n</div>\n<script type="text/javascript">\nvar _gaq = _gaq || [];\n_gaq.push([\'_setAccount\', \'UA-1281124-23\']);\n_gaq.push([\'_trackPageview\']);\n(function() {\nvar ga = document.createElement(\'script\'); ga.type = \'text/javascript\'; ga.async = true;\nga.src = (\'https:\' == document.location.protocol ? \'https://ssl\' : \'http://www\') + \'.google-analytics.com/ga.js\';\nvar s = document.getElementsByTagName(\'script\')[0]; s.parentNode.insertBefore(ga, s);\n})();\n</script>\n<!-- love your mom! -->\n</body>\n<meta name="description" content="\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - " />\n')  # base.html:89
    350      return _utf8('').join(_buffer)  # base.html:0
[E 120720 10:14:53 web:1031] Uncaught exception GET / (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.109', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cookie': '__utma=148685175.647871982.1342707625.1342707625.1342707625.1; __utmz=148685175.1342707625.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)', 'Cache-Control': 'max-age=0', 'X-Real-Ip': '192.168.0.109'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "src/sites/www/handlers/home.py", line 14, in get
        return self._render('hot')
      File "src/sites/www/handlers/base.py", line 87, in _render
        current_additive = additive,
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 474, in render
        html = self.render_string(template_name, **kwargs)
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 586, in render_string
        return t.generate(**args)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 253, in generate
        return execute()
      File "additives_html.generated.py", line 86, in _execute
        creator = additive.creator  # partial/additives.html:5 (via additives.html:4, base.html:50)
      File "/home/dk/work/python/safood/src/common/models/additive.py", line 58, in creator
        return models.User().find(self.user_id)
      File "/home/dk/work/python/safood/src/thing/thing/thing.py", line 215, in __getattr__
        raise ThingException('key:{key} not found'.format(key = key))
    ThingException: key:user_id not found
[E 120720 10:14:53 web:1393] 500 GET / (127.0.0.1) 116868.04ms
[W 120720 10:14:53 web:1393] 404 GET /favicon.ico (127.0.0.1) 5.94ms
[E 120720 10:40:15 template:256] additives.html code:
      1  def _execute():  # base.html:0
      2      _buffer = []  # base.html:0
      3      _append = _buffer.append  # base.html:0
      4      _append('<!doctype html>\n<head>\n<meta charset="UTF-8" />\n<meta content="True" name="HandheldFriendly" />\n<meta content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0; name=\'viewport\'" />\n<title>\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - \xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81')  # base.html:6
      5      _append('</title>\n<link rel="stylesheet" type="text/css" media="screen" href="/static/css/vendor/jquery.fancybox.css" />\n<link rel="stylesheet" type="text/css" media="screen" href="/static/css/main.css" />\n<link rel="shortcut icon" href="/static/img/favicon.ico" />\n<link rel="canonical" href="http://wuditoo.com/" />\n<meta name="description" content="\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - \xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81" />\n<script src="/static/js/vendor/jquery.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.history.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.fancybox.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.scrollTo.min.js" type="text/javascript"></script>\n')  # base.html:16
      6      _append('\n<script type="text/javascript">\n')  # additives.html:13 (via base.html:16)
      7      if current_additive:  # additives.html:13 (via base.html:16)
      8          _append('\nmeta_additive = {\nurl: "/additive/')  # additives.html:15 (via base.html:16)
      9          _tmp = current_additive.id  # additives.html:15 (via base.html:16)
     10          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # additives.html:15 (via base.html:16)
     11          else: _tmp = _utf8(str(_tmp))  # additives.html:15 (via base.html:16)
     12          _tmp = _utf8(xhtml_escape(_tmp))  # additives.html:15 (via base.html:16)
     13          _append(_tmp)  # additives.html:15 (via base.html:16)
     14          _append('",\nwidth: ')  # additives.html:16 (via base.html:16)
     15          _tmp = current_additive.width  # additives.html:16 (via base.html:16)
     16          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # additives.html:16 (via base.html:16)
     17          else: _tmp = _utf8(str(_tmp))  # additives.html:16 (via base.html:16)
     18          _tmp = _utf8(xhtml_escape(_tmp))  # additives.html:16 (via base.html:16)
     19          _append(_tmp)  # additives.html:16 (via base.html:16)
     20          _append(',\nheight: ')  # additives.html:17 (via base.html:16)
     21          _tmp = current_additive.height  # additives.html:17 (via base.html:16)
     22          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # additives.html:17 (via base.html:16)
     23          else: _tmp = _utf8(str(_tmp))  # additives.html:17 (via base.html:16)
     24          _tmp = _utf8(xhtml_escape(_tmp))  # additives.html:17 (via base.html:16)
     25          _append(_tmp)  # additives.html:17 (via base.html:16)
     26          _append('\n}\n')  # additives.html:19 (via base.html:16)
     27      _append('\n</script>\n')  # additives.html:21 (via base.html:16)
     28      _append('\n<script src="/static/js/main.js" type="text/javascript"></script>\n</head>\n<!--[if IE 7 ]><body class="ie7"><![endif]-->\n<!--[if gt IE 7]><body class="ie"><![endif]-->\n<!--[if !IE]><body><![endif]-->\n<div id="header">\n<div class="inner">\n<div id="logo"><a href="/">\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</a></div>\n<div id="slogon">\xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81</div>\n<div id="witticism">')  # base.html:27
     29      _tmp = home_sentence()  # base.html:27
     30      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:27
     31      else: _tmp = _utf8(str(_tmp))  # base.html:27
     32      _tmp = _utf8(xhtml_escape(_tmp))  # base.html:27
     33      _append(_tmp)  # base.html:27
     34      _append('</div>\n<!--\n<ul class="nav-right">\n</ul>\n-->\n</div>\n</div>\n<div id="container">\n<div class="inner">\n<div class="message alert alert-warn">\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0\xe5\x86\xac\xe7\x9c\xa0\xe4\xb8\xad\xef\xbc\x8c\xe8\x8b\x8f\xe9\x86\x92\xe6\x97\xb6\xe9\x97\xb4\xe5\xbe\x85\xe5\xae\x9a\xe3\x80\x82\xe8\xb0\xa2\xe8\xb0\xa2\xe6\x82\xa8\xe7\x9a\x84\xe5\x88\xb0\xe8\xae\xbf\xef\xbc\x9a\xef\xbc\x89</div>\n')  # base.html:38
     35      message = get_message()  # base.html:38
     36      _append('\n')  # base.html:39
     37      for message_type in ('error', 'success', 'info', 'warn'):  # base.html:39
     38          _append('\n')  # base.html:40
     39          if message and message_type == message[0]:  # base.html:40
     40              _append('\n<div id="')  # base.html:41
     41              _tmp = message_type  # base.html:41
     42              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     43              else: _tmp = _utf8(str(_tmp))  # base.html:41
     44              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     45              _append(_tmp)  # base.html:41
     46              _append('-message" class="message alert alert-')  # base.html:41
     47              _tmp = message_type  # base.html:41
     48              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     49              else: _tmp = _utf8(str(_tmp))  # base.html:41
     50              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     51              _append(_tmp)  # base.html:41
     52              _append('">')  # base.html:41
     53              _tmp = message[1]  # base.html:41
     54              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     55              else: _tmp = _utf8(str(_tmp))  # base.html:41
     56              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     57              _append(_tmp)  # base.html:41
     58              _append('</div>\n')  # base.html:42
     59          else:  # base.html:42
     60              _append('\n<div id="')  # base.html:43
     61              _tmp = message_type  # base.html:43
     62              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:43
     63              else: _tmp = _utf8(str(_tmp))  # base.html:43
     64              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:43
     65              _append(_tmp)  # base.html:43
     66              _append('-message" class="message alert alert-')  # base.html:43
     67              _tmp = message_type  # base.html:43
     68              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:43
     69              else: _tmp = _utf8(str(_tmp))  # base.html:43
     70              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:43
     71              _append(_tmp)  # base.html:43
     72              _append(' hide"></div>\n')  # base.html:44
     73          _append('\n')  # base.html:45
     74      _append('\n')  # base.html:47
     75      _append('\n<div id="main">\n')  # base.html:50
     76      _append('\n')  # additives.html:4 (via base.html:50)
     77      _append('<div class="box" id="additives">\n<div class="header">')  # partial/additives.html:2 (via additives.html:4, base.html:50)
     78      _tmp = additives_title  # partial/additives.html:2 (via additives.html:4, base.html:50)
     79      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:2 (via additives.html:4, base.html:50)
     80      else: _tmp = _utf8(str(_tmp))  # partial/additives.html:2 (via additives.html:4, base.html:50)
     81      _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:2 (via additives.html:4, base.html:50)
     82      _append(_tmp)  # partial/additives.html:2 (via additives.html:4, base.html:50)
     83      _append('</div>\n<div class="body main ul">\n')  # partial/additives.html:4 (via additives.html:4, base.html:50)
     84      for index, additive in enumerate(additives):  # partial/additives.html:4 (via additives.html:4, base.html:50)
     85          _append('\n')  # partial/additives.html:5 (via additives.html:4, base.html:50)
     86          creator = additive.creator  # partial/additives.html:5 (via additives.html:4, base.html:50)
     87          _append('\n<div class="additive-item">\n<div class="header">\n<a class="avatar" href="/user/')  # partial/additives.html:8 (via additives.html:4, base.html:50)
     88          _tmp = creator.username  # partial/additives.html:8 (via additives.html:4, base.html:50)
     89          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     90          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     91          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     92          _append(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     93          _append('"><img src="')  # partial/additives.html:8 (via additives.html:4, base.html:50)
     94          _tmp = get_avatar_url(creator, 's')  # partial/additives.html:8 (via additives.html:4, base.html:50)
     95          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     96          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     97          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     98          _append(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     99          _append('" /></a>')  # partial/additives.html:8 (via additives.html:4, base.html:50)
    100          _tmp = additive.name  # partial/additives.html:8 (via additives.html:4, base.html:50)
    101          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
    102          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
    103          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
    104          _append(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
    105          _append('\n</div>\n<div class="body">\n<div class="additive_alias">\xe5\x85\xb6\xe4\xbb\x96\xe5\x90\x8d\xe7\xa7\xb0:')  # partial/additives.html:11 (via additives.html:4, base.html:50)
    106          _tmp = additive.alias  # partial/additives.html:11 (via additives.html:4, base.html:50)
    107          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:11 (via additives.html:4, base.html:50)
    108          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:11 (via additives.html:4, base.html:50)
    109          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:11 (via additives.html:4, base.html:50)
    110          _append(_tmp)  # partial/additives.html:11 (via additives.html:4, base.html:50)
    111          _append('</div>\n<div class="additive_cns">CNS\xe5\x8f\xb7:')  # partial/additives.html:12 (via additives.html:4, base.html:50)
    112          _tmp = additive.cns  # partial/additives.html:12 (via additives.html:4, base.html:50)
    113          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:12 (via additives.html:4, base.html:50)
    114          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:12 (via additives.html:4, base.html:50)
    115          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:12 (via additives.html:4, base.html:50)
    116          _append(_tmp)  # partial/additives.html:12 (via additives.html:4, base.html:50)
    117          _append('</div>\n<div class="additive_ins">INS\xe5\x8f\xb7:')  # partial/additives.html:13 (via additives.html:4, base.html:50)
    118          _tmp = additive.ins  # partial/additives.html:13 (via additives.html:4, base.html:50)
    119          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:13 (via additives.html:4, base.html:50)
    120          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:13 (via additives.html:4, base.html:50)
    121          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:13 (via additives.html:4, base.html:50)
    122          _append(_tmp)  # partial/additives.html:13 (via additives.html:4, base.html:50)
    123          _append('</div>\n<div class="additive_effect">\xe5\x8a\x9f\xe8\x83\xbd:')  # partial/additives.html:14 (via additives.html:4, base.html:50)
    124          _tmp = additive.effect  # partial/additives.html:14 (via additives.html:4, base.html:50)
    125          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:14 (via additives.html:4, base.html:50)
    126          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:14 (via additives.html:4, base.html:50)
    127          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:14 (via additives.html:4, base.html:50)
    128          _append(_tmp)  # partial/additives.html:14 (via additives.html:4, base.html:50)
    129          _append('</div>\n</div>\n<div class="footer">\n<span class="meta">\n<ul>\n<li><i class="icon-view"></i> ')  # partial/additives.html:19 (via additives.html:4, base.html:50)
    130          _tmp = additive.views_count  # partial/additives.html:19 (via additives.html:4, base.html:50)
    131          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:19 (via additives.html:4, base.html:50)
    132          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:19 (via additives.html:4, base.html:50)
    133          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:19 (via additives.html:4, base.html:50)
    134          _append(_tmp)  # partial/additives.html:19 (via additives.html:4, base.html:50)
    135          _append('</li>\n</ul>\n</span>\n<span class="created">\n')  # partial/additives.html:23 (via additives.html:4, base.html:50)
    136          _tmp = timesince(additive.created)  # partial/additives.html:23 (via additives.html:4, base.html:50)
    137          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:23 (via additives.html:4, base.html:50)
    138          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:23 (via additives.html:4, base.html:50)
    139          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:23 (via additives.html:4, base.html:50)
    140          _append(_tmp)  # partial/additives.html:23 (via additives.html:4, base.html:50)
    141          _append('\n</span>\n</div>\n</div>\n')  # partial/additives.html:27 (via additives.html:4, base.html:50)
    142          _append('\n')  # partial/additives.html:28 (via additives.html:4, base.html:50)
    143          if index > 0 and (index + 1) % 3 == 0:  # partial/additives.html:28 (via additives.html:4, base.html:50)
    144              _append('\n<div class="clearfix"></div>\n')  # partial/additives.html:30 (via additives.html:4, base.html:50)
    145          _append('\n')  # partial/additives.html:32 (via additives.html:4, base.html:50)
    146      _append('\n')  # partial/additives.html:33 (via additives.html:4, base.html:50)
    147      page_type = 'additives'  # partial/additives.html:33 (via additives.html:4, base.html:50)
    148      _append('\n')  # partial/additives.html:34 (via additives.html:4, base.html:50)
    149      _append('\n')  # partial/pagination.html:3 (via partial/additives.html:34, additives.html:4, base.html:50)
    150      from macros.macro import ADDITIVES_PER_PAGE, USERS_PER_PAGE  # partial/pagination.html:3 (via partial/additives.html:34, additives.html:4, base.html:50)
    151      _append('\n')  # partial/pagination.html:4 (via partial/additives.html:34, additives.html:4, base.html:50)
    152      import math  # partial/pagination.html:4 (via partial/additives.html:34, additives.html:4, base.html:50)
    153      _append('\n')  # partial/pagination.html:6 (via partial/additives.html:34, additives.html:4, base.html:50)
    154      if page_type == 'additives':  # partial/pagination.html:6 (via partial/additives.html:34, additives.html:4, base.html:50)
    155          _append('\n')  # partial/pagination.html:7 (via partial/additives.html:34, additives.html:4, base.html:50)
    156          items_per_page = ADDITIVES_PER_PAGE  # partial/pagination.html:7 (via partial/additives.html:34, additives.html:4, base.html:50)
    157          _append('\n')  # partial/pagination.html:8 (via partial/additives.html:34, additives.html:4, base.html:50)
    158      else:  # partial/pagination.html:8 (via partial/additives.html:34, additives.html:4, base.html:50)
    159          _append('\n')  # partial/pagination.html:9 (via partial/additives.html:34, additives.html:4, base.html:50)
    160          items_per_page = USERS_PER_PAGE  # partial/pagination.html:9 (via partial/additives.html:34, additives.html:4, base.html:50)
    161          _append('\n')  # partial/pagination.html:10 (via partial/additives.html:34, additives.html:4, base.html:50)
    162      _append('\n')  # partial/pagination.html:12 (via partial/additives.html:34, additives.html:4, base.html:50)
    163      total_page = int(math.ceil(float(total_items) / items_per_page))  # partial/pagination.html:12 (via partial/additives.html:34, additives.html:4, base.html:50)
    164      _append('\n')  # partial/pagination.html:14 (via partial/additives.html:34, additives.html:4, base.html:50)
    165      current_page = int(handler.get_argument('page', 1))  # partial/pagination.html:14 (via partial/additives.html:34, additives.html:4, base.html:50)
    166      _append('\n')  # partial/pagination.html:16 (via partial/additives.html:34, additives.html:4, base.html:50)
    167      if current_page <=6:  # partial/pagination.html:16 (via partial/additives.html:34, additives.html:4, base.html:50)
    168          _append('\n')  # partial/pagination.html:17 (via partial/additives.html:34, additives.html:4, base.html:50)
    169          end_page = min(total_page, 10)  # partial/pagination.html:17 (via partial/additives.html:34, additives.html:4, base.html:50)
    170          _append('\n')  # partial/pagination.html:18 (via partial/additives.html:34, additives.html:4, base.html:50)
    171          start_page = 1  # partial/pagination.html:18 (via partial/additives.html:34, additives.html:4, base.html:50)
    172          _append('\n')  # partial/pagination.html:19 (via partial/additives.html:34, additives.html:4, base.html:50)
    173      else:  # partial/pagination.html:19 (via partial/additives.html:34, additives.html:4, base.html:50)
    174          _append('\n')  # partial/pagination.html:20 (via partial/additives.html:34, additives.html:4, base.html:50)
    175          end_page = min(total_page, current_page+4)  # partial/pagination.html:20 (via partial/additives.html:34, additives.html:4, base.html:50)
    176          _append('\n')  # partial/pagination.html:21 (via partial/additives.html:34, additives.html:4, base.html:50)
    177          start_page = current_page - 5  # partial/pagination.html:21 (via partial/additives.html:34, additives.html:4, base.html:50)
    178          _append('\n')  # partial/pagination.html:22 (via partial/additives.html:34, additives.html:4, base.html:50)
    179      _append('\n')  # partial/pagination.html:24 (via partial/additives.html:34, additives.html:4, base.html:50)
    180      if total_page > 1:  # partial/pagination.html:24 (via partial/additives.html:34, additives.html:4, base.html:50)
    181          _append('\n<div class="pagination">\n<ul>\n')  # partial/pagination.html:27 (via partial/additives.html:34, additives.html:4, base.html:50)
    182          if current_page == 1:  # partial/pagination.html:27 (via partial/additives.html:34, additives.html:4, base.html:50)
    183              _append('\n<li class="disabled">\xe2\x86\x90 </li>\n')  # partial/pagination.html:29 (via partial/additives.html:34, additives.html:4, base.html:50)
    184          else:  # partial/pagination.html:29 (via partial/additives.html:34, additives.html:4, base.html:50)
    185              _append('\n<li><a href="')  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    186              _tmp = page_path  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    187              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    188              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    189              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    190              _append(_tmp)  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    191              _append('?page=1">\xe2\x86\x90 </a></li>\n')  # partial/pagination.html:31 (via partial/additives.html:34, additives.html:4, base.html:50)
    192          _append('\n')  # partial/pagination.html:33 (via partial/additives.html:34, additives.html:4, base.html:50)
    193          for i in range(start_page, end_page + 1):  # partial/pagination.html:33 (via partial/additives.html:34, additives.html:4, base.html:50)
    194              _append('\n<li ')  # partial/pagination.html:34 (via partial/additives.html:34, additives.html:4, base.html:50)
    195              if current_page == i:  # partial/pagination.html:34 (via partial/additives.html:34, additives.html:4, base.html:50)
    196                  _append('class="active"')  # partial/pagination.html:34 (via partial/additives.html:34, additives.html:4, base.html:50)
    197              _append('>\n<a href="')  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    198              _tmp = page_path  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    199              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    200              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    201              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    202              _append(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    203              _append('?page=')  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    204              _tmp = i  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    205              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    206              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    207              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    208              _append(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    209              _append('">')  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    210              _tmp = i  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    211              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    212              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    213              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    214              _append(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    215              _append('</a>\n</li>\n')  # partial/pagination.html:37 (via partial/additives.html:34, additives.html:4, base.html:50)
    216          _append('\n')  # partial/pagination.html:39 (via partial/additives.html:34, additives.html:4, base.html:50)
    217          if current_page == total_page:  # partial/pagination.html:39 (via partial/additives.html:34, additives.html:4, base.html:50)
    218              _append('\n<li class="disabled">\xe2\x86\x92 </li>\n')  # partial/pagination.html:41 (via partial/additives.html:34, additives.html:4, base.html:50)
    219          else:  # partial/pagination.html:41 (via partial/additives.html:34, additives.html:4, base.html:50)
    220              _append('\n<li><a href="')  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    221              _tmp = page_path  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    222              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    223              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    224              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    225              _append(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    226              _append('?page=')  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    227              _tmp = current_page+1  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    228              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    229              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    230              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    231              _append(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    232              _append('">\xe2\x86\x92 </a></li>\n')  # partial/pagination.html:43 (via partial/additives.html:34, additives.html:4, base.html:50)
    233          _append('\n</ul>\n</div>\n')  # partial/pagination.html:46 (via partial/additives.html:34, additives.html:4, base.html:50)
    234      _append('\n')  # partial/pagination.html:47 (via partial/additives.html:34, additives.html:4, base.html:50)
    235      _append('\n</div>\n</div>\n')  # partial/additives.html:37 (via additives.html:4, base.html:50)
    236      _append('\n')  # additives.html:5 (via base.html:50)
    237      _append('\n</div>\n<div id="sidebar">\n')  # base.html:54
    238      _append('\n')  # additives.html:8 (via base.html:54)
    239      if current_user:  # partial/sidebar_global.html:1 (via additives.html:8, base.html:54)
    240          _append('\n')  # partial/sidebar_global.html:2 (via additives.html:8, base.html:54)
    241          _append('<div class="upload item ')  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    242          if not current_user.left_upload_count:  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    243              _append('disabled')  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    244          _append('" data-url="/photo/upload" data-title="\xe9\x87\x87\xe9\x9b\x86\xe7\x85\xa7\xe7\x89\x87" >\n<div class="left"></div>\n<div class="center">\n')  # partial/sidebar_upload.html:5 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    245          if current_user.left_upload_count:  # partial/sidebar_upload.html:5 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    246              _append('\n\xe9\x87\x87\xe9\x9b\x86\xe7\x85\xa7\xe7\x89\x87(\xe6\x9c\xac\xe5\x91\xa8\xe8\xbf\x98\xe5\x89\xa9')  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    247              _tmp = current_user.left_upload_count  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    248              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    249              else: _tmp = _utf8(str(_tmp))  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    250              _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    251              _append(_tmp)  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    252              _append('\xe5\xbc\xa0)\n')  # partial/sidebar_upload.html:7 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    253          else:  # partial/sidebar_upload.html:7 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    254              _append('\n\xe6\x9c\xac\xe5\x91\xa8\xe7\x9a\x84\xe9\x87\x87\xe9\x9b\x86\xe4\xbd\x99\xe9\xa2\x9d\xe5\xb7\xb2\xe7\x94\xa8\xe5\xae\x8c\xe4\xba\x86\n')  # partial/sidebar_upload.html:9 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    255          _append('\n</div>\n<div class="right"></div>\n</div>\n')  # partial/sidebar_upload.html:13 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    256          _append('\n')  # partial/sidebar_global.html:3 (via additives.html:8, base.html:54)
    257          _append('<div class="box" id="panel-me">\n<div class="header"><a class="right" href="/logout">\xe7\x99\xbb\xe5\x87\xba</a>\xe6\x88\x91\xe7\x9a\x84\xe4\xbf\xa1\xe6\x81\xaf</div>\n<div class="body">\n<div class="me">\n<a class="settings item" href="/settings" data-title="\xe8\xae\xbe\xe7\xbd\xae" data-url="/settings">\xe8\xae\xbe\xe7\xbd\xae</a>\n<a href="/user/')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    258          _tmp = current_user.username  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    259          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    260          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    261          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    262          _append(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    263          _append('"><img class="avatar" src="')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    264          _tmp = get_avatar_url(current_user, 's')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    265          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    266          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    267          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    268          _append(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    269          _append('" /></a>\n<a href="/user/')  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    270          _tmp = current_user.username  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    271          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    272          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    273          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    274          _append(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    275          _append('">')  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    276          _tmp = current_user.fullname  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    277          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    278          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    279          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    280          _append(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    281          _append('</a>\n<i class="level icon-level')  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    282          _tmp = current_user.level  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    283          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    284          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    285          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    286          _append(_tmp)  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    287          _append('"></i>\n</div>\n<div class="follow">\n<div class="following item" data-title="\xe6\x88\x91\xe5\x85\xb3\xe6\xb3\xa8\xe7\x9a\x84\xe4\xba\xba" data-url="/mine/following">\n<h3 class="anchor">')  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    288          _tmp = current_user.following_count  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    289          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    290          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    291          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    292          _append(_tmp)  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    293          _append('</h3>\n<span>following</span>\n</div>\n<div class="follower item" data-title="\xe5\x85\xb3\xe6\xb3\xa8\xe6\x88\x91\xe7\x9a\x84\xe4\xba\xba" data-url="/mine/follower">\n<h3 class="anchor">')  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    294          _tmp = current_user.follower_count  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    295          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    296          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    297          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    298          _append(_tmp)  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    299          _append('</h3>\n<span>followers</span>\n</div>\n</div>\n<ul>\n<li class="item" data-url="/mine/invite" data-title="\xe9\x82\x80\xe8\xaf\xb7\xe6\x9c\x8b\xe5\x8f\x8b\xe5\x8a\xa0\xe5\x85\xa5"> <span class="num">')  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    300          _tmp = current_user.unused_invite_key_count  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    301          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    302          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    303          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    304          _append(_tmp)  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    305          _append('</span><span class="anchor">\xe9\x82\x80\xe8\xaf\xb7\xe6\x9c\x8b\xe5\x8f\x8b\xe5\x8a\xa0\xe5\x85\xa5</span></li>\n<li class="item" data-title="\xe6\x88\x91\xe6\xb7\xbb\xe5\x8a\xa0\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87" data-url="/mine/photos"> <span class="num">')  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    306          _tmp = current_user.photo_count  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    307          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    308          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    309          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    310          _append(_tmp)  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    311          _append('</span><span class="anchor">\xe6\x88\x91\xe6\xb7\xbb\xe5\x8a\xa0\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87</span></li>\n<li class="item" data-title="\xe6\x88\x91\xe5\x96\x9c\xe6\xac\xa2\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87" data-url="/mine/likes_photos"><span class="num">')  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    312          _tmp = current_user.likes_count  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    313          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    314          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    315          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    316          _append(_tmp)  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    317          _append('</span><span class="anchor">\xe6\x88\x91\xe5\x96\x9c\xe6\xac\xa2\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87</span> </li>\n</ul>\n</div>\n</div>\n')  # partial/sidebar_me.html:27 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    318          _append('\n')  # partial/sidebar_global.html:4 (via additives.html:8, base.html:54)
    319      else:  # partial/sidebar_global.html:4 (via additives.html:8, base.html:54)
    320          _append('\n')  # partial/sidebar_global.html:5 (via additives.html:8, base.html:54)
    321          _append('<div class="box" id="panel-about">\n<div class="header">\xe5\x85\xb3\xe4\xba\x8e\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</div>\n<div class="body">\n<p>\xe5\x85\xb3\xe6\xb3\xa8\xe9\xa3\x9f\xe5\x93\x81\xe5\xae\x89\xe5\x85\xa8\xef\xbc\x8c\xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe4\xb8\x96\xe7\x95\x8c</p>\n<p>\xe6\x89\x80\xe6\x9c\x89\xe9\xa3\x9f\xe5\x93\x81\xe5\x92\x8c\xe6\xb7\xbb\xe5\x8a\xa0\xe5\x89\x82\xe8\xb5\x84\xe6\x96\x99\xe6\x9d\xa5\xe8\x87\xaa\xe4\xba\x8eiearth-\xe7\x88\xb1\xe5\x9c\xb0\xe7\x90\x83\xe7\x8e\xaf\xe4\xbf\x9d\xe6\x9c\xba\xe6\x9e\x84</p>\n</div>\n</div>\n')  # partial/sidebar_about.html:8 (via partial/sidebar_global.html:5, additives.html:8, base.html:54)
    322          _append('\n')  # partial/sidebar_global.html:6 (via additives.html:8, base.html:54)
    323          _append('<div class="box" id="panel-login">\n<div class="header">\xe7\x99\xbb\xe5\x85\xa5\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</div>\n<div class="body">\n<form action="/login" method="POST">\n<div class="section">\n<input type="TEXT" name="username" placeholder="\xe7\x94\xa8\xe6\x88\xb7\xe5\x90\x8d/Email" />\n</div>\n<div class="section">\n<input type="PASSWORD" name="password" placeholder="\xe5\xaf\x86\xe7\xa0\x81" />\n</div>\n<div class="section">\n<input type="SUBMIT" value="\xe7\x99\xbb\xe5\x85\xa5" class="btn primary-btn" />\n<span class="tip">\xe4\xbc\x9a\xe8\xae\xb0\xe4\xbd\x8f\xe7\x99\xbb\xe5\x85\xa5\xe4\xb8\x80\xe4\xb8\xaa\xe6\x9c\x88</span>\n</div>\n</form>\n<div class="alert alert-info">\xe5\x86\x85\xe6\xb5\x8b\xe4\xb8\xad\xef\xbc\x8c\xe5\x8f\xaa\xe6\x8e\xa5\xe5\x8f\x97\xe9\x82\x80\xe8\xaf\xb7\xe6\xb3\xa8\xe5\x86\x8c</div>\n</div>\n</div>\n')  # partial/sidebar_login.html:19 (via partial/sidebar_global.html:6, additives.html:8, base.html:54)
    324          _append('\n')  # partial/sidebar_global.html:8 (via additives.html:8, base.html:54)
    325      _append('\n')  # partial/sidebar_global.html:10 (via additives.html:8, base.html:54)
    326      _append('<div class="box">\n<div class="header">\xe6\xb5\x8f\xe8\xa7\x88\xe9\xa3\x9f\xe5\x93\x81</div>\n<div class="body">\n<ul>\n<li class="item" data-url="/photos/hot" data-title="\xe7\x83\xad\xe9\x97\xa8\xe9\xa3\x9f\xe5\x93\x81"><span class="anchor">\xe7\x83\xad\xe9\x97\xa8\xe9\xa3\x9f\xe5\x93\x81</span></li>\n<li class="item" data-url="/photos/latest" data-title="\xe6\x9c\x80\xe6\x96\xb0\xe9\xa3\x9f\xe5\x93\x81"><span class="anchor">\xe6\x9c\x80\xe6\x96\xb0\xe9\xa3\x9f\xe5\x93\x81</span></li>\n</ul>\n</div>\n</div>\n')  # partial/sidebar_photos_nav.html:10 (via partial/sidebar_global.html:10, additives.html:8, base.html:54)
    327      _append('\n')  # partial/sidebar_global.html:11 (via additives.html:8, base.html:54)
    328      import models  # partial/sidebar_tags.html:1 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    329      _append('\n')  # partial/sidebar_tags.html:2 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    330      hot_tags = models.Additive_Tag().hot_tags  # partial/sidebar_tags.html:2 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    331      _append('\n<div class="box" id="panel-tags">\n<div class="header">\xe7\x83\xad\xe9\x97\xa8\xe6\x90\x9c\xe7\xb4\xa2</div>\n<div class="body">\n<ul>\n')  # partial/sidebar_tags.html:8 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    332      for tag in hot_tags:  # partial/sidebar_tags.html:8 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    333          _append('\n<li class="item" data-url="/tag/')  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    334          _tmp = tag  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    335          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    336          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    337          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    338          _append(_tmp)  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    339          _append('"><i class="icon-tag"></i><span class="anchor">')  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    340          _tmp = tag  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    341          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    342          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    343          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    344          _append(_tmp)  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    345          _append('</span></li>\n')  # partial/sidebar_tags.html:10 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    346      _append('\n</ul>\n</div>\n</div>\n')  # partial/sidebar_tags.html:14 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    347      _append('\n')  # partial/sidebar_global.html:12 (via additives.html:8, base.html:54)
    348      _append('\n')  # additives.html:9 (via base.html:54)
    349      _append('\n</div>\n</div>\n</div>\n<div id="footer">\n<div class="inner">\n<div class="right">\n<span class="belief">make the world a little better and easier</span>\n</div>\n<div class="left">\n<ul>\n<li><a href="/about">\xe5\x85\xb3\xe4\xba\x8e</a> <!--<span class="divider">/</span>--></li>\n<!--<li><a href="/feedback">\xe5\x8f\x8d\xe9\xa6\x88</a> <span class="divider">/</span></li>-->\n<!--<li><a href="/blog">\xe6\x97\xa5\xe5\xbf\x97</a></li>-->\n</ul>\n</div>\n</div>\n</div>\n<script type="text/javascript">\nvar _gaq = _gaq || [];\n_gaq.push([\'_setAccount\', \'UA-1281124-23\']);\n_gaq.push([\'_trackPageview\']);\n(function() {\nvar ga = document.createElement(\'script\'); ga.type = \'text/javascript\'; ga.async = true;\nga.src = (\'https:\' == document.location.protocol ? \'https://ssl\' : \'http://www\') + \'.google-analytics.com/ga.js\';\nvar s = document.getElementsByTagName(\'script\')[0]; s.parentNode.insertBefore(ga, s);\n})();\n</script>\n<!-- love your mom! -->\n</body>\n<meta name="description" content="\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - " />\n')  # base.html:89
    350      return _utf8('').join(_buffer)  # base.html:0
[E 120720 10:40:15 web:1031] Uncaught exception GET / (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.109', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cookie': '__utma=148685175.647871982.1342707625.1342707625.1342707625.1; __utmz=148685175.1342707625.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)', 'Cache-Control': 'max-age=0', 'X-Real-Ip': '192.168.0.109'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "src/sites/www/handlers/home.py", line 14, in get
        return self._render('hot')
      File "src/sites/www/handlers/base.py", line 87, in _render
        current_additive = additive,
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 474, in render
        html = self.render_string(template_name, **kwargs)
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 586, in render_string
        return t.generate(**args)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 253, in generate
        return execute()
      File "additives_html.generated.py", line 86, in _execute
        creator = additive.creator  # partial/additives.html:5 (via additives.html:4, base.html:50)
      File "/home/dk/work/python/safood/src/common/models/additive.py", line 58, in creator
        return models.User().find(self.user_id)
      File "/home/dk/work/python/safood/src/common/models/additive.py", line 58, in creator
        return models.User().find(self.user_id)
      File "/usr/lib/python2.7/bdb.py", line 48, in trace_dispatch
        return self.dispatch_line(frame)
      File "/usr/lib/python2.7/bdb.py", line 67, in dispatch_line
        if self.quitting: raise BdbQuit
    BdbQuit
[E 120720 10:40:15 web:1393] 500 GET / (127.0.0.1) 1053529.56ms
[W 120720 10:40:15 web:1393] 404 GET /favicon.ico (127.0.0.1) 1.81ms
[E 120720 10:40:33 template:256] additives.html code:
      1  def _execute():  # base.html:0
      2      _buffer = []  # base.html:0
      3      _append = _buffer.append  # base.html:0
      4      _append('<!doctype html>\n<head>\n<meta charset="UTF-8" />\n<meta content="True" name="HandheldFriendly" />\n<meta content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0; name=\'viewport\'" />\n<title>\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - \xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81')  # base.html:6
      5      _append('</title>\n<link rel="stylesheet" type="text/css" media="screen" href="/static/css/vendor/jquery.fancybox.css" />\n<link rel="stylesheet" type="text/css" media="screen" href="/static/css/main.css" />\n<link rel="shortcut icon" href="/static/img/favicon.ico" />\n<link rel="canonical" href="http://wuditoo.com/" />\n<meta name="description" content="\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - \xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81" />\n<script src="/static/js/vendor/jquery.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.history.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.fancybox.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.scrollTo.min.js" type="text/javascript"></script>\n')  # base.html:16
      6      _append('\n<script type="text/javascript">\n')  # additives.html:13 (via base.html:16)
      7      if current_additive:  # additives.html:13 (via base.html:16)
      8          _append('\nmeta_additive = {\nurl: "/additive/')  # additives.html:15 (via base.html:16)
      9          _tmp = current_additive.id  # additives.html:15 (via base.html:16)
     10          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # additives.html:15 (via base.html:16)
     11          else: _tmp = _utf8(str(_tmp))  # additives.html:15 (via base.html:16)
     12          _tmp = _utf8(xhtml_escape(_tmp))  # additives.html:15 (via base.html:16)
     13          _append(_tmp)  # additives.html:15 (via base.html:16)
     14          _append('",\nwidth: ')  # additives.html:16 (via base.html:16)
     15          _tmp = current_additive.width  # additives.html:16 (via base.html:16)
     16          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # additives.html:16 (via base.html:16)
     17          else: _tmp = _utf8(str(_tmp))  # additives.html:16 (via base.html:16)
     18          _tmp = _utf8(xhtml_escape(_tmp))  # additives.html:16 (via base.html:16)
     19          _append(_tmp)  # additives.html:16 (via base.html:16)
     20          _append(',\nheight: ')  # additives.html:17 (via base.html:16)
     21          _tmp = current_additive.height  # additives.html:17 (via base.html:16)
     22          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # additives.html:17 (via base.html:16)
     23          else: _tmp = _utf8(str(_tmp))  # additives.html:17 (via base.html:16)
     24          _tmp = _utf8(xhtml_escape(_tmp))  # additives.html:17 (via base.html:16)
     25          _append(_tmp)  # additives.html:17 (via base.html:16)
     26          _append('\n}\n')  # additives.html:19 (via base.html:16)
     27      _append('\n</script>\n')  # additives.html:21 (via base.html:16)
     28      _append('\n<script src="/static/js/main.js" type="text/javascript"></script>\n</head>\n<!--[if IE 7 ]><body class="ie7"><![endif]-->\n<!--[if gt IE 7]><body class="ie"><![endif]-->\n<!--[if !IE]><body><![endif]-->\n<div id="header">\n<div class="inner">\n<div id="logo"><a href="/">\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</a></div>\n<div id="slogon">\xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81</div>\n<div id="witticism">')  # base.html:27
     29      _tmp = home_sentence()  # base.html:27
     30      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:27
     31      else: _tmp = _utf8(str(_tmp))  # base.html:27
     32      _tmp = _utf8(xhtml_escape(_tmp))  # base.html:27
     33      _append(_tmp)  # base.html:27
     34      _append('</div>\n<!--\n<ul class="nav-right">\n</ul>\n-->\n</div>\n</div>\n<div id="container">\n<div class="inner">\n<div class="message alert alert-warn">\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0\xe5\x86\xac\xe7\x9c\xa0\xe4\xb8\xad\xef\xbc\x8c\xe8\x8b\x8f\xe9\x86\x92\xe6\x97\xb6\xe9\x97\xb4\xe5\xbe\x85\xe5\xae\x9a\xe3\x80\x82\xe8\xb0\xa2\xe8\xb0\xa2\xe6\x82\xa8\xe7\x9a\x84\xe5\x88\xb0\xe8\xae\xbf\xef\xbc\x9a\xef\xbc\x89</div>\n')  # base.html:38
     35      message = get_message()  # base.html:38
     36      _append('\n')  # base.html:39
     37      for message_type in ('error', 'success', 'info', 'warn'):  # base.html:39
     38          _append('\n')  # base.html:40
     39          if message and message_type == message[0]:  # base.html:40
     40              _append('\n<div id="')  # base.html:41
     41              _tmp = message_type  # base.html:41
     42              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     43              else: _tmp = _utf8(str(_tmp))  # base.html:41
     44              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     45              _append(_tmp)  # base.html:41
     46              _append('-message" class="message alert alert-')  # base.html:41
     47              _tmp = message_type  # base.html:41
     48              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     49              else: _tmp = _utf8(str(_tmp))  # base.html:41
     50              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     51              _append(_tmp)  # base.html:41
     52              _append('">')  # base.html:41
     53              _tmp = message[1]  # base.html:41
     54              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     55              else: _tmp = _utf8(str(_tmp))  # base.html:41
     56              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     57              _append(_tmp)  # base.html:41
     58              _append('</div>\n')  # base.html:42
     59          else:  # base.html:42
     60              _append('\n<div id="')  # base.html:43
     61              _tmp = message_type  # base.html:43
     62              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:43
     63              else: _tmp = _utf8(str(_tmp))  # base.html:43
     64              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:43
     65              _append(_tmp)  # base.html:43
     66              _append('-message" class="message alert alert-')  # base.html:43
     67              _tmp = message_type  # base.html:43
     68              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:43
     69              else: _tmp = _utf8(str(_tmp))  # base.html:43
     70              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:43
     71              _append(_tmp)  # base.html:43
     72              _append(' hide"></div>\n')  # base.html:44
     73          _append('\n')  # base.html:45
     74      _append('\n')  # base.html:47
     75      _append('\n<div id="main">\n')  # base.html:50
     76      _append('\n')  # additives.html:4 (via base.html:50)
     77      _append('<div class="box" id="additives">\n<div class="header">')  # partial/additives.html:2 (via additives.html:4, base.html:50)
     78      _tmp = additives_title  # partial/additives.html:2 (via additives.html:4, base.html:50)
     79      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:2 (via additives.html:4, base.html:50)
     80      else: _tmp = _utf8(str(_tmp))  # partial/additives.html:2 (via additives.html:4, base.html:50)
     81      _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:2 (via additives.html:4, base.html:50)
     82      _append(_tmp)  # partial/additives.html:2 (via additives.html:4, base.html:50)
     83      _append('</div>\n<div class="body main ul">\n')  # partial/additives.html:4 (via additives.html:4, base.html:50)
     84      for index, additive in enumerate(additives):  # partial/additives.html:4 (via additives.html:4, base.html:50)
     85          _append('\n')  # partial/additives.html:5 (via additives.html:4, base.html:50)
     86          creator = additive.creator  # partial/additives.html:5 (via additives.html:4, base.html:50)
     87          _append('\n<div class="additive-item">\n<div class="header">\n<a class="avatar" href="/user/')  # partial/additives.html:8 (via additives.html:4, base.html:50)
     88          _tmp = creator.username  # partial/additives.html:8 (via additives.html:4, base.html:50)
     89          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     90          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     91          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     92          _append(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     93          _append('"><img src="')  # partial/additives.html:8 (via additives.html:4, base.html:50)
     94          _tmp = get_avatar_url(creator, 's')  # partial/additives.html:8 (via additives.html:4, base.html:50)
     95          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     96          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     97          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     98          _append(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     99          _append('" /></a>')  # partial/additives.html:8 (via additives.html:4, base.html:50)
    100          _tmp = additive.name  # partial/additives.html:8 (via additives.html:4, base.html:50)
    101          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
    102          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
    103          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
    104          _append(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
    105          _append('\n</div>\n<div class="body">\n<div class="additive_alias">\xe5\x85\xb6\xe4\xbb\x96\xe5\x90\x8d\xe7\xa7\xb0:')  # partial/additives.html:11 (via additives.html:4, base.html:50)
    106          _tmp = additive.alias  # partial/additives.html:11 (via additives.html:4, base.html:50)
    107          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:11 (via additives.html:4, base.html:50)
    108          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:11 (via additives.html:4, base.html:50)
    109          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:11 (via additives.html:4, base.html:50)
    110          _append(_tmp)  # partial/additives.html:11 (via additives.html:4, base.html:50)
    111          _append('</div>\n<div class="additive_cns">CNS\xe5\x8f\xb7:')  # partial/additives.html:12 (via additives.html:4, base.html:50)
    112          _tmp = additive.cns  # partial/additives.html:12 (via additives.html:4, base.html:50)
    113          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:12 (via additives.html:4, base.html:50)
    114          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:12 (via additives.html:4, base.html:50)
    115          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:12 (via additives.html:4, base.html:50)
    116          _append(_tmp)  # partial/additives.html:12 (via additives.html:4, base.html:50)
    117          _append('</div>\n<div class="additive_ins">INS\xe5\x8f\xb7:')  # partial/additives.html:13 (via additives.html:4, base.html:50)
    118          _tmp = additive.ins  # partial/additives.html:13 (via additives.html:4, base.html:50)
    119          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:13 (via additives.html:4, base.html:50)
    120          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:13 (via additives.html:4, base.html:50)
    121          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:13 (via additives.html:4, base.html:50)
    122          _append(_tmp)  # partial/additives.html:13 (via additives.html:4, base.html:50)
    123          _append('</div>\n<div class="additive_effect">\xe5\x8a\x9f\xe8\x83\xbd:')  # partial/additives.html:14 (via additives.html:4, base.html:50)
    124          _tmp = additive.effect  # partial/additives.html:14 (via additives.html:4, base.html:50)
    125          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:14 (via additives.html:4, base.html:50)
    126          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:14 (via additives.html:4, base.html:50)
    127          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:14 (via additives.html:4, base.html:50)
    128          _append(_tmp)  # partial/additives.html:14 (via additives.html:4, base.html:50)
    129          _append('</div>\n</div>\n<div class="footer">\n<span class="meta">\n<ul>\n<li><i class="icon-view"></i> ')  # partial/additives.html:19 (via additives.html:4, base.html:50)
    130          _tmp = additive.views_count  # partial/additives.html:19 (via additives.html:4, base.html:50)
    131          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:19 (via additives.html:4, base.html:50)
    132          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:19 (via additives.html:4, base.html:50)
    133          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:19 (via additives.html:4, base.html:50)
    134          _append(_tmp)  # partial/additives.html:19 (via additives.html:4, base.html:50)
    135          _append('</li>\n</ul>\n</span>\n<span class="created">\n')  # partial/additives.html:23 (via additives.html:4, base.html:50)
    136          _tmp = timesince(additive.created)  # partial/additives.html:23 (via additives.html:4, base.html:50)
    137          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:23 (via additives.html:4, base.html:50)
    138          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:23 (via additives.html:4, base.html:50)
    139          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:23 (via additives.html:4, base.html:50)
    140          _append(_tmp)  # partial/additives.html:23 (via additives.html:4, base.html:50)
    141          _append('\n</span>\n</div>\n</div>\n')  # partial/additives.html:27 (via additives.html:4, base.html:50)
    142          _append('\n')  # partial/additives.html:28 (via additives.html:4, base.html:50)
    143          if index > 0 and (index + 1) % 3 == 0:  # partial/additives.html:28 (via additives.html:4, base.html:50)
    144              _append('\n<div class="clearfix"></div>\n')  # partial/additives.html:30 (via additives.html:4, base.html:50)
    145          _append('\n')  # partial/additives.html:32 (via additives.html:4, base.html:50)
    146      _append('\n')  # partial/additives.html:33 (via additives.html:4, base.html:50)
    147      page_type = 'additives'  # partial/additives.html:33 (via additives.html:4, base.html:50)
    148      _append('\n')  # partial/additives.html:34 (via additives.html:4, base.html:50)
    149      _append('\n')  # partial/pagination.html:3 (via partial/additives.html:34, additives.html:4, base.html:50)
    150      from macros.macro import ADDITIVES_PER_PAGE, USERS_PER_PAGE  # partial/pagination.html:3 (via partial/additives.html:34, additives.html:4, base.html:50)
    151      _append('\n')  # partial/pagination.html:4 (via partial/additives.html:34, additives.html:4, base.html:50)
    152      import math  # partial/pagination.html:4 (via partial/additives.html:34, additives.html:4, base.html:50)
    153      _append('\n')  # partial/pagination.html:6 (via partial/additives.html:34, additives.html:4, base.html:50)
    154      if page_type == 'additives':  # partial/pagination.html:6 (via partial/additives.html:34, additives.html:4, base.html:50)
    155          _append('\n')  # partial/pagination.html:7 (via partial/additives.html:34, additives.html:4, base.html:50)
    156          items_per_page = ADDITIVES_PER_PAGE  # partial/pagination.html:7 (via partial/additives.html:34, additives.html:4, base.html:50)
    157          _append('\n')  # partial/pagination.html:8 (via partial/additives.html:34, additives.html:4, base.html:50)
    158      else:  # partial/pagination.html:8 (via partial/additives.html:34, additives.html:4, base.html:50)
    159          _append('\n')  # partial/pagination.html:9 (via partial/additives.html:34, additives.html:4, base.html:50)
    160          items_per_page = USERS_PER_PAGE  # partial/pagination.html:9 (via partial/additives.html:34, additives.html:4, base.html:50)
    161          _append('\n')  # partial/pagination.html:10 (via partial/additives.html:34, additives.html:4, base.html:50)
    162      _append('\n')  # partial/pagination.html:12 (via partial/additives.html:34, additives.html:4, base.html:50)
    163      total_page = int(math.ceil(float(total_items) / items_per_page))  # partial/pagination.html:12 (via partial/additives.html:34, additives.html:4, base.html:50)
    164      _append('\n')  # partial/pagination.html:14 (via partial/additives.html:34, additives.html:4, base.html:50)
    165      current_page = int(handler.get_argument('page', 1))  # partial/pagination.html:14 (via partial/additives.html:34, additives.html:4, base.html:50)
    166      _append('\n')  # partial/pagination.html:16 (via partial/additives.html:34, additives.html:4, base.html:50)
    167      if current_page <=6:  # partial/pagination.html:16 (via partial/additives.html:34, additives.html:4, base.html:50)
    168          _append('\n')  # partial/pagination.html:17 (via partial/additives.html:34, additives.html:4, base.html:50)
    169          end_page = min(total_page, 10)  # partial/pagination.html:17 (via partial/additives.html:34, additives.html:4, base.html:50)
    170          _append('\n')  # partial/pagination.html:18 (via partial/additives.html:34, additives.html:4, base.html:50)
    171          start_page = 1  # partial/pagination.html:18 (via partial/additives.html:34, additives.html:4, base.html:50)
    172          _append('\n')  # partial/pagination.html:19 (via partial/additives.html:34, additives.html:4, base.html:50)
    173      else:  # partial/pagination.html:19 (via partial/additives.html:34, additives.html:4, base.html:50)
    174          _append('\n')  # partial/pagination.html:20 (via partial/additives.html:34, additives.html:4, base.html:50)
    175          end_page = min(total_page, current_page+4)  # partial/pagination.html:20 (via partial/additives.html:34, additives.html:4, base.html:50)
    176          _append('\n')  # partial/pagination.html:21 (via partial/additives.html:34, additives.html:4, base.html:50)
    177          start_page = current_page - 5  # partial/pagination.html:21 (via partial/additives.html:34, additives.html:4, base.html:50)
    178          _append('\n')  # partial/pagination.html:22 (via partial/additives.html:34, additives.html:4, base.html:50)
    179      _append('\n')  # partial/pagination.html:24 (via partial/additives.html:34, additives.html:4, base.html:50)
    180      if total_page > 1:  # partial/pagination.html:24 (via partial/additives.html:34, additives.html:4, base.html:50)
    181          _append('\n<div class="pagination">\n<ul>\n')  # partial/pagination.html:27 (via partial/additives.html:34, additives.html:4, base.html:50)
    182          if current_page == 1:  # partial/pagination.html:27 (via partial/additives.html:34, additives.html:4, base.html:50)
    183              _append('\n<li class="disabled">\xe2\x86\x90 </li>\n')  # partial/pagination.html:29 (via partial/additives.html:34, additives.html:4, base.html:50)
    184          else:  # partial/pagination.html:29 (via partial/additives.html:34, additives.html:4, base.html:50)
    185              _append('\n<li><a href="')  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    186              _tmp = page_path  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    187              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    188              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    189              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    190              _append(_tmp)  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    191              _append('?page=1">\xe2\x86\x90 </a></li>\n')  # partial/pagination.html:31 (via partial/additives.html:34, additives.html:4, base.html:50)
    192          _append('\n')  # partial/pagination.html:33 (via partial/additives.html:34, additives.html:4, base.html:50)
    193          for i in range(start_page, end_page + 1):  # partial/pagination.html:33 (via partial/additives.html:34, additives.html:4, base.html:50)
    194              _append('\n<li ')  # partial/pagination.html:34 (via partial/additives.html:34, additives.html:4, base.html:50)
    195              if current_page == i:  # partial/pagination.html:34 (via partial/additives.html:34, additives.html:4, base.html:50)
    196                  _append('class="active"')  # partial/pagination.html:34 (via partial/additives.html:34, additives.html:4, base.html:50)
    197              _append('>\n<a href="')  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    198              _tmp = page_path  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    199              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    200              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    201              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    202              _append(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    203              _append('?page=')  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    204              _tmp = i  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    205              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    206              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    207              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    208              _append(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    209              _append('">')  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    210              _tmp = i  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    211              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    212              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    213              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    214              _append(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    215              _append('</a>\n</li>\n')  # partial/pagination.html:37 (via partial/additives.html:34, additives.html:4, base.html:50)
    216          _append('\n')  # partial/pagination.html:39 (via partial/additives.html:34, additives.html:4, base.html:50)
    217          if current_page == total_page:  # partial/pagination.html:39 (via partial/additives.html:34, additives.html:4, base.html:50)
    218              _append('\n<li class="disabled">\xe2\x86\x92 </li>\n')  # partial/pagination.html:41 (via partial/additives.html:34, additives.html:4, base.html:50)
    219          else:  # partial/pagination.html:41 (via partial/additives.html:34, additives.html:4, base.html:50)
    220              _append('\n<li><a href="')  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    221              _tmp = page_path  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    222              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    223              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    224              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    225              _append(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    226              _append('?page=')  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    227              _tmp = current_page+1  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    228              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    229              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    230              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    231              _append(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    232              _append('">\xe2\x86\x92 </a></li>\n')  # partial/pagination.html:43 (via partial/additives.html:34, additives.html:4, base.html:50)
    233          _append('\n</ul>\n</div>\n')  # partial/pagination.html:46 (via partial/additives.html:34, additives.html:4, base.html:50)
    234      _append('\n')  # partial/pagination.html:47 (via partial/additives.html:34, additives.html:4, base.html:50)
    235      _append('\n</div>\n</div>\n')  # partial/additives.html:37 (via additives.html:4, base.html:50)
    236      _append('\n')  # additives.html:5 (via base.html:50)
    237      _append('\n</div>\n<div id="sidebar">\n')  # base.html:54
    238      _append('\n')  # additives.html:8 (via base.html:54)
    239      if current_user:  # partial/sidebar_global.html:1 (via additives.html:8, base.html:54)
    240          _append('\n')  # partial/sidebar_global.html:2 (via additives.html:8, base.html:54)
    241          _append('<div class="upload item ')  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    242          if not current_user.left_upload_count:  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    243              _append('disabled')  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    244          _append('" data-url="/photo/upload" data-title="\xe9\x87\x87\xe9\x9b\x86\xe7\x85\xa7\xe7\x89\x87" >\n<div class="left"></div>\n<div class="center">\n')  # partial/sidebar_upload.html:5 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    245          if current_user.left_upload_count:  # partial/sidebar_upload.html:5 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    246              _append('\n\xe9\x87\x87\xe9\x9b\x86\xe7\x85\xa7\xe7\x89\x87(\xe6\x9c\xac\xe5\x91\xa8\xe8\xbf\x98\xe5\x89\xa9')  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    247              _tmp = current_user.left_upload_count  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    248              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    249              else: _tmp = _utf8(str(_tmp))  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    250              _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    251              _append(_tmp)  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    252              _append('\xe5\xbc\xa0)\n')  # partial/sidebar_upload.html:7 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    253          else:  # partial/sidebar_upload.html:7 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    254              _append('\n\xe6\x9c\xac\xe5\x91\xa8\xe7\x9a\x84\xe9\x87\x87\xe9\x9b\x86\xe4\xbd\x99\xe9\xa2\x9d\xe5\xb7\xb2\xe7\x94\xa8\xe5\xae\x8c\xe4\xba\x86\n')  # partial/sidebar_upload.html:9 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    255          _append('\n</div>\n<div class="right"></div>\n</div>\n')  # partial/sidebar_upload.html:13 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    256          _append('\n')  # partial/sidebar_global.html:3 (via additives.html:8, base.html:54)
    257          _append('<div class="box" id="panel-me">\n<div class="header"><a class="right" href="/logout">\xe7\x99\xbb\xe5\x87\xba</a>\xe6\x88\x91\xe7\x9a\x84\xe4\xbf\xa1\xe6\x81\xaf</div>\n<div class="body">\n<div class="me">\n<a class="settings item" href="/settings" data-title="\xe8\xae\xbe\xe7\xbd\xae" data-url="/settings">\xe8\xae\xbe\xe7\xbd\xae</a>\n<a href="/user/')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    258          _tmp = current_user.username  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    259          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    260          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    261          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    262          _append(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    263          _append('"><img class="avatar" src="')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    264          _tmp = get_avatar_url(current_user, 's')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    265          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    266          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    267          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    268          _append(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    269          _append('" /></a>\n<a href="/user/')  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    270          _tmp = current_user.username  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    271          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    272          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    273          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    274          _append(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    275          _append('">')  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    276          _tmp = current_user.fullname  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    277          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    278          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    279          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    280          _append(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    281          _append('</a>\n<i class="level icon-level')  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    282          _tmp = current_user.level  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    283          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    284          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    285          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    286          _append(_tmp)  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    287          _append('"></i>\n</div>\n<div class="follow">\n<div class="following item" data-title="\xe6\x88\x91\xe5\x85\xb3\xe6\xb3\xa8\xe7\x9a\x84\xe4\xba\xba" data-url="/mine/following">\n<h3 class="anchor">')  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    288          _tmp = current_user.following_count  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    289          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    290          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    291          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    292          _append(_tmp)  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    293          _append('</h3>\n<span>following</span>\n</div>\n<div class="follower item" data-title="\xe5\x85\xb3\xe6\xb3\xa8\xe6\x88\x91\xe7\x9a\x84\xe4\xba\xba" data-url="/mine/follower">\n<h3 class="anchor">')  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    294          _tmp = current_user.follower_count  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    295          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    296          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    297          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    298          _append(_tmp)  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    299          _append('</h3>\n<span>followers</span>\n</div>\n</div>\n<ul>\n<li class="item" data-url="/mine/invite" data-title="\xe9\x82\x80\xe8\xaf\xb7\xe6\x9c\x8b\xe5\x8f\x8b\xe5\x8a\xa0\xe5\x85\xa5"> <span class="num">')  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    300          _tmp = current_user.unused_invite_key_count  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    301          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    302          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    303          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    304          _append(_tmp)  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    305          _append('</span><span class="anchor">\xe9\x82\x80\xe8\xaf\xb7\xe6\x9c\x8b\xe5\x8f\x8b\xe5\x8a\xa0\xe5\x85\xa5</span></li>\n<li class="item" data-title="\xe6\x88\x91\xe6\xb7\xbb\xe5\x8a\xa0\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87" data-url="/mine/photos"> <span class="num">')  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    306          _tmp = current_user.photo_count  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    307          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    308          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    309          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    310          _append(_tmp)  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    311          _append('</span><span class="anchor">\xe6\x88\x91\xe6\xb7\xbb\xe5\x8a\xa0\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87</span></li>\n<li class="item" data-title="\xe6\x88\x91\xe5\x96\x9c\xe6\xac\xa2\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87" data-url="/mine/likes_photos"><span class="num">')  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    312          _tmp = current_user.likes_count  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    313          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    314          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    315          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    316          _append(_tmp)  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    317          _append('</span><span class="anchor">\xe6\x88\x91\xe5\x96\x9c\xe6\xac\xa2\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87</span> </li>\n</ul>\n</div>\n</div>\n')  # partial/sidebar_me.html:27 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    318          _append('\n')  # partial/sidebar_global.html:4 (via additives.html:8, base.html:54)
    319      else:  # partial/sidebar_global.html:4 (via additives.html:8, base.html:54)
    320          _append('\n')  # partial/sidebar_global.html:5 (via additives.html:8, base.html:54)
    321          _append('<div class="box" id="panel-about">\n<div class="header">\xe5\x85\xb3\xe4\xba\x8e\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</div>\n<div class="body">\n<p>\xe5\x85\xb3\xe6\xb3\xa8\xe9\xa3\x9f\xe5\x93\x81\xe5\xae\x89\xe5\x85\xa8\xef\xbc\x8c\xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe4\xb8\x96\xe7\x95\x8c</p>\n<p>\xe6\x89\x80\xe6\x9c\x89\xe9\xa3\x9f\xe5\x93\x81\xe5\x92\x8c\xe6\xb7\xbb\xe5\x8a\xa0\xe5\x89\x82\xe8\xb5\x84\xe6\x96\x99\xe6\x9d\xa5\xe8\x87\xaa\xe4\xba\x8eiearth-\xe7\x88\xb1\xe5\x9c\xb0\xe7\x90\x83\xe7\x8e\xaf\xe4\xbf\x9d\xe6\x9c\xba\xe6\x9e\x84</p>\n</div>\n</div>\n')  # partial/sidebar_about.html:8 (via partial/sidebar_global.html:5, additives.html:8, base.html:54)
    322          _append('\n')  # partial/sidebar_global.html:6 (via additives.html:8, base.html:54)
    323          _append('<div class="box" id="panel-login">\n<div class="header">\xe7\x99\xbb\xe5\x85\xa5\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</div>\n<div class="body">\n<form action="/login" method="POST">\n<div class="section">\n<input type="TEXT" name="username" placeholder="\xe7\x94\xa8\xe6\x88\xb7\xe5\x90\x8d/Email" />\n</div>\n<div class="section">\n<input type="PASSWORD" name="password" placeholder="\xe5\xaf\x86\xe7\xa0\x81" />\n</div>\n<div class="section">\n<input type="SUBMIT" value="\xe7\x99\xbb\xe5\x85\xa5" class="btn primary-btn" />\n<span class="tip">\xe4\xbc\x9a\xe8\xae\xb0\xe4\xbd\x8f\xe7\x99\xbb\xe5\x85\xa5\xe4\xb8\x80\xe4\xb8\xaa\xe6\x9c\x88</span>\n</div>\n</form>\n<div class="alert alert-info">\xe5\x86\x85\xe6\xb5\x8b\xe4\xb8\xad\xef\xbc\x8c\xe5\x8f\xaa\xe6\x8e\xa5\xe5\x8f\x97\xe9\x82\x80\xe8\xaf\xb7\xe6\xb3\xa8\xe5\x86\x8c</div>\n</div>\n</div>\n')  # partial/sidebar_login.html:19 (via partial/sidebar_global.html:6, additives.html:8, base.html:54)
    324          _append('\n')  # partial/sidebar_global.html:8 (via additives.html:8, base.html:54)
    325      _append('\n')  # partial/sidebar_global.html:10 (via additives.html:8, base.html:54)
    326      _append('<div class="box">\n<div class="header">\xe6\xb5\x8f\xe8\xa7\x88\xe9\xa3\x9f\xe5\x93\x81</div>\n<div class="body">\n<ul>\n<li class="item" data-url="/photos/hot" data-title="\xe7\x83\xad\xe9\x97\xa8\xe9\xa3\x9f\xe5\x93\x81"><span class="anchor">\xe7\x83\xad\xe9\x97\xa8\xe9\xa3\x9f\xe5\x93\x81</span></li>\n<li class="item" data-url="/photos/latest" data-title="\xe6\x9c\x80\xe6\x96\xb0\xe9\xa3\x9f\xe5\x93\x81"><span class="anchor">\xe6\x9c\x80\xe6\x96\xb0\xe9\xa3\x9f\xe5\x93\x81</span></li>\n</ul>\n</div>\n</div>\n')  # partial/sidebar_photos_nav.html:10 (via partial/sidebar_global.html:10, additives.html:8, base.html:54)
    327      _append('\n')  # partial/sidebar_global.html:11 (via additives.html:8, base.html:54)
    328      import models  # partial/sidebar_tags.html:1 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    329      _append('\n')  # partial/sidebar_tags.html:2 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    330      hot_tags = models.Additive_Tag().hot_tags  # partial/sidebar_tags.html:2 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    331      _append('\n<div class="box" id="panel-tags">\n<div class="header">\xe7\x83\xad\xe9\x97\xa8\xe6\x90\x9c\xe7\xb4\xa2</div>\n<div class="body">\n<ul>\n')  # partial/sidebar_tags.html:8 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    332      for tag in hot_tags:  # partial/sidebar_tags.html:8 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    333          _append('\n<li class="item" data-url="/tag/')  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    334          _tmp = tag  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    335          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    336          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    337          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    338          _append(_tmp)  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    339          _append('"><i class="icon-tag"></i><span class="anchor">')  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    340          _tmp = tag  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    341          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    342          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    343          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    344          _append(_tmp)  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    345          _append('</span></li>\n')  # partial/sidebar_tags.html:10 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    346      _append('\n</ul>\n</div>\n</div>\n')  # partial/sidebar_tags.html:14 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    347      _append('\n')  # partial/sidebar_global.html:12 (via additives.html:8, base.html:54)
    348      _append('\n')  # additives.html:9 (via base.html:54)
    349      _append('\n</div>\n</div>\n</div>\n<div id="footer">\n<div class="inner">\n<div class="right">\n<span class="belief">make the world a little better and easier</span>\n</div>\n<div class="left">\n<ul>\n<li><a href="/about">\xe5\x85\xb3\xe4\xba\x8e</a> <!--<span class="divider">/</span>--></li>\n<!--<li><a href="/feedback">\xe5\x8f\x8d\xe9\xa6\x88</a> <span class="divider">/</span></li>-->\n<!--<li><a href="/blog">\xe6\x97\xa5\xe5\xbf\x97</a></li>-->\n</ul>\n</div>\n</div>\n</div>\n<script type="text/javascript">\nvar _gaq = _gaq || [];\n_gaq.push([\'_setAccount\', \'UA-1281124-23\']);\n_gaq.push([\'_trackPageview\']);\n(function() {\nvar ga = document.createElement(\'script\'); ga.type = \'text/javascript\'; ga.async = true;\nga.src = (\'https:\' == document.location.protocol ? \'https://ssl\' : \'http://www\') + \'.google-analytics.com/ga.js\';\nvar s = document.getElementsByTagName(\'script\')[0]; s.parentNode.insertBefore(ga, s);\n})();\n</script>\n<!-- love your mom! -->\n</body>\n<meta name="description" content="\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - " />\n')  # base.html:89
    350      return _utf8('').join(_buffer)  # base.html:0
[E 120720 10:40:33 web:1031] Uncaught exception GET / (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.109', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cookie': '__utma=148685175.647871982.1342707625.1342707625.1342707625.1; __utmz=148685175.1342707625.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)', 'Cache-Control': 'max-age=0', 'X-Real-Ip': '192.168.0.109'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "src/sites/www/handlers/home.py", line 14, in get
        return self._render('hot')
      File "src/sites/www/handlers/base.py", line 87, in _render
        current_additive = additive,
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 474, in render
        html = self.render_string(template_name, **kwargs)
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 586, in render_string
        return t.generate(**args)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 253, in generate
        return execute()
      File "additives_html.generated.py", line 330, in _execute
        hot_tags = models.Additive_Tag().hot_tags  # partial/sidebar_tags.html:2 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    AttributeError: 'module' object has no attribute 'Additive_Tag'
[E 120720 10:40:33 web:1393] 500 GET / (127.0.0.1) 1480.92ms
[W 120720 10:40:33 web:1393] 404 GET /favicon.ico (127.0.0.1) 5.14ms
[E 120720 10:47:19 template:256] additives.html code:
      1  def _execute():  # base.html:0
      2      _buffer = []  # base.html:0
      3      _append = _buffer.append  # base.html:0
      4      _append('<!doctype html>\n<head>\n<meta charset="UTF-8" />\n<meta content="True" name="HandheldFriendly" />\n<meta content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0; name=\'viewport\'" />\n<title>\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - \xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81')  # base.html:6
      5      _append('</title>\n<link rel="stylesheet" type="text/css" media="screen" href="/static/css/vendor/jquery.fancybox.css" />\n<link rel="stylesheet" type="text/css" media="screen" href="/static/css/main.css" />\n<link rel="shortcut icon" href="/static/img/favicon.ico" />\n<link rel="canonical" href="http://wuditoo.com/" />\n<meta name="description" content="\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - \xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81" />\n<script src="/static/js/vendor/jquery.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.history.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.fancybox.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.scrollTo.min.js" type="text/javascript"></script>\n')  # base.html:16
      6      _append('\n<script type="text/javascript">\n')  # additives.html:13 (via base.html:16)
      7      if current_additive:  # additives.html:13 (via base.html:16)
      8          _append('\nmeta_additive = {\nurl: "/additive/')  # additives.html:15 (via base.html:16)
      9          _tmp = current_additive.id  # additives.html:15 (via base.html:16)
     10          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # additives.html:15 (via base.html:16)
     11          else: _tmp = _utf8(str(_tmp))  # additives.html:15 (via base.html:16)
     12          _tmp = _utf8(xhtml_escape(_tmp))  # additives.html:15 (via base.html:16)
     13          _append(_tmp)  # additives.html:15 (via base.html:16)
     14          _append('",\nwidth: ')  # additives.html:16 (via base.html:16)
     15          _tmp = current_additive.width  # additives.html:16 (via base.html:16)
     16          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # additives.html:16 (via base.html:16)
     17          else: _tmp = _utf8(str(_tmp))  # additives.html:16 (via base.html:16)
     18          _tmp = _utf8(xhtml_escape(_tmp))  # additives.html:16 (via base.html:16)
     19          _append(_tmp)  # additives.html:16 (via base.html:16)
     20          _append(',\nheight: ')  # additives.html:17 (via base.html:16)
     21          _tmp = current_additive.height  # additives.html:17 (via base.html:16)
     22          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # additives.html:17 (via base.html:16)
     23          else: _tmp = _utf8(str(_tmp))  # additives.html:17 (via base.html:16)
     24          _tmp = _utf8(xhtml_escape(_tmp))  # additives.html:17 (via base.html:16)
     25          _append(_tmp)  # additives.html:17 (via base.html:16)
     26          _append('\n}\n')  # additives.html:19 (via base.html:16)
     27      _append('\n</script>\n')  # additives.html:21 (via base.html:16)
     28      _append('\n<script src="/static/js/main.js" type="text/javascript"></script>\n</head>\n<!--[if IE 7 ]><body class="ie7"><![endif]-->\n<!--[if gt IE 7]><body class="ie"><![endif]-->\n<!--[if !IE]><body><![endif]-->\n<div id="header">\n<div class="inner">\n<div id="logo"><a href="/">\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</a></div>\n<div id="slogon">\xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81</div>\n<div id="witticism">')  # base.html:27
     29      _tmp = home_sentence()  # base.html:27
     30      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:27
     31      else: _tmp = _utf8(str(_tmp))  # base.html:27
     32      _tmp = _utf8(xhtml_escape(_tmp))  # base.html:27
     33      _append(_tmp)  # base.html:27
     34      _append('</div>\n<!--\n<ul class="nav-right">\n</ul>\n-->\n</div>\n</div>\n<div id="container">\n<div class="inner">\n<div class="message alert alert-warn">\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0\xe5\x86\xac\xe7\x9c\xa0\xe4\xb8\xad\xef\xbc\x8c\xe8\x8b\x8f\xe9\x86\x92\xe6\x97\xb6\xe9\x97\xb4\xe5\xbe\x85\xe5\xae\x9a\xe3\x80\x82\xe8\xb0\xa2\xe8\xb0\xa2\xe6\x82\xa8\xe7\x9a\x84\xe5\x88\xb0\xe8\xae\xbf\xef\xbc\x9a\xef\xbc\x89</div>\n')  # base.html:38
     35      message = get_message()  # base.html:38
     36      _append('\n')  # base.html:39
     37      for message_type in ('error', 'success', 'info', 'warn'):  # base.html:39
     38          _append('\n')  # base.html:40
     39          if message and message_type == message[0]:  # base.html:40
     40              _append('\n<div id="')  # base.html:41
     41              _tmp = message_type  # base.html:41
     42              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     43              else: _tmp = _utf8(str(_tmp))  # base.html:41
     44              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     45              _append(_tmp)  # base.html:41
     46              _append('-message" class="message alert alert-')  # base.html:41
     47              _tmp = message_type  # base.html:41
     48              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     49              else: _tmp = _utf8(str(_tmp))  # base.html:41
     50              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     51              _append(_tmp)  # base.html:41
     52              _append('">')  # base.html:41
     53              _tmp = message[1]  # base.html:41
     54              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     55              else: _tmp = _utf8(str(_tmp))  # base.html:41
     56              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     57              _append(_tmp)  # base.html:41
     58              _append('</div>\n')  # base.html:42
     59          else:  # base.html:42
     60              _append('\n<div id="')  # base.html:43
     61              _tmp = message_type  # base.html:43
     62              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:43
     63              else: _tmp = _utf8(str(_tmp))  # base.html:43
     64              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:43
     65              _append(_tmp)  # base.html:43
     66              _append('-message" class="message alert alert-')  # base.html:43
     67              _tmp = message_type  # base.html:43
     68              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:43
     69              else: _tmp = _utf8(str(_tmp))  # base.html:43
     70              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:43
     71              _append(_tmp)  # base.html:43
     72              _append(' hide"></div>\n')  # base.html:44
     73          _append('\n')  # base.html:45
     74      _append('\n')  # base.html:47
     75      _append('\n<div id="main">\n')  # base.html:50
     76      _append('\n')  # additives.html:4 (via base.html:50)
     77      _append('<div class="box" id="additives">\n<div class="header">')  # partial/additives.html:2 (via additives.html:4, base.html:50)
     78      _tmp = additives_title  # partial/additives.html:2 (via additives.html:4, base.html:50)
     79      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:2 (via additives.html:4, base.html:50)
     80      else: _tmp = _utf8(str(_tmp))  # partial/additives.html:2 (via additives.html:4, base.html:50)
     81      _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:2 (via additives.html:4, base.html:50)
     82      _append(_tmp)  # partial/additives.html:2 (via additives.html:4, base.html:50)
     83      _append('</div>\n<div class="body main ul">\n')  # partial/additives.html:4 (via additives.html:4, base.html:50)
     84      for index, additive in enumerate(additives):  # partial/additives.html:4 (via additives.html:4, base.html:50)
     85          _append('\n')  # partial/additives.html:5 (via additives.html:4, base.html:50)
     86          creator = additive.creator  # partial/additives.html:5 (via additives.html:4, base.html:50)
     87          _append('\n<div class="additive-item">\n<div class="header">\n<a class="avatar" href="/user/')  # partial/additives.html:8 (via additives.html:4, base.html:50)
     88          _tmp = creator.username  # partial/additives.html:8 (via additives.html:4, base.html:50)
     89          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     90          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     91          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     92          _append(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     93          _append('"><img src="')  # partial/additives.html:8 (via additives.html:4, base.html:50)
     94          _tmp = get_avatar_url(creator, 's')  # partial/additives.html:8 (via additives.html:4, base.html:50)
     95          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     96          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     97          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     98          _append(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     99          _append('" /></a>')  # partial/additives.html:8 (via additives.html:4, base.html:50)
    100          _tmp = additive.name  # partial/additives.html:8 (via additives.html:4, base.html:50)
    101          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
    102          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
    103          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
    104          _append(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
    105          _append('\n</div>\n<div class="body">\n<div class="additive_alias">\xe5\x85\xb6\xe4\xbb\x96\xe5\x90\x8d\xe7\xa7\xb0:')  # partial/additives.html:11 (via additives.html:4, base.html:50)
    106          _tmp = additive.alias  # partial/additives.html:11 (via additives.html:4, base.html:50)
    107          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:11 (via additives.html:4, base.html:50)
    108          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:11 (via additives.html:4, base.html:50)
    109          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:11 (via additives.html:4, base.html:50)
    110          _append(_tmp)  # partial/additives.html:11 (via additives.html:4, base.html:50)
    111          _append('</div>\n<div class="additive_cns">CNS\xe5\x8f\xb7:')  # partial/additives.html:12 (via additives.html:4, base.html:50)
    112          _tmp = additive.cns  # partial/additives.html:12 (via additives.html:4, base.html:50)
    113          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:12 (via additives.html:4, base.html:50)
    114          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:12 (via additives.html:4, base.html:50)
    115          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:12 (via additives.html:4, base.html:50)
    116          _append(_tmp)  # partial/additives.html:12 (via additives.html:4, base.html:50)
    117          _append('</div>\n<div class="additive_ins">INS\xe5\x8f\xb7:')  # partial/additives.html:13 (via additives.html:4, base.html:50)
    118          _tmp = additive.ins  # partial/additives.html:13 (via additives.html:4, base.html:50)
    119          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:13 (via additives.html:4, base.html:50)
    120          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:13 (via additives.html:4, base.html:50)
    121          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:13 (via additives.html:4, base.html:50)
    122          _append(_tmp)  # partial/additives.html:13 (via additives.html:4, base.html:50)
    123          _append('</div>\n<div class="additive_effect">\xe5\x8a\x9f\xe8\x83\xbd:')  # partial/additives.html:14 (via additives.html:4, base.html:50)
    124          _tmp = additive.effect  # partial/additives.html:14 (via additives.html:4, base.html:50)
    125          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:14 (via additives.html:4, base.html:50)
    126          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:14 (via additives.html:4, base.html:50)
    127          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:14 (via additives.html:4, base.html:50)
    128          _append(_tmp)  # partial/additives.html:14 (via additives.html:4, base.html:50)
    129          _append('</div>\n</div>\n<div class="footer">\n<span class="meta">\n<ul>\n<li><i class="icon-view"></i> ')  # partial/additives.html:19 (via additives.html:4, base.html:50)
    130          _tmp = additive.views_count  # partial/additives.html:19 (via additives.html:4, base.html:50)
    131          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:19 (via additives.html:4, base.html:50)
    132          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:19 (via additives.html:4, base.html:50)
    133          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:19 (via additives.html:4, base.html:50)
    134          _append(_tmp)  # partial/additives.html:19 (via additives.html:4, base.html:50)
    135          _append('</li>\n</ul>\n</span>\n<span class="created">\n')  # partial/additives.html:23 (via additives.html:4, base.html:50)
    136          _tmp = timesince(additive.created)  # partial/additives.html:23 (via additives.html:4, base.html:50)
    137          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:23 (via additives.html:4, base.html:50)
    138          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:23 (via additives.html:4, base.html:50)
    139          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:23 (via additives.html:4, base.html:50)
    140          _append(_tmp)  # partial/additives.html:23 (via additives.html:4, base.html:50)
    141          _append('\n</span>\n</div>\n</div>\n')  # partial/additives.html:27 (via additives.html:4, base.html:50)
    142          _append('\n')  # partial/additives.html:28 (via additives.html:4, base.html:50)
    143          if index > 0 and (index + 1) % 3 == 0:  # partial/additives.html:28 (via additives.html:4, base.html:50)
    144              _append('\n<div class="clearfix"></div>\n')  # partial/additives.html:30 (via additives.html:4, base.html:50)
    145          _append('\n')  # partial/additives.html:32 (via additives.html:4, base.html:50)
    146      _append('\n')  # partial/additives.html:33 (via additives.html:4, base.html:50)
    147      page_type = 'additives'  # partial/additives.html:33 (via additives.html:4, base.html:50)
    148      _append('\n')  # partial/additives.html:34 (via additives.html:4, base.html:50)
    149      _append('\n')  # partial/pagination.html:3 (via partial/additives.html:34, additives.html:4, base.html:50)
    150      from macros.macro import ADDITIVES_PER_PAGE, USERS_PER_PAGE  # partial/pagination.html:3 (via partial/additives.html:34, additives.html:4, base.html:50)
    151      _append('\n')  # partial/pagination.html:4 (via partial/additives.html:34, additives.html:4, base.html:50)
    152      import math  # partial/pagination.html:4 (via partial/additives.html:34, additives.html:4, base.html:50)
    153      _append('\n')  # partial/pagination.html:6 (via partial/additives.html:34, additives.html:4, base.html:50)
    154      if page_type == 'additives':  # partial/pagination.html:6 (via partial/additives.html:34, additives.html:4, base.html:50)
    155          _append('\n')  # partial/pagination.html:7 (via partial/additives.html:34, additives.html:4, base.html:50)
    156          items_per_page = ADDITIVES_PER_PAGE  # partial/pagination.html:7 (via partial/additives.html:34, additives.html:4, base.html:50)
    157          _append('\n')  # partial/pagination.html:8 (via partial/additives.html:34, additives.html:4, base.html:50)
    158      else:  # partial/pagination.html:8 (via partial/additives.html:34, additives.html:4, base.html:50)
    159          _append('\n')  # partial/pagination.html:9 (via partial/additives.html:34, additives.html:4, base.html:50)
    160          items_per_page = USERS_PER_PAGE  # partial/pagination.html:9 (via partial/additives.html:34, additives.html:4, base.html:50)
    161          _append('\n')  # partial/pagination.html:10 (via partial/additives.html:34, additives.html:4, base.html:50)
    162      _append('\n')  # partial/pagination.html:12 (via partial/additives.html:34, additives.html:4, base.html:50)
    163      total_page = int(math.ceil(float(total_items) / items_per_page))  # partial/pagination.html:12 (via partial/additives.html:34, additives.html:4, base.html:50)
    164      _append('\n')  # partial/pagination.html:14 (via partial/additives.html:34, additives.html:4, base.html:50)
    165      current_page = int(handler.get_argument('page', 1))  # partial/pagination.html:14 (via partial/additives.html:34, additives.html:4, base.html:50)
    166      _append('\n')  # partial/pagination.html:16 (via partial/additives.html:34, additives.html:4, base.html:50)
    167      if current_page <=6:  # partial/pagination.html:16 (via partial/additives.html:34, additives.html:4, base.html:50)
    168          _append('\n')  # partial/pagination.html:17 (via partial/additives.html:34, additives.html:4, base.html:50)
    169          end_page = min(total_page, 10)  # partial/pagination.html:17 (via partial/additives.html:34, additives.html:4, base.html:50)
    170          _append('\n')  # partial/pagination.html:18 (via partial/additives.html:34, additives.html:4, base.html:50)
    171          start_page = 1  # partial/pagination.html:18 (via partial/additives.html:34, additives.html:4, base.html:50)
    172          _append('\n')  # partial/pagination.html:19 (via partial/additives.html:34, additives.html:4, base.html:50)
    173      else:  # partial/pagination.html:19 (via partial/additives.html:34, additives.html:4, base.html:50)
    174          _append('\n')  # partial/pagination.html:20 (via partial/additives.html:34, additives.html:4, base.html:50)
    175          end_page = min(total_page, current_page+4)  # partial/pagination.html:20 (via partial/additives.html:34, additives.html:4, base.html:50)
    176          _append('\n')  # partial/pagination.html:21 (via partial/additives.html:34, additives.html:4, base.html:50)
    177          start_page = current_page - 5  # partial/pagination.html:21 (via partial/additives.html:34, additives.html:4, base.html:50)
    178          _append('\n')  # partial/pagination.html:22 (via partial/additives.html:34, additives.html:4, base.html:50)
    179      _append('\n')  # partial/pagination.html:24 (via partial/additives.html:34, additives.html:4, base.html:50)
    180      if total_page > 1:  # partial/pagination.html:24 (via partial/additives.html:34, additives.html:4, base.html:50)
    181          _append('\n<div class="pagination">\n<ul>\n')  # partial/pagination.html:27 (via partial/additives.html:34, additives.html:4, base.html:50)
    182          if current_page == 1:  # partial/pagination.html:27 (via partial/additives.html:34, additives.html:4, base.html:50)
    183              _append('\n<li class="disabled">\xe2\x86\x90 </li>\n')  # partial/pagination.html:29 (via partial/additives.html:34, additives.html:4, base.html:50)
    184          else:  # partial/pagination.html:29 (via partial/additives.html:34, additives.html:4, base.html:50)
    185              _append('\n<li><a href="')  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    186              _tmp = page_path  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    187              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    188              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    189              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    190              _append(_tmp)  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    191              _append('?page=1">\xe2\x86\x90 </a></li>\n')  # partial/pagination.html:31 (via partial/additives.html:34, additives.html:4, base.html:50)
    192          _append('\n')  # partial/pagination.html:33 (via partial/additives.html:34, additives.html:4, base.html:50)
    193          for i in range(start_page, end_page + 1):  # partial/pagination.html:33 (via partial/additives.html:34, additives.html:4, base.html:50)
    194              _append('\n<li ')  # partial/pagination.html:34 (via partial/additives.html:34, additives.html:4, base.html:50)
    195              if current_page == i:  # partial/pagination.html:34 (via partial/additives.html:34, additives.html:4, base.html:50)
    196                  _append('class="active"')  # partial/pagination.html:34 (via partial/additives.html:34, additives.html:4, base.html:50)
    197              _append('>\n<a href="')  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    198              _tmp = page_path  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    199              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    200              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    201              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    202              _append(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    203              _append('?page=')  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    204              _tmp = i  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    205              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    206              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    207              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    208              _append(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    209              _append('">')  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    210              _tmp = i  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    211              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    212              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    213              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    214              _append(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    215              _append('</a>\n</li>\n')  # partial/pagination.html:37 (via partial/additives.html:34, additives.html:4, base.html:50)
    216          _append('\n')  # partial/pagination.html:39 (via partial/additives.html:34, additives.html:4, base.html:50)
    217          if current_page == total_page:  # partial/pagination.html:39 (via partial/additives.html:34, additives.html:4, base.html:50)
    218              _append('\n<li class="disabled">\xe2\x86\x92 </li>\n')  # partial/pagination.html:41 (via partial/additives.html:34, additives.html:4, base.html:50)
    219          else:  # partial/pagination.html:41 (via partial/additives.html:34, additives.html:4, base.html:50)
    220              _append('\n<li><a href="')  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    221              _tmp = page_path  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    222              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    223              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    224              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    225              _append(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    226              _append('?page=')  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    227              _tmp = current_page+1  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    228              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    229              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    230              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    231              _append(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    232              _append('">\xe2\x86\x92 </a></li>\n')  # partial/pagination.html:43 (via partial/additives.html:34, additives.html:4, base.html:50)
    233          _append('\n</ul>\n</div>\n')  # partial/pagination.html:46 (via partial/additives.html:34, additives.html:4, base.html:50)
    234      _append('\n')  # partial/pagination.html:47 (via partial/additives.html:34, additives.html:4, base.html:50)
    235      _append('\n</div>\n</div>\n')  # partial/additives.html:37 (via additives.html:4, base.html:50)
    236      _append('\n')  # additives.html:5 (via base.html:50)
    237      _append('\n</div>\n<div id="sidebar">\n')  # base.html:54
    238      _append('\n')  # additives.html:8 (via base.html:54)
    239      if current_user:  # partial/sidebar_global.html:1 (via additives.html:8, base.html:54)
    240          _append('\n')  # partial/sidebar_global.html:2 (via additives.html:8, base.html:54)
    241          _append('<div class="upload item ')  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    242          if not current_user.left_upload_count:  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    243              _append('disabled')  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    244          _append('" data-url="/photo/upload" data-title="\xe9\x87\x87\xe9\x9b\x86\xe7\x85\xa7\xe7\x89\x87" >\n<div class="left"></div>\n<div class="center">\n')  # partial/sidebar_upload.html:5 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    245          if current_user.left_upload_count:  # partial/sidebar_upload.html:5 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    246              _append('\n\xe9\x87\x87\xe9\x9b\x86\xe7\x85\xa7\xe7\x89\x87(\xe6\x9c\xac\xe5\x91\xa8\xe8\xbf\x98\xe5\x89\xa9')  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    247              _tmp = current_user.left_upload_count  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    248              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    249              else: _tmp = _utf8(str(_tmp))  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    250              _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    251              _append(_tmp)  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    252              _append('\xe5\xbc\xa0)\n')  # partial/sidebar_upload.html:7 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    253          else:  # partial/sidebar_upload.html:7 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    254              _append('\n\xe6\x9c\xac\xe5\x91\xa8\xe7\x9a\x84\xe9\x87\x87\xe9\x9b\x86\xe4\xbd\x99\xe9\xa2\x9d\xe5\xb7\xb2\xe7\x94\xa8\xe5\xae\x8c\xe4\xba\x86\n')  # partial/sidebar_upload.html:9 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    255          _append('\n</div>\n<div class="right"></div>\n</div>\n')  # partial/sidebar_upload.html:13 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    256          _append('\n')  # partial/sidebar_global.html:3 (via additives.html:8, base.html:54)
    257          _append('<div class="box" id="panel-me">\n<div class="header"><a class="right" href="/logout">\xe7\x99\xbb\xe5\x87\xba</a>\xe6\x88\x91\xe7\x9a\x84\xe4\xbf\xa1\xe6\x81\xaf</div>\n<div class="body">\n<div class="me">\n<a class="settings item" href="/settings" data-title="\xe8\xae\xbe\xe7\xbd\xae" data-url="/settings">\xe8\xae\xbe\xe7\xbd\xae</a>\n<a href="/user/')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    258          _tmp = current_user.username  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    259          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    260          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    261          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    262          _append(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    263          _append('"><img class="avatar" src="')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    264          _tmp = get_avatar_url(current_user, 's')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    265          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    266          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    267          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    268          _append(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    269          _append('" /></a>\n<a href="/user/')  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    270          _tmp = current_user.username  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    271          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    272          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    273          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    274          _append(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    275          _append('">')  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    276          _tmp = current_user.fullname  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    277          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    278          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    279          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    280          _append(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    281          _append('</a>\n<i class="level icon-level')  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    282          _tmp = current_user.level  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    283          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    284          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    285          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    286          _append(_tmp)  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    287          _append('"></i>\n</div>\n<div class="follow">\n<div class="following item" data-title="\xe6\x88\x91\xe5\x85\xb3\xe6\xb3\xa8\xe7\x9a\x84\xe4\xba\xba" data-url="/mine/following">\n<h3 class="anchor">')  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    288          _tmp = current_user.following_count  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    289          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    290          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    291          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    292          _append(_tmp)  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    293          _append('</h3>\n<span>following</span>\n</div>\n<div class="follower item" data-title="\xe5\x85\xb3\xe6\xb3\xa8\xe6\x88\x91\xe7\x9a\x84\xe4\xba\xba" data-url="/mine/follower">\n<h3 class="anchor">')  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    294          _tmp = current_user.follower_count  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    295          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    296          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    297          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    298          _append(_tmp)  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    299          _append('</h3>\n<span>followers</span>\n</div>\n</div>\n<ul>\n<li class="item" data-url="/mine/invite" data-title="\xe9\x82\x80\xe8\xaf\xb7\xe6\x9c\x8b\xe5\x8f\x8b\xe5\x8a\xa0\xe5\x85\xa5"> <span class="num">')  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    300          _tmp = current_user.unused_invite_key_count  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    301          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    302          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    303          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    304          _append(_tmp)  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    305          _append('</span><span class="anchor">\xe9\x82\x80\xe8\xaf\xb7\xe6\x9c\x8b\xe5\x8f\x8b\xe5\x8a\xa0\xe5\x85\xa5</span></li>\n<li class="item" data-title="\xe6\x88\x91\xe6\xb7\xbb\xe5\x8a\xa0\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87" data-url="/mine/photos"> <span class="num">')  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    306          _tmp = current_user.photo_count  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    307          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    308          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    309          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    310          _append(_tmp)  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    311          _append('</span><span class="anchor">\xe6\x88\x91\xe6\xb7\xbb\xe5\x8a\xa0\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87</span></li>\n<li class="item" data-title="\xe6\x88\x91\xe5\x96\x9c\xe6\xac\xa2\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87" data-url="/mine/likes_photos"><span class="num">')  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    312          _tmp = current_user.likes_count  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    313          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    314          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    315          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    316          _append(_tmp)  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    317          _append('</span><span class="anchor">\xe6\x88\x91\xe5\x96\x9c\xe6\xac\xa2\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87</span> </li>\n</ul>\n</div>\n</div>\n')  # partial/sidebar_me.html:27 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    318          _append('\n')  # partial/sidebar_global.html:4 (via additives.html:8, base.html:54)
    319      else:  # partial/sidebar_global.html:4 (via additives.html:8, base.html:54)
    320          _append('\n')  # partial/sidebar_global.html:5 (via additives.html:8, base.html:54)
    321          _append('<div class="box" id="panel-about">\n<div class="header">\xe5\x85\xb3\xe4\xba\x8e\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</div>\n<div class="body">\n<p>\xe5\x85\xb3\xe6\xb3\xa8\xe9\xa3\x9f\xe5\x93\x81\xe5\xae\x89\xe5\x85\xa8\xef\xbc\x8c\xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe4\xb8\x96\xe7\x95\x8c</p>\n<p>\xe6\x89\x80\xe6\x9c\x89\xe9\xa3\x9f\xe5\x93\x81\xe5\x92\x8c\xe6\xb7\xbb\xe5\x8a\xa0\xe5\x89\x82\xe8\xb5\x84\xe6\x96\x99\xe6\x9d\xa5\xe8\x87\xaa\xe4\xba\x8eiearth-\xe7\x88\xb1\xe5\x9c\xb0\xe7\x90\x83\xe7\x8e\xaf\xe4\xbf\x9d\xe6\x9c\xba\xe6\x9e\x84</p>\n</div>\n</div>\n')  # partial/sidebar_about.html:8 (via partial/sidebar_global.html:5, additives.html:8, base.html:54)
    322          _append('\n')  # partial/sidebar_global.html:6 (via additives.html:8, base.html:54)
    323          _append('<div class="box" id="panel-login">\n<div class="header">\xe7\x99\xbb\xe5\x85\xa5\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</div>\n<div class="body">\n<form action="/login" method="POST">\n<div class="section">\n<input type="TEXT" name="username" placeholder="\xe7\x94\xa8\xe6\x88\xb7\xe5\x90\x8d/Email" />\n</div>\n<div class="section">\n<input type="PASSWORD" name="password" placeholder="\xe5\xaf\x86\xe7\xa0\x81" />\n</div>\n<div class="section">\n<input type="SUBMIT" value="\xe7\x99\xbb\xe5\x85\xa5" class="btn primary-btn" />\n<span class="tip">\xe4\xbc\x9a\xe8\xae\xb0\xe4\xbd\x8f\xe7\x99\xbb\xe5\x85\xa5\xe4\xb8\x80\xe4\xb8\xaa\xe6\x9c\x88</span>\n</div>\n</form>\n<div class="alert alert-info">\xe5\x86\x85\xe6\xb5\x8b\xe4\xb8\xad\xef\xbc\x8c\xe5\x8f\xaa\xe6\x8e\xa5\xe5\x8f\x97\xe9\x82\x80\xe8\xaf\xb7\xe6\xb3\xa8\xe5\x86\x8c</div>\n</div>\n</div>\n')  # partial/sidebar_login.html:19 (via partial/sidebar_global.html:6, additives.html:8, base.html:54)
    324          _append('\n')  # partial/sidebar_global.html:8 (via additives.html:8, base.html:54)
    325      _append('\n')  # partial/sidebar_global.html:10 (via additives.html:8, base.html:54)
    326      _append('<div class="box">\n<div class="header">\xe6\xb5\x8f\xe8\xa7\x88\xe9\xa3\x9f\xe5\x93\x81</div>\n<div class="body">\n<ul>\n<li class="item" data-url="/photos/hot" data-title="\xe7\x83\xad\xe9\x97\xa8\xe9\xa3\x9f\xe5\x93\x81"><span class="anchor">\xe7\x83\xad\xe9\x97\xa8\xe9\xa3\x9f\xe5\x93\x81</span></li>\n<li class="item" data-url="/photos/latest" data-title="\xe6\x9c\x80\xe6\x96\xb0\xe9\xa3\x9f\xe5\x93\x81"><span class="anchor">\xe6\x9c\x80\xe6\x96\xb0\xe9\xa3\x9f\xe5\x93\x81</span></li>\n</ul>\n</div>\n</div>\n')  # partial/sidebar_photos_nav.html:10 (via partial/sidebar_global.html:10, additives.html:8, base.html:54)
    327      _append('\n')  # partial/sidebar_global.html:11 (via additives.html:8, base.html:54)
    328      import models  # partial/sidebar_tags.html:1 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    329      _append('\n')  # partial/sidebar_tags.html:2 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    330      hot_searchs = models.Additive_Search().hot_searchs  # partial/sidebar_tags.html:2 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    331      _append('\n<div class="box" id="panel-searchs">\n<div class="header">\xe7\x83\xad\xe9\x97\xa8\xe6\x90\x9c\xe7\xb4\xa2</div>\n<div class="body">\n<ul>\n')  # partial/sidebar_tags.html:8 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    332      for search in hot_searchs:  # partial/sidebar_tags.html:8 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    333          _append('\n<li class="item" data-url="/search/')  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    334          _tmp = search  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    335          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    336          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    337          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    338          _append(_tmp)  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    339          _append('"><i class="icon-search"></i><span class="anchor">')  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    340          _tmp = search  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    341          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    342          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    343          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    344          _append(_tmp)  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    345          _append('</span></li>\n')  # partial/sidebar_tags.html:10 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    346      _append('\n</ul>\n</div>\n</div>\n')  # partial/sidebar_tags.html:14 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    347      _append('\n')  # partial/sidebar_global.html:12 (via additives.html:8, base.html:54)
    348      _append('\n')  # additives.html:9 (via base.html:54)
    349      _append('\n</div>\n</div>\n</div>\n<div id="footer">\n<div class="inner">\n<div class="right">\n<span class="belief">make the world a little better and easier</span>\n</div>\n<div class="left">\n<ul>\n<li><a href="/about">\xe5\x85\xb3\xe4\xba\x8e</a> <!--<span class="divider">/</span>--></li>\n<!--<li><a href="/feedback">\xe5\x8f\x8d\xe9\xa6\x88</a> <span class="divider">/</span></li>-->\n<!--<li><a href="/blog">\xe6\x97\xa5\xe5\xbf\x97</a></li>-->\n</ul>\n</div>\n</div>\n</div>\n<script type="text/javascript">\nvar _gaq = _gaq || [];\n_gaq.push([\'_setAccount\', \'UA-1281124-23\']);\n_gaq.push([\'_trackPageview\']);\n(function() {\nvar ga = document.createElement(\'script\'); ga.type = \'text/javascript\'; ga.async = true;\nga.src = (\'https:\' == document.location.protocol ? \'https://ssl\' : \'http://www\') + \'.google-analytics.com/ga.js\';\nvar s = document.getElementsByTagName(\'script\')[0]; s.parentNode.insertBefore(ga, s);\n})();\n</script>\n<!-- love your mom! -->\n</body>\n<meta name="description" content="\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - " />\n')  # base.html:89
    350      return _utf8('').join(_buffer)  # base.html:0
[E 120720 10:47:19 web:1031] Uncaught exception GET / (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.109', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cookie': '__utma=148685175.647871982.1342707625.1342707625.1342707625.1; __utmz=148685175.1342707625.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)', 'Cache-Control': 'max-age=0', 'X-Real-Ip': '192.168.0.109'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "src/sites/www/handlers/home.py", line 14, in get
        return self._render('hot')
      File "src/sites/www/handlers/base.py", line 87, in _render
        current_additive = additive,
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 474, in render
        html = self.render_string(template_name, **kwargs)
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 586, in render_string
        return t.generate(**args)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 253, in generate
        return execute()
      File "additives_html.generated.py", line 330, in _execute
        hot_searchs = models.Additive_Search().hot_searchs  # partial/sidebar_tags.html:2 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    AttributeError: 'module' object has no attribute 'Additive_Search'
[E 120720 10:47:19 web:1393] 500 GET / (127.0.0.1) 1388.10ms
[W 120720 10:47:19 web:1393] 404 GET /favicon.ico (127.0.0.1) 5.30ms
[E 120720 10:50:19 template:256] additives.html code:
      1  def _execute():  # base.html:0
      2      _buffer = []  # base.html:0
      3      _append = _buffer.append  # base.html:0
      4      _append('<!doctype html>\n<head>\n<meta charset="UTF-8" />\n<meta content="True" name="HandheldFriendly" />\n<meta content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0; name=\'viewport\'" />\n<title>\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - \xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81')  # base.html:6
      5      _append('</title>\n<link rel="stylesheet" type="text/css" media="screen" href="/static/css/vendor/jquery.fancybox.css" />\n<link rel="stylesheet" type="text/css" media="screen" href="/static/css/main.css" />\n<link rel="shortcut icon" href="/static/img/favicon.ico" />\n<link rel="canonical" href="http://wuditoo.com/" />\n<meta name="description" content="\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - \xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81" />\n<script src="/static/js/vendor/jquery.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.history.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.fancybox.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.scrollTo.min.js" type="text/javascript"></script>\n')  # base.html:16
      6      _append('\n<script type="text/javascript">\n')  # additives.html:13 (via base.html:16)
      7      if current_additive:  # additives.html:13 (via base.html:16)
      8          _append('\nmeta_additive = {\nurl: "/additive/')  # additives.html:15 (via base.html:16)
      9          _tmp = current_additive.id  # additives.html:15 (via base.html:16)
     10          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # additives.html:15 (via base.html:16)
     11          else: _tmp = _utf8(str(_tmp))  # additives.html:15 (via base.html:16)
     12          _tmp = _utf8(xhtml_escape(_tmp))  # additives.html:15 (via base.html:16)
     13          _append(_tmp)  # additives.html:15 (via base.html:16)
     14          _append('",\nwidth: ')  # additives.html:16 (via base.html:16)
     15          _tmp = current_additive.width  # additives.html:16 (via base.html:16)
     16          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # additives.html:16 (via base.html:16)
     17          else: _tmp = _utf8(str(_tmp))  # additives.html:16 (via base.html:16)
     18          _tmp = _utf8(xhtml_escape(_tmp))  # additives.html:16 (via base.html:16)
     19          _append(_tmp)  # additives.html:16 (via base.html:16)
     20          _append(',\nheight: ')  # additives.html:17 (via base.html:16)
     21          _tmp = current_additive.height  # additives.html:17 (via base.html:16)
     22          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # additives.html:17 (via base.html:16)
     23          else: _tmp = _utf8(str(_tmp))  # additives.html:17 (via base.html:16)
     24          _tmp = _utf8(xhtml_escape(_tmp))  # additives.html:17 (via base.html:16)
     25          _append(_tmp)  # additives.html:17 (via base.html:16)
     26          _append('\n}\n')  # additives.html:19 (via base.html:16)
     27      _append('\n</script>\n')  # additives.html:21 (via base.html:16)
     28      _append('\n<script src="/static/js/main.js" type="text/javascript"></script>\n</head>\n<!--[if IE 7 ]><body class="ie7"><![endif]-->\n<!--[if gt IE 7]><body class="ie"><![endif]-->\n<!--[if !IE]><body><![endif]-->\n<div id="header">\n<div class="inner">\n<div id="logo"><a href="/">\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</a></div>\n<div id="slogon">\xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81</div>\n<div id="witticism">')  # base.html:27
     29      _tmp = home_sentence()  # base.html:27
     30      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:27
     31      else: _tmp = _utf8(str(_tmp))  # base.html:27
     32      _tmp = _utf8(xhtml_escape(_tmp))  # base.html:27
     33      _append(_tmp)  # base.html:27
     34      _append('</div>\n<!--\n<ul class="nav-right">\n</ul>\n-->\n</div>\n</div>\n<div id="container">\n<div class="inner">\n<div class="message alert alert-warn">\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0\xe5\x86\xac\xe7\x9c\xa0\xe4\xb8\xad\xef\xbc\x8c\xe8\x8b\x8f\xe9\x86\x92\xe6\x97\xb6\xe9\x97\xb4\xe5\xbe\x85\xe5\xae\x9a\xe3\x80\x82\xe8\xb0\xa2\xe8\xb0\xa2\xe6\x82\xa8\xe7\x9a\x84\xe5\x88\xb0\xe8\xae\xbf\xef\xbc\x9a\xef\xbc\x89</div>\n')  # base.html:38
     35      message = get_message()  # base.html:38
     36      _append('\n')  # base.html:39
     37      for message_type in ('error', 'success', 'info', 'warn'):  # base.html:39
     38          _append('\n')  # base.html:40
     39          if message and message_type == message[0]:  # base.html:40
     40              _append('\n<div id="')  # base.html:41
     41              _tmp = message_type  # base.html:41
     42              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     43              else: _tmp = _utf8(str(_tmp))  # base.html:41
     44              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     45              _append(_tmp)  # base.html:41
     46              _append('-message" class="message alert alert-')  # base.html:41
     47              _tmp = message_type  # base.html:41
     48              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     49              else: _tmp = _utf8(str(_tmp))  # base.html:41
     50              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     51              _append(_tmp)  # base.html:41
     52              _append('">')  # base.html:41
     53              _tmp = message[1]  # base.html:41
     54              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     55              else: _tmp = _utf8(str(_tmp))  # base.html:41
     56              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     57              _append(_tmp)  # base.html:41
     58              _append('</div>\n')  # base.html:42
     59          else:  # base.html:42
     60              _append('\n<div id="')  # base.html:43
     61              _tmp = message_type  # base.html:43
     62              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:43
     63              else: _tmp = _utf8(str(_tmp))  # base.html:43
     64              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:43
     65              _append(_tmp)  # base.html:43
     66              _append('-message" class="message alert alert-')  # base.html:43
     67              _tmp = message_type  # base.html:43
     68              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:43
     69              else: _tmp = _utf8(str(_tmp))  # base.html:43
     70              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:43
     71              _append(_tmp)  # base.html:43
     72              _append(' hide"></div>\n')  # base.html:44
     73          _append('\n')  # base.html:45
     74      _append('\n')  # base.html:47
     75      _append('\n<div id="main">\n')  # base.html:50
     76      _append('\n')  # additives.html:4 (via base.html:50)
     77      _append('<div class="box" id="additives">\n<div class="header">')  # partial/additives.html:2 (via additives.html:4, base.html:50)
     78      _tmp = additives_title  # partial/additives.html:2 (via additives.html:4, base.html:50)
     79      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:2 (via additives.html:4, base.html:50)
     80      else: _tmp = _utf8(str(_tmp))  # partial/additives.html:2 (via additives.html:4, base.html:50)
     81      _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:2 (via additives.html:4, base.html:50)
     82      _append(_tmp)  # partial/additives.html:2 (via additives.html:4, base.html:50)
     83      _append('</div>\n<div class="body main ul">\n')  # partial/additives.html:4 (via additives.html:4, base.html:50)
     84      for index, additive in enumerate(additives):  # partial/additives.html:4 (via additives.html:4, base.html:50)
     85          _append('\n')  # partial/additives.html:5 (via additives.html:4, base.html:50)
     86          creator = additive.creator  # partial/additives.html:5 (via additives.html:4, base.html:50)
     87          _append('\n<div class="additive-item">\n<div class="header">\n<a class="avatar" href="/user/')  # partial/additives.html:8 (via additives.html:4, base.html:50)
     88          _tmp = creator.username  # partial/additives.html:8 (via additives.html:4, base.html:50)
     89          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     90          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     91          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     92          _append(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     93          _append('"><img src="')  # partial/additives.html:8 (via additives.html:4, base.html:50)
     94          _tmp = get_avatar_url(creator, 's')  # partial/additives.html:8 (via additives.html:4, base.html:50)
     95          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     96          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     97          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     98          _append(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     99          _append('" /></a>')  # partial/additives.html:8 (via additives.html:4, base.html:50)
    100          _tmp = additive.name  # partial/additives.html:8 (via additives.html:4, base.html:50)
    101          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
    102          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
    103          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
    104          _append(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
    105          _append('\n</div>\n<div class="body">\n<div class="additive_alias">\xe5\x85\xb6\xe4\xbb\x96\xe5\x90\x8d\xe7\xa7\xb0:')  # partial/additives.html:11 (via additives.html:4, base.html:50)
    106          _tmp = additive.alias  # partial/additives.html:11 (via additives.html:4, base.html:50)
    107          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:11 (via additives.html:4, base.html:50)
    108          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:11 (via additives.html:4, base.html:50)
    109          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:11 (via additives.html:4, base.html:50)
    110          _append(_tmp)  # partial/additives.html:11 (via additives.html:4, base.html:50)
    111          _append('</div>\n<div class="additive_cns">CNS\xe5\x8f\xb7:')  # partial/additives.html:12 (via additives.html:4, base.html:50)
    112          _tmp = additive.cns  # partial/additives.html:12 (via additives.html:4, base.html:50)
    113          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:12 (via additives.html:4, base.html:50)
    114          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:12 (via additives.html:4, base.html:50)
    115          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:12 (via additives.html:4, base.html:50)
    116          _append(_tmp)  # partial/additives.html:12 (via additives.html:4, base.html:50)
    117          _append('</div>\n<div class="additive_ins">INS\xe5\x8f\xb7:')  # partial/additives.html:13 (via additives.html:4, base.html:50)
    118          _tmp = additive.ins  # partial/additives.html:13 (via additives.html:4, base.html:50)
    119          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:13 (via additives.html:4, base.html:50)
    120          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:13 (via additives.html:4, base.html:50)
    121          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:13 (via additives.html:4, base.html:50)
    122          _append(_tmp)  # partial/additives.html:13 (via additives.html:4, base.html:50)
    123          _append('</div>\n<div class="additive_effect">\xe5\x8a\x9f\xe8\x83\xbd:')  # partial/additives.html:14 (via additives.html:4, base.html:50)
    124          _tmp = additive.effect  # partial/additives.html:14 (via additives.html:4, base.html:50)
    125          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:14 (via additives.html:4, base.html:50)
    126          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:14 (via additives.html:4, base.html:50)
    127          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:14 (via additives.html:4, base.html:50)
    128          _append(_tmp)  # partial/additives.html:14 (via additives.html:4, base.html:50)
    129          _append('</div>\n</div>\n<div class="footer">\n<span class="meta">\n<ul>\n<li><i class="icon-view"></i> ')  # partial/additives.html:19 (via additives.html:4, base.html:50)
    130          _tmp = additive.views_count  # partial/additives.html:19 (via additives.html:4, base.html:50)
    131          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:19 (via additives.html:4, base.html:50)
    132          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:19 (via additives.html:4, base.html:50)
    133          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:19 (via additives.html:4, base.html:50)
    134          _append(_tmp)  # partial/additives.html:19 (via additives.html:4, base.html:50)
    135          _append('</li>\n</ul>\n</span>\n<span class="created">\n')  # partial/additives.html:23 (via additives.html:4, base.html:50)
    136          _tmp = timesince(additive.created)  # partial/additives.html:23 (via additives.html:4, base.html:50)
    137          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:23 (via additives.html:4, base.html:50)
    138          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:23 (via additives.html:4, base.html:50)
    139          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:23 (via additives.html:4, base.html:50)
    140          _append(_tmp)  # partial/additives.html:23 (via additives.html:4, base.html:50)
    141          _append('\n</span>\n</div>\n</div>\n')  # partial/additives.html:27 (via additives.html:4, base.html:50)
    142          _append('\n')  # partial/additives.html:28 (via additives.html:4, base.html:50)
    143          if index > 0 and (index + 1) % 3 == 0:  # partial/additives.html:28 (via additives.html:4, base.html:50)
    144              _append('\n<div class="clearfix"></div>\n')  # partial/additives.html:30 (via additives.html:4, base.html:50)
    145          _append('\n')  # partial/additives.html:32 (via additives.html:4, base.html:50)
    146      _append('\n')  # partial/additives.html:33 (via additives.html:4, base.html:50)
    147      page_type = 'additives'  # partial/additives.html:33 (via additives.html:4, base.html:50)
    148      _append('\n')  # partial/additives.html:34 (via additives.html:4, base.html:50)
    149      _append('\n')  # partial/pagination.html:3 (via partial/additives.html:34, additives.html:4, base.html:50)
    150      from macros.macro import ADDITIVES_PER_PAGE, USERS_PER_PAGE  # partial/pagination.html:3 (via partial/additives.html:34, additives.html:4, base.html:50)
    151      _append('\n')  # partial/pagination.html:4 (via partial/additives.html:34, additives.html:4, base.html:50)
    152      import math  # partial/pagination.html:4 (via partial/additives.html:34, additives.html:4, base.html:50)
    153      _append('\n')  # partial/pagination.html:6 (via partial/additives.html:34, additives.html:4, base.html:50)
    154      if page_type == 'additives':  # partial/pagination.html:6 (via partial/additives.html:34, additives.html:4, base.html:50)
    155          _append('\n')  # partial/pagination.html:7 (via partial/additives.html:34, additives.html:4, base.html:50)
    156          items_per_page = ADDITIVES_PER_PAGE  # partial/pagination.html:7 (via partial/additives.html:34, additives.html:4, base.html:50)
    157          _append('\n')  # partial/pagination.html:8 (via partial/additives.html:34, additives.html:4, base.html:50)
    158      else:  # partial/pagination.html:8 (via partial/additives.html:34, additives.html:4, base.html:50)
    159          _append('\n')  # partial/pagination.html:9 (via partial/additives.html:34, additives.html:4, base.html:50)
    160          items_per_page = USERS_PER_PAGE  # partial/pagination.html:9 (via partial/additives.html:34, additives.html:4, base.html:50)
    161          _append('\n')  # partial/pagination.html:10 (via partial/additives.html:34, additives.html:4, base.html:50)
    162      _append('\n')  # partial/pagination.html:12 (via partial/additives.html:34, additives.html:4, base.html:50)
    163      total_page = int(math.ceil(float(total_items) / items_per_page))  # partial/pagination.html:12 (via partial/additives.html:34, additives.html:4, base.html:50)
    164      _append('\n')  # partial/pagination.html:14 (via partial/additives.html:34, additives.html:4, base.html:50)
    165      current_page = int(handler.get_argument('page', 1))  # partial/pagination.html:14 (via partial/additives.html:34, additives.html:4, base.html:50)
    166      _append('\n')  # partial/pagination.html:16 (via partial/additives.html:34, additives.html:4, base.html:50)
    167      if current_page <=6:  # partial/pagination.html:16 (via partial/additives.html:34, additives.html:4, base.html:50)
    168          _append('\n')  # partial/pagination.html:17 (via partial/additives.html:34, additives.html:4, base.html:50)
    169          end_page = min(total_page, 10)  # partial/pagination.html:17 (via partial/additives.html:34, additives.html:4, base.html:50)
    170          _append('\n')  # partial/pagination.html:18 (via partial/additives.html:34, additives.html:4, base.html:50)
    171          start_page = 1  # partial/pagination.html:18 (via partial/additives.html:34, additives.html:4, base.html:50)
    172          _append('\n')  # partial/pagination.html:19 (via partial/additives.html:34, additives.html:4, base.html:50)
    173      else:  # partial/pagination.html:19 (via partial/additives.html:34, additives.html:4, base.html:50)
    174          _append('\n')  # partial/pagination.html:20 (via partial/additives.html:34, additives.html:4, base.html:50)
    175          end_page = min(total_page, current_page+4)  # partial/pagination.html:20 (via partial/additives.html:34, additives.html:4, base.html:50)
    176          _append('\n')  # partial/pagination.html:21 (via partial/additives.html:34, additives.html:4, base.html:50)
    177          start_page = current_page - 5  # partial/pagination.html:21 (via partial/additives.html:34, additives.html:4, base.html:50)
    178          _append('\n')  # partial/pagination.html:22 (via partial/additives.html:34, additives.html:4, base.html:50)
    179      _append('\n')  # partial/pagination.html:24 (via partial/additives.html:34, additives.html:4, base.html:50)
    180      if total_page > 1:  # partial/pagination.html:24 (via partial/additives.html:34, additives.html:4, base.html:50)
    181          _append('\n<div class="pagination">\n<ul>\n')  # partial/pagination.html:27 (via partial/additives.html:34, additives.html:4, base.html:50)
    182          if current_page == 1:  # partial/pagination.html:27 (via partial/additives.html:34, additives.html:4, base.html:50)
    183              _append('\n<li class="disabled">\xe2\x86\x90 </li>\n')  # partial/pagination.html:29 (via partial/additives.html:34, additives.html:4, base.html:50)
    184          else:  # partial/pagination.html:29 (via partial/additives.html:34, additives.html:4, base.html:50)
    185              _append('\n<li><a href="')  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    186              _tmp = page_path  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    187              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    188              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    189              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    190              _append(_tmp)  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    191              _append('?page=1">\xe2\x86\x90 </a></li>\n')  # partial/pagination.html:31 (via partial/additives.html:34, additives.html:4, base.html:50)
    192          _append('\n')  # partial/pagination.html:33 (via partial/additives.html:34, additives.html:4, base.html:50)
    193          for i in range(start_page, end_page + 1):  # partial/pagination.html:33 (via partial/additives.html:34, additives.html:4, base.html:50)
    194              _append('\n<li ')  # partial/pagination.html:34 (via partial/additives.html:34, additives.html:4, base.html:50)
    195              if current_page == i:  # partial/pagination.html:34 (via partial/additives.html:34, additives.html:4, base.html:50)
    196                  _append('class="active"')  # partial/pagination.html:34 (via partial/additives.html:34, additives.html:4, base.html:50)
    197              _append('>\n<a href="')  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    198              _tmp = page_path  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    199              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    200              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    201              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    202              _append(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    203              _append('?page=')  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    204              _tmp = i  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    205              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    206              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    207              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    208              _append(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    209              _append('">')  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    210              _tmp = i  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    211              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    212              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    213              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    214              _append(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    215              _append('</a>\n</li>\n')  # partial/pagination.html:37 (via partial/additives.html:34, additives.html:4, base.html:50)
    216          _append('\n')  # partial/pagination.html:39 (via partial/additives.html:34, additives.html:4, base.html:50)
    217          if current_page == total_page:  # partial/pagination.html:39 (via partial/additives.html:34, additives.html:4, base.html:50)
    218              _append('\n<li class="disabled">\xe2\x86\x92 </li>\n')  # partial/pagination.html:41 (via partial/additives.html:34, additives.html:4, base.html:50)
    219          else:  # partial/pagination.html:41 (via partial/additives.html:34, additives.html:4, base.html:50)
    220              _append('\n<li><a href="')  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    221              _tmp = page_path  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    222              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    223              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    224              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    225              _append(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    226              _append('?page=')  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    227              _tmp = current_page+1  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    228              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    229              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    230              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    231              _append(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    232              _append('">\xe2\x86\x92 </a></li>\n')  # partial/pagination.html:43 (via partial/additives.html:34, additives.html:4, base.html:50)
    233          _append('\n</ul>\n</div>\n')  # partial/pagination.html:46 (via partial/additives.html:34, additives.html:4, base.html:50)
    234      _append('\n')  # partial/pagination.html:47 (via partial/additives.html:34, additives.html:4, base.html:50)
    235      _append('\n</div>\n</div>\n')  # partial/additives.html:37 (via additives.html:4, base.html:50)
    236      _append('\n')  # additives.html:5 (via base.html:50)
    237      _append('\n</div>\n<div id="sidebar">\n')  # base.html:54
    238      _append('\n')  # additives.html:8 (via base.html:54)
    239      if current_user:  # partial/sidebar_global.html:1 (via additives.html:8, base.html:54)
    240          _append('\n')  # partial/sidebar_global.html:2 (via additives.html:8, base.html:54)
    241          _append('<div class="upload item ')  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    242          if not current_user.left_upload_count:  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    243              _append('disabled')  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    244          _append('" data-url="/photo/upload" data-title="\xe9\x87\x87\xe9\x9b\x86\xe7\x85\xa7\xe7\x89\x87" >\n<div class="left"></div>\n<div class="center">\n')  # partial/sidebar_upload.html:5 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    245          if current_user.left_upload_count:  # partial/sidebar_upload.html:5 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    246              _append('\n\xe9\x87\x87\xe9\x9b\x86\xe7\x85\xa7\xe7\x89\x87(\xe6\x9c\xac\xe5\x91\xa8\xe8\xbf\x98\xe5\x89\xa9')  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    247              _tmp = current_user.left_upload_count  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    248              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    249              else: _tmp = _utf8(str(_tmp))  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    250              _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    251              _append(_tmp)  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    252              _append('\xe5\xbc\xa0)\n')  # partial/sidebar_upload.html:7 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    253          else:  # partial/sidebar_upload.html:7 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    254              _append('\n\xe6\x9c\xac\xe5\x91\xa8\xe7\x9a\x84\xe9\x87\x87\xe9\x9b\x86\xe4\xbd\x99\xe9\xa2\x9d\xe5\xb7\xb2\xe7\x94\xa8\xe5\xae\x8c\xe4\xba\x86\n')  # partial/sidebar_upload.html:9 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    255          _append('\n</div>\n<div class="right"></div>\n</div>\n')  # partial/sidebar_upload.html:13 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    256          _append('\n')  # partial/sidebar_global.html:3 (via additives.html:8, base.html:54)
    257          _append('<div class="box" id="panel-me">\n<div class="header"><a class="right" href="/logout">\xe7\x99\xbb\xe5\x87\xba</a>\xe6\x88\x91\xe7\x9a\x84\xe4\xbf\xa1\xe6\x81\xaf</div>\n<div class="body">\n<div class="me">\n<a class="settings item" href="/settings" data-title="\xe8\xae\xbe\xe7\xbd\xae" data-url="/settings">\xe8\xae\xbe\xe7\xbd\xae</a>\n<a href="/user/')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    258          _tmp = current_user.username  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    259          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    260          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    261          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    262          _append(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    263          _append('"><img class="avatar" src="')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    264          _tmp = get_avatar_url(current_user, 's')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    265          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    266          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    267          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    268          _append(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    269          _append('" /></a>\n<a href="/user/')  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    270          _tmp = current_user.username  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    271          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    272          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    273          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    274          _append(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    275          _append('">')  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    276          _tmp = current_user.fullname  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    277          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    278          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    279          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    280          _append(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    281          _append('</a>\n<i class="level icon-level')  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    282          _tmp = current_user.level  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    283          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    284          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    285          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    286          _append(_tmp)  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    287          _append('"></i>\n</div>\n<div class="follow">\n<div class="following item" data-title="\xe6\x88\x91\xe5\x85\xb3\xe6\xb3\xa8\xe7\x9a\x84\xe4\xba\xba" data-url="/mine/following">\n<h3 class="anchor">')  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    288          _tmp = current_user.following_count  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    289          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    290          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    291          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    292          _append(_tmp)  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    293          _append('</h3>\n<span>following</span>\n</div>\n<div class="follower item" data-title="\xe5\x85\xb3\xe6\xb3\xa8\xe6\x88\x91\xe7\x9a\x84\xe4\xba\xba" data-url="/mine/follower">\n<h3 class="anchor">')  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    294          _tmp = current_user.follower_count  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    295          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    296          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    297          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    298          _append(_tmp)  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    299          _append('</h3>\n<span>followers</span>\n</div>\n</div>\n<ul>\n<li class="item" data-url="/mine/invite" data-title="\xe9\x82\x80\xe8\xaf\xb7\xe6\x9c\x8b\xe5\x8f\x8b\xe5\x8a\xa0\xe5\x85\xa5"> <span class="num">')  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    300          _tmp = current_user.unused_invite_key_count  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    301          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    302          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    303          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    304          _append(_tmp)  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    305          _append('</span><span class="anchor">\xe9\x82\x80\xe8\xaf\xb7\xe6\x9c\x8b\xe5\x8f\x8b\xe5\x8a\xa0\xe5\x85\xa5</span></li>\n<li class="item" data-title="\xe6\x88\x91\xe6\xb7\xbb\xe5\x8a\xa0\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87" data-url="/mine/photos"> <span class="num">')  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    306          _tmp = current_user.photo_count  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    307          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    308          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    309          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    310          _append(_tmp)  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    311          _append('</span><span class="anchor">\xe6\x88\x91\xe6\xb7\xbb\xe5\x8a\xa0\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87</span></li>\n<li class="item" data-title="\xe6\x88\x91\xe5\x96\x9c\xe6\xac\xa2\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87" data-url="/mine/likes_photos"><span class="num">')  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    312          _tmp = current_user.likes_count  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    313          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    314          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    315          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    316          _append(_tmp)  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    317          _append('</span><span class="anchor">\xe6\x88\x91\xe5\x96\x9c\xe6\xac\xa2\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87</span> </li>\n</ul>\n</div>\n</div>\n')  # partial/sidebar_me.html:27 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    318          _append('\n')  # partial/sidebar_global.html:4 (via additives.html:8, base.html:54)
    319      else:  # partial/sidebar_global.html:4 (via additives.html:8, base.html:54)
    320          _append('\n')  # partial/sidebar_global.html:5 (via additives.html:8, base.html:54)
    321          _append('<div class="box" id="panel-about">\n<div class="header">\xe5\x85\xb3\xe4\xba\x8e\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</div>\n<div class="body">\n<p>\xe5\x85\xb3\xe6\xb3\xa8\xe9\xa3\x9f\xe5\x93\x81\xe5\xae\x89\xe5\x85\xa8\xef\xbc\x8c\xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe4\xb8\x96\xe7\x95\x8c</p>\n<p>\xe6\x89\x80\xe6\x9c\x89\xe9\xa3\x9f\xe5\x93\x81\xe5\x92\x8c\xe6\xb7\xbb\xe5\x8a\xa0\xe5\x89\x82\xe8\xb5\x84\xe6\x96\x99\xe6\x9d\xa5\xe8\x87\xaa\xe4\xba\x8eiearth-\xe7\x88\xb1\xe5\x9c\xb0\xe7\x90\x83\xe7\x8e\xaf\xe4\xbf\x9d\xe6\x9c\xba\xe6\x9e\x84</p>\n</div>\n</div>\n')  # partial/sidebar_about.html:8 (via partial/sidebar_global.html:5, additives.html:8, base.html:54)
    322          _append('\n')  # partial/sidebar_global.html:6 (via additives.html:8, base.html:54)
    323          _append('<div class="box" id="panel-login">\n<div class="header">\xe7\x99\xbb\xe5\x85\xa5\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</div>\n<div class="body">\n<form action="/login" method="POST">\n<div class="section">\n<input type="TEXT" name="username" placeholder="\xe7\x94\xa8\xe6\x88\xb7\xe5\x90\x8d/Email" />\n</div>\n<div class="section">\n<input type="PASSWORD" name="password" placeholder="\xe5\xaf\x86\xe7\xa0\x81" />\n</div>\n<div class="section">\n<input type="SUBMIT" value="\xe7\x99\xbb\xe5\x85\xa5" class="btn primary-btn" />\n<span class="tip">\xe4\xbc\x9a\xe8\xae\xb0\xe4\xbd\x8f\xe7\x99\xbb\xe5\x85\xa5\xe4\xb8\x80\xe4\xb8\xaa\xe6\x9c\x88</span>\n</div>\n</form>\n<div class="alert alert-info">\xe5\x86\x85\xe6\xb5\x8b\xe4\xb8\xad\xef\xbc\x8c\xe5\x8f\xaa\xe6\x8e\xa5\xe5\x8f\x97\xe9\x82\x80\xe8\xaf\xb7\xe6\xb3\xa8\xe5\x86\x8c</div>\n</div>\n</div>\n')  # partial/sidebar_login.html:19 (via partial/sidebar_global.html:6, additives.html:8, base.html:54)
    324          _append('\n')  # partial/sidebar_global.html:8 (via additives.html:8, base.html:54)
    325      _append('\n')  # partial/sidebar_global.html:10 (via additives.html:8, base.html:54)
    326      _append('<div class="box">\n<div class="header">\xe6\xb5\x8f\xe8\xa7\x88\xe9\xa3\x9f\xe5\x93\x81</div>\n<div class="body">\n<ul>\n<li class="item" data-url="/photos/hot" data-title="\xe7\x83\xad\xe9\x97\xa8\xe9\xa3\x9f\xe5\x93\x81"><span class="anchor">\xe7\x83\xad\xe9\x97\xa8\xe9\xa3\x9f\xe5\x93\x81</span></li>\n<li class="item" data-url="/photos/latest" data-title="\xe6\x9c\x80\xe6\x96\xb0\xe9\xa3\x9f\xe5\x93\x81"><span class="anchor">\xe6\x9c\x80\xe6\x96\xb0\xe9\xa3\x9f\xe5\x93\x81</span></li>\n</ul>\n</div>\n</div>\n')  # partial/sidebar_photos_nav.html:10 (via partial/sidebar_global.html:10, additives.html:8, base.html:54)
    327      _append('\n')  # partial/sidebar_global.html:11 (via additives.html:8, base.html:54)
    328      import models  # partial/sidebar_tags.html:1 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    329      _append('\n')  # partial/sidebar_tags.html:2 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    330      hot_searchs = models.Additive_Search().hot_searchs  # partial/sidebar_tags.html:2 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    331      _append('\n<div class="box" id="panel-searchs">\n<div class="header">\xe7\x83\xad\xe9\x97\xa8\xe6\x90\x9c\xe7\xb4\xa2</div>\n<div class="body">\n<ul>\n')  # partial/sidebar_tags.html:8 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    332      for search in hot_searchs:  # partial/sidebar_tags.html:8 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    333          _append('\n<li class="item" data-url="/search/')  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    334          _tmp = search  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    335          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    336          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    337          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    338          _append(_tmp)  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    339          _append('"><i class="icon-search"></i><span class="anchor">')  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    340          _tmp = search  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    341          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    342          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    343          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    344          _append(_tmp)  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    345          _append('</span></li>\n')  # partial/sidebar_tags.html:10 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    346      _append('\n</ul>\n</div>\n</div>\n')  # partial/sidebar_tags.html:14 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    347      _append('\n')  # partial/sidebar_global.html:12 (via additives.html:8, base.html:54)
    348      _append('\n')  # additives.html:9 (via base.html:54)
    349      _append('\n</div>\n</div>\n</div>\n<div id="footer">\n<div class="inner">\n<div class="right">\n<span class="belief">make the world a little better and easier</span>\n</div>\n<div class="left">\n<ul>\n<li><a href="/about">\xe5\x85\xb3\xe4\xba\x8e</a> <!--<span class="divider">/</span>--></li>\n<!--<li><a href="/feedback">\xe5\x8f\x8d\xe9\xa6\x88</a> <span class="divider">/</span></li>-->\n<!--<li><a href="/blog">\xe6\x97\xa5\xe5\xbf\x97</a></li>-->\n</ul>\n</div>\n</div>\n</div>\n<script type="text/javascript">\nvar _gaq = _gaq || [];\n_gaq.push([\'_setAccount\', \'UA-1281124-23\']);\n_gaq.push([\'_trackPageview\']);\n(function() {\nvar ga = document.createElement(\'script\'); ga.type = \'text/javascript\'; ga.async = true;\nga.src = (\'https:\' == document.location.protocol ? \'https://ssl\' : \'http://www\') + \'.google-analytics.com/ga.js\';\nvar s = document.getElementsByTagName(\'script\')[0]; s.parentNode.insertBefore(ga, s);\n})();\n</script>\n<!-- love your mom! -->\n</body>\n<meta name="description" content="\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - " />\n')  # base.html:89
    350      return _utf8('').join(_buffer)  # base.html:0
[E 120720 10:50:19 web:1031] Uncaught exception GET / (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.109', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cookie': '__utma=148685175.647871982.1342707625.1342707625.1342707625.1; __utmz=148685175.1342707625.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)', 'Cache-Control': 'max-age=0', 'X-Real-Ip': '192.168.0.109'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "src/sites/www/handlers/home.py", line 14, in get
        return self._render('hot')
      File "src/sites/www/handlers/base.py", line 87, in _render
        current_additive = additive,
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 474, in render
        html = self.render_string(template_name, **kwargs)
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 586, in render_string
        return t.generate(**args)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 253, in generate
        return execute()
      File "additives_html.generated.py", line 330, in _execute
        hot_searchs = models.Additive_Search().hot_searchs  # partial/sidebar_tags.html:2 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    AttributeError: 'module' object has no attribute 'Additive_Search'
[E 120720 10:50:19 web:1393] 500 GET / (127.0.0.1) 1494.41ms
[W 120720 10:50:20 web:1393] 404 GET /favicon.ico (127.0.0.1) 6.73ms
[I 120720 11:01:39 autoreload:133] /home/dk/work/python/safood/src/common/models/__init__.py modified; restarting server
[E 120720 11:02:22 template:256] additives.html code:
      1  def _execute():  # base.html:0
      2      _buffer = []  # base.html:0
      3      _append = _buffer.append  # base.html:0
      4      _append('<!doctype html>\n<head>\n<meta charset="UTF-8" />\n<meta content="True" name="HandheldFriendly" />\n<meta content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0; name=\'viewport\'" />\n<title>\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - \xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81')  # base.html:6
      5      _append('</title>\n<link rel="stylesheet" type="text/css" media="screen" href="/static/css/vendor/jquery.fancybox.css" />\n<link rel="stylesheet" type="text/css" media="screen" href="/static/css/main.css" />\n<link rel="shortcut icon" href="/static/img/favicon.ico" />\n<link rel="canonical" href="http://wuditoo.com/" />\n<meta name="description" content="\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - \xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81" />\n<script src="/static/js/vendor/jquery.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.history.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.fancybox.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.scrollTo.min.js" type="text/javascript"></script>\n')  # base.html:16
      6      _append('\n<script type="text/javascript">\n')  # additives.html:13 (via base.html:16)
      7      if current_additive:  # additives.html:13 (via base.html:16)
      8          _append('\nmeta_additive = {\nurl: "/additive/')  # additives.html:15 (via base.html:16)
      9          _tmp = current_additive.id  # additives.html:15 (via base.html:16)
     10          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # additives.html:15 (via base.html:16)
     11          else: _tmp = _utf8(str(_tmp))  # additives.html:15 (via base.html:16)
     12          _tmp = _utf8(xhtml_escape(_tmp))  # additives.html:15 (via base.html:16)
     13          _append(_tmp)  # additives.html:15 (via base.html:16)
     14          _append('",\nwidth: ')  # additives.html:16 (via base.html:16)
     15          _tmp = current_additive.width  # additives.html:16 (via base.html:16)
     16          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # additives.html:16 (via base.html:16)
     17          else: _tmp = _utf8(str(_tmp))  # additives.html:16 (via base.html:16)
     18          _tmp = _utf8(xhtml_escape(_tmp))  # additives.html:16 (via base.html:16)
     19          _append(_tmp)  # additives.html:16 (via base.html:16)
     20          _append(',\nheight: ')  # additives.html:17 (via base.html:16)
     21          _tmp = current_additive.height  # additives.html:17 (via base.html:16)
     22          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # additives.html:17 (via base.html:16)
     23          else: _tmp = _utf8(str(_tmp))  # additives.html:17 (via base.html:16)
     24          _tmp = _utf8(xhtml_escape(_tmp))  # additives.html:17 (via base.html:16)
     25          _append(_tmp)  # additives.html:17 (via base.html:16)
     26          _append('\n}\n')  # additives.html:19 (via base.html:16)
     27      _append('\n</script>\n')  # additives.html:21 (via base.html:16)
     28      _append('\n<script src="/static/js/main.js" type="text/javascript"></script>\n</head>\n<!--[if IE 7 ]><body class="ie7"><![endif]-->\n<!--[if gt IE 7]><body class="ie"><![endif]-->\n<!--[if !IE]><body><![endif]-->\n<div id="header">\n<div class="inner">\n<div id="logo"><a href="/">\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</a></div>\n<div id="slogon">\xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81</div>\n<div id="witticism">')  # base.html:27
     29      _tmp = home_sentence()  # base.html:27
     30      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:27
     31      else: _tmp = _utf8(str(_tmp))  # base.html:27
     32      _tmp = _utf8(xhtml_escape(_tmp))  # base.html:27
     33      _append(_tmp)  # base.html:27
     34      _append('</div>\n<!--\n<ul class="nav-right">\n</ul>\n-->\n</div>\n</div>\n<div id="container">\n<div class="inner">\n<div class="message alert alert-warn">\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0\xe5\x86\xac\xe7\x9c\xa0\xe4\xb8\xad\xef\xbc\x8c\xe8\x8b\x8f\xe9\x86\x92\xe6\x97\xb6\xe9\x97\xb4\xe5\xbe\x85\xe5\xae\x9a\xe3\x80\x82\xe8\xb0\xa2\xe8\xb0\xa2\xe6\x82\xa8\xe7\x9a\x84\xe5\x88\xb0\xe8\xae\xbf\xef\xbc\x9a\xef\xbc\x89</div>\n')  # base.html:38
     35      message = get_message()  # base.html:38
     36      _append('\n')  # base.html:39
     37      for message_type in ('error', 'success', 'info', 'warn'):  # base.html:39
     38          _append('\n')  # base.html:40
     39          if message and message_type == message[0]:  # base.html:40
     40              _append('\n<div id="')  # base.html:41
     41              _tmp = message_type  # base.html:41
     42              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     43              else: _tmp = _utf8(str(_tmp))  # base.html:41
     44              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     45              _append(_tmp)  # base.html:41
     46              _append('-message" class="message alert alert-')  # base.html:41
     47              _tmp = message_type  # base.html:41
     48              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     49              else: _tmp = _utf8(str(_tmp))  # base.html:41
     50              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     51              _append(_tmp)  # base.html:41
     52              _append('">')  # base.html:41
     53              _tmp = message[1]  # base.html:41
     54              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     55              else: _tmp = _utf8(str(_tmp))  # base.html:41
     56              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     57              _append(_tmp)  # base.html:41
     58              _append('</div>\n')  # base.html:42
     59          else:  # base.html:42
     60              _append('\n<div id="')  # base.html:43
     61              _tmp = message_type  # base.html:43
     62              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:43
     63              else: _tmp = _utf8(str(_tmp))  # base.html:43
     64              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:43
     65              _append(_tmp)  # base.html:43
     66              _append('-message" class="message alert alert-')  # base.html:43
     67              _tmp = message_type  # base.html:43
     68              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:43
     69              else: _tmp = _utf8(str(_tmp))  # base.html:43
     70              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:43
     71              _append(_tmp)  # base.html:43
     72              _append(' hide"></div>\n')  # base.html:44
     73          _append('\n')  # base.html:45
     74      _append('\n')  # base.html:47
     75      _append('\n<div id="main">\n')  # base.html:50
     76      _append('\n')  # additives.html:4 (via base.html:50)
     77      _append('<div class="box" id="additives">\n<div class="header">')  # partial/additives.html:2 (via additives.html:4, base.html:50)
     78      _tmp = additives_title  # partial/additives.html:2 (via additives.html:4, base.html:50)
     79      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:2 (via additives.html:4, base.html:50)
     80      else: _tmp = _utf8(str(_tmp))  # partial/additives.html:2 (via additives.html:4, base.html:50)
     81      _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:2 (via additives.html:4, base.html:50)
     82      _append(_tmp)  # partial/additives.html:2 (via additives.html:4, base.html:50)
     83      _append('</div>\n<div class="body main ul">\n')  # partial/additives.html:4 (via additives.html:4, base.html:50)
     84      for index, additive in enumerate(additives):  # partial/additives.html:4 (via additives.html:4, base.html:50)
     85          _append('\n')  # partial/additives.html:5 (via additives.html:4, base.html:50)
     86          creator = additive.creator  # partial/additives.html:5 (via additives.html:4, base.html:50)
     87          _append('\n<div class="additive-item">\n<div class="header">\n<a class="avatar" href="/user/')  # partial/additives.html:8 (via additives.html:4, base.html:50)
     88          _tmp = creator.username  # partial/additives.html:8 (via additives.html:4, base.html:50)
     89          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     90          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     91          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     92          _append(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     93          _append('"><img src="')  # partial/additives.html:8 (via additives.html:4, base.html:50)
     94          _tmp = get_avatar_url(creator, 's')  # partial/additives.html:8 (via additives.html:4, base.html:50)
     95          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     96          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     97          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     98          _append(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     99          _append('" /></a>')  # partial/additives.html:8 (via additives.html:4, base.html:50)
    100          _tmp = additive.name  # partial/additives.html:8 (via additives.html:4, base.html:50)
    101          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
    102          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
    103          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
    104          _append(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
    105          _append('\n</div>\n<div class="body">\n<div class="additive_alias">\xe5\x85\xb6\xe4\xbb\x96\xe5\x90\x8d\xe7\xa7\xb0:')  # partial/additives.html:11 (via additives.html:4, base.html:50)
    106          _tmp = additive.alias  # partial/additives.html:11 (via additives.html:4, base.html:50)
    107          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:11 (via additives.html:4, base.html:50)
    108          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:11 (via additives.html:4, base.html:50)
    109          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:11 (via additives.html:4, base.html:50)
    110          _append(_tmp)  # partial/additives.html:11 (via additives.html:4, base.html:50)
    111          _append('</div>\n<div class="additive_cns">CNS\xe5\x8f\xb7:')  # partial/additives.html:12 (via additives.html:4, base.html:50)
    112          _tmp = additive.cns  # partial/additives.html:12 (via additives.html:4, base.html:50)
    113          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:12 (via additives.html:4, base.html:50)
    114          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:12 (via additives.html:4, base.html:50)
    115          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:12 (via additives.html:4, base.html:50)
    116          _append(_tmp)  # partial/additives.html:12 (via additives.html:4, base.html:50)
    117          _append('</div>\n<div class="additive_ins">INS\xe5\x8f\xb7:')  # partial/additives.html:13 (via additives.html:4, base.html:50)
    118          _tmp = additive.ins  # partial/additives.html:13 (via additives.html:4, base.html:50)
    119          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:13 (via additives.html:4, base.html:50)
    120          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:13 (via additives.html:4, base.html:50)
    121          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:13 (via additives.html:4, base.html:50)
    122          _append(_tmp)  # partial/additives.html:13 (via additives.html:4, base.html:50)
    123          _append('</div>\n<div class="additive_effect">\xe5\x8a\x9f\xe8\x83\xbd:')  # partial/additives.html:14 (via additives.html:4, base.html:50)
    124          _tmp = additive.effect  # partial/additives.html:14 (via additives.html:4, base.html:50)
    125          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:14 (via additives.html:4, base.html:50)
    126          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:14 (via additives.html:4, base.html:50)
    127          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:14 (via additives.html:4, base.html:50)
    128          _append(_tmp)  # partial/additives.html:14 (via additives.html:4, base.html:50)
    129          _append('</div>\n</div>\n<div class="footer">\n<span class="meta">\n<ul>\n<li><i class="icon-view"></i> ')  # partial/additives.html:19 (via additives.html:4, base.html:50)
    130          _tmp = additive.views_count  # partial/additives.html:19 (via additives.html:4, base.html:50)
    131          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:19 (via additives.html:4, base.html:50)
    132          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:19 (via additives.html:4, base.html:50)
    133          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:19 (via additives.html:4, base.html:50)
    134          _append(_tmp)  # partial/additives.html:19 (via additives.html:4, base.html:50)
    135          _append('</li>\n</ul>\n</span>\n<span class="created">\n')  # partial/additives.html:23 (via additives.html:4, base.html:50)
    136          _tmp = timesince(additive.created)  # partial/additives.html:23 (via additives.html:4, base.html:50)
    137          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:23 (via additives.html:4, base.html:50)
    138          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:23 (via additives.html:4, base.html:50)
    139          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:23 (via additives.html:4, base.html:50)
    140          _append(_tmp)  # partial/additives.html:23 (via additives.html:4, base.html:50)
    141          _append('\n</span>\n</div>\n</div>\n')  # partial/additives.html:27 (via additives.html:4, base.html:50)
    142          _append('\n')  # partial/additives.html:28 (via additives.html:4, base.html:50)
    143          if index > 0 and (index + 1) % 3 == 0:  # partial/additives.html:28 (via additives.html:4, base.html:50)
    144              _append('\n<div class="clearfix"></div>\n')  # partial/additives.html:30 (via additives.html:4, base.html:50)
    145          _append('\n')  # partial/additives.html:32 (via additives.html:4, base.html:50)
    146      _append('\n')  # partial/additives.html:33 (via additives.html:4, base.html:50)
    147      page_type = 'additives'  # partial/additives.html:33 (via additives.html:4, base.html:50)
    148      _append('\n')  # partial/additives.html:34 (via additives.html:4, base.html:50)
    149      _append('\n')  # partial/pagination.html:3 (via partial/additives.html:34, additives.html:4, base.html:50)
    150      from macros.macro import ADDITIVES_PER_PAGE, USERS_PER_PAGE  # partial/pagination.html:3 (via partial/additives.html:34, additives.html:4, base.html:50)
    151      _append('\n')  # partial/pagination.html:4 (via partial/additives.html:34, additives.html:4, base.html:50)
    152      import math  # partial/pagination.html:4 (via partial/additives.html:34, additives.html:4, base.html:50)
    153      _append('\n')  # partial/pagination.html:6 (via partial/additives.html:34, additives.html:4, base.html:50)
    154      if page_type == 'additives':  # partial/pagination.html:6 (via partial/additives.html:34, additives.html:4, base.html:50)
    155          _append('\n')  # partial/pagination.html:7 (via partial/additives.html:34, additives.html:4, base.html:50)
    156          items_per_page = ADDITIVES_PER_PAGE  # partial/pagination.html:7 (via partial/additives.html:34, additives.html:4, base.html:50)
    157          _append('\n')  # partial/pagination.html:8 (via partial/additives.html:34, additives.html:4, base.html:50)
    158      else:  # partial/pagination.html:8 (via partial/additives.html:34, additives.html:4, base.html:50)
    159          _append('\n')  # partial/pagination.html:9 (via partial/additives.html:34, additives.html:4, base.html:50)
    160          items_per_page = USERS_PER_PAGE  # partial/pagination.html:9 (via partial/additives.html:34, additives.html:4, base.html:50)
    161          _append('\n')  # partial/pagination.html:10 (via partial/additives.html:34, additives.html:4, base.html:50)
    162      _append('\n')  # partial/pagination.html:12 (via partial/additives.html:34, additives.html:4, base.html:50)
    163      total_page = int(math.ceil(float(total_items) / items_per_page))  # partial/pagination.html:12 (via partial/additives.html:34, additives.html:4, base.html:50)
    164      _append('\n')  # partial/pagination.html:14 (via partial/additives.html:34, additives.html:4, base.html:50)
    165      current_page = int(handler.get_argument('page', 1))  # partial/pagination.html:14 (via partial/additives.html:34, additives.html:4, base.html:50)
    166      _append('\n')  # partial/pagination.html:16 (via partial/additives.html:34, additives.html:4, base.html:50)
    167      if current_page <=6:  # partial/pagination.html:16 (via partial/additives.html:34, additives.html:4, base.html:50)
    168          _append('\n')  # partial/pagination.html:17 (via partial/additives.html:34, additives.html:4, base.html:50)
    169          end_page = min(total_page, 10)  # partial/pagination.html:17 (via partial/additives.html:34, additives.html:4, base.html:50)
    170          _append('\n')  # partial/pagination.html:18 (via partial/additives.html:34, additives.html:4, base.html:50)
    171          start_page = 1  # partial/pagination.html:18 (via partial/additives.html:34, additives.html:4, base.html:50)
    172          _append('\n')  # partial/pagination.html:19 (via partial/additives.html:34, additives.html:4, base.html:50)
    173      else:  # partial/pagination.html:19 (via partial/additives.html:34, additives.html:4, base.html:50)
    174          _append('\n')  # partial/pagination.html:20 (via partial/additives.html:34, additives.html:4, base.html:50)
    175          end_page = min(total_page, current_page+4)  # partial/pagination.html:20 (via partial/additives.html:34, additives.html:4, base.html:50)
    176          _append('\n')  # partial/pagination.html:21 (via partial/additives.html:34, additives.html:4, base.html:50)
    177          start_page = current_page - 5  # partial/pagination.html:21 (via partial/additives.html:34, additives.html:4, base.html:50)
    178          _append('\n')  # partial/pagination.html:22 (via partial/additives.html:34, additives.html:4, base.html:50)
    179      _append('\n')  # partial/pagination.html:24 (via partial/additives.html:34, additives.html:4, base.html:50)
    180      if total_page > 1:  # partial/pagination.html:24 (via partial/additives.html:34, additives.html:4, base.html:50)
    181          _append('\n<div class="pagination">\n<ul>\n')  # partial/pagination.html:27 (via partial/additives.html:34, additives.html:4, base.html:50)
    182          if current_page == 1:  # partial/pagination.html:27 (via partial/additives.html:34, additives.html:4, base.html:50)
    183              _append('\n<li class="disabled">\xe2\x86\x90 </li>\n')  # partial/pagination.html:29 (via partial/additives.html:34, additives.html:4, base.html:50)
    184          else:  # partial/pagination.html:29 (via partial/additives.html:34, additives.html:4, base.html:50)
    185              _append('\n<li><a href="')  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    186              _tmp = page_path  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    187              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    188              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    189              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    190              _append(_tmp)  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    191              _append('?page=1">\xe2\x86\x90 </a></li>\n')  # partial/pagination.html:31 (via partial/additives.html:34, additives.html:4, base.html:50)
    192          _append('\n')  # partial/pagination.html:33 (via partial/additives.html:34, additives.html:4, base.html:50)
    193          for i in range(start_page, end_page + 1):  # partial/pagination.html:33 (via partial/additives.html:34, additives.html:4, base.html:50)
    194              _append('\n<li ')  # partial/pagination.html:34 (via partial/additives.html:34, additives.html:4, base.html:50)
    195              if current_page == i:  # partial/pagination.html:34 (via partial/additives.html:34, additives.html:4, base.html:50)
    196                  _append('class="active"')  # partial/pagination.html:34 (via partial/additives.html:34, additives.html:4, base.html:50)
    197              _append('>\n<a href="')  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    198              _tmp = page_path  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    199              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    200              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    201              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    202              _append(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    203              _append('?page=')  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    204              _tmp = i  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    205              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    206              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    207              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    208              _append(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    209              _append('">')  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    210              _tmp = i  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    211              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    212              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    213              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    214              _append(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    215              _append('</a>\n</li>\n')  # partial/pagination.html:37 (via partial/additives.html:34, additives.html:4, base.html:50)
    216          _append('\n')  # partial/pagination.html:39 (via partial/additives.html:34, additives.html:4, base.html:50)
    217          if current_page == total_page:  # partial/pagination.html:39 (via partial/additives.html:34, additives.html:4, base.html:50)
    218              _append('\n<li class="disabled">\xe2\x86\x92 </li>\n')  # partial/pagination.html:41 (via partial/additives.html:34, additives.html:4, base.html:50)
    219          else:  # partial/pagination.html:41 (via partial/additives.html:34, additives.html:4, base.html:50)
    220              _append('\n<li><a href="')  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    221              _tmp = page_path  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    222              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    223              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    224              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    225              _append(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    226              _append('?page=')  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    227              _tmp = current_page+1  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    228              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    229              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    230              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    231              _append(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    232              _append('">\xe2\x86\x92 </a></li>\n')  # partial/pagination.html:43 (via partial/additives.html:34, additives.html:4, base.html:50)
    233          _append('\n</ul>\n</div>\n')  # partial/pagination.html:46 (via partial/additives.html:34, additives.html:4, base.html:50)
    234      _append('\n')  # partial/pagination.html:47 (via partial/additives.html:34, additives.html:4, base.html:50)
    235      _append('\n</div>\n</div>\n')  # partial/additives.html:37 (via additives.html:4, base.html:50)
    236      _append('\n')  # additives.html:5 (via base.html:50)
    237      _append('\n</div>\n<div id="sidebar">\n')  # base.html:54
    238      _append('\n')  # additives.html:8 (via base.html:54)
    239      if current_user:  # partial/sidebar_global.html:1 (via additives.html:8, base.html:54)
    240          _append('\n')  # partial/sidebar_global.html:2 (via additives.html:8, base.html:54)
    241          _append('<div class="upload item ')  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    242          if not current_user.left_upload_count:  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    243              _append('disabled')  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    244          _append('" data-url="/photo/upload" data-title="\xe9\x87\x87\xe9\x9b\x86\xe7\x85\xa7\xe7\x89\x87" >\n<div class="left"></div>\n<div class="center">\n')  # partial/sidebar_upload.html:5 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    245          if current_user.left_upload_count:  # partial/sidebar_upload.html:5 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    246              _append('\n\xe9\x87\x87\xe9\x9b\x86\xe7\x85\xa7\xe7\x89\x87(\xe6\x9c\xac\xe5\x91\xa8\xe8\xbf\x98\xe5\x89\xa9')  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    247              _tmp = current_user.left_upload_count  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    248              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    249              else: _tmp = _utf8(str(_tmp))  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    250              _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    251              _append(_tmp)  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    252              _append('\xe5\xbc\xa0)\n')  # partial/sidebar_upload.html:7 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    253          else:  # partial/sidebar_upload.html:7 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    254              _append('\n\xe6\x9c\xac\xe5\x91\xa8\xe7\x9a\x84\xe9\x87\x87\xe9\x9b\x86\xe4\xbd\x99\xe9\xa2\x9d\xe5\xb7\xb2\xe7\x94\xa8\xe5\xae\x8c\xe4\xba\x86\n')  # partial/sidebar_upload.html:9 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    255          _append('\n</div>\n<div class="right"></div>\n</div>\n')  # partial/sidebar_upload.html:13 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    256          _append('\n')  # partial/sidebar_global.html:3 (via additives.html:8, base.html:54)
    257          _append('<div class="box" id="panel-me">\n<div class="header"><a class="right" href="/logout">\xe7\x99\xbb\xe5\x87\xba</a>\xe6\x88\x91\xe7\x9a\x84\xe4\xbf\xa1\xe6\x81\xaf</div>\n<div class="body">\n<div class="me">\n<a class="settings item" href="/settings" data-title="\xe8\xae\xbe\xe7\xbd\xae" data-url="/settings">\xe8\xae\xbe\xe7\xbd\xae</a>\n<a href="/user/')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    258          _tmp = current_user.username  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    259          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    260          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    261          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    262          _append(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    263          _append('"><img class="avatar" src="')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    264          _tmp = get_avatar_url(current_user, 's')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    265          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    266          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    267          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    268          _append(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    269          _append('" /></a>\n<a href="/user/')  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    270          _tmp = current_user.username  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    271          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    272          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    273          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    274          _append(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    275          _append('">')  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    276          _tmp = current_user.fullname  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    277          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    278          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    279          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    280          _append(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    281          _append('</a>\n<i class="level icon-level')  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    282          _tmp = current_user.level  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    283          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    284          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    285          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    286          _append(_tmp)  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    287          _append('"></i>\n</div>\n<div class="follow">\n<div class="following item" data-title="\xe6\x88\x91\xe5\x85\xb3\xe6\xb3\xa8\xe7\x9a\x84\xe4\xba\xba" data-url="/mine/following">\n<h3 class="anchor">')  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    288          _tmp = current_user.following_count  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    289          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    290          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    291          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    292          _append(_tmp)  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    293          _append('</h3>\n<span>following</span>\n</div>\n<div class="follower item" data-title="\xe5\x85\xb3\xe6\xb3\xa8\xe6\x88\x91\xe7\x9a\x84\xe4\xba\xba" data-url="/mine/follower">\n<h3 class="anchor">')  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    294          _tmp = current_user.follower_count  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    295          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    296          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    297          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    298          _append(_tmp)  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    299          _append('</h3>\n<span>followers</span>\n</div>\n</div>\n<ul>\n<li class="item" data-url="/mine/invite" data-title="\xe9\x82\x80\xe8\xaf\xb7\xe6\x9c\x8b\xe5\x8f\x8b\xe5\x8a\xa0\xe5\x85\xa5"> <span class="num">')  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    300          _tmp = current_user.unused_invite_key_count  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    301          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    302          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    303          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    304          _append(_tmp)  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    305          _append('</span><span class="anchor">\xe9\x82\x80\xe8\xaf\xb7\xe6\x9c\x8b\xe5\x8f\x8b\xe5\x8a\xa0\xe5\x85\xa5</span></li>\n<li class="item" data-title="\xe6\x88\x91\xe6\xb7\xbb\xe5\x8a\xa0\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87" data-url="/mine/photos"> <span class="num">')  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    306          _tmp = current_user.photo_count  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    307          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    308          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    309          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    310          _append(_tmp)  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    311          _append('</span><span class="anchor">\xe6\x88\x91\xe6\xb7\xbb\xe5\x8a\xa0\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87</span></li>\n<li class="item" data-title="\xe6\x88\x91\xe5\x96\x9c\xe6\xac\xa2\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87" data-url="/mine/likes_photos"><span class="num">')  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    312          _tmp = current_user.likes_count  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    313          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    314          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    315          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    316          _append(_tmp)  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    317          _append('</span><span class="anchor">\xe6\x88\x91\xe5\x96\x9c\xe6\xac\xa2\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87</span> </li>\n</ul>\n</div>\n</div>\n')  # partial/sidebar_me.html:27 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    318          _append('\n')  # partial/sidebar_global.html:4 (via additives.html:8, base.html:54)
    319      else:  # partial/sidebar_global.html:4 (via additives.html:8, base.html:54)
    320          _append('\n')  # partial/sidebar_global.html:5 (via additives.html:8, base.html:54)
    321          _append('<div class="box" id="panel-about">\n<div class="header">\xe5\x85\xb3\xe4\xba\x8e\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</div>\n<div class="body">\n<p>\xe5\x85\xb3\xe6\xb3\xa8\xe9\xa3\x9f\xe5\x93\x81\xe5\xae\x89\xe5\x85\xa8\xef\xbc\x8c\xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe4\xb8\x96\xe7\x95\x8c</p>\n<p>\xe6\x89\x80\xe6\x9c\x89\xe9\xa3\x9f\xe5\x93\x81\xe5\x92\x8c\xe6\xb7\xbb\xe5\x8a\xa0\xe5\x89\x82\xe8\xb5\x84\xe6\x96\x99\xe6\x9d\xa5\xe8\x87\xaa\xe4\xba\x8eiearth-\xe7\x88\xb1\xe5\x9c\xb0\xe7\x90\x83\xe7\x8e\xaf\xe4\xbf\x9d\xe6\x9c\xba\xe6\x9e\x84</p>\n</div>\n</div>\n')  # partial/sidebar_about.html:8 (via partial/sidebar_global.html:5, additives.html:8, base.html:54)
    322          _append('\n')  # partial/sidebar_global.html:6 (via additives.html:8, base.html:54)
    323          _append('<div class="box" id="panel-login">\n<div class="header">\xe7\x99\xbb\xe5\x85\xa5\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</div>\n<div class="body">\n<form action="/login" method="POST">\n<div class="section">\n<input type="TEXT" name="username" placeholder="\xe7\x94\xa8\xe6\x88\xb7\xe5\x90\x8d/Email" />\n</div>\n<div class="section">\n<input type="PASSWORD" name="password" placeholder="\xe5\xaf\x86\xe7\xa0\x81" />\n</div>\n<div class="section">\n<input type="SUBMIT" value="\xe7\x99\xbb\xe5\x85\xa5" class="btn primary-btn" />\n<span class="tip">\xe4\xbc\x9a\xe8\xae\xb0\xe4\xbd\x8f\xe7\x99\xbb\xe5\x85\xa5\xe4\xb8\x80\xe4\xb8\xaa\xe6\x9c\x88</span>\n</div>\n</form>\n<div class="alert alert-info">\xe5\x86\x85\xe6\xb5\x8b\xe4\xb8\xad\xef\xbc\x8c\xe5\x8f\xaa\xe6\x8e\xa5\xe5\x8f\x97\xe9\x82\x80\xe8\xaf\xb7\xe6\xb3\xa8\xe5\x86\x8c</div>\n</div>\n</div>\n')  # partial/sidebar_login.html:19 (via partial/sidebar_global.html:6, additives.html:8, base.html:54)
    324          _append('\n')  # partial/sidebar_global.html:8 (via additives.html:8, base.html:54)
    325      _append('\n')  # partial/sidebar_global.html:10 (via additives.html:8, base.html:54)
    326      _append('<div class="box">\n<div class="header">\xe6\xb5\x8f\xe8\xa7\x88\xe9\xa3\x9f\xe5\x93\x81</div>\n<div class="body">\n<ul>\n<li class="item" data-url="/photos/hot" data-title="\xe7\x83\xad\xe9\x97\xa8\xe9\xa3\x9f\xe5\x93\x81"><span class="anchor">\xe7\x83\xad\xe9\x97\xa8\xe9\xa3\x9f\xe5\x93\x81</span></li>\n<li class="item" data-url="/photos/latest" data-title="\xe6\x9c\x80\xe6\x96\xb0\xe9\xa3\x9f\xe5\x93\x81"><span class="anchor">\xe6\x9c\x80\xe6\x96\xb0\xe9\xa3\x9f\xe5\x93\x81</span></li>\n</ul>\n</div>\n</div>\n')  # partial/sidebar_photos_nav.html:10 (via partial/sidebar_global.html:10, additives.html:8, base.html:54)
    327      _append('\n')  # partial/sidebar_global.html:11 (via additives.html:8, base.html:54)
    328      import models  # partial/sidebar_tags.html:1 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    329      _append('\n')  # partial/sidebar_tags.html:2 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    330      hot_searchs = models.Additive_Search().hot_searchs  # partial/sidebar_tags.html:2 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    331      _append('\n<div class="box" id="panel-searchs">\n<div class="header">\xe7\x83\xad\xe9\x97\xa8\xe6\x90\x9c\xe7\xb4\xa2</div>\n<div class="body">\n<ul>\n')  # partial/sidebar_tags.html:8 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    332      for search in hot_searchs:  # partial/sidebar_tags.html:8 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    333          _append('\n<li class="item" data-url="/search/')  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    334          _tmp = search  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    335          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    336          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    337          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    338          _append(_tmp)  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    339          _append('"><i class="icon-search"></i><span class="anchor">')  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    340          _tmp = search  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    341          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    342          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    343          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    344          _append(_tmp)  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    345          _append('</span></li>\n')  # partial/sidebar_tags.html:10 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    346      _append('\n</ul>\n</div>\n</div>\n')  # partial/sidebar_tags.html:14 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    347      _append('\n')  # partial/sidebar_global.html:12 (via additives.html:8, base.html:54)
    348      _append('\n')  # additives.html:9 (via base.html:54)
    349      _append('\n</div>\n</div>\n</div>\n<div id="footer">\n<div class="inner">\n<div class="right">\n<span class="belief">make the world a little better and easier</span>\n</div>\n<div class="left">\n<ul>\n<li><a href="/about">\xe5\x85\xb3\xe4\xba\x8e</a> <!--<span class="divider">/</span>--></li>\n<!--<li><a href="/feedback">\xe5\x8f\x8d\xe9\xa6\x88</a> <span class="divider">/</span></li>-->\n<!--<li><a href="/blog">\xe6\x97\xa5\xe5\xbf\x97</a></li>-->\n</ul>\n</div>\n</div>\n</div>\n<script type="text/javascript">\nvar _gaq = _gaq || [];\n_gaq.push([\'_setAccount\', \'UA-1281124-23\']);\n_gaq.push([\'_trackPageview\']);\n(function() {\nvar ga = document.createElement(\'script\'); ga.type = \'text/javascript\'; ga.async = true;\nga.src = (\'https:\' == document.location.protocol ? \'https://ssl\' : \'http://www\') + \'.google-analytics.com/ga.js\';\nvar s = document.getElementsByTagName(\'script\')[0]; s.parentNode.insertBefore(ga, s);\n})();\n</script>\n<!-- love your mom! -->\n</body>\n<meta name="description" content="\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - " />\n')  # base.html:89
    350      return _utf8('').join(_buffer)  # base.html:0
[E 120720 11:02:22 web:1031] Uncaught exception GET / (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.109', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cookie': '__utma=148685175.647871982.1342707625.1342707625.1342707625.1; __utmz=148685175.1342707625.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)', 'Cache-Control': 'max-age=0', 'X-Real-Ip': '192.168.0.109'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "src/sites/www/handlers/home.py", line 14, in get
        return self._render('hot')
      File "src/sites/www/handlers/base.py", line 87, in _render
        current_additive = additive,
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 474, in render
        html = self.render_string(template_name, **kwargs)
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 586, in render_string
        return t.generate(**args)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 253, in generate
        return execute()
      File "additives_html.generated.py", line 330, in _execute
        hot_searchs = models.Additive_Search().hot_searchs  # partial/sidebar_tags.html:2 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
      File "/home/dk/work/python/safood/src/thing/thing/thing.py", line 140, in __init__
        self._init_env()
      File "/home/dk/work/python/safood/src/thing/thing/thing.py", line 156, in _init_env
        self._selected_fields = [self.table]
      File "/home/dk/work/python/safood/src/thing/thing/thing.py", line 378, in table
        Thing._table_schemas[self._tablename] = Table(self._tablename, MetaData(), autoload = True, autoload_with = conn)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/schema.py", line 314, in __new__
        table._init(name, metadata, *args, **kw)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/schema.py", line 377, in _init
        self._autoload(metadata, autoload_with, include_columns)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/schema.py", line 393, in _autoload
        self, include_columns, exclude_columns
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py", line 1968, in run_callable
        return callable_(self, *args, **kwargs)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/default.py", line 260, in reflecttable
        return insp.reflecttable(table, include_columns, exclude_columns)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/reflection.py", line 350, in reflecttable
        tbl_opts = self.get_table_options(table_name, schema, **table.kwargs)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/reflection.py", line 178, in get_table_options
        **kw)
      File "<string>", line 1, in <lambda>
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/reflection.py", line 47, in cache
        ret = fn(self, con, *args, **kw)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/dialects/mysql/base.py", line 2039, in get_table_options
        parsed_state = self._parsed_state_or_create(connection, table_name, schema, **kw)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/dialects/mysql/base.py", line 2138, in _parsed_state_or_create
        info_cache=kw.get('info_cache', None)
      File "<string>", line 1, in <lambda>
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/reflection.py", line 47, in cache
        ret = fn(self, con, *args, **kw)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/dialects/mysql/base.py", line 2163, in _setup_parser
        full_name=full_name)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/dialects/mysql/base.py", line 2250, in _show_create_table
        raise exc.NoSuchTableError(full_name)
    NoSuchTableError: `additive_search`
[E 120720 11:02:22 web:1393] 500 GET / (127.0.0.1) 1465.57ms
[W 120720 11:02:22 web:1393] 404 GET /favicon.ico (127.0.0.1) 4.40ms
[E 120720 11:17:46 template:256] additives.html code:
      1  def _execute():  # base.html:0
      2      _buffer = []  # base.html:0
      3      _append = _buffer.append  # base.html:0
      4      _append('<!doctype html>\n<head>\n<meta charset="UTF-8" />\n<meta content="True" name="HandheldFriendly" />\n<meta content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0; name=\'viewport\'" />\n<title>\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - \xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81')  # base.html:6
      5      _append('</title>\n<link rel="stylesheet" type="text/css" media="screen" href="/static/css/vendor/jquery.fancybox.css" />\n<link rel="stylesheet" type="text/css" media="screen" href="/static/css/main.css" />\n<link rel="shortcut icon" href="/static/img/favicon.ico" />\n<link rel="canonical" href="http://wuditoo.com/" />\n<meta name="description" content="\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - \xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81" />\n<script src="/static/js/vendor/jquery.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.history.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.fancybox.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.scrollTo.min.js" type="text/javascript"></script>\n')  # base.html:16
      6      _append('\n<script type="text/javascript">\n')  # additives.html:13 (via base.html:16)
      7      if current_additive:  # additives.html:13 (via base.html:16)
      8          _append('\nmeta_additive = {\nurl: "/additive/')  # additives.html:15 (via base.html:16)
      9          _tmp = current_additive.id  # additives.html:15 (via base.html:16)
     10          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # additives.html:15 (via base.html:16)
     11          else: _tmp = _utf8(str(_tmp))  # additives.html:15 (via base.html:16)
     12          _tmp = _utf8(xhtml_escape(_tmp))  # additives.html:15 (via base.html:16)
     13          _append(_tmp)  # additives.html:15 (via base.html:16)
     14          _append('",\nwidth: ')  # additives.html:16 (via base.html:16)
     15          _tmp = current_additive.width  # additives.html:16 (via base.html:16)
     16          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # additives.html:16 (via base.html:16)
     17          else: _tmp = _utf8(str(_tmp))  # additives.html:16 (via base.html:16)
     18          _tmp = _utf8(xhtml_escape(_tmp))  # additives.html:16 (via base.html:16)
     19          _append(_tmp)  # additives.html:16 (via base.html:16)
     20          _append(',\nheight: ')  # additives.html:17 (via base.html:16)
     21          _tmp = current_additive.height  # additives.html:17 (via base.html:16)
     22          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # additives.html:17 (via base.html:16)
     23          else: _tmp = _utf8(str(_tmp))  # additives.html:17 (via base.html:16)
     24          _tmp = _utf8(xhtml_escape(_tmp))  # additives.html:17 (via base.html:16)
     25          _append(_tmp)  # additives.html:17 (via base.html:16)
     26          _append('\n}\n')  # additives.html:19 (via base.html:16)
     27      _append('\n</script>\n')  # additives.html:21 (via base.html:16)
     28      _append('\n<script src="/static/js/main.js" type="text/javascript"></script>\n</head>\n<!--[if IE 7 ]><body class="ie7"><![endif]-->\n<!--[if gt IE 7]><body class="ie"><![endif]-->\n<!--[if !IE]><body><![endif]-->\n<div id="header">\n<div class="inner">\n<div id="logo"><a href="/">\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</a></div>\n<div id="slogon">\xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81</div>\n<div id="witticism">')  # base.html:27
     29      _tmp = home_sentence()  # base.html:27
     30      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:27
     31      else: _tmp = _utf8(str(_tmp))  # base.html:27
     32      _tmp = _utf8(xhtml_escape(_tmp))  # base.html:27
     33      _append(_tmp)  # base.html:27
     34      _append('</div>\n<!--\n<ul class="nav-right">\n</ul>\n-->\n</div>\n</div>\n<div id="container">\n<div class="inner">\n<div class="message alert alert-warn">\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0\xe5\x86\xac\xe7\x9c\xa0\xe4\xb8\xad\xef\xbc\x8c\xe8\x8b\x8f\xe9\x86\x92\xe6\x97\xb6\xe9\x97\xb4\xe5\xbe\x85\xe5\xae\x9a\xe3\x80\x82\xe8\xb0\xa2\xe8\xb0\xa2\xe6\x82\xa8\xe7\x9a\x84\xe5\x88\xb0\xe8\xae\xbf\xef\xbc\x9a\xef\xbc\x89</div>\n')  # base.html:38
     35      message = get_message()  # base.html:38
     36      _append('\n')  # base.html:39
     37      for message_type in ('error', 'success', 'info', 'warn'):  # base.html:39
     38          _append('\n')  # base.html:40
     39          if message and message_type == message[0]:  # base.html:40
     40              _append('\n<div id="')  # base.html:41
     41              _tmp = message_type  # base.html:41
     42              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     43              else: _tmp = _utf8(str(_tmp))  # base.html:41
     44              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     45              _append(_tmp)  # base.html:41
     46              _append('-message" class="message alert alert-')  # base.html:41
     47              _tmp = message_type  # base.html:41
     48              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     49              else: _tmp = _utf8(str(_tmp))  # base.html:41
     50              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     51              _append(_tmp)  # base.html:41
     52              _append('">')  # base.html:41
     53              _tmp = message[1]  # base.html:41
     54              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     55              else: _tmp = _utf8(str(_tmp))  # base.html:41
     56              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     57              _append(_tmp)  # base.html:41
     58              _append('</div>\n')  # base.html:42
     59          else:  # base.html:42
     60              _append('\n<div id="')  # base.html:43
     61              _tmp = message_type  # base.html:43
     62              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:43
     63              else: _tmp = _utf8(str(_tmp))  # base.html:43
     64              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:43
     65              _append(_tmp)  # base.html:43
     66              _append('-message" class="message alert alert-')  # base.html:43
     67              _tmp = message_type  # base.html:43
     68              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:43
     69              else: _tmp = _utf8(str(_tmp))  # base.html:43
     70              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:43
     71              _append(_tmp)  # base.html:43
     72              _append(' hide"></div>\n')  # base.html:44
     73          _append('\n')  # base.html:45
     74      _append('\n')  # base.html:47
     75      _append('\n<div id="main">\n')  # base.html:50
     76      _append('\n')  # additives.html:4 (via base.html:50)
     77      _append('<div class="box" id="additives">\n<div class="header">')  # partial/additives.html:2 (via additives.html:4, base.html:50)
     78      _tmp = additives_title  # partial/additives.html:2 (via additives.html:4, base.html:50)
     79      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:2 (via additives.html:4, base.html:50)
     80      else: _tmp = _utf8(str(_tmp))  # partial/additives.html:2 (via additives.html:4, base.html:50)
     81      _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:2 (via additives.html:4, base.html:50)
     82      _append(_tmp)  # partial/additives.html:2 (via additives.html:4, base.html:50)
     83      _append('</div>\n<div class="body main ul">\n')  # partial/additives.html:4 (via additives.html:4, base.html:50)
     84      for index, additive in enumerate(additives):  # partial/additives.html:4 (via additives.html:4, base.html:50)
     85          _append('\n')  # partial/additives.html:5 (via additives.html:4, base.html:50)
     86          creator = additive.creator  # partial/additives.html:5 (via additives.html:4, base.html:50)
     87          _append('\n<div class="additive-item">\n<div class="header">\n<a class="avatar" href="/user/')  # partial/additives.html:8 (via additives.html:4, base.html:50)
     88          _tmp = creator.username  # partial/additives.html:8 (via additives.html:4, base.html:50)
     89          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     90          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     91          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     92          _append(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     93          _append('"><img src="')  # partial/additives.html:8 (via additives.html:4, base.html:50)
     94          _tmp = get_avatar_url(creator, 's')  # partial/additives.html:8 (via additives.html:4, base.html:50)
     95          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     96          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     97          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     98          _append(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     99          _append('" /></a>')  # partial/additives.html:8 (via additives.html:4, base.html:50)
    100          _tmp = additive.name  # partial/additives.html:8 (via additives.html:4, base.html:50)
    101          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
    102          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
    103          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
    104          _append(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
    105          _append('\n</div>\n<div class="body">\n<div class="additive_alias">\xe5\x85\xb6\xe4\xbb\x96\xe5\x90\x8d\xe7\xa7\xb0:')  # partial/additives.html:11 (via additives.html:4, base.html:50)
    106          _tmp = additive.alias  # partial/additives.html:11 (via additives.html:4, base.html:50)
    107          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:11 (via additives.html:4, base.html:50)
    108          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:11 (via additives.html:4, base.html:50)
    109          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:11 (via additives.html:4, base.html:50)
    110          _append(_tmp)  # partial/additives.html:11 (via additives.html:4, base.html:50)
    111          _append('</div>\n<div class="additive_cns">CNS\xe5\x8f\xb7:')  # partial/additives.html:12 (via additives.html:4, base.html:50)
    112          _tmp = additive.cns  # partial/additives.html:12 (via additives.html:4, base.html:50)
    113          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:12 (via additives.html:4, base.html:50)
    114          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:12 (via additives.html:4, base.html:50)
    115          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:12 (via additives.html:4, base.html:50)
    116          _append(_tmp)  # partial/additives.html:12 (via additives.html:4, base.html:50)
    117          _append('</div>\n<div class="additive_ins">INS\xe5\x8f\xb7:')  # partial/additives.html:13 (via additives.html:4, base.html:50)
    118          _tmp = additive.ins  # partial/additives.html:13 (via additives.html:4, base.html:50)
    119          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:13 (via additives.html:4, base.html:50)
    120          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:13 (via additives.html:4, base.html:50)
    121          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:13 (via additives.html:4, base.html:50)
    122          _append(_tmp)  # partial/additives.html:13 (via additives.html:4, base.html:50)
    123          _append('</div>\n<div class="additive_effect">\xe5\x8a\x9f\xe8\x83\xbd:')  # partial/additives.html:14 (via additives.html:4, base.html:50)
    124          _tmp = additive.effect  # partial/additives.html:14 (via additives.html:4, base.html:50)
    125          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:14 (via additives.html:4, base.html:50)
    126          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:14 (via additives.html:4, base.html:50)
    127          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:14 (via additives.html:4, base.html:50)
    128          _append(_tmp)  # partial/additives.html:14 (via additives.html:4, base.html:50)
    129          _append('</div>\n</div>\n<div class="footer">\n<span class="meta">\n<ul>\n<li><i class="icon-view"></i> ')  # partial/additives.html:19 (via additives.html:4, base.html:50)
    130          _tmp = additive.views_count  # partial/additives.html:19 (via additives.html:4, base.html:50)
    131          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:19 (via additives.html:4, base.html:50)
    132          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:19 (via additives.html:4, base.html:50)
    133          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:19 (via additives.html:4, base.html:50)
    134          _append(_tmp)  # partial/additives.html:19 (via additives.html:4, base.html:50)
    135          _append('</li>\n</ul>\n</span>\n<span class="created">\n')  # partial/additives.html:23 (via additives.html:4, base.html:50)
    136          _tmp = timesince(additive.created)  # partial/additives.html:23 (via additives.html:4, base.html:50)
    137          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:23 (via additives.html:4, base.html:50)
    138          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:23 (via additives.html:4, base.html:50)
    139          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:23 (via additives.html:4, base.html:50)
    140          _append(_tmp)  # partial/additives.html:23 (via additives.html:4, base.html:50)
    141          _append('\n</span>\n</div>\n</div>\n')  # partial/additives.html:27 (via additives.html:4, base.html:50)
    142          _append('\n')  # partial/additives.html:28 (via additives.html:4, base.html:50)
    143          if index > 0 and (index + 1) % 3 == 0:  # partial/additives.html:28 (via additives.html:4, base.html:50)
    144              _append('\n<div class="clearfix"></div>\n')  # partial/additives.html:30 (via additives.html:4, base.html:50)
    145          _append('\n')  # partial/additives.html:32 (via additives.html:4, base.html:50)
    146      _append('\n')  # partial/additives.html:33 (via additives.html:4, base.html:50)
    147      page_type = 'additives'  # partial/additives.html:33 (via additives.html:4, base.html:50)
    148      _append('\n')  # partial/additives.html:34 (via additives.html:4, base.html:50)
    149      _append('\n')  # partial/pagination.html:3 (via partial/additives.html:34, additives.html:4, base.html:50)
    150      from macros.macro import ADDITIVES_PER_PAGE, USERS_PER_PAGE  # partial/pagination.html:3 (via partial/additives.html:34, additives.html:4, base.html:50)
    151      _append('\n')  # partial/pagination.html:4 (via partial/additives.html:34, additives.html:4, base.html:50)
    152      import math  # partial/pagination.html:4 (via partial/additives.html:34, additives.html:4, base.html:50)
    153      _append('\n')  # partial/pagination.html:6 (via partial/additives.html:34, additives.html:4, base.html:50)
    154      if page_type == 'additives':  # partial/pagination.html:6 (via partial/additives.html:34, additives.html:4, base.html:50)
    155          _append('\n')  # partial/pagination.html:7 (via partial/additives.html:34, additives.html:4, base.html:50)
    156          items_per_page = ADDITIVES_PER_PAGE  # partial/pagination.html:7 (via partial/additives.html:34, additives.html:4, base.html:50)
    157          _append('\n')  # partial/pagination.html:8 (via partial/additives.html:34, additives.html:4, base.html:50)
    158      else:  # partial/pagination.html:8 (via partial/additives.html:34, additives.html:4, base.html:50)
    159          _append('\n')  # partial/pagination.html:9 (via partial/additives.html:34, additives.html:4, base.html:50)
    160          items_per_page = USERS_PER_PAGE  # partial/pagination.html:9 (via partial/additives.html:34, additives.html:4, base.html:50)
    161          _append('\n')  # partial/pagination.html:10 (via partial/additives.html:34, additives.html:4, base.html:50)
    162      _append('\n')  # partial/pagination.html:12 (via partial/additives.html:34, additives.html:4, base.html:50)
    163      total_page = int(math.ceil(float(total_items) / items_per_page))  # partial/pagination.html:12 (via partial/additives.html:34, additives.html:4, base.html:50)
    164      _append('\n')  # partial/pagination.html:14 (via partial/additives.html:34, additives.html:4, base.html:50)
    165      current_page = int(handler.get_argument('page', 1))  # partial/pagination.html:14 (via partial/additives.html:34, additives.html:4, base.html:50)
    166      _append('\n')  # partial/pagination.html:16 (via partial/additives.html:34, additives.html:4, base.html:50)
    167      if current_page <=6:  # partial/pagination.html:16 (via partial/additives.html:34, additives.html:4, base.html:50)
    168          _append('\n')  # partial/pagination.html:17 (via partial/additives.html:34, additives.html:4, base.html:50)
    169          end_page = min(total_page, 10)  # partial/pagination.html:17 (via partial/additives.html:34, additives.html:4, base.html:50)
    170          _append('\n')  # partial/pagination.html:18 (via partial/additives.html:34, additives.html:4, base.html:50)
    171          start_page = 1  # partial/pagination.html:18 (via partial/additives.html:34, additives.html:4, base.html:50)
    172          _append('\n')  # partial/pagination.html:19 (via partial/additives.html:34, additives.html:4, base.html:50)
    173      else:  # partial/pagination.html:19 (via partial/additives.html:34, additives.html:4, base.html:50)
    174          _append('\n')  # partial/pagination.html:20 (via partial/additives.html:34, additives.html:4, base.html:50)
    175          end_page = min(total_page, current_page+4)  # partial/pagination.html:20 (via partial/additives.html:34, additives.html:4, base.html:50)
    176          _append('\n')  # partial/pagination.html:21 (via partial/additives.html:34, additives.html:4, base.html:50)
    177          start_page = current_page - 5  # partial/pagination.html:21 (via partial/additives.html:34, additives.html:4, base.html:50)
    178          _append('\n')  # partial/pagination.html:22 (via partial/additives.html:34, additives.html:4, base.html:50)
    179      _append('\n')  # partial/pagination.html:24 (via partial/additives.html:34, additives.html:4, base.html:50)
    180      if total_page > 1:  # partial/pagination.html:24 (via partial/additives.html:34, additives.html:4, base.html:50)
    181          _append('\n<div class="pagination">\n<ul>\n')  # partial/pagination.html:27 (via partial/additives.html:34, additives.html:4, base.html:50)
    182          if current_page == 1:  # partial/pagination.html:27 (via partial/additives.html:34, additives.html:4, base.html:50)
    183              _append('\n<li class="disabled">\xe2\x86\x90 </li>\n')  # partial/pagination.html:29 (via partial/additives.html:34, additives.html:4, base.html:50)
    184          else:  # partial/pagination.html:29 (via partial/additives.html:34, additives.html:4, base.html:50)
    185              _append('\n<li><a href="')  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    186              _tmp = page_path  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    187              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    188              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    189              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    190              _append(_tmp)  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    191              _append('?page=1">\xe2\x86\x90 </a></li>\n')  # partial/pagination.html:31 (via partial/additives.html:34, additives.html:4, base.html:50)
    192          _append('\n')  # partial/pagination.html:33 (via partial/additives.html:34, additives.html:4, base.html:50)
    193          for i in range(start_page, end_page + 1):  # partial/pagination.html:33 (via partial/additives.html:34, additives.html:4, base.html:50)
    194              _append('\n<li ')  # partial/pagination.html:34 (via partial/additives.html:34, additives.html:4, base.html:50)
    195              if current_page == i:  # partial/pagination.html:34 (via partial/additives.html:34, additives.html:4, base.html:50)
    196                  _append('class="active"')  # partial/pagination.html:34 (via partial/additives.html:34, additives.html:4, base.html:50)
    197              _append('>\n<a href="')  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    198              _tmp = page_path  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    199              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    200              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    201              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    202              _append(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    203              _append('?page=')  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    204              _tmp = i  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    205              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    206              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    207              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    208              _append(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    209              _append('">')  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    210              _tmp = i  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    211              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    212              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    213              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    214              _append(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    215              _append('</a>\n</li>\n')  # partial/pagination.html:37 (via partial/additives.html:34, additives.html:4, base.html:50)
    216          _append('\n')  # partial/pagination.html:39 (via partial/additives.html:34, additives.html:4, base.html:50)
    217          if current_page == total_page:  # partial/pagination.html:39 (via partial/additives.html:34, additives.html:4, base.html:50)
    218              _append('\n<li class="disabled">\xe2\x86\x92 </li>\n')  # partial/pagination.html:41 (via partial/additives.html:34, additives.html:4, base.html:50)
    219          else:  # partial/pagination.html:41 (via partial/additives.html:34, additives.html:4, base.html:50)
    220              _append('\n<li><a href="')  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    221              _tmp = page_path  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    222              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    223              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    224              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    225              _append(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    226              _append('?page=')  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    227              _tmp = current_page+1  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    228              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    229              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    230              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    231              _append(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    232              _append('">\xe2\x86\x92 </a></li>\n')  # partial/pagination.html:43 (via partial/additives.html:34, additives.html:4, base.html:50)
    233          _append('\n</ul>\n</div>\n')  # partial/pagination.html:46 (via partial/additives.html:34, additives.html:4, base.html:50)
    234      _append('\n')  # partial/pagination.html:47 (via partial/additives.html:34, additives.html:4, base.html:50)
    235      _append('\n</div>\n</div>\n')  # partial/additives.html:37 (via additives.html:4, base.html:50)
    236      _append('\n')  # additives.html:5 (via base.html:50)
    237      _append('\n</div>\n<div id="sidebar">\n')  # base.html:54
    238      _append('\n')  # additives.html:8 (via base.html:54)
    239      if current_user:  # partial/sidebar_global.html:1 (via additives.html:8, base.html:54)
    240          _append('\n')  # partial/sidebar_global.html:2 (via additives.html:8, base.html:54)
    241          _append('<div class="upload item ')  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    242          if not current_user.left_upload_count:  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    243              _append('disabled')  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    244          _append('" data-url="/photo/upload" data-title="\xe9\x87\x87\xe9\x9b\x86\xe7\x85\xa7\xe7\x89\x87" >\n<div class="left"></div>\n<div class="center">\n')  # partial/sidebar_upload.html:5 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    245          if current_user.left_upload_count:  # partial/sidebar_upload.html:5 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    246              _append('\n\xe9\x87\x87\xe9\x9b\x86\xe7\x85\xa7\xe7\x89\x87(\xe6\x9c\xac\xe5\x91\xa8\xe8\xbf\x98\xe5\x89\xa9')  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    247              _tmp = current_user.left_upload_count  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    248              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    249              else: _tmp = _utf8(str(_tmp))  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    250              _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    251              _append(_tmp)  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    252              _append('\xe5\xbc\xa0)\n')  # partial/sidebar_upload.html:7 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    253          else:  # partial/sidebar_upload.html:7 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    254              _append('\n\xe6\x9c\xac\xe5\x91\xa8\xe7\x9a\x84\xe9\x87\x87\xe9\x9b\x86\xe4\xbd\x99\xe9\xa2\x9d\xe5\xb7\xb2\xe7\x94\xa8\xe5\xae\x8c\xe4\xba\x86\n')  # partial/sidebar_upload.html:9 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    255          _append('\n</div>\n<div class="right"></div>\n</div>\n')  # partial/sidebar_upload.html:13 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    256          _append('\n')  # partial/sidebar_global.html:3 (via additives.html:8, base.html:54)
    257          _append('<div class="box" id="panel-me">\n<div class="header"><a class="right" href="/logout">\xe7\x99\xbb\xe5\x87\xba</a>\xe6\x88\x91\xe7\x9a\x84\xe4\xbf\xa1\xe6\x81\xaf</div>\n<div class="body">\n<div class="me">\n<a class="settings item" href="/settings" data-title="\xe8\xae\xbe\xe7\xbd\xae" data-url="/settings">\xe8\xae\xbe\xe7\xbd\xae</a>\n<a href="/user/')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    258          _tmp = current_user.username  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    259          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    260          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    261          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    262          _append(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    263          _append('"><img class="avatar" src="')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    264          _tmp = get_avatar_url(current_user, 's')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    265          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    266          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    267          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    268          _append(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    269          _append('" /></a>\n<a href="/user/')  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    270          _tmp = current_user.username  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    271          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    272          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    273          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    274          _append(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    275          _append('">')  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    276          _tmp = current_user.fullname  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    277          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    278          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    279          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    280          _append(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    281          _append('</a>\n<i class="level icon-level')  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    282          _tmp = current_user.level  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    283          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    284          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    285          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    286          _append(_tmp)  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    287          _append('"></i>\n</div>\n<div class="follow">\n<div class="following item" data-title="\xe6\x88\x91\xe5\x85\xb3\xe6\xb3\xa8\xe7\x9a\x84\xe4\xba\xba" data-url="/mine/following">\n<h3 class="anchor">')  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    288          _tmp = current_user.following_count  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    289          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    290          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    291          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    292          _append(_tmp)  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    293          _append('</h3>\n<span>following</span>\n</div>\n<div class="follower item" data-title="\xe5\x85\xb3\xe6\xb3\xa8\xe6\x88\x91\xe7\x9a\x84\xe4\xba\xba" data-url="/mine/follower">\n<h3 class="anchor">')  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    294          _tmp = current_user.follower_count  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    295          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    296          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    297          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    298          _append(_tmp)  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    299          _append('</h3>\n<span>followers</span>\n</div>\n</div>\n<ul>\n<li class="item" data-url="/mine/invite" data-title="\xe9\x82\x80\xe8\xaf\xb7\xe6\x9c\x8b\xe5\x8f\x8b\xe5\x8a\xa0\xe5\x85\xa5"> <span class="num">')  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    300          _tmp = current_user.unused_invite_key_count  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    301          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    302          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    303          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    304          _append(_tmp)  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    305          _append('</span><span class="anchor">\xe9\x82\x80\xe8\xaf\xb7\xe6\x9c\x8b\xe5\x8f\x8b\xe5\x8a\xa0\xe5\x85\xa5</span></li>\n<li class="item" data-title="\xe6\x88\x91\xe6\xb7\xbb\xe5\x8a\xa0\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87" data-url="/mine/photos"> <span class="num">')  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    306          _tmp = current_user.photo_count  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    307          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    308          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    309          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    310          _append(_tmp)  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    311          _append('</span><span class="anchor">\xe6\x88\x91\xe6\xb7\xbb\xe5\x8a\xa0\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87</span></li>\n<li class="item" data-title="\xe6\x88\x91\xe5\x96\x9c\xe6\xac\xa2\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87" data-url="/mine/likes_photos"><span class="num">')  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    312          _tmp = current_user.likes_count  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    313          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    314          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    315          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    316          _append(_tmp)  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    317          _append('</span><span class="anchor">\xe6\x88\x91\xe5\x96\x9c\xe6\xac\xa2\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87</span> </li>\n</ul>\n</div>\n</div>\n')  # partial/sidebar_me.html:27 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    318          _append('\n')  # partial/sidebar_global.html:4 (via additives.html:8, base.html:54)
    319      else:  # partial/sidebar_global.html:4 (via additives.html:8, base.html:54)
    320          _append('\n')  # partial/sidebar_global.html:5 (via additives.html:8, base.html:54)
    321          _append('<div class="box" id="panel-about">\n<div class="header">\xe5\x85\xb3\xe4\xba\x8e\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</div>\n<div class="body">\n<p>\xe5\x85\xb3\xe6\xb3\xa8\xe9\xa3\x9f\xe5\x93\x81\xe5\xae\x89\xe5\x85\xa8\xef\xbc\x8c\xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe4\xb8\x96\xe7\x95\x8c</p>\n<p>\xe6\x89\x80\xe6\x9c\x89\xe9\xa3\x9f\xe5\x93\x81\xe5\x92\x8c\xe6\xb7\xbb\xe5\x8a\xa0\xe5\x89\x82\xe8\xb5\x84\xe6\x96\x99\xe6\x9d\xa5\xe8\x87\xaa\xe4\xba\x8eiearth-\xe7\x88\xb1\xe5\x9c\xb0\xe7\x90\x83\xe7\x8e\xaf\xe4\xbf\x9d\xe6\x9c\xba\xe6\x9e\x84</p>\n</div>\n</div>\n')  # partial/sidebar_about.html:8 (via partial/sidebar_global.html:5, additives.html:8, base.html:54)
    322          _append('\n')  # partial/sidebar_global.html:6 (via additives.html:8, base.html:54)
    323          _append('<div class="box" id="panel-login">\n<div class="header">\xe7\x99\xbb\xe5\x85\xa5\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</div>\n<div class="body">\n<form action="/login" method="POST">\n<div class="section">\n<input type="TEXT" name="username" placeholder="\xe7\x94\xa8\xe6\x88\xb7\xe5\x90\x8d/Email" />\n</div>\n<div class="section">\n<input type="PASSWORD" name="password" placeholder="\xe5\xaf\x86\xe7\xa0\x81" />\n</div>\n<div class="section">\n<input type="SUBMIT" value="\xe7\x99\xbb\xe5\x85\xa5" class="btn primary-btn" />\n<span class="tip">\xe4\xbc\x9a\xe8\xae\xb0\xe4\xbd\x8f\xe7\x99\xbb\xe5\x85\xa5\xe4\xb8\x80\xe4\xb8\xaa\xe6\x9c\x88</span>\n</div>\n</form>\n<div class="alert alert-info">\xe5\x86\x85\xe6\xb5\x8b\xe4\xb8\xad\xef\xbc\x8c\xe5\x8f\xaa\xe6\x8e\xa5\xe5\x8f\x97\xe9\x82\x80\xe8\xaf\xb7\xe6\xb3\xa8\xe5\x86\x8c</div>\n</div>\n</div>\n')  # partial/sidebar_login.html:19 (via partial/sidebar_global.html:6, additives.html:8, base.html:54)
    324          _append('\n')  # partial/sidebar_global.html:8 (via additives.html:8, base.html:54)
    325      _append('\n')  # partial/sidebar_global.html:10 (via additives.html:8, base.html:54)
    326      _append('<div class="box">\n<div class="header">\xe6\xb5\x8f\xe8\xa7\x88\xe9\xa3\x9f\xe5\x93\x81</div>\n<div class="body">\n<ul>\n<li class="item" data-url="/photos/hot" data-title="\xe7\x83\xad\xe9\x97\xa8\xe9\xa3\x9f\xe5\x93\x81"><span class="anchor">\xe7\x83\xad\xe9\x97\xa8\xe9\xa3\x9f\xe5\x93\x81</span></li>\n<li class="item" data-url="/photos/latest" data-title="\xe6\x9c\x80\xe6\x96\xb0\xe9\xa3\x9f\xe5\x93\x81"><span class="anchor">\xe6\x9c\x80\xe6\x96\xb0\xe9\xa3\x9f\xe5\x93\x81</span></li>\n</ul>\n</div>\n</div>\n')  # partial/sidebar_photos_nav.html:10 (via partial/sidebar_global.html:10, additives.html:8, base.html:54)
    327      _append('\n')  # partial/sidebar_global.html:11 (via additives.html:8, base.html:54)
    328      import models  # partial/sidebar_tags.html:1 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    329      _append('\n')  # partial/sidebar_tags.html:2 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    330      hot_searchs = models.Additive_Search().hot_searchs  # partial/sidebar_tags.html:2 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    331      _append('\n<div class="box" id="panel-searchs">\n<div class="header">\xe7\x83\xad\xe9\x97\xa8\xe6\x90\x9c\xe7\xb4\xa2</div>\n<div class="body">\n<ul>\n')  # partial/sidebar_tags.html:8 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    332      for search in hot_searchs:  # partial/sidebar_tags.html:8 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    333          _append('\n<li class="item" data-url="/search/')  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    334          _tmp = search  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    335          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    336          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    337          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    338          _append(_tmp)  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    339          _append('"><i class="icon-search"></i><span class="anchor">')  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    340          _tmp = search  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    341          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    342          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    343          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    344          _append(_tmp)  # partial/sidebar_tags.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    345          _append('</span></li>\n')  # partial/sidebar_tags.html:10 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    346      _append('\n</ul>\n</div>\n</div>\n')  # partial/sidebar_tags.html:14 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    347      _append('\n')  # partial/sidebar_global.html:12 (via additives.html:8, base.html:54)
    348      _append('\n')  # additives.html:9 (via base.html:54)
    349      _append('\n</div>\n</div>\n</div>\n<div id="footer">\n<div class="inner">\n<div class="right">\n<span class="belief">make the world a little better and easier</span>\n</div>\n<div class="left">\n<ul>\n<li><a href="/about">\xe5\x85\xb3\xe4\xba\x8e</a> <!--<span class="divider">/</span>--></li>\n<!--<li><a href="/feedback">\xe5\x8f\x8d\xe9\xa6\x88</a> <span class="divider">/</span></li>-->\n<!--<li><a href="/blog">\xe6\x97\xa5\xe5\xbf\x97</a></li>-->\n</ul>\n</div>\n</div>\n</div>\n<script type="text/javascript">\nvar _gaq = _gaq || [];\n_gaq.push([\'_setAccount\', \'UA-1281124-23\']);\n_gaq.push([\'_trackPageview\']);\n(function() {\nvar ga = document.createElement(\'script\'); ga.type = \'text/javascript\'; ga.async = true;\nga.src = (\'https:\' == document.location.protocol ? \'https://ssl\' : \'http://www\') + \'.google-analytics.com/ga.js\';\nvar s = document.getElementsByTagName(\'script\')[0]; s.parentNode.insertBefore(ga, s);\n})();\n</script>\n<!-- love your mom! -->\n</body>\n<meta name="description" content="\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - " />\n')  # base.html:89
    350      return _utf8('').join(_buffer)  # base.html:0
[E 120720 11:17:46 web:1031] Uncaught exception GET / (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.109', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cookie': '__utma=148685175.647871982.1342707625.1342707625.1342707625.1; __utmz=148685175.1342707625.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)', 'Cache-Control': 'max-age=0', 'X-Real-Ip': '192.168.0.109'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "src/sites/www/handlers/home.py", line 14, in get
        return self._render('hot')
      File "src/sites/www/handlers/base.py", line 87, in _render
        current_additive = additive,
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 474, in render
        html = self.render_string(template_name, **kwargs)
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 586, in render_string
        return t.generate(**args)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 253, in generate
        return execute()
      File "additives_html.generated.py", line 330, in _execute
        hot_searchs = models.Additive_Search().hot_searchs  # partial/sidebar_tags.html:2 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
      File "/home/dk/work/python/safood/src/common/models/additive_search.py", line 11, in hot_searchs
        redis_key = REDIS_KEY['HOT_SEARCHS']
    KeyError: 'HOT_SEARCHS'
[E 120720 11:17:46 web:1393] 500 GET / (127.0.0.1) 1747.39ms
[W 120720 11:17:46 web:1393] 404 GET /favicon.ico (127.0.0.1) 8.95ms
[I 120720 11:18:28 autoreload:133] /home/dk/work/python/safood/src/common/macros/macro.py modified; restarting server
[I 120720 11:22:59 autoreload:133] /home/dk/work/python/safood/src/common/models/additive_search.py modified; restarting server
[I 120720 16:08:59 web:1393] 200 GET / (127.0.0.1) 1361.96ms
[E 120720 16:22:01 web:1031] Uncaught exception GET /user/test2 (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/user/test2', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.103', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cookie': '__utma=148685175.647871982.1342707625.1342707625.1342771740.2; __utmb=148685175.1.10.1342771740; __utmc=148685175; __utmz=148685175.1342707625.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)', 'X-Real-Ip': '192.168.0.103', 'Referer': 'http://192.168.0.189/'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "/home/dk/work/python/safood/src/common/utils/__init__.py", line 163, in wrapper
        return func(self, username)
      File "src/sites/www/handlers/user.py", line 16, in get
        return self._render('additives')
      File "src/sites/www/handlers/base.py", line 113, in _render
        current_additive = additive,
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 474, in render
        html = self.render_string(template_name, **kwargs)
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 573, in render_string
        t = loader.load(template_name)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 323, in load
        self.templates[name] = self._create_template(name)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 353, in _create_template
        f = open(path, "r")
    IOError: [Errno 2] No such file or directory: '/home/dk/work/python/safood/src/sites/www/templates/user_additives.html'
[E 120720 16:22:01 web:1393] 500 GET /user/test2 (127.0.0.1) 68.99ms
[W 120720 16:22:02 web:1393] 404 GET /favicon.ico (127.0.0.1) 6.33ms
[I 120720 16:49:14 autoreload:133] /home/dk/work/python/safood/src/common/models/additive.py modified; restarting server
[I 120720 17:09:47 web:1393] 200 GET / (127.0.0.1) 275.94ms
[I 120720 17:09:53 web:1393] 200 GET / (127.0.0.1) 111.13ms
[I 120720 17:19:29 web:1393] 200 GET / (127.0.0.1) 1396.91ms
[I 120720 17:21:34 autoreload:133] /home/dk/work/python/safood/src/common/helpers/__init__.py modified; restarting server
[W 120720 17:23:03 web:1393] 404 GET /favicon.ico (127.0.0.1) 4.21ms
[I 120720 17:25:21 web:1393] 200 GET / (127.0.0.1) 428.73ms
[I 120720 17:27:04 web:1393] 200 GET / (127.0.0.1) 143.55ms
[I 120720 17:39:43 web:1393] 200 GET / (127.0.0.1) 108.56ms
[E 120720 17:40:25 web:1031] Uncaught exception GET /user/test (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/user/test', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.103', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cookie': '__utma=148685175.647871982.1342707625.1342771740.1342775388.3; __utmb=148685175.6.10.1342775388; __utmc=148685175; __utmz=148685175.1342707625.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)', 'X-Real-Ip': '192.168.0.103', 'Referer': 'http://192.168.0.189/'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "/home/dk/work/python/safood/src/common/utils/__init__.py", line 163, in wrapper
        return func(self, username)
      File "/home/dk/work/python/safood/src/sites/www/handlers/user.py", line 16, in get
        return self._render('additives')
      File "/home/dk/work/python/safood/src/sites/www/handlers/base.py", line 113, in _render
        current_additive = additive,
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 474, in render
        html = self.render_string(template_name, **kwargs)
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 573, in render_string
        t = loader.load(template_name)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 323, in load
        self.templates[name] = self._create_template(name)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 353, in _create_template
        f = open(path, "r")
    IOError: [Errno 2] No such file or directory: '/home/dk/work/python/safood/src/sites/www/templates/user_additives.html'
[E 120720 17:40:25 web:1393] 500 GET /user/test (127.0.0.1) 20.70ms
[W 120720 17:40:25 web:1393] 404 GET /favicon.ico (127.0.0.1) 1.69ms
[W 120720 17:46:21 web:1393] 404 GET /additives (127.0.0.1) 0.94ms
[W 120720 17:46:21 web:1393] 404 GET /favicon.ico (127.0.0.1) 1.55ms
[E 120720 17:47:49 web:1031] Uncaught exception GET /user/test (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/user/test', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.103', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cookie': '__utma=148685175.647871982.1342707625.1342771740.1342775388.3; __utmb=148685175.8.10.1342775388; __utmc=148685175; __utmz=148685175.1342707625.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)', 'X-Real-Ip': '192.168.0.103', 'Referer': 'http://192.168.0.189/'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "/home/dk/work/python/safood/src/common/utils/__init__.py", line 163, in wrapper
        return func(self, username)
      File "/home/dk/work/python/safood/src/sites/www/handlers/user.py", line 16, in get
        return self._render('additives')
      File "/home/dk/work/python/safood/src/sites/www/handlers/base.py", line 113, in _render
        current_additive = additive,
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 474, in render
        html = self.render_string(template_name, **kwargs)
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 573, in render_string
        t = loader.load(template_name)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 323, in load
        self.templates[name] = self._create_template(name)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 353, in _create_template
        f = open(path, "r")
    IOError: [Errno 2] No such file or directory: '/home/dk/work/python/safood/src/sites/www/templates/user_additives.html'
[E 120720 17:47:49 web:1393] 500 GET /user/test (127.0.0.1) 15.37ms
[W 120720 17:47:49 web:1393] 404 GET /favicon.ico (127.0.0.1) 0.76ms
[E 120720 17:50:37 template:256] user_additives.html code:
      1  def _execute():  # base.html:0
      2      _buffer = []  # base.html:0
      3      _append = _buffer.append  # base.html:0
      4      _append('<!doctype html>\n<head>\n<meta charset="UTF-8" />\n<meta content="True" name="HandheldFriendly" />\n<meta content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0; name=\'viewport\'" />\n<title>\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - \xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81')  # base.html:6
      5      _append('</title>\n<link rel="stylesheet" type="text/css" media="screen" href="/static/css/vendor/jquery.fancybox.css" />\n<link rel="stylesheet" type="text/css" media="screen" href="/static/css/main.css" />\n<link rel="shortcut icon" href="/static/img/favicon.ico" />\n<link rel="canonical" href="http://wuditoo.com/" />\n<meta name="description" content="\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - \xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81" />\n<script src="/static/js/vendor/jquery.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.history.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.fancybox.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.scrollTo.min.js" type="text/javascript"></script>\n')  # base.html:16
      6      _append('\n')  # user_additives.html:12 (via base.html:16)
      7      if current_additive:  # user_additives.html:12 (via base.html:16)
      8          _append('\n<script type="text/javascript">\nmeta_additive = {\nurl: "/additive/')  # user_additives.html:15 (via base.html:16)
      9          _tmp = current_additive.id  # user_additives.html:15 (via base.html:16)
     10          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # user_additives.html:15 (via base.html:16)
     11          else: _tmp = _utf8(str(_tmp))  # user_additives.html:15 (via base.html:16)
     12          _tmp = _utf8(xhtml_escape(_tmp))  # user_additives.html:15 (via base.html:16)
     13          _append(_tmp)  # user_additives.html:15 (via base.html:16)
     14          _append('",\nwidth: ')  # user_additives.html:16 (via base.html:16)
     15          _tmp = current_additive.width  # user_additives.html:16 (via base.html:16)
     16          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # user_additives.html:16 (via base.html:16)
     17          else: _tmp = _utf8(str(_tmp))  # user_additives.html:16 (via base.html:16)
     18          _tmp = _utf8(xhtml_escape(_tmp))  # user_additives.html:16 (via base.html:16)
     19          _append(_tmp)  # user_additives.html:16 (via base.html:16)
     20          _append(',\nheight: ')  # user_additives.html:17 (via base.html:16)
     21          _tmp = current_additive.height  # user_additives.html:17 (via base.html:16)
     22          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # user_additives.html:17 (via base.html:16)
     23          else: _tmp = _utf8(str(_tmp))  # user_additives.html:17 (via base.html:16)
     24          _tmp = _utf8(xhtml_escape(_tmp))  # user_additives.html:17 (via base.html:16)
     25          _append(_tmp)  # user_additives.html:17 (via base.html:16)
     26          _append('\n}\n')  # user_additives.html:19 (via base.html:16)
     27      _append('\n</script>\n')  # user_additives.html:21 (via base.html:16)
     28      _append('\n<script src="/static/js/main.js" type="text/javascript"></script>\n</head>\n<!--[if IE 7 ]><body class="ie7"><![endif]-->\n<!--[if gt IE 7]><body class="ie"><![endif]-->\n<!--[if !IE]><body><![endif]-->\n<div id="header">\n<div class="inner">\n<div id="logo"><a href="/">\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</a></div>\n<div id="slogon">\xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81</div>\n<div id="witticism">')  # base.html:27
     29      _tmp = home_sentence()  # base.html:27
     30      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:27
     31      else: _tmp = _utf8(str(_tmp))  # base.html:27
     32      _tmp = _utf8(xhtml_escape(_tmp))  # base.html:27
     33      _append(_tmp)  # base.html:27
     34      _append('</div>\n<!--\n<ul class="nav-right">\n</ul>\n-->\n</div>\n</div>\n<div id="container">\n<div class="inner">\n<div class="message alert alert-warn">\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0\xe5\x86\xac\xe7\x9c\xa0\xe4\xb8\xad\xef\xbc\x8c\xe8\x8b\x8f\xe9\x86\x92\xe6\x97\xb6\xe9\x97\xb4\xe5\xbe\x85\xe5\xae\x9a\xe3\x80\x82\xe8\xb0\xa2\xe8\xb0\xa2\xe6\x82\xa8\xe7\x9a\x84\xe5\x88\xb0\xe8\xae\xbf\xef\xbc\x9a\xef\xbc\x89</div>\n')  # base.html:38
     35      message = get_message()  # base.html:38
     36      _append('\n')  # base.html:39
     37      for message_type in ('error', 'success', 'info', 'warn'):  # base.html:39
     38          _append('\n')  # base.html:40
     39          if message and message_type == message[0]:  # base.html:40
     40              _append('\n<div id="')  # base.html:41
     41              _tmp = message_type  # base.html:41
     42              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     43              else: _tmp = _utf8(str(_tmp))  # base.html:41
     44              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     45              _append(_tmp)  # base.html:41
     46              _append('-message" class="message alert alert-')  # base.html:41
     47              _tmp = message_type  # base.html:41
     48              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     49              else: _tmp = _utf8(str(_tmp))  # base.html:41
     50              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     51              _append(_tmp)  # base.html:41
     52              _append('">')  # base.html:41
     53              _tmp = message[1]  # base.html:41
     54              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     55              else: _tmp = _utf8(str(_tmp))  # base.html:41
     56              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     57              _append(_tmp)  # base.html:41
     58              _append('</div>\n')  # base.html:42
     59          else:  # base.html:42
     60              _append('\n<div id="')  # base.html:43
     61              _tmp = message_type  # base.html:43
     62              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:43
     63              else: _tmp = _utf8(str(_tmp))  # base.html:43
     64              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:43
     65              _append(_tmp)  # base.html:43
     66              _append('-message" class="message alert alert-')  # base.html:43
     67              _tmp = message_type  # base.html:43
     68              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:43
     69              else: _tmp = _utf8(str(_tmp))  # base.html:43
     70              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:43
     71              _append(_tmp)  # base.html:43
     72              _append(' hide"></div>\n')  # base.html:44
     73          _append('\n')  # base.html:45
     74      _append('\n')  # base.html:47
     75      _append('\n<div id="main">\n')  # base.html:50
     76      _append('\n')  # user_additives.html:4 (via base.html:50)
     77      _append('<div class="box" id="additives">\n<div class="header">')  # partial/additives.html:2 (via user_additives.html:4, base.html:50)
     78      _tmp = additives_title  # partial/additives.html:2 (via user_additives.html:4, base.html:50)
     79      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:2 (via user_additives.html:4, base.html:50)
     80      else: _tmp = _utf8(str(_tmp))  # partial/additives.html:2 (via user_additives.html:4, base.html:50)
     81      _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:2 (via user_additives.html:4, base.html:50)
     82      _append(_tmp)  # partial/additives.html:2 (via user_additives.html:4, base.html:50)
     83      _append('</div>\n<div class="body main ul">\n')  # partial/additives.html:4 (via user_additives.html:4, base.html:50)
     84      for index, additive in enumerate(additives):  # partial/additives.html:4 (via user_additives.html:4, base.html:50)
     85          _append('\n')  # partial/additives.html:5 (via user_additives.html:4, base.html:50)
     86          creator = additive.creator  # partial/additives.html:5 (via user_additives.html:4, base.html:50)
     87          _append('\n<div class="additive-item">\n<div class="header">\n<a class="avatar" href="/user/')  # partial/additives.html:8 (via user_additives.html:4, base.html:50)
     88          _tmp = creator.username  # partial/additives.html:8 (via user_additives.html:4, base.html:50)
     89          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:8 (via user_additives.html:4, base.html:50)
     90          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:8 (via user_additives.html:4, base.html:50)
     91          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:8 (via user_additives.html:4, base.html:50)
     92          _append(_tmp)  # partial/additives.html:8 (via user_additives.html:4, base.html:50)
     93          _append('"><img src="')  # partial/additives.html:8 (via user_additives.html:4, base.html:50)
     94          _tmp = get_avatar_url(creator, 's')  # partial/additives.html:8 (via user_additives.html:4, base.html:50)
     95          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:8 (via user_additives.html:4, base.html:50)
     96          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:8 (via user_additives.html:4, base.html:50)
     97          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:8 (via user_additives.html:4, base.html:50)
     98          _append(_tmp)  # partial/additives.html:8 (via user_additives.html:4, base.html:50)
     99          _append('" /></a>')  # partial/additives.html:8 (via user_additives.html:4, base.html:50)
    100          _tmp = additive.name  # partial/additives.html:8 (via user_additives.html:4, base.html:50)
    101          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:8 (via user_additives.html:4, base.html:50)
    102          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:8 (via user_additives.html:4, base.html:50)
    103          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:8 (via user_additives.html:4, base.html:50)
    104          _append(_tmp)  # partial/additives.html:8 (via user_additives.html:4, base.html:50)
    105          _append('\n</div>\n<div class="body">\n<div class="additive_alias">\xe5\x85\xb6\xe4\xbb\x96\xe5\x90\x8d\xe7\xa7\xb0:')  # partial/additives.html:11 (via user_additives.html:4, base.html:50)
    106          _tmp = additive.alias  # partial/additives.html:11 (via user_additives.html:4, base.html:50)
    107          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:11 (via user_additives.html:4, base.html:50)
    108          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:11 (via user_additives.html:4, base.html:50)
    109          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:11 (via user_additives.html:4, base.html:50)
    110          _append(_tmp)  # partial/additives.html:11 (via user_additives.html:4, base.html:50)
    111          _append('</div>\n<div class="additive_cns">CNS\xe5\x8f\xb7:')  # partial/additives.html:12 (via user_additives.html:4, base.html:50)
    112          _tmp = additive.cns  # partial/additives.html:12 (via user_additives.html:4, base.html:50)
    113          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:12 (via user_additives.html:4, base.html:50)
    114          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:12 (via user_additives.html:4, base.html:50)
    115          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:12 (via user_additives.html:4, base.html:50)
    116          _append(_tmp)  # partial/additives.html:12 (via user_additives.html:4, base.html:50)
    117          _append('</div>\n<div class="additive_ins">INS\xe5\x8f\xb7:')  # partial/additives.html:13 (via user_additives.html:4, base.html:50)
    118          _tmp = additive.ins  # partial/additives.html:13 (via user_additives.html:4, base.html:50)
    119          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:13 (via user_additives.html:4, base.html:50)
    120          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:13 (via user_additives.html:4, base.html:50)
    121          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:13 (via user_additives.html:4, base.html:50)
    122          _append(_tmp)  # partial/additives.html:13 (via user_additives.html:4, base.html:50)
    123          _append('</div>\n<div class="additive_effect">\xe5\x8a\x9f\xe8\x83\xbd:')  # partial/additives.html:14 (via user_additives.html:4, base.html:50)
    124          _tmp = additive.effect  # partial/additives.html:14 (via user_additives.html:4, base.html:50)
    125          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:14 (via user_additives.html:4, base.html:50)
    126          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:14 (via user_additives.html:4, base.html:50)
    127          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:14 (via user_additives.html:4, base.html:50)
    128          _append(_tmp)  # partial/additives.html:14 (via user_additives.html:4, base.html:50)
    129          _append('</div>\n</div>\n<div class="footer">\n<span class="meta">\n<ul>\n<li><i class="icon-view"></i> ')  # partial/additives.html:19 (via user_additives.html:4, base.html:50)
    130          _tmp = additive.views_count  # partial/additives.html:19 (via user_additives.html:4, base.html:50)
    131          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:19 (via user_additives.html:4, base.html:50)
    132          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:19 (via user_additives.html:4, base.html:50)
    133          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:19 (via user_additives.html:4, base.html:50)
    134          _append(_tmp)  # partial/additives.html:19 (via user_additives.html:4, base.html:50)
    135          _append('</li>\n</ul>\n</span>\n<span class="created">\n')  # partial/additives.html:23 (via user_additives.html:4, base.html:50)
    136          _tmp = timesince(additive.created)  # partial/additives.html:23 (via user_additives.html:4, base.html:50)
    137          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:23 (via user_additives.html:4, base.html:50)
    138          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:23 (via user_additives.html:4, base.html:50)
    139          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:23 (via user_additives.html:4, base.html:50)
    140          _append(_tmp)  # partial/additives.html:23 (via user_additives.html:4, base.html:50)
    141          _append('\n</span>\n</div>\n</div>\n')  # partial/additives.html:27 (via user_additives.html:4, base.html:50)
    142          _append('\n')  # partial/additives.html:28 (via user_additives.html:4, base.html:50)
    143          if index > 0 and (index + 1) % 3 == 0:  # partial/additives.html:28 (via user_additives.html:4, base.html:50)
    144              _append('\n<div class="clearfix"></div>\n')  # partial/additives.html:30 (via user_additives.html:4, base.html:50)
    145          _append('\n')  # partial/additives.html:32 (via user_additives.html:4, base.html:50)
    146      _append('\n')  # partial/additives.html:33 (via user_additives.html:4, base.html:50)
    147      page_type = 'additives'  # partial/additives.html:33 (via user_additives.html:4, base.html:50)
    148      _append('\n')  # partial/additives.html:34 (via user_additives.html:4, base.html:50)
    149      _append('\n')  # partial/pagination.html:3 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    150      from macros.macro import ADDITIVES_PER_PAGE, USERS_PER_PAGE  # partial/pagination.html:3 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    151      _append('\n')  # partial/pagination.html:4 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    152      import math  # partial/pagination.html:4 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    153      _append('\n')  # partial/pagination.html:6 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    154      if page_type == 'additives':  # partial/pagination.html:6 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    155          _append('\n')  # partial/pagination.html:7 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    156          items_per_page = ADDITIVES_PER_PAGE  # partial/pagination.html:7 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    157          _append('\n')  # partial/pagination.html:8 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    158      else:  # partial/pagination.html:8 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    159          _append('\n')  # partial/pagination.html:9 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    160          items_per_page = USERS_PER_PAGE  # partial/pagination.html:9 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    161          _append('\n')  # partial/pagination.html:10 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    162      _append('\n')  # partial/pagination.html:12 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    163      total_page = int(math.ceil(float(total_items) / items_per_page))  # partial/pagination.html:12 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    164      _append('\n')  # partial/pagination.html:14 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    165      current_page = int(handler.get_argument('page', 1))  # partial/pagination.html:14 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    166      _append('\n')  # partial/pagination.html:16 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    167      if current_page <=6:  # partial/pagination.html:16 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    168          _append('\n')  # partial/pagination.html:17 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    169          end_page = min(total_page, 10)  # partial/pagination.html:17 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    170          _append('\n')  # partial/pagination.html:18 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    171          start_page = 1  # partial/pagination.html:18 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    172          _append('\n')  # partial/pagination.html:19 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    173      else:  # partial/pagination.html:19 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    174          _append('\n')  # partial/pagination.html:20 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    175          end_page = min(total_page, current_page+4)  # partial/pagination.html:20 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    176          _append('\n')  # partial/pagination.html:21 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    177          start_page = current_page - 5  # partial/pagination.html:21 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    178          _append('\n')  # partial/pagination.html:22 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    179      _append('\n')  # partial/pagination.html:24 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    180      if total_page > 1:  # partial/pagination.html:24 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    181          _append('\n<div class="pagination">\n<ul>\n')  # partial/pagination.html:27 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    182          if current_page == 1:  # partial/pagination.html:27 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    183              _append('\n<li class="disabled">\xe2\x86\x90 </li>\n')  # partial/pagination.html:29 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    184          else:  # partial/pagination.html:29 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    185              _append('\n<li><a href="')  # partial/pagination.html:30 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    186              _tmp = page_path  # partial/pagination.html:30 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    187              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:30 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    188              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:30 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    189              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:30 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    190              _append(_tmp)  # partial/pagination.html:30 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    191              _append('?page=1">\xe2\x86\x90 </a></li>\n')  # partial/pagination.html:31 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    192          _append('\n')  # partial/pagination.html:33 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    193          for i in range(start_page, end_page + 1):  # partial/pagination.html:33 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    194              _append('\n<li ')  # partial/pagination.html:34 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    195              if current_page == i:  # partial/pagination.html:34 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    196                  _append('class="active"')  # partial/pagination.html:34 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    197              _append('>\n<a href="')  # partial/pagination.html:35 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    198              _tmp = page_path  # partial/pagination.html:35 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    199              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    200              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    201              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    202              _append(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    203              _append('?page=')  # partial/pagination.html:35 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    204              _tmp = i  # partial/pagination.html:35 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    205              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    206              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    207              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    208              _append(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    209              _append('">')  # partial/pagination.html:35 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    210              _tmp = i  # partial/pagination.html:35 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    211              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    212              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    213              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    214              _append(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    215              _append('</a>\n</li>\n')  # partial/pagination.html:37 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    216          _append('\n')  # partial/pagination.html:39 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    217          if current_page == total_page:  # partial/pagination.html:39 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    218              _append('\n<li class="disabled">\xe2\x86\x92 </li>\n')  # partial/pagination.html:41 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    219          else:  # partial/pagination.html:41 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    220              _append('\n<li><a href="')  # partial/pagination.html:42 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    221              _tmp = page_path  # partial/pagination.html:42 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    222              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    223              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    224              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    225              _append(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    226              _append('?page=')  # partial/pagination.html:42 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    227              _tmp = current_page+1  # partial/pagination.html:42 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    228              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    229              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    230              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    231              _append(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    232              _append('">\xe2\x86\x92 </a></li>\n')  # partial/pagination.html:43 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    233          _append('\n</ul>\n</div>\n')  # partial/pagination.html:46 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    234      _append('\n')  # partial/pagination.html:47 (via partial/additives.html:34, user_additives.html:4, base.html:50)
    235      _append('\n</div>\n</div>\n')  # partial/additives.html:37 (via user_additives.html:4, base.html:50)
    236      _append('\n')  # user_additives.html:5 (via base.html:50)
    237      _append('\n</div>\n<div id="sidebar">\n')  # base.html:54
    238      _append('\n')  # user_additives.html:8 (via base.html:54)
    239      from datetime import datetime  # partial/sidebar_user.html:1 (via user_additives.html:8, base.html:54)
    240      _append('\n')  # partial/sidebar_user.html:2 (via user_additives.html:8, base.html:54)
    241      from macros.macro import USER_LEVEL_CN  # partial/sidebar_user.html:2 (via user_additives.html:8, base.html:54)
    242      _append('\n')  # partial/sidebar_user.html:3 (via user_additives.html:8, base.html:54)
    243      user = handler.user  # partial/sidebar_user.html:3 (via user_additives.html:8, base.html:54)
    244      _append('\n')  # partial/sidebar_user.html:4 (via user_additives.html:8, base.html:54)
    245      profile = user.profile  # partial/sidebar_user.html:4 (via user_additives.html:8, base.html:54)
    246      _append('\n<div class="box" id="panel-user">\n<div class="header">\n')  # partial/sidebar_user.html:8 (via user_additives.html:8, base.html:54)
    247      if current_user and current_user.id == user.id:  # partial/sidebar_user.html:8 (via user_additives.html:8, base.html:54)
    248          _append('\xe6\x88\x91')  # partial/sidebar_user.html:8 (via user_additives.html:8, base.html:54)
    249      else:  # partial/sidebar_user.html:8 (via user_additives.html:8, base.html:54)
    250          _tmp = user.fullname  # partial/sidebar_user.html:8 (via user_additives.html:8, base.html:54)
    251          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_user.html:8 (via user_additives.html:8, base.html:54)
    252          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_user.html:8 (via user_additives.html:8, base.html:54)
    253          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_user.html:8 (via user_additives.html:8, base.html:54)
    254          _append(_tmp)  # partial/sidebar_user.html:8 (via user_additives.html:8, base.html:54)
    255      _append('\xe7\x9a\x84\xe4\xbf\xa1\xe6\x81\xaf</div>\n<div class="body">\n<img class="avatar" src="')  # partial/sidebar_user.html:10 (via user_additives.html:8, base.html:54)
    256      _tmp = get_avatar_url(user, 'l')  # partial/sidebar_user.html:10 (via user_additives.html:8, base.html:54)
    257      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_user.html:10 (via user_additives.html:8, base.html:54)
    258      else: _tmp = _utf8(str(_tmp))  # partial/sidebar_user.html:10 (via user_additives.html:8, base.html:54)
    259      _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_user.html:10 (via user_additives.html:8, base.html:54)
    260      _append(_tmp)  # partial/sidebar_user.html:10 (via user_additives.html:8, base.html:54)
    261      _append('" />\n<h3>')  # partial/sidebar_user.html:11 (via user_additives.html:8, base.html:54)
    262      _tmp = user.fullname  # partial/sidebar_user.html:11 (via user_additives.html:8, base.html:54)
    263      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_user.html:11 (via user_additives.html:8, base.html:54)
    264      else: _tmp = _utf8(str(_tmp))  # partial/sidebar_user.html:11 (via user_additives.html:8, base.html:54)
    265      _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_user.html:11 (via user_additives.html:8, base.html:54)
    266      _append(_tmp)  # partial/sidebar_user.html:11 (via user_additives.html:8, base.html:54)
    267      _append('</h3>\n<i class="icon-level')  # partial/sidebar_user.html:12 (via user_additives.html:8, base.html:54)
    268      _tmp = user.level  # partial/sidebar_user.html:12 (via user_additives.html:8, base.html:54)
    269      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_user.html:12 (via user_additives.html:8, base.html:54)
    270      else: _tmp = _utf8(str(_tmp))  # partial/sidebar_user.html:12 (via user_additives.html:8, base.html:54)
    271      _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_user.html:12 (via user_additives.html:8, base.html:54)
    272      _append(_tmp)  # partial/sidebar_user.html:12 (via user_additives.html:8, base.html:54)
    273      _append('" title="')  # partial/sidebar_user.html:12 (via user_additives.html:8, base.html:54)
    274      _tmp = USER_LEVEL_CN[user.level]  # partial/sidebar_user.html:12 (via user_additives.html:8, base.html:54)
    275      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_user.html:12 (via user_additives.html:8, base.html:54)
    276      else: _tmp = _utf8(str(_tmp))  # partial/sidebar_user.html:12 (via user_additives.html:8, base.html:54)
    277      _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_user.html:12 (via user_additives.html:8, base.html:54)
    278      _append(_tmp)  # partial/sidebar_user.html:12 (via user_additives.html:8, base.html:54)
    279      _append('"></i>\n<p class="clearfix"></p>\n<p class="meta">\xe7\xac\xac')  # partial/sidebar_user.html:14 (via user_additives.html:8, base.html:54)
    280      _tmp = user.id  # partial/sidebar_user.html:14 (via user_additives.html:8, base.html:54)
    281      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_user.html:14 (via user_additives.html:8, base.html:54)
    282      else: _tmp = _utf8(str(_tmp))  # partial/sidebar_user.html:14 (via user_additives.html:8, base.html:54)
    283      _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_user.html:14 (via user_additives.html:8, base.html:54)
    284      _append(_tmp)  # partial/sidebar_user.html:14 (via user_additives.html:8, base.html:54)
    285      _append('\xe5\x8f\xb7\xe4\xbc\x9a\xe5\x91\x98\xef\xbc\x8c')  # partial/sidebar_user.html:14 (via user_additives.html:8, base.html:54)
    286      _tmp = datetime.fromtimestamp(user.created).strftime('%Y-%m-%d')  # partial/sidebar_user.html:14 (via user_additives.html:8, base.html:54)
    287      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_user.html:14 (via user_additives.html:8, base.html:54)
    288      else: _tmp = _utf8(str(_tmp))  # partial/sidebar_user.html:14 (via user_additives.html:8, base.html:54)
    289      _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_user.html:14 (via user_additives.html:8, base.html:54)
    290      _append(_tmp)  # partial/sidebar_user.html:14 (via user_additives.html:8, base.html:54)
    291      _append('\xe5\x8a\xa0\xe5\x85\xa5</p>\n')  # partial/sidebar_user.html:15 (via user_additives.html:8, base.html:54)
    292      if not current_user:  # partial/sidebar_user.html:15 (via user_additives.html:8, base.html:54)
    293          _append('\n<a href="/login" class="btn primary-btn" id="follow">\xe5\x85\xb3\xe6\xb3\xa8</a>\n')  # partial/sidebar_user.html:17 (via user_additives.html:8, base.html:54)
    294      else:  # partial/sidebar_user.html:17 (via user_additives.html:8, base.html:54)
    295          _append('\n')  # partial/sidebar_user.html:18 (via user_additives.html:8, base.html:54)
    296          if current_user.id == user.id:  # partial/sidebar_user.html:18 (via user_additives.html:8, base.html:54)
    297              _append('\n')  # partial/sidebar_user.html:19 (via user_additives.html:8, base.html:54)
    298          elif not current_user.is_following(user.id):  # partial/sidebar_user.html:19 (via user_additives.html:8, base.html:54)
    299              _append('\n<button data-url="/user/')  # partial/sidebar_user.html:20 (via user_additives.html:8, base.html:54)
    300              _tmp = user.username  # partial/sidebar_user.html:20 (via user_additives.html:8, base.html:54)
    301              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_user.html:20 (via user_additives.html:8, base.html:54)
    302              else: _tmp = _utf8(str(_tmp))  # partial/sidebar_user.html:20 (via user_additives.html:8, base.html:54)
    303              _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_user.html:20 (via user_additives.html:8, base.html:54)
    304              _append(_tmp)  # partial/sidebar_user.html:20 (via user_additives.html:8, base.html:54)
    305              _append('/follow" id="follow" class="btn primary-btn">\xe5\x85\xb3\xe6\xb3\xa8</button>\n')  # partial/sidebar_user.html:21 (via user_additives.html:8, base.html:54)
    306          else:  # partial/sidebar_user.html:21 (via user_additives.html:8, base.html:54)
    307              _append('\n<button data-url="/user/')  # partial/sidebar_user.html:22 (via user_additives.html:8, base.html:54)
    308              _tmp = user.username  # partial/sidebar_user.html:22 (via user_additives.html:8, base.html:54)
    309              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_user.html:22 (via user_additives.html:8, base.html:54)
    310              else: _tmp = _utf8(str(_tmp))  # partial/sidebar_user.html:22 (via user_additives.html:8, base.html:54)
    311              _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_user.html:22 (via user_additives.html:8, base.html:54)
    312              _append(_tmp)  # partial/sidebar_user.html:22 (via user_additives.html:8, base.html:54)
    313              _append('/follow" id="follow" class="btn">\xe5\x8f\x96\xe6\xb6\x88\xe5\x85\xb3\xe6\xb3\xa8</button>\n')  # partial/sidebar_user.html:23 (via user_additives.html:8, base.html:54)
    314          _append('\n')  # partial/sidebar_user.html:24 (via user_additives.html:8, base.html:54)
    315      _append('\n')  # partial/sidebar_user.html:26 (via user_additives.html:8, base.html:54)
    316      if profile.camera or profile.lens or profile.link_weibo or profile.link_qq or profile.link_douban or profile.link_flickr or profile.link_blog or profile.bio:  # partial/sidebar_user.html:26 (via user_additives.html:8, base.html:54)
    317          _append('\n<p class="divider"></p>\n')  # partial/sidebar_user.html:28 (via user_additives.html:8, base.html:54)
    318      _append('\n')  # partial/sidebar_user.html:30 (via user_additives.html:8, base.html:54)
    319      if profile.camera:  # partial/sidebar_user.html:30 (via user_additives.html:8, base.html:54)
    320          _append('\n<p class="param">\xe5\xb8\xb8\xe7\x94\xa8\xe7\x9b\xb8\xe6\x9c\xba\xef\xbc\x9a')  # partial/sidebar_user.html:31 (via user_additives.html:8, base.html:54)
    321          _tmp = profile.camera  # partial/sidebar_user.html:31 (via user_additives.html:8, base.html:54)
    322          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_user.html:31 (via user_additives.html:8, base.html:54)
    323          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_user.html:31 (via user_additives.html:8, base.html:54)
    324          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_user.html:31 (via user_additives.html:8, base.html:54)
    325          _append(_tmp)  # partial/sidebar_user.html:31 (via user_additives.html:8, base.html:54)
    326          _append('</p>\n')  # partial/sidebar_user.html:32 (via user_additives.html:8, base.html:54)
    327      _append('\n')  # partial/sidebar_user.html:33 (via user_additives.html:8, base.html:54)
    328      if profile.lens:  # partial/sidebar_user.html:33 (via user_additives.html:8, base.html:54)
    329          _append('\n<p class="param">\xe5\xb8\xb8\xe7\x94\xa8\xe9\x95\x9c\xe5\xa4\xb4\xef\xbc\x9a')  # partial/sidebar_user.html:34 (via user_additives.html:8, base.html:54)
    330          _tmp = profile.lens  # partial/sidebar_user.html:34 (via user_additives.html:8, base.html:54)
    331          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_user.html:34 (via user_additives.html:8, base.html:54)
    332          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_user.html:34 (via user_additives.html:8, base.html:54)
    333          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_user.html:34 (via user_additives.html:8, base.html:54)
    334          _append(_tmp)  # partial/sidebar_user.html:34 (via user_additives.html:8, base.html:54)
    335          _append('</p>\n')  # partial/sidebar_user.html:35 (via user_additives.html:8, base.html:54)
    336      _append('\n')  # partial/sidebar_user.html:37 (via user_additives.html:8, base.html:54)
    337      if profile.link_weibo or profile.link_qq or profile.link_douban or profile.link_flickr or profile.link_blog:  # partial/sidebar_user.html:37 (via user_additives.html:8, base.html:54)
    338          _append('\n<p class="param">\xe7\xbd\x91\xe4\xb8\x8a\xe6\x8d\xae\xe7\x82\xb9\xef\xbc\x9a\n')  # partial/sidebar_user.html:39 (via user_additives.html:8, base.html:54)
    339          if profile.link_weibo:  # partial/sidebar_user.html:39 (via user_additives.html:8, base.html:54)
    340              _append('\n<a href="')  # partial/sidebar_user.html:40 (via user_additives.html:8, base.html:54)
    341              _tmp = profile.link_weibo  # partial/sidebar_user.html:40 (via user_additives.html:8, base.html:54)
    342              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_user.html:40 (via user_additives.html:8, base.html:54)
    343              else: _tmp = _utf8(str(_tmp))  # partial/sidebar_user.html:40 (via user_additives.html:8, base.html:54)
    344              _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_user.html:40 (via user_additives.html:8, base.html:54)
    345              _append(_tmp)  # partial/sidebar_user.html:40 (via user_additives.html:8, base.html:54)
    346              _append('" target="_blank">\xe6\x96\xb0\xe6\xb5\xaa\xe5\xbe\xae\xe5\x8d\x9a</a>\n')  # partial/sidebar_user.html:41 (via user_additives.html:8, base.html:54)
    347          _append('\n')  # partial/sidebar_user.html:42 (via user_additives.html:8, base.html:54)
    348          if profile.link_qq:  # partial/sidebar_user.html:42 (via user_additives.html:8, base.html:54)
    349              _append('\n<a href="')  # partial/sidebar_user.html:43 (via user_additives.html:8, base.html:54)
    350              _tmp = profile.link_qq  # partial/sidebar_user.html:43 (via user_additives.html:8, base.html:54)
    351              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_user.html:43 (via user_additives.html:8, base.html:54)
    352              else: _tmp = _utf8(str(_tmp))  # partial/sidebar_user.html:43 (via user_additives.html:8, base.html:54)
    353              _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_user.html:43 (via user_additives.html:8, base.html:54)
    354              _append(_tmp)  # partial/sidebar_user.html:43 (via user_additives.html:8, base.html:54)
    355              _append('" target="_blank">\xe8\x85\xbe\xe8\xae\xaf\xe5\xbe\xae\xe5\x8d\x9a</a>\n')  # partial/sidebar_user.html:44 (via user_additives.html:8, base.html:54)
    356          _append('\n')  # partial/sidebar_user.html:45 (via user_additives.html:8, base.html:54)
    357          if profile.link_douban:  # partial/sidebar_user.html:45 (via user_additives.html:8, base.html:54)
    358              _append('\n<a href="')  # partial/sidebar_user.html:46 (via user_additives.html:8, base.html:54)
    359              _tmp = profile.link_douban  # partial/sidebar_user.html:46 (via user_additives.html:8, base.html:54)
    360              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_user.html:46 (via user_additives.html:8, base.html:54)
    361              else: _tmp = _utf8(str(_tmp))  # partial/sidebar_user.html:46 (via user_additives.html:8, base.html:54)
    362              _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_user.html:46 (via user_additives.html:8, base.html:54)
    363              _append(_tmp)  # partial/sidebar_user.html:46 (via user_additives.html:8, base.html:54)
    364              _append('" target="_blank">\xe8\xb1\x86\xe7\x93\xa3</a>\n')  # partial/sidebar_user.html:47 (via user_additives.html:8, base.html:54)
    365          _append('\n')  # partial/sidebar_user.html:48 (via user_additives.html:8, base.html:54)
    366          if profile.link_flickr:  # partial/sidebar_user.html:48 (via user_additives.html:8, base.html:54)
    367              _append('\n<a href="')  # partial/sidebar_user.html:49 (via user_additives.html:8, base.html:54)
    368              _tmp = profile.link_flickr  # partial/sidebar_user.html:49 (via user_additives.html:8, base.html:54)
    369              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_user.html:49 (via user_additives.html:8, base.html:54)
    370              else: _tmp = _utf8(str(_tmp))  # partial/sidebar_user.html:49 (via user_additives.html:8, base.html:54)
    371              _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_user.html:49 (via user_additives.html:8, base.html:54)
    372              _append(_tmp)  # partial/sidebar_user.html:49 (via user_additives.html:8, base.html:54)
    373              _append('" target="_blank">Flickr</a>\n')  # partial/sidebar_user.html:50 (via user_additives.html:8, base.html:54)
    374          _append('\n')  # partial/sidebar_user.html:51 (via user_additives.html:8, base.html:54)
    375          if profile.link_blog:  # partial/sidebar_user.html:51 (via user_additives.html:8, base.html:54)
    376              _append('\n<a href="')  # partial/sidebar_user.html:52 (via user_additives.html:8, base.html:54)
    377              _tmp = profile.link_blog  # partial/sidebar_user.html:52 (via user_additives.html:8, base.html:54)
    378              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_user.html:52 (via user_additives.html:8, base.html:54)
    379              else: _tmp = _utf8(str(_tmp))  # partial/sidebar_user.html:52 (via user_additives.html:8, base.html:54)
    380              _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_user.html:52 (via user_additives.html:8, base.html:54)
    381              _append(_tmp)  # partial/sidebar_user.html:52 (via user_additives.html:8, base.html:54)
    382              _append('" target="_blank">\xe5\x8d\x9a\xe5\xae\xa2</a>\n')  # partial/sidebar_user.html:53 (via user_additives.html:8, base.html:54)
    383          _append('\n</p>\n')  # partial/sidebar_user.html:55 (via user_additives.html:8, base.html:54)
    384      _append('\n')  # partial/sidebar_user.html:57 (via user_additives.html:8, base.html:54)
    385      if profile.bio:  # partial/sidebar_user.html:57 (via user_additives.html:8, base.html:54)
    386          _append('\n<div class="bio">\n<div class="icon-bio"></div>\n<div class="content">')  # partial/sidebar_user.html:60 (via user_additives.html:8, base.html:54)
    387          _tmp = profile.bio  # partial/sidebar_user.html:60 (via user_additives.html:8, base.html:54)
    388          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_user.html:60 (via user_additives.html:8, base.html:54)
    389          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_user.html:60 (via user_additives.html:8, base.html:54)
    390          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_user.html:60 (via user_additives.html:8, base.html:54)
    391          _append(_tmp)  # partial/sidebar_user.html:60 (via user_additives.html:8, base.html:54)
    392          _append('</div>\n</div>\n')  # partial/sidebar_user.html:62 (via user_additives.html:8, base.html:54)
    393      _append('\n<p class="divider"></p>\n<div class="data">\n<div class="item" data-url="/user/')  # partial/sidebar_user.html:66 (via user_additives.html:8, base.html:54)
    394      _tmp = user.username  # partial/sidebar_user.html:66 (via user_additives.html:8, base.html:54)
    395      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_user.html:66 (via user_additives.html:8, base.html:54)
    396      else: _tmp = _utf8(str(_tmp))  # partial/sidebar_user.html:66 (via user_additives.html:8, base.html:54)
    397      _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_user.html:66 (via user_additives.html:8, base.html:54)
    398      _append(_tmp)  # partial/sidebar_user.html:66 (via user_additives.html:8, base.html:54)
    399      _append('/photos">\n<h4>')  # partial/sidebar_user.html:67 (via user_additives.html:8, base.html:54)
    400      _tmp = user.photo_count  # partial/sidebar_user.html:67 (via user_additives.html:8, base.html:54)
    401      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_user.html:67 (via user_additives.html:8, base.html:54)
    402      else: _tmp = _utf8(str(_tmp))  # partial/sidebar_user.html:67 (via user_additives.html:8, base.html:54)
    403      _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_user.html:67 (via user_additives.html:8, base.html:54)
    404      _append(_tmp)  # partial/sidebar_user.html:67 (via user_additives.html:8, base.html:54)
    405      _append('</h4>\n<p>Photos</p>\n</div>\n<div class="item" data-url="/user/')  # partial/sidebar_user.html:70 (via user_additives.html:8, base.html:54)
    406      _tmp = user.username  # partial/sidebar_user.html:70 (via user_additives.html:8, base.html:54)
    407      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_user.html:70 (via user_additives.html:8, base.html:54)
    408      else: _tmp = _utf8(str(_tmp))  # partial/sidebar_user.html:70 (via user_additives.html:8, base.html:54)
    409      _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_user.html:70 (via user_additives.html:8, base.html:54)
    410      _append(_tmp)  # partial/sidebar_user.html:70 (via user_additives.html:8, base.html:54)
    411      _append('/following">\n<h4>')  # partial/sidebar_user.html:71 (via user_additives.html:8, base.html:54)
    412      _tmp = user.following_count  # partial/sidebar_user.html:71 (via user_additives.html:8, base.html:54)
    413      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_user.html:71 (via user_additives.html:8, base.html:54)
    414      else: _tmp = _utf8(str(_tmp))  # partial/sidebar_user.html:71 (via user_additives.html:8, base.html:54)
    415      _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_user.html:71 (via user_additives.html:8, base.html:54)
    416      _append(_tmp)  # partial/sidebar_user.html:71 (via user_additives.html:8, base.html:54)
    417      _append('</h4>\n<p>Following</p>\n</div>\n<div class="item" data-url="/user/')  # partial/sidebar_user.html:74 (via user_additives.html:8, base.html:54)
    418      _tmp = user.username  # partial/sidebar_user.html:74 (via user_additives.html:8, base.html:54)
    419      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_user.html:74 (via user_additives.html:8, base.html:54)
    420      else: _tmp = _utf8(str(_tmp))  # partial/sidebar_user.html:74 (via user_additives.html:8, base.html:54)
    421      _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_user.html:74 (via user_additives.html:8, base.html:54)
    422      _append(_tmp)  # partial/sidebar_user.html:74 (via user_additives.html:8, base.html:54)
    423      _append('/follower">\n<h4>')  # partial/sidebar_user.html:75 (via user_additives.html:8, base.html:54)
    424      _tmp = user.follower_count  # partial/sidebar_user.html:75 (via user_additives.html:8, base.html:54)
    425      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_user.html:75 (via user_additives.html:8, base.html:54)
    426      else: _tmp = _utf8(str(_tmp))  # partial/sidebar_user.html:75 (via user_additives.html:8, base.html:54)
    427      _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_user.html:75 (via user_additives.html:8, base.html:54)
    428      _append(_tmp)  # partial/sidebar_user.html:75 (via user_additives.html:8, base.html:54)
    429      _append('</h4>\n<p>Followers</p>\n</div>\n</div>\n</div>\n</div>\n')  # partial/sidebar_user.html:81 (via user_additives.html:8, base.html:54)
    430      _append('\n')  # user_additives.html:9 (via base.html:54)
    431      _append('\n</div>\n</div>\n</div>\n<div id="footer">\n<div class="inner">\n<div class="right">\n<span class="belief">make the world a little better and easier</span>\n</div>\n<div class="left">\n<ul>\n<li><a href="/about">\xe5\x85\xb3\xe4\xba\x8e</a> <!--<span class="divider">/</span>--></li>\n<!--<li><a href="/feedback">\xe5\x8f\x8d\xe9\xa6\x88</a> <span class="divider">/</span></li>-->\n<!--<li><a href="/blog">\xe6\x97\xa5\xe5\xbf\x97</a></li>-->\n</ul>\n</div>\n</div>\n</div>\n<script type="text/javascript">\nvar _gaq = _gaq || [];\n_gaq.push([\'_setAccount\', \'UA-1281124-23\']);\n_gaq.push([\'_trackPageview\']);\n(function() {\nvar ga = document.createElement(\'script\'); ga.type = \'text/javascript\'; ga.async = true;\nga.src = (\'https:\' == document.location.protocol ? \'https://ssl\' : \'http://www\') + \'.google-analytics.com/ga.js\';\nvar s = document.getElementsByTagName(\'script\')[0]; s.parentNode.insertBefore(ga, s);\n})();\n</script>\n<!-- love your mom! -->\n</body>\n<meta name="description" content="\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - " />\n')  # base.html:89
    432      return _utf8('').join(_buffer)  # base.html:0
[E 120720 17:50:37 web:1031] Uncaught exception GET /user/test (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/user/test', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.103', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cookie': '__utma=148685175.647871982.1342707625.1342771740.1342775388.3; __utmb=148685175.9.10.1342775388; __utmc=148685175; __utmz=148685175.1342707625.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)', 'X-Real-Ip': '192.168.0.103', 'Referer': 'http://192.168.0.189/'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "/home/dk/work/python/safood/src/common/utils/__init__.py", line 163, in wrapper
        return func(self, username)
      File "/home/dk/work/python/safood/src/sites/www/handlers/user.py", line 16, in get
        return self._render('additives')
      File "/home/dk/work/python/safood/src/sites/www/handlers/base.py", line 113, in _render
        current_additive = additive,
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 474, in render
        html = self.render_string(template_name, **kwargs)
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 586, in render_string
        return t.generate(**args)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 253, in generate
        return execute()
      File "user_additives_html.generated.py", line 245, in _execute
        profile = user.profile  # partial/sidebar_user.html:4 (via user_additives.html:8, base.html:54)
      File "/home/dk/work/python/safood/src/common/models/user.py", line 132, in profile
        profile = models.Profile().find_by_user_id(self.id)
      File "/home/dk/work/python/safood/src/thing/thing/thing.py", line 140, in __init__
        self._init_env()
      File "/home/dk/work/python/safood/src/thing/thing/thing.py", line 156, in _init_env
        self._selected_fields = [self.table]
      File "/home/dk/work/python/safood/src/thing/thing/thing.py", line 378, in table
        Thing._table_schemas[self._tablename] = Table(self._tablename, MetaData(), autoload = True, autoload_with = conn)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/schema.py", line 314, in __new__
        table._init(name, metadata, *args, **kw)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/schema.py", line 377, in _init
        self._autoload(metadata, autoload_with, include_columns)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/schema.py", line 393, in _autoload
        self, include_columns, exclude_columns
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py", line 1968, in run_callable
        return callable_(self, *args, **kwargs)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/default.py", line 260, in reflecttable
        return insp.reflecttable(table, include_columns, exclude_columns)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/reflection.py", line 350, in reflecttable
        tbl_opts = self.get_table_options(table_name, schema, **table.kwargs)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/reflection.py", line 178, in get_table_options
        **kw)
      File "<string>", line 1, in <lambda>
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/reflection.py", line 47, in cache
        ret = fn(self, con, *args, **kw)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/dialects/mysql/base.py", line 2039, in get_table_options
        parsed_state = self._parsed_state_or_create(connection, table_name, schema, **kw)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/dialects/mysql/base.py", line 2138, in _parsed_state_or_create
        info_cache=kw.get('info_cache', None)
      File "<string>", line 1, in <lambda>
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/reflection.py", line 47, in cache
        ret = fn(self, con, *args, **kw)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/dialects/mysql/base.py", line 2163, in _setup_parser
        full_name=full_name)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/dialects/mysql/base.py", line 2250, in _show_create_table
        raise exc.NoSuchTableError(full_name)
    NoSuchTableError: `profile`
[E 120720 17:50:37 web:1393] 500 GET /user/test (127.0.0.1) 345.87ms
[W 120720 17:50:38 web:1393] 404 GET /favicon.ico (127.0.0.1) 1.88ms
[I 120720 17:55:12 web:1393] 200 GET / (127.0.0.1) 119.34ms
[E 120720 17:55:14 web:1031] Uncaught exception GET /additive/1 (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/additive/1', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.103', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cookie': '__utma=148685175.647871982.1342707625.1342771740.1342775388.3; __utmb=148685175.11.10.1342775388; __utmc=148685175; __utmz=148685175.1342707625.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)', 'X-Real-Ip': '192.168.0.103', 'Referer': 'http://192.168.0.189/'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "/home/dk/work/python/safood/src/sites/www/handlers/additive.py", line 29, in get
        additive_detail = models.Additive_Detail().get(additive_id),
    AttributeError: 'module' object has no attribute 'Additive_Detail'
[E 120720 17:55:14 web:1393] 500 GET /additive/1 (127.0.0.1) 30.83ms
[W 120720 17:55:14 web:1393] 404 GET /favicon.ico (127.0.0.1) 1.08ms
[E 120720 18:12:15 web:1031] Uncaught exception GET /additive/1 (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/additive/1', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.103', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cookie': '__utma=148685175.647871982.1342707625.1342771740.1342775388.3; __utmb=148685175.11.10.1342775388; __utmc=148685175; __utmz=148685175.1342707625.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none); viewed_additive_ids="\\0541"', 'Cache-Control': 'max-age=0', 'X-Real-Ip': '192.168.0.103'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "/home/dk/work/python/safood/src/sites/www/handlers/additive.py", line 29, in get
        additive_detail = models.Additive_Detail().get(additive_id),
    AttributeError: 'module' object has no attribute 'Additive_Detail'
[E 120720 18:12:15 web:1393] 500 GET /additive/1 (127.0.0.1) 7.74ms
[W 120720 18:12:16 web:1393] 404 GET /favicon.ico (127.0.0.1) 1.63ms
[E 120720 18:12:37 web:1031] Uncaught exception GET /additive/1 (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/additive/1', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.103', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cookie': '__utma=148685175.647871982.1342707625.1342771740.1342775388.3; __utmb=148685175.11.10.1342775388; __utmc=148685175; __utmz=148685175.1342707625.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none); viewed_additive_ids="\\0541"', 'Cache-Control': 'max-age=0', 'X-Real-Ip': '192.168.0.103'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "src/sites/www/handlers/additive.py", line 29, in get
        additive_detail = models.Additive_Detail().get(additive_id),
    AttributeError: 'module' object has no attribute 'Additive_Detail'
[E 120720 18:12:37 web:1393] 500 GET /additive/1 (127.0.0.1) 869.65ms
[W 120720 18:12:37 web:1393] 404 GET /favicon.ico (127.0.0.1) 4.73ms
[I 120720 18:13:04 autoreload:133] /home/dk/work/python/safood/src/common/models/__init__.py modified; restarting server
[E 120720 18:13:14 web:1031] Uncaught exception GET /additive/2 (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/additive/2', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.103', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cookie': 'viewed_additive_ids="\\0541"; __utma=148685175.647871982.1342707625.1342771740.1342775388.3; __utmb=148685175.12.10.1342775388; __utmc=148685175; __utmz=148685175.1342707625.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)', 'X-Real-Ip': '192.168.0.103', 'Referer': 'http://192.168.0.189/'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "/home/dk/work/python/safood/src/sites/www/handlers/additive.py", line 29, in get
        additive_detail = models.Additive_Detail().get(additive_id),
      File "/home/dk/work/python/safood/src/thing/thing/thing.py", line 215, in __getattr__
        raise ThingException('key:{key} not found'.format(key = key))
    ThingException: key:get not found
[E 120720 18:13:14 web:1393] 500 GET /additive/2 (127.0.0.1) 164.82ms
[W 120720 18:13:14 web:1393] 404 GET /favicon.ico (127.0.0.1) 1.34ms
[I 120720 21:22:35 web:1393] 200 GET / (127.0.0.1) 2039.84ms
[E 120720 21:22:59 web:1031] Uncaught exception GET /additive/1 (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/additive/1', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.100', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cookie': 'viewed_additive_ids="\\0541\\0542"; __utma=148685175.647871982.1342707625.1342775388.1342790521.4; __utmb=148685175.2.10.1342790521; __utmc=148685175; __utmz=148685175.1342707625.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)', 'X-Real-Ip': '192.168.0.100', 'Referer': 'http://192.168.0.189/'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "src/sites/www/handlers/additive.py", line 29, in get
        additive_detail = models.Additive_Detail().get(additive_id),
      File "/home/dk/work/python/safood/src/thing/thing/thing.py", line 215, in __getattr__
        raise ThingException('key:{key} not found'.format(key = key))
    ThingException: key:get not found
[E 120720 21:22:59 web:1393] 500 GET /additive/1 (127.0.0.1) 102.42ms
[W 120720 21:22:59 web:1393] 404 GET /favicon.ico (127.0.0.1) 4.85ms
[I 120720 21:30:49 autoreload:133] /home/dk/work/python/safood/src/common/models/additive_detail.py modified; restarting server
[I 120720 21:31:19 autoreload:133] /home/dk/work/python/safood/src/common/models/additive_detail.py modified; restarting server
[I 120720 21:38:36 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/additive.py modified; restarting server
[I 120720 21:38:58 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/additive.py modified; restarting server
[E 120720 21:39:17 template:256] partial/additive.html code:
      1  def _execute():  # partial/additive.html:0
      2      _buffer = []  # partial/additive.html:0
      3      _append = _buffer.append  # partial/additive.html:0
      4      creator = additive.creator  # partial/additive.html:1
      5      _append('\n<div id="additive">\n')  # partial/additive.html:3
      6      _append('\n')  # partial/additive.html:4
      7      if not handler.get_argument('single', False):  # partial/additive.html:4
      8          _append('\n<div class="left"></div>\n<i class="hide icon-arrow-left"></i>\n<div class="right"></div>\n<i class="hide icon-arrow-right"></i>\n')  # partial/additive.html:9
      9      _append('\n<i class="icon-resize-full toggle-fullsize"></i>\n<img src="')  # partial/additive.html:11
     10      _tmp = get_additive_url(additive, 'l')  # partial/additive.html:11
     11      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additive.html:11
     12      else: _tmp = _utf8(str(_tmp))  # partial/additive.html:11
     13      _tmp = _utf8(xhtml_escape(_tmp))  # partial/additive.html:11
     14      _append(_tmp)  # partial/additive.html:11
     15      _append('" />\n</div>\n<div id="additive-extra">\n<div class="user-info">\n<div class="avatar">\n<a href="/user/')  # partial/additive.html:16
     16      _tmp = creator.username  # partial/additive.html:16
     17      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additive.html:16
     18      else: _tmp = _utf8(str(_tmp))  # partial/additive.html:16
     19      _tmp = _utf8(xhtml_escape(_tmp))  # partial/additive.html:16
     20      _append(_tmp)  # partial/additive.html:16
     21      _append('"><img src="')  # partial/additive.html:16
     22      _tmp = get_avatar_url(creator, 's')  # partial/additive.html:16
     23      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additive.html:16
     24      else: _tmp = _utf8(str(_tmp))  # partial/additive.html:16
     25      _tmp = _utf8(xhtml_escape(_tmp))  # partial/additive.html:16
     26      _append(_tmp)  # partial/additive.html:16
     27      _append('" /></a>\n</div>\n<div class="user-meta">\n<div>\n<a href="/user/')  # partial/additive.html:20
     28      _tmp = creator.username  # partial/additive.html:20
     29      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additive.html:20
     30      else: _tmp = _utf8(str(_tmp))  # partial/additive.html:20
     31      _tmp = _utf8(xhtml_escape(_tmp))  # partial/additive.html:20
     32      _append(_tmp)  # partial/additive.html:20
     33      _append('">')  # partial/additive.html:20
     34      _tmp = creator.fullname  # partial/additive.html:20
     35      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additive.html:20
     36      else: _tmp = _utf8(str(_tmp))  # partial/additive.html:20
     37      _tmp = _utf8(xhtml_escape(_tmp))  # partial/additive.html:20
     38      _append(_tmp)  # partial/additive.html:20
     39      _append('</a>\n<i class="icon-level')  # partial/additive.html:21
     40      _tmp = creator.level  # partial/additive.html:21
     41      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additive.html:21
     42      else: _tmp = _utf8(str(_tmp))  # partial/additive.html:21
     43      _tmp = _utf8(xhtml_escape(_tmp))  # partial/additive.html:21
     44      _append(_tmp)  # partial/additive.html:21
     45      _append(' level"></i>\n</div>\n')  # partial/additive.html:23
     46      if can_delete_additive(additive):  # partial/additive.html:23
     47          _append('\n<div class="icon-delete"></div>\n<div id="delete-additive-confirm" class="hide">\n<button data-url="/additive/')  # partial/additive.html:26
     48          _tmp = additive.id  # partial/additive.html:26
     49          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additive.html:26
     50          else: _tmp = _utf8(str(_tmp))  # partial/additive.html:26
     51          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additive.html:26
     52          _append(_tmp)  # partial/additive.html:26
     53          _append('/delete" id="additive-delete" class="btn mini-btn danger-btn">\xe5\x88\xa0\xe9\x99\xa4</button>\n<a href="#" class="cancel">\xe5\x8f\x96\xe6\xb6\x88</a>\n</div>\n')  # partial/additive.html:29
     54      _append('\n<p class="created">')  # partial/additive.html:30
     55      _tmp = timesince(additive.created)  # partial/additive.html:30
     56      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additive.html:30
     57      else: _tmp = _utf8(str(_tmp))  # partial/additive.html:30
     58      _tmp = _utf8(xhtml_escape(_tmp))  # partial/additive.html:30
     59      _append(_tmp)  # partial/additive.html:30
     60      _append(' ')  # partial/additive.html:30
     61      if additive.page_source:  # partial/additive.html:30
     62          _append('via <a href="')  # partial/additive.html:30
     63          _tmp = additive.page_source  # partial/additive.html:30
     64          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additive.html:30
     65          else: _tmp = _utf8(str(_tmp))  # partial/additive.html:30
     66          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additive.html:30
     67          _append(_tmp)  # partial/additive.html:30
     68          _append('" target="_blank">')  # partial/additive.html:30
     69          _tmp = get_host(additive.page_source)  # partial/additive.html:30
     70          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additive.html:30
     71          else: _tmp = _utf8(str(_tmp))  # partial/additive.html:30
     72          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additive.html:30
     73          _append(_tmp)  # partial/additive.html:30
     74          _append('</a><i class="icon-anchor"></i>')  # partial/additive.html:30
     75      _append(' </p>\n</div>\n</div>\n<div class="like">\n')  # partial/additive.html:35
     76      if current_user and current_user.id != additive.user_id:  # partial/additive.html:35
     77          _append('\n<a class="btn noneselectable" data-url="/additive/')  # partial/additive.html:36
     78          _tmp = additive.id  # partial/additive.html:36
     79          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additive.html:36
     80          else: _tmp = _utf8(str(_tmp))  # partial/additive.html:36
     81          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additive.html:36
     82          _append(_tmp)  # partial/additive.html:36
     83          _append('/like"><i class="icon-like')  # partial/additive.html:36
     84          if current_user and current_user.has_liked_additive(additive):  # partial/additive.html:36
     85              _append('d')  # partial/additive.html:36
     86          _append('-btn"></i>\xe5\x96\x9c\xe6\xac\xa2</a>\n')  # partial/additive.html:37
     87      _append('\n<span class="data"><span class="like-count">')  # partial/additive.html:38
     88      _tmp = additive.likes_count  # partial/additive.html:38
     89      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additive.html:38
     90      else: _tmp = _utf8(str(_tmp))  # partial/additive.html:38
     91      _tmp = _utf8(xhtml_escape(_tmp))  # partial/additive.html:38
     92      _append(_tmp)  # partial/additive.html:38
     93      _append('</span> Likes / ')  # partial/additive.html:38
     94      _tmp = additive.views_count  # partial/additive.html:38
     95      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additive.html:38
     96      else: _tmp = _utf8(str(_tmp))  # partial/additive.html:38
     97      _tmp = _utf8(xhtml_escape(_tmp))  # partial/additive.html:38
     98      _append(_tmp)  # partial/additive.html:38
     99      _append(' Views</span>\n</div>\n<div class="additive-content" id="additive-content">\n<h3 class="title">\n<span>')  # partial/additive.html:43
    100      _tmp = additive.title  # partial/additive.html:43
    101      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additive.html:43
    102      else: _tmp = _utf8(str(_tmp))  # partial/additive.html:43
    103      _tmp = _utf8(xhtml_escape(_tmp))  # partial/additive.html:43
    104      _append(_tmp)  # partial/additive.html:43
    105      _append('</span>\n')  # partial/additive.html:44
    106      if current_user and current_user.id == additive.user_id:  # partial/additive.html:44
    107          _append('\n<i class="icon-edit"></i>\n')  # partial/additive.html:46
    108      _append('\n</h3>\n<p class="content">')  # partial/additive.html:48
    109      _tmp = nl2br(escape(additive.content))  # partial/additive.html:48
    110      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additive.html:48
    111      else: _tmp = _utf8(str(_tmp))  # partial/additive.html:48
    112      _append(_tmp)  # partial/additive.html:48
    113      _append('</p>\n</div>\n<div id="additive-content-edit" class="hide">\n<form action="/additive/')  # partial/additive.html:52
    114      _tmp = additive.id  # partial/additive.html:52
    115      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additive.html:52
    116      else: _tmp = _utf8(str(_tmp))  # partial/additive.html:52
    117      _tmp = _utf8(xhtml_escape(_tmp))  # partial/additive.html:52
    118      _append(_tmp)  # partial/additive.html:52
    119      _append('/update" method="POST">\n<div class="input">\n<input type="TEXT" name="title" value="')  # partial/additive.html:54
    120      _tmp = additive.title  # partial/additive.html:54
    121      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additive.html:54
    122      else: _tmp = _utf8(str(_tmp))  # partial/additive.html:54
    123      _tmp = _utf8(xhtml_escape(_tmp))  # partial/additive.html:54
    124      _append(_tmp)  # partial/additive.html:54
    125      _append('" />\n</div>\n<div class="textarea">\n<textarea name="content" rows="5">')  # partial/additive.html:57
    126      _tmp = additive.content  # partial/additive.html:57
    127      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additive.html:57
    128      else: _tmp = _utf8(str(_tmp))  # partial/additive.html:57
    129      _tmp = _utf8(xhtml_escape(_tmp))  # partial/additive.html:57
    130      _append(_tmp)  # partial/additive.html:57
    131      _append('</textarea>\n</div>\n<div class="action">\n<input type="SUBMIT" class="btn primary-btn mini-btn" value="\xe6\x9b\xb4\xe6\x96\xb0" />\n<a href="#" class="cancel">\xe5\x8f\x96\xe6\xb6\x88</a>\n</div>\n</form>\n</div>\n<div class="bar noneselectable">\n<i class="icon-slideup"></i>\n<h4>\xe5\x8f\x82\xe6\x95\xb0</h4>\n</div>\n<ul class="param">\n')  # partial/additive.html:72
    132      for key, val in additive_exif.items():  # partial/additive.html:72
    133          _append('\n')  # partial/additive.html:73
    134          if key == 'Model':  # partial/additive.html:73
    135              _append('\n<li>\xe7\x9b\xb8\xe6\x9c\xba\xef\xbc\x9a')  # partial/additive.html:74
    136              _tmp = val if val else u''  # partial/additive.html:74
    137              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additive.html:74
    138              else: _tmp = _utf8(str(_tmp))  # partial/additive.html:74
    139              _tmp = _utf8(xhtml_escape(_tmp))  # partial/additive.html:74
    140              _append(_tmp)  # partial/additive.html:74
    141              _append('</li>\n')  # partial/additive.html:75
    142          elif key == 'FocalLength':  # partial/additive.html:75
    143              _append('\n<li>\xe7\x84\xa6\xe8\xb7\x9d\xef\xbc\x9a')  # partial/additive.html:76
    144              _tmp = val+'mm' if val else u''  # partial/additive.html:76
    145              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additive.html:76
    146              else: _tmp = _utf8(str(_tmp))  # partial/additive.html:76
    147              _tmp = _utf8(xhtml_escape(_tmp))  # partial/additive.html:76
    148              _append(_tmp)  # partial/additive.html:76
    149              _append('\n</li>\n')  # partial/additive.html:78
    150          elif key == 'FNumber':  # partial/additive.html:78
    151              _append('\n<li>\xe5\x85\x89\xe5\x9c\x88\xef\xbc\x9a')  # partial/additive.html:79
    152              _tmp = 'F'+val if val else u''  # partial/additive.html:79
    153              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additive.html:79
    154              else: _tmp = _utf8(str(_tmp))  # partial/additive.html:79
    155              _tmp = _utf8(xhtml_escape(_tmp))  # partial/additive.html:79
    156              _append(_tmp)  # partial/additive.html:79
    157              _append('\n</li>\n')  # partial/additive.html:81
    158          elif key == 'ExposureTime':  # partial/additive.html:81
    159              _append('\n<li>\xe5\xbf\xab\xe9\x97\xa8\xef\xbc\x9a')  # partial/additive.html:82
    160              _tmp = val+'s' if val else u''  # partial/additive.html:82
    161              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additive.html:82
    162              else: _tmp = _utf8(str(_tmp))  # partial/additive.html:82
    163              _tmp = _utf8(xhtml_escape(_tmp))  # partial/additive.html:82
    164              _append(_tmp)  # partial/additive.html:82
    165              _append('</li>\n')  # partial/additive.html:83
    166          elif key == 'ISOSpeedRatings':  # partial/additive.html:83
    167              _append('\n<li>\xe6\x84\x9f\xe5\x85\x89\xef\xbc\x9a')  # partial/additive.html:84
    168              _tmp = val if val else u''  # partial/additive.html:84
    169              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additive.html:84
    170              else: _tmp = _utf8(str(_tmp))  # partial/additive.html:84
    171              _tmp = _utf8(xhtml_escape(_tmp))  # partial/additive.html:84
    172              _append(_tmp)  # partial/additive.html:84
    173              _append('</li>\n')  # partial/additive.html:85
    174          elif key == 'Lens':  # partial/additive.html:85
    175              _append('\n<li>\xe9\x95\x9c\xe5\xa4\xb4\xef\xbc\x9a')  # partial/additive.html:86
    176              _tmp = val if val else u''  # partial/additive.html:86
    177              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additive.html:86
    178              else: _tmp = _utf8(str(_tmp))  # partial/additive.html:86
    179              _tmp = _utf8(xhtml_escape(_tmp))  # partial/additive.html:86
    180              _append(_tmp)  # partial/additive.html:86
    181              _append('</li>\n')  # partial/additive.html:87
    182          _append('\n')  # partial/additive.html:88
    183      _append('\n</ul>\n<div class="bar noneselectable">\n<i class="icon-slideup"></i>\n<h4 class="tag-header">\xe6\xa0\x87\xe7\xad\xbe</h4>\n')  # partial/additive.html:94
    184      if current_user and additive.user_id == current_user.id:  # partial/additive.html:94
    185          _append('\n<div class="addtag" id="addtag">(<a href="#">add a tag</a>)</div>\n')  # partial/additive.html:96
    186      _append('\n</div>\n<ul class="tag" id="tags">\n')  # partial/additive.html:100
    187      for tag in additive_tags:  # partial/additive.html:100
    188          _append('\n<li>\n<i class="icon-tag"></i> <a href="/tag/')  # partial/additive.html:102
    189          _tmp = tag.tag  # partial/additive.html:102
    190          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additive.html:102
    191          else: _tmp = _utf8(str(_tmp))  # partial/additive.html:102
    192          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additive.html:102
    193          _append(_tmp)  # partial/additive.html:102
    194          _append('">')  # partial/additive.html:102
    195          _tmp = tag.tag  # partial/additive.html:102
    196          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additive.html:102
    197          else: _tmp = _utf8(str(_tmp))  # partial/additive.html:102
    198          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additive.html:102
    199          _append(_tmp)  # partial/additive.html:102
    200          _append('</a>\n')  # partial/additive.html:103
    201          if current_user and additive.user_id == current_user.id:  # partial/additive.html:103
    202              _append('\n<span class="close invisible" data-url="/additive/')  # partial/additive.html:104
    203              _tmp = additive.id  # partial/additive.html:104
    204              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additive.html:104
    205              else: _tmp = _utf8(str(_tmp))  # partial/additive.html:104
    206              _tmp = _utf8(xhtml_escape(_tmp))  # partial/additive.html:104
    207              _append(_tmp)  # partial/additive.html:104
    208              _append('/tagremove/')  # partial/additive.html:104
    209              _tmp = tag.id  # partial/additive.html:104
    210              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additive.html:104
    211              else: _tmp = _utf8(str(_tmp))  # partial/additive.html:104
    212              _tmp = _utf8(xhtml_escape(_tmp))  # partial/additive.html:104
    213              _append(_tmp)  # partial/additive.html:104
    214              _append('">\xc3\x97</span>\n')  # partial/additive.html:105
    215          _append('\n</li>\n')  # partial/additive.html:107
    216      _append('\n</ul>\n<div class="tagadd hide" id="tagadd">\n<form action="/additive/')  # partial/additive.html:111
    217      _tmp = additive.id  # partial/additive.html:111
    218      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additive.html:111
    219      else: _tmp = _utf8(str(_tmp))  # partial/additive.html:111
    220      _tmp = _utf8(xhtml_escape(_tmp))  # partial/additive.html:111
    221      _append(_tmp)  # partial/additive.html:111
    222      _append('/tagadd" method="POST">\n<input type="TEXT" name="tag" />\n<input type="SUBMIT" class="btn primary-btn mini-btn" value="\xe6\xb7\xbb\xe5\x8a\xa0" />\n<a href="#" class="cancel">\xe5\x8f\x96\xe6\xb6\x88</a>\n</form>\n</div>\n')  # partial/additive.html:118
    223      _append('\n<div class="bar noneselectable">\n<i class="icon-slideup"></i>\n<h4>\xe8\xaf\x84\xe8\xae\xba</h4>\n</div>\n')  # partial/additive.html:135
    224      _append('<div id="comments">\n')  # partial/comments.html:2 (via partial/additive.html:135)
    225      for comment in photo.comments:  # partial/comments.html:2 (via partial/additive.html:135)
    226          _append('\n')  # partial/comments.html:3 (via partial/additive.html:135)
    227          commenter = comment.creator  # partial/comment.html:1 (via partial/comments.html:3, partial/additive.html:135)
    228          _append('\n<div class="comment">\n<div class="avatar">\n<a href="/user/')  # partial/comment.html:4 (via partial/comments.html:3, partial/additive.html:135)
    229          _tmp = commenter.username  # partial/comment.html:4 (via partial/comments.html:3, partial/additive.html:135)
    230          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/comment.html:4 (via partial/comments.html:3, partial/additive.html:135)
    231          else: _tmp = _utf8(str(_tmp))  # partial/comment.html:4 (via partial/comments.html:3, partial/additive.html:135)
    232          _tmp = _utf8(xhtml_escape(_tmp))  # partial/comment.html:4 (via partial/comments.html:3, partial/additive.html:135)
    233          _append(_tmp)  # partial/comment.html:4 (via partial/comments.html:3, partial/additive.html:135)
    234          _append('"><img src="')  # partial/comment.html:4 (via partial/comments.html:3, partial/additive.html:135)
    235          _tmp = get_avatar_url(commenter, 's')  # partial/comment.html:4 (via partial/comments.html:3, partial/additive.html:135)
    236          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/comment.html:4 (via partial/comments.html:3, partial/additive.html:135)
    237          else: _tmp = _utf8(str(_tmp))  # partial/comment.html:4 (via partial/comments.html:3, partial/additive.html:135)
    238          _tmp = _utf8(xhtml_escape(_tmp))  # partial/comment.html:4 (via partial/comments.html:3, partial/additive.html:135)
    239          _append(_tmp)  # partial/comment.html:4 (via partial/comments.html:3, partial/additive.html:135)
    240          _append('" width="32" height="32" /></a>\n</div>\n<div class="right">\n<div class="username">\n<span class="created">')  # partial/comment.html:8 (via partial/comments.html:3, partial/additive.html:135)
    241          _tmp = timesince(comment.created)  # partial/comment.html:8 (via partial/comments.html:3, partial/additive.html:135)
    242          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/comment.html:8 (via partial/comments.html:3, partial/additive.html:135)
    243          else: _tmp = _utf8(str(_tmp))  # partial/comment.html:8 (via partial/comments.html:3, partial/additive.html:135)
    244          _tmp = _utf8(xhtml_escape(_tmp))  # partial/comment.html:8 (via partial/comments.html:3, partial/additive.html:135)
    245          _append(_tmp)  # partial/comment.html:8 (via partial/comments.html:3, partial/additive.html:135)
    246          _append('</span>\n<a href="/user/')  # partial/comment.html:9 (via partial/comments.html:3, partial/additive.html:135)
    247          _tmp = commenter.username  # partial/comment.html:9 (via partial/comments.html:3, partial/additive.html:135)
    248          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/comment.html:9 (via partial/comments.html:3, partial/additive.html:135)
    249          else: _tmp = _utf8(str(_tmp))  # partial/comment.html:9 (via partial/comments.html:3, partial/additive.html:135)
    250          _tmp = _utf8(xhtml_escape(_tmp))  # partial/comment.html:9 (via partial/comments.html:3, partial/additive.html:135)
    251          _append(_tmp)  # partial/comment.html:9 (via partial/comments.html:3, partial/additive.html:135)
    252          _append('">')  # partial/comment.html:9 (via partial/comments.html:3, partial/additive.html:135)
    253          _tmp = commenter.fullname  # partial/comment.html:9 (via partial/comments.html:3, partial/additive.html:135)
    254          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/comment.html:9 (via partial/comments.html:3, partial/additive.html:135)
    255          else: _tmp = _utf8(str(_tmp))  # partial/comment.html:9 (via partial/comments.html:3, partial/additive.html:135)
    256          _tmp = _utf8(xhtml_escape(_tmp))  # partial/comment.html:9 (via partial/comments.html:3, partial/additive.html:135)
    257          _append(_tmp)  # partial/comment.html:9 (via partial/comments.html:3, partial/additive.html:135)
    258          _append('</a>\n<i class="level icon-level')  # partial/comment.html:10 (via partial/comments.html:3, partial/additive.html:135)
    259          _tmp = commenter.level  # partial/comment.html:10 (via partial/comments.html:3, partial/additive.html:135)
    260          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/comment.html:10 (via partial/comments.html:3, partial/additive.html:135)
    261          else: _tmp = _utf8(str(_tmp))  # partial/comment.html:10 (via partial/comments.html:3, partial/additive.html:135)
    262          _tmp = _utf8(xhtml_escape(_tmp))  # partial/comment.html:10 (via partial/comments.html:3, partial/additive.html:135)
    263          _append(_tmp)  # partial/comment.html:10 (via partial/comments.html:3, partial/additive.html:135)
    264          _append('"></i>\n</div>\n<p class="content">\n')  # partial/comment.html:13 (via partial/comments.html:3, partial/additive.html:135)
    265          if current_user:  # partial/comment.html:13 (via partial/comments.html:3, partial/additive.html:135)
    266              _append('\n')  # partial/comment.html:14 (via partial/comments.html:3, partial/additive.html:135)
    267              if current_user.id == photo.user_id or current_user.is_admin:  # partial/comment.html:14 (via partial/comments.html:3, partial/additive.html:135)
    268                  _append('\n<a href="/comment/')  # partial/comment.html:15 (via partial/comments.html:3, partial/additive.html:135)
    269                  _tmp = comment.id  # partial/comment.html:15 (via partial/comments.html:3, partial/additive.html:135)
    270                  if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/comment.html:15 (via partial/comments.html:3, partial/additive.html:135)
    271                  else: _tmp = _utf8(str(_tmp))  # partial/comment.html:15 (via partial/comments.html:3, partial/additive.html:135)
    272                  _tmp = _utf8(xhtml_escape(_tmp))  # partial/comment.html:15 (via partial/comments.html:3, partial/additive.html:135)
    273                  _append(_tmp)  # partial/comment.html:15 (via partial/comments.html:3, partial/additive.html:135)
    274                  _append('/delete" class="close hide">\xc3\x97</a>\n')  # partial/comment.html:16 (via partial/comments.html:3, partial/additive.html:135)
    275              _append('\n')  # partial/comment.html:17 (via partial/comments.html:3, partial/additive.html:135)
    276          _append('\n')  # partial/comment.html:18 (via partial/comments.html:3, partial/additive.html:135)
    277          _tmp = comment.content  # partial/comment.html:18 (via partial/comments.html:3, partial/additive.html:135)
    278          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/comment.html:18 (via partial/comments.html:3, partial/additive.html:135)
    279          else: _tmp = _utf8(str(_tmp))  # partial/comment.html:18 (via partial/comments.html:3, partial/additive.html:135)
    280          _tmp = _utf8(xhtml_escape(_tmp))  # partial/comment.html:18 (via partial/comments.html:3, partial/additive.html:135)
    281          _append(_tmp)  # partial/comment.html:18 (via partial/comments.html:3, partial/additive.html:135)
    282          _append('\n</p>\n</div>\n</div>\n<div class="divider"></div>\n')  # partial/comment.html:24 (via partial/comments.html:3, partial/additive.html:135)
    283          _append('\n')  # partial/comments.html:4 (via partial/additive.html:135)
    284      _append('\n')  # partial/comments.html:6 (via partial/additive.html:135)
    285      if current_user:  # partial/comments.html:6 (via partial/additive.html:135)
    286          _append('\n<div id="comment-create" class="comment">\n<div class="avatar">\n<img src="')  # partial/comments.html:9 (via partial/additive.html:135)
    287          _tmp = get_avatar_url(current_user, 's')  # partial/comments.html:9 (via partial/additive.html:135)
    288          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/comments.html:9 (via partial/additive.html:135)
    289          else: _tmp = _utf8(str(_tmp))  # partial/comments.html:9 (via partial/additive.html:135)
    290          _tmp = _utf8(xhtml_escape(_tmp))  # partial/comments.html:9 (via partial/additive.html:135)
    291          _append(_tmp)  # partial/comments.html:9 (via partial/additive.html:135)
    292          _append('" width="32" height="32" />\n</div>\n<div class="right">\n<form action="/comment/add" method="POST" rel="ajax">\n<input type="hidden" name="photo_id" value="')  # partial/comments.html:13 (via partial/additive.html:135)
    293          _tmp = photo.id  # partial/comments.html:13 (via partial/additive.html:135)
    294          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/comments.html:13 (via partial/additive.html:135)
    295          else: _tmp = _utf8(str(_tmp))  # partial/comments.html:13 (via partial/additive.html:135)
    296          _tmp = _utf8(xhtml_escape(_tmp))  # partial/comments.html:13 (via partial/additive.html:135)
    297          _append(_tmp)  # partial/comments.html:13 (via partial/additive.html:135)
    298          _append('" />\n<input type="TEXT" name="content" />\n<p class="tip">\xe6\x8c\x89\xe5\x9b\x9e\xe8\xbd\xa6\xe6\x8f\x90\xe4\xba\xa4\xe8\xaf\x84\xe8\xae\xba</p>\n</form>\n</div>\n</div>\n')  # partial/comments.html:19 (via partial/additive.html:135)
    299      _append('\n</div>\n')  # partial/comments.html:23 (via partial/additive.html:135)
    300      _append('\n</div>\n<script type="text/javascript">\n$(\'.bar\').additiveToggleSidebarIcon()\n$(\'#additive-extra .like a\').additiveLike()\n$(\'#additive .left\').additivePrev()\n$(\'#additive .right\').additiveNext()\n$(\'#comment-create form\').additiveCommentAdd()\n$(\'#comments\').additiveCommentHover()\n$(\'#additive-content .icon-edit\').additiveContentEdit()\n$(\'#additive-content-edit .cancel\').additiveContentCancelEdit()\n$(\'#additive-content-edit form\').additiveContentSubmit()\n$(\'ul.tag\').additiveTagHover()\n$(\'#addtag a\').additiveTagAdd()\n$(\'#tagadd a.cancel\').additiveTagAddCancel()\n$(\'#tagadd form\').additiveTagAddSubmit()\n$(\'#tags .close\').additiveTagClose()\n$(\'#additive-extra .user-meta .icon-delete\').additiveDelete()\n$(\'#additive-extra .user-meta a.cancel\').additiveDeleteCancel()\n$(\'#additive-delete\').additiveDeleteSubmit()\n$(\'#additive .toggle-fullsize\').additiveToggleFullsize()\n</script>\n')  # partial/additive.html:175
    301      return _utf8('').join(_buffer)  # partial/additive.html:0
[E 120720 21:39:17 web:1031] Uncaught exception GET /additive/1 (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/additive/1', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.100', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cookie': 'viewed_additive_ids="\\0541\\0542"; __utma=148685175.647871982.1342707625.1342775388.1342790521.4; __utmb=148685175.3.10.1342790521; __utmc=148685175; __utmz=148685175.1342707625.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)', 'X-Real-Ip': '192.168.0.100', 'Referer': 'http://192.168.0.189/'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "/home/dk/work/python/safood/src/sites/www/handlers/additive.py", line 29, in get
        additive_detail = models.Additive_Detail().find(additive_id),
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 474, in render
        html = self.render_string(template_name, **kwargs)
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 586, in render_string
        return t.generate(**args)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 253, in generate
        return execute()
      File "partial/additive_html.generated.py", line 10, in _execute
        _tmp = get_additive_url(additive, 'l')  # partial/additive.html:11
    NameError: global name 'get_additive_url' is not defined
[E 120720 21:39:17 web:1393] 500 GET /additive/1 (127.0.0.1) 262.08ms
[W 120720 21:39:18 web:1393] 404 GET /favicon.ico (127.0.0.1) 1.20ms
[I 120720 21:53:48 web:1393] 200 GET /additive/2 (127.0.0.1) 27.02ms
[W 120720 21:53:48 web:1393] 404 GET /favicon.ico (127.0.0.1) 2.69ms
[I 120720 21:54:48 web:1393] 200 GET /additive/2 (127.0.0.1) 13.56ms
[W 120720 21:54:48 web:1393] 404 GET /favicon.ico (127.0.0.1) 2.77ms
[I 120720 21:59:20 web:1393] 200 GET /additive/2 (127.0.0.1) 15.41ms
[W 120720 21:59:21 web:1393] 404 GET /favicon.ico (127.0.0.1) 2.15ms
[I 120720 22:11:08 web:1393] 200 GET /additive/2 (127.0.0.1) 17.82ms
[W 120720 22:11:08 web:1393] 404 GET /favicon.ico (127.0.0.1) 5.52ms
[E 120721 08:49:23 web:1031] Uncaught exception GET /additive/1 (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/additive/1', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.100', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cookie': '__utma=148685175.647871982.1342707625.1342790521.1342831755.5; __utmb=148685175.1.10.1342831755; __utmc=148685175; __utmz=148685175.1342707625.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)', 'X-Real-Ip': '192.168.0.100', 'Referer': 'http://192.168.0.189/'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "src/sites/www/handlers/additive.py", line 29, in get
        additive_detail = models.Additive_Detail().find(additive_id),
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 474, in render
        html = self.render_string(template_name, **kwargs)
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 573, in render_string
        t = loader.load(template_name)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 323, in load
        self.templates[name] = self._create_template(name)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 354, in _create_template
        template = Template(f.read(), name=name, loader=self)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 213, in __init__
        self.code = self._generate_python(loader, compress_whitespace)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 264, in _generate_python
        ancestors = self._get_ancestors(loader)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 283, in _get_ancestors
        template = loader.load(chunk.name, self.name)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 323, in load
        self.templates[name] = self._create_template(name)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 353, in _create_template
        f = open(path, "r")
    IOError: [Errno 2] No such file or directory: '/home/dk/work/python/safood/src/sites/www/templates/partial/base.html'
[E 120721 08:49:23 web:1393] 500 GET /additive/1 (127.0.0.1) 1353.07ms
[W 120721 08:49:24 web:1393] 404 GET /favicon.ico (127.0.0.1) 82.09ms
[I 120721 08:49:59 web:1393] 200 GET /additive/2 (127.0.0.1) 256.40ms
[I 120721 08:50:30 web:1393] 200 GET /additive/3 (127.0.0.1) 113.35ms
[I 120721 08:50:33 web:1393] 200 GET /about (127.0.0.1) 59.07ms
[I 120721 11:11:14 web:1393] 200 GET /additive/4 (127.0.0.1) 1787.66ms
[I 120721 11:11:34 web:1393] 200 GET /additive/4 (127.0.0.1) 100.57ms
[I 120721 11:11:38 web:1393] 200 GET /additive/4 (127.0.0.1) 120.74ms
[I 120721 11:11:44 web:1393] 200 GET /additive/5 (127.0.0.1) 221.55ms
[I 120721 11:12:47 web:1393] 200 GET /additive/4 (127.0.0.1) 107.75ms
[I 120721 11:15:36 web:1393] 200 GET /additive/3 (127.0.0.1) 133.02ms
[I 120721 11:16:02 web:1393] 200 GET /additive/1 (127.0.0.1) 113.14ms
[I 120721 11:16:21 web:1393] 200 GET /additive/2 (127.0.0.1) 112.45ms
[I 120721 11:16:37 web:1393] 200 GET /additive/3 (127.0.0.1) 121.21ms
[I 120721 11:16:40 web:1393] 200 GET /additive/3 (127.0.0.1) 109.37ms
[I 120721 11:16:45 web:1393] 200 GET /additive/2 (127.0.0.1) 110.82ms
[I 120721 11:16:50 web:1393] 200 GET /additive/1 (127.0.0.1) 115.79ms
[I 120721 11:19:11 web:1393] 200 GET / (127.0.0.1) 603.39ms
[W 120721 11:24:04 web:1393] 404 GET /search/(u'/u6d4b/u8bd52',) (127.0.0.1) 128.05ms
[W 120721 11:24:06 web:1393] 404 GET /search/(u'/u6d4b/u8bd53',) (127.0.0.1) 4.07ms
[W 120721 11:27:52 web:1393] 404 GET /search/(u'/u6d4b/u8bd52',) (127.0.0.1) 6.04ms
[W 120721 11:27:54 web:1393] 404 GET /search/(u'/u6d4b/u8bd52',) (127.0.0.1) 4.15ms
[W 120721 11:27:55 web:1393] 404 GET /search/(u'/u6d4b/u8bd52',) (127.0.0.1) 5.11ms
[E 120721 12:30:54 template:256] additives.html code:
      1  def _execute():  # base.html:0
      2      _buffer = []  # base.html:0
      3      _append = _buffer.append  # base.html:0
      4      _append('<!doctype html>\n<head>\n<meta charset="UTF-8" />\n<meta content="True" name="HandheldFriendly" />\n<meta content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0; name=\'viewport\'" />\n<title>\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - \xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81')  # base.html:6
      5      _append('</title>\n<link rel="stylesheet" type="text/css" media="screen" href="/static/css/vendor/jquery.fancybox.css" />\n<link rel="stylesheet" type="text/css" media="screen" href="/static/css/main.css" />\n<link rel="shortcut icon" href="/static/img/favicon.ico" />\n<link rel="canonical" href="http://wuditoo.com/" />\n<meta name="description" content="\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - \xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81" />\n<script src="/static/js/vendor/jquery.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.history.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.fancybox.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.scrollTo.min.js" type="text/javascript"></script>\n')  # base.html:16
      6      _append('\n<script type="text/javascript">\n')  # additives.html:13 (via base.html:16)
      7      if current_additive:  # additives.html:13 (via base.html:16)
      8          _append('\nmeta_additive = {\nurl: "/additive/')  # additives.html:15 (via base.html:16)
      9          _tmp = current_additive.id  # additives.html:15 (via base.html:16)
     10          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # additives.html:15 (via base.html:16)
     11          else: _tmp = _utf8(str(_tmp))  # additives.html:15 (via base.html:16)
     12          _tmp = _utf8(xhtml_escape(_tmp))  # additives.html:15 (via base.html:16)
     13          _append(_tmp)  # additives.html:15 (via base.html:16)
     14          _append('",\nwidth: ')  # additives.html:16 (via base.html:16)
     15          _tmp = current_additive.width  # additives.html:16 (via base.html:16)
     16          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # additives.html:16 (via base.html:16)
     17          else: _tmp = _utf8(str(_tmp))  # additives.html:16 (via base.html:16)
     18          _tmp = _utf8(xhtml_escape(_tmp))  # additives.html:16 (via base.html:16)
     19          _append(_tmp)  # additives.html:16 (via base.html:16)
     20          _append(',\nheight: ')  # additives.html:17 (via base.html:16)
     21          _tmp = current_additive.height  # additives.html:17 (via base.html:16)
     22          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # additives.html:17 (via base.html:16)
     23          else: _tmp = _utf8(str(_tmp))  # additives.html:17 (via base.html:16)
     24          _tmp = _utf8(xhtml_escape(_tmp))  # additives.html:17 (via base.html:16)
     25          _append(_tmp)  # additives.html:17 (via base.html:16)
     26          _append('\n}\n')  # additives.html:19 (via base.html:16)
     27      _append('\n</script>\n')  # additives.html:21 (via base.html:16)
     28      _append('\n<script src="/static/js/main.js" type="text/javascript"></script>\n</head>\n<!--[if IE 7 ]><body class="ie7"><![endif]-->\n<!--[if gt IE 7]><body class="ie"><![endif]-->\n<!--[if !IE]><body><![endif]-->\n<div id="header">\n<div class="inner">\n<div id="logo"><a href="/">\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</a></div>\n<div id="slogon">\xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81</div>\n<div id="witticism">')  # base.html:27
     29      _tmp = home_sentence()  # base.html:27
     30      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:27
     31      else: _tmp = _utf8(str(_tmp))  # base.html:27
     32      _tmp = _utf8(xhtml_escape(_tmp))  # base.html:27
     33      _append(_tmp)  # base.html:27
     34      _append('</div>\n<!--\n<ul class="nav-right">\n</ul>\n-->\n</div>\n</div>\n<div id="container">\n<div class="inner">\n<div class="message alert alert-warn">\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0\xe5\x86\xac\xe7\x9c\xa0\xe4\xb8\xad\xef\xbc\x8c\xe8\x8b\x8f\xe9\x86\x92\xe6\x97\xb6\xe9\x97\xb4\xe5\xbe\x85\xe5\xae\x9a\xe3\x80\x82\xe8\xb0\xa2\xe8\xb0\xa2\xe6\x82\xa8\xe7\x9a\x84\xe5\x88\xb0\xe8\xae\xbf\xef\xbc\x9a\xef\xbc\x89</div>\n')  # base.html:38
     35      message = get_message()  # base.html:38
     36      _append('\n')  # base.html:39
     37      for message_type in ('error', 'success', 'info', 'warn'):  # base.html:39
     38          _append('\n')  # base.html:40
     39          if message and message_type == message[0]:  # base.html:40
     40              _append('\n<div id="')  # base.html:41
     41              _tmp = message_type  # base.html:41
     42              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     43              else: _tmp = _utf8(str(_tmp))  # base.html:41
     44              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     45              _append(_tmp)  # base.html:41
     46              _append('-message" class="message alert alert-')  # base.html:41
     47              _tmp = message_type  # base.html:41
     48              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     49              else: _tmp = _utf8(str(_tmp))  # base.html:41
     50              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     51              _append(_tmp)  # base.html:41
     52              _append('">')  # base.html:41
     53              _tmp = message[1]  # base.html:41
     54              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     55              else: _tmp = _utf8(str(_tmp))  # base.html:41
     56              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     57              _append(_tmp)  # base.html:41
     58              _append('</div>\n')  # base.html:42
     59          else:  # base.html:42
     60              _append('\n<div id="')  # base.html:43
     61              _tmp = message_type  # base.html:43
     62              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:43
     63              else: _tmp = _utf8(str(_tmp))  # base.html:43
     64              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:43
     65              _append(_tmp)  # base.html:43
     66              _append('-message" class="message alert alert-')  # base.html:43
     67              _tmp = message_type  # base.html:43
     68              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:43
     69              else: _tmp = _utf8(str(_tmp))  # base.html:43
     70              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:43
     71              _append(_tmp)  # base.html:43
     72              _append(' hide"></div>\n')  # base.html:44
     73          _append('\n')  # base.html:45
     74      _append('\n')  # base.html:47
     75      _append('\n<div id="main">\n')  # base.html:50
     76      _append('\n')  # additives.html:4 (via base.html:50)
     77      _append('<div class="box" id="additives">\n<div class="header">')  # partial/additives.html:2 (via additives.html:4, base.html:50)
     78      _tmp = additives_title  # partial/additives.html:2 (via additives.html:4, base.html:50)
     79      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:2 (via additives.html:4, base.html:50)
     80      else: _tmp = _utf8(str(_tmp))  # partial/additives.html:2 (via additives.html:4, base.html:50)
     81      _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:2 (via additives.html:4, base.html:50)
     82      _append(_tmp)  # partial/additives.html:2 (via additives.html:4, base.html:50)
     83      _append('</div>\n<div class="body main ul">\n')  # partial/additives.html:4 (via additives.html:4, base.html:50)
     84      for index, additive in enumerate(additives):  # partial/additives.html:4 (via additives.html:4, base.html:50)
     85          _append('\n')  # partial/additives.html:5 (via additives.html:4, base.html:50)
     86          creator = additive.creator  # partial/additives.html:5 (via additives.html:4, base.html:50)
     87          _append('\n<div class="additive-item">\n<div class="header">\n<a class="avatar" href="/additive/')  # partial/additives.html:8 (via additives.html:4, base.html:50)
     88          _tmp = additive.id  # partial/additives.html:8 (via additives.html:4, base.html:50)
     89          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     90          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     91          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     92          _append(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     93          _append('"><img src="')  # partial/additives.html:8 (via additives.html:4, base.html:50)
     94          _tmp = get_avatar_url(creator, 's')  # partial/additives.html:8 (via additives.html:4, base.html:50)
     95          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     96          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     97          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     98          _append(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     99          _append('" /></a> ')  # partial/additives.html:8 (via additives.html:4, base.html:50)
    100          _tmp = additive.name  # partial/additives.html:8 (via additives.html:4, base.html:50)
    101          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
    102          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
    103          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
    104          _append(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
    105          _append('\n</div>\n<div class="body">\n<div class="additive_alias">\xe5\x85\xb6\xe4\xbb\x96\xe5\x90\x8d\xe7\xa7\xb0:')  # partial/additives.html:11 (via additives.html:4, base.html:50)
    106          _tmp = additive.alias  # partial/additives.html:11 (via additives.html:4, base.html:50)
    107          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:11 (via additives.html:4, base.html:50)
    108          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:11 (via additives.html:4, base.html:50)
    109          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:11 (via additives.html:4, base.html:50)
    110          _append(_tmp)  # partial/additives.html:11 (via additives.html:4, base.html:50)
    111          _append('</div>\n<div class="additive_cns">CNS\xe5\x8f\xb7:')  # partial/additives.html:12 (via additives.html:4, base.html:50)
    112          _tmp = additive.cns  # partial/additives.html:12 (via additives.html:4, base.html:50)
    113          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:12 (via additives.html:4, base.html:50)
    114          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:12 (via additives.html:4, base.html:50)
    115          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:12 (via additives.html:4, base.html:50)
    116          _append(_tmp)  # partial/additives.html:12 (via additives.html:4, base.html:50)
    117          _append('</div>\n<div class="additive_ins">INS\xe5\x8f\xb7:')  # partial/additives.html:13 (via additives.html:4, base.html:50)
    118          _tmp = additive.ins  # partial/additives.html:13 (via additives.html:4, base.html:50)
    119          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:13 (via additives.html:4, base.html:50)
    120          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:13 (via additives.html:4, base.html:50)
    121          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:13 (via additives.html:4, base.html:50)
    122          _append(_tmp)  # partial/additives.html:13 (via additives.html:4, base.html:50)
    123          _append('</div>\n<div class="additive_effect">\xe5\x8a\x9f\xe8\x83\xbd:')  # partial/additives.html:14 (via additives.html:4, base.html:50)
    124          _tmp = additive.effect  # partial/additives.html:14 (via additives.html:4, base.html:50)
    125          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:14 (via additives.html:4, base.html:50)
    126          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:14 (via additives.html:4, base.html:50)
    127          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:14 (via additives.html:4, base.html:50)
    128          _append(_tmp)  # partial/additives.html:14 (via additives.html:4, base.html:50)
    129          _append('</div>\n</div>\n<div class="footer">\n<span class="meta">\n<ul>\n<li><i class="icon-view"></i> ')  # partial/additives.html:19 (via additives.html:4, base.html:50)
    130          _tmp = additive.views_count  # partial/additives.html:19 (via additives.html:4, base.html:50)
    131          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:19 (via additives.html:4, base.html:50)
    132          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:19 (via additives.html:4, base.html:50)
    133          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:19 (via additives.html:4, base.html:50)
    134          _append(_tmp)  # partial/additives.html:19 (via additives.html:4, base.html:50)
    135          _append('</li>\n</ul>\n</span>\n<span class="created">\n')  # partial/additives.html:23 (via additives.html:4, base.html:50)
    136          _tmp = timesince(additive.created)  # partial/additives.html:23 (via additives.html:4, base.html:50)
    137          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:23 (via additives.html:4, base.html:50)
    138          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:23 (via additives.html:4, base.html:50)
    139          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:23 (via additives.html:4, base.html:50)
    140          _append(_tmp)  # partial/additives.html:23 (via additives.html:4, base.html:50)
    141          _append('\n</span>\n</div>\n</div>\n')  # partial/additives.html:27 (via additives.html:4, base.html:50)
    142          _append('\n')  # partial/additives.html:28 (via additives.html:4, base.html:50)
    143          if index > 0 and (index + 1) % 3 == 0:  # partial/additives.html:28 (via additives.html:4, base.html:50)
    144              _append('\n<div class="clearfix"></div>\n')  # partial/additives.html:30 (via additives.html:4, base.html:50)
    145          _append('\n')  # partial/additives.html:32 (via additives.html:4, base.html:50)
    146      _append('\n')  # partial/additives.html:33 (via additives.html:4, base.html:50)
    147      page_type = 'additives'  # partial/additives.html:33 (via additives.html:4, base.html:50)
    148      _append('\n')  # partial/additives.html:34 (via additives.html:4, base.html:50)
    149      _append('\n')  # partial/pagination.html:3 (via partial/additives.html:34, additives.html:4, base.html:50)
    150      from macros.macro import ADDITIVES_PER_PAGE, USERS_PER_PAGE  # partial/pagination.html:3 (via partial/additives.html:34, additives.html:4, base.html:50)
    151      _append('\n')  # partial/pagination.html:4 (via partial/additives.html:34, additives.html:4, base.html:50)
    152      import math  # partial/pagination.html:4 (via partial/additives.html:34, additives.html:4, base.html:50)
    153      _append('\n')  # partial/pagination.html:6 (via partial/additives.html:34, additives.html:4, base.html:50)
    154      if page_type == 'additives':  # partial/pagination.html:6 (via partial/additives.html:34, additives.html:4, base.html:50)
    155          _append('\n')  # partial/pagination.html:7 (via partial/additives.html:34, additives.html:4, base.html:50)
    156          items_per_page = ADDITIVES_PER_PAGE  # partial/pagination.html:7 (via partial/additives.html:34, additives.html:4, base.html:50)
    157          _append('\n')  # partial/pagination.html:8 (via partial/additives.html:34, additives.html:4, base.html:50)
    158      else:  # partial/pagination.html:8 (via partial/additives.html:34, additives.html:4, base.html:50)
    159          _append('\n')  # partial/pagination.html:9 (via partial/additives.html:34, additives.html:4, base.html:50)
    160          items_per_page = USERS_PER_PAGE  # partial/pagination.html:9 (via partial/additives.html:34, additives.html:4, base.html:50)
    161          _append('\n')  # partial/pagination.html:10 (via partial/additives.html:34, additives.html:4, base.html:50)
    162      _append('\n')  # partial/pagination.html:12 (via partial/additives.html:34, additives.html:4, base.html:50)
    163      total_page = int(math.ceil(float(total_items) / items_per_page))  # partial/pagination.html:12 (via partial/additives.html:34, additives.html:4, base.html:50)
    164      _append('\n')  # partial/pagination.html:14 (via partial/additives.html:34, additives.html:4, base.html:50)
    165      current_page = int(handler.get_argument('page', 1))  # partial/pagination.html:14 (via partial/additives.html:34, additives.html:4, base.html:50)
    166      _append('\n')  # partial/pagination.html:16 (via partial/additives.html:34, additives.html:4, base.html:50)
    167      if current_page <=6:  # partial/pagination.html:16 (via partial/additives.html:34, additives.html:4, base.html:50)
    168          _append('\n')  # partial/pagination.html:17 (via partial/additives.html:34, additives.html:4, base.html:50)
    169          end_page = min(total_page, 10)  # partial/pagination.html:17 (via partial/additives.html:34, additives.html:4, base.html:50)
    170          _append('\n')  # partial/pagination.html:18 (via partial/additives.html:34, additives.html:4, base.html:50)
    171          start_page = 1  # partial/pagination.html:18 (via partial/additives.html:34, additives.html:4, base.html:50)
    172          _append('\n')  # partial/pagination.html:19 (via partial/additives.html:34, additives.html:4, base.html:50)
    173      else:  # partial/pagination.html:19 (via partial/additives.html:34, additives.html:4, base.html:50)
    174          _append('\n')  # partial/pagination.html:20 (via partial/additives.html:34, additives.html:4, base.html:50)
    175          end_page = min(total_page, current_page+4)  # partial/pagination.html:20 (via partial/additives.html:34, additives.html:4, base.html:50)
    176          _append('\n')  # partial/pagination.html:21 (via partial/additives.html:34, additives.html:4, base.html:50)
    177          start_page = current_page - 5  # partial/pagination.html:21 (via partial/additives.html:34, additives.html:4, base.html:50)
    178          _append('\n')  # partial/pagination.html:22 (via partial/additives.html:34, additives.html:4, base.html:50)
    179      _append('\n')  # partial/pagination.html:24 (via partial/additives.html:34, additives.html:4, base.html:50)
    180      if total_page > 1:  # partial/pagination.html:24 (via partial/additives.html:34, additives.html:4, base.html:50)
    181          _append('\n<div class="pagination">\n<ul>\n')  # partial/pagination.html:27 (via partial/additives.html:34, additives.html:4, base.html:50)
    182          if current_page == 1:  # partial/pagination.html:27 (via partial/additives.html:34, additives.html:4, base.html:50)
    183              _append('\n<li class="disabled">\xe2\x86\x90 </li>\n')  # partial/pagination.html:29 (via partial/additives.html:34, additives.html:4, base.html:50)
    184          else:  # partial/pagination.html:29 (via partial/additives.html:34, additives.html:4, base.html:50)
    185              _append('\n<li><a href="')  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    186              _tmp = page_path  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    187              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    188              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    189              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    190              _append(_tmp)  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    191              _append('?page=1">\xe2\x86\x90 </a></li>\n')  # partial/pagination.html:31 (via partial/additives.html:34, additives.html:4, base.html:50)
    192          _append('\n')  # partial/pagination.html:33 (via partial/additives.html:34, additives.html:4, base.html:50)
    193          for i in range(start_page, end_page + 1):  # partial/pagination.html:33 (via partial/additives.html:34, additives.html:4, base.html:50)
    194              _append('\n<li ')  # partial/pagination.html:34 (via partial/additives.html:34, additives.html:4, base.html:50)
    195              if current_page == i:  # partial/pagination.html:34 (via partial/additives.html:34, additives.html:4, base.html:50)
    196                  _append('class="active"')  # partial/pagination.html:34 (via partial/additives.html:34, additives.html:4, base.html:50)
    197              _append('>\n<a href="')  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    198              _tmp = page_path  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    199              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    200              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    201              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    202              _append(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    203              _append('?page=')  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    204              _tmp = i  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    205              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    206              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    207              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    208              _append(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    209              _append('">')  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    210              _tmp = i  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    211              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    212              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    213              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    214              _append(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    215              _append('</a>\n</li>\n')  # partial/pagination.html:37 (via partial/additives.html:34, additives.html:4, base.html:50)
    216          _append('\n')  # partial/pagination.html:39 (via partial/additives.html:34, additives.html:4, base.html:50)
    217          if current_page == total_page:  # partial/pagination.html:39 (via partial/additives.html:34, additives.html:4, base.html:50)
    218              _append('\n<li class="disabled">\xe2\x86\x92 </li>\n')  # partial/pagination.html:41 (via partial/additives.html:34, additives.html:4, base.html:50)
    219          else:  # partial/pagination.html:41 (via partial/additives.html:34, additives.html:4, base.html:50)
    220              _append('\n<li><a href="')  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    221              _tmp = page_path  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    222              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    223              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    224              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    225              _append(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    226              _append('?page=')  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    227              _tmp = current_page+1  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    228              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    229              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    230              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    231              _append(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    232              _append('">\xe2\x86\x92 </a></li>\n')  # partial/pagination.html:43 (via partial/additives.html:34, additives.html:4, base.html:50)
    233          _append('\n</ul>\n</div>\n')  # partial/pagination.html:46 (via partial/additives.html:34, additives.html:4, base.html:50)
    234      _append('\n')  # partial/pagination.html:47 (via partial/additives.html:34, additives.html:4, base.html:50)
    235      _append('\n</div>\n</div>\n')  # partial/additives.html:37 (via additives.html:4, base.html:50)
    236      _append('\n')  # additives.html:5 (via base.html:50)
    237      _append('\n</div>\n<div id="sidebar">\n')  # base.html:54
    238      _append('\n')  # additives.html:8 (via base.html:54)
    239      if current_user:  # partial/sidebar_global.html:1 (via additives.html:8, base.html:54)
    240          _append('\n')  # partial/sidebar_global.html:2 (via additives.html:8, base.html:54)
    241          _append('<div class="upload item ')  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    242          if not current_user.left_upload_count:  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    243              _append('disabled')  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    244          _append('" data-url="/photo/upload" data-title="\xe9\x87\x87\xe9\x9b\x86\xe7\x85\xa7\xe7\x89\x87" >\n<div class="left"></div>\n<div class="center">\n')  # partial/sidebar_upload.html:5 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    245          if current_user.left_upload_count:  # partial/sidebar_upload.html:5 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    246              _append('\n\xe9\x87\x87\xe9\x9b\x86\xe7\x85\xa7\xe7\x89\x87(\xe6\x9c\xac\xe5\x91\xa8\xe8\xbf\x98\xe5\x89\xa9')  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    247              _tmp = current_user.left_upload_count  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    248              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    249              else: _tmp = _utf8(str(_tmp))  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    250              _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    251              _append(_tmp)  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    252              _append('\xe5\xbc\xa0)\n')  # partial/sidebar_upload.html:7 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    253          else:  # partial/sidebar_upload.html:7 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    254              _append('\n\xe6\x9c\xac\xe5\x91\xa8\xe7\x9a\x84\xe9\x87\x87\xe9\x9b\x86\xe4\xbd\x99\xe9\xa2\x9d\xe5\xb7\xb2\xe7\x94\xa8\xe5\xae\x8c\xe4\xba\x86\n')  # partial/sidebar_upload.html:9 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    255          _append('\n</div>\n<div class="right"></div>\n</div>\n')  # partial/sidebar_upload.html:13 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    256          _append('\n')  # partial/sidebar_global.html:3 (via additives.html:8, base.html:54)
    257          _append('<div class="box" id="panel-me">\n<div class="header"><a class="right" href="/logout">\xe7\x99\xbb\xe5\x87\xba</a>\xe6\x88\x91\xe7\x9a\x84\xe4\xbf\xa1\xe6\x81\xaf</div>\n<div class="body">\n<div class="me">\n<a class="settings item" href="/settings" data-title="\xe8\xae\xbe\xe7\xbd\xae" data-url="/settings">\xe8\xae\xbe\xe7\xbd\xae</a>\n<a href="/user/')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    258          _tmp = current_user.username  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    259          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    260          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    261          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    262          _append(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    263          _append('"><img class="avatar" src="')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    264          _tmp = get_avatar_url(current_user, 's')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    265          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    266          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    267          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    268          _append(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    269          _append('" /></a>\n<a href="/user/')  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    270          _tmp = current_user.username  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    271          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    272          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    273          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    274          _append(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    275          _append('">')  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    276          _tmp = current_user.fullname  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    277          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    278          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    279          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    280          _append(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    281          _append('</a>\n<i class="level icon-level')  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    282          _tmp = current_user.level  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    283          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    284          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    285          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    286          _append(_tmp)  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    287          _append('"></i>\n</div>\n<div class="follow">\n<div class="following item" data-title="\xe6\x88\x91\xe5\x85\xb3\xe6\xb3\xa8\xe7\x9a\x84\xe4\xba\xba" data-url="/mine/following">\n<h3 class="anchor">')  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    288          _tmp = current_user.following_count  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    289          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    290          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    291          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    292          _append(_tmp)  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    293          _append('</h3>\n<span>following</span>\n</div>\n<div class="follower item" data-title="\xe5\x85\xb3\xe6\xb3\xa8\xe6\x88\x91\xe7\x9a\x84\xe4\xba\xba" data-url="/mine/follower">\n<h3 class="anchor">')  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    294          _tmp = current_user.follower_count  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    295          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    296          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    297          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    298          _append(_tmp)  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    299          _append('</h3>\n<span>followers</span>\n</div>\n</div>\n<ul>\n<li class="item" data-url="/mine/invite" data-title="\xe9\x82\x80\xe8\xaf\xb7\xe6\x9c\x8b\xe5\x8f\x8b\xe5\x8a\xa0\xe5\x85\xa5"> <span class="num">')  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    300          _tmp = current_user.unused_invite_key_count  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    301          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    302          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    303          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    304          _append(_tmp)  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    305          _append('</span><span class="anchor">\xe9\x82\x80\xe8\xaf\xb7\xe6\x9c\x8b\xe5\x8f\x8b\xe5\x8a\xa0\xe5\x85\xa5</span></li>\n<li class="item" data-title="\xe6\x88\x91\xe6\xb7\xbb\xe5\x8a\xa0\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87" data-url="/mine/photos"> <span class="num">')  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    306          _tmp = current_user.photo_count  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    307          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    308          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    309          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    310          _append(_tmp)  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    311          _append('</span><span class="anchor">\xe6\x88\x91\xe6\xb7\xbb\xe5\x8a\xa0\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87</span></li>\n<li class="item" data-title="\xe6\x88\x91\xe5\x96\x9c\xe6\xac\xa2\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87" data-url="/mine/likes_photos"><span class="num">')  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    312          _tmp = current_user.likes_count  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    313          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    314          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    315          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    316          _append(_tmp)  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    317          _append('</span><span class="anchor">\xe6\x88\x91\xe5\x96\x9c\xe6\xac\xa2\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87</span> </li>\n</ul>\n</div>\n</div>\n')  # partial/sidebar_me.html:27 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    318          _append('\n')  # partial/sidebar_global.html:4 (via additives.html:8, base.html:54)
    319      else:  # partial/sidebar_global.html:4 (via additives.html:8, base.html:54)
    320          _append('\n')  # partial/sidebar_global.html:5 (via additives.html:8, base.html:54)
    321          _append('<div class="box" id="panel-about">\n<div class="header">\xe5\x85\xb3\xe4\xba\x8e\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</div>\n<div class="body">\n<p>\xe5\x85\xb3\xe6\xb3\xa8\xe9\xa3\x9f\xe5\x93\x81\xe5\xae\x89\xe5\x85\xa8\xef\xbc\x8c\xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe4\xb8\x96\xe7\x95\x8c</p>\n<p>\xe6\x89\x80\xe6\x9c\x89\xe9\xa3\x9f\xe5\x93\x81\xe5\x92\x8c\xe6\xb7\xbb\xe5\x8a\xa0\xe5\x89\x82\xe8\xb5\x84\xe6\x96\x99\xe6\x9d\xa5\xe8\x87\xaa\xe4\xba\x8eiearth-\xe7\x88\xb1\xe5\x9c\xb0\xe7\x90\x83\xe7\x8e\xaf\xe4\xbf\x9d\xe6\x9c\xba\xe6\x9e\x84</p>\n</div>\n</div>\n')  # partial/sidebar_about.html:8 (via partial/sidebar_global.html:5, additives.html:8, base.html:54)
    322          _append('\n')  # partial/sidebar_global.html:6 (via additives.html:8, base.html:54)
    323          _append('<div class="box" id="panel-login">\n<div class="header">\xe7\x99\xbb\xe5\x85\xa5\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</div>\n<div class="body">\n<form action="/login" method="POST">\n<div class="section">\n<input type="TEXT" name="username" placeholder="\xe7\x94\xa8\xe6\x88\xb7\xe5\x90\x8d/Email" />\n</div>\n<div class="section">\n<input type="PASSWORD" name="password" placeholder="\xe5\xaf\x86\xe7\xa0\x81" />\n</div>\n<div class="section">\n<input type="SUBMIT" value="\xe7\x99\xbb\xe5\x85\xa5" class="btn primary-btn" />\n<span class="tip">\xe4\xbc\x9a\xe8\xae\xb0\xe4\xbd\x8f\xe7\x99\xbb\xe5\x85\xa5\xe4\xb8\x80\xe4\xb8\xaa\xe6\x9c\x88</span>\n</div>\n</form>\n<div class="alert alert-info">\xe5\x86\x85\xe6\xb5\x8b\xe4\xb8\xad\xef\xbc\x8c\xe5\x8f\xaa\xe6\x8e\xa5\xe5\x8f\x97\xe9\x82\x80\xe8\xaf\xb7\xe6\xb3\xa8\xe5\x86\x8c</div>\n</div>\n</div>\n')  # partial/sidebar_login.html:19 (via partial/sidebar_global.html:6, additives.html:8, base.html:54)
    324          _append('\n')  # partial/sidebar_global.html:8 (via additives.html:8, base.html:54)
    325      _append('\n')  # partial/sidebar_global.html:10 (via additives.html:8, base.html:54)
    326      _append('<div class="box">\n<div class="header">\xe6\xb5\x8f\xe8\xa7\x88\xe9\xa3\x9f\xe5\x93\x81</div>\n<div class="body">\n<ul>\n<li class="item" data-url="/photos/hot" data-title="\xe7\x83\xad\xe9\x97\xa8\xe9\xa3\x9f\xe5\x93\x81"><span class="anchor">\xe7\x83\xad\xe9\x97\xa8\xe9\xa3\x9f\xe5\x93\x81</span></li>\n<li class="item" data-url="/photos/latest" data-title="\xe6\x9c\x80\xe6\x96\xb0\xe9\xa3\x9f\xe5\x93\x81"><span class="anchor">\xe6\x9c\x80\xe6\x96\xb0\xe9\xa3\x9f\xe5\x93\x81</span></li>\n</ul>\n</div>\n</div>\n')  # partial/sidebar_photos_nav.html:10 (via partial/sidebar_global.html:10, additives.html:8, base.html:54)
    327      _append('\n')  # partial/sidebar_global.html:11 (via additives.html:8, base.html:54)
    328      import models  # partial/sidebar_hot_searchs.html:1 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    329      _append('\n')  # partial/sidebar_hot_searchs.html:2 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    330      hot_searchs = models.Additive_Search().hot_searchs  # partial/sidebar_hot_searchs.html:2 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    331      _append('\n<div class="box" id="panel-searchs">\n<div class="header">\xe7\x83\xad\xe9\x97\xa8\xe6\x90\x9c\xe7\xb4\xa2</div>\n<div class="body">\n<ul>\n')  # partial/sidebar_hot_searchs.html:8 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    332      for search in hot_searchs:  # partial/sidebar_hot_searchs.html:8 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    333          _append('\n<li class="item" data-url="/search/')  # partial/sidebar_hot_searchs.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    334          _tmp = search  # partial/sidebar_hot_searchs.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    335          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_hot_searchs.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    336          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_hot_searchs.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    337          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_hot_searchs.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    338          _append(_tmp)  # partial/sidebar_hot_searchs.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    339          _append('"><i class="icon-search"></i><span class="anchor">')  # partial/sidebar_hot_searchs.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    340          _tmp = search  # partial/sidebar_hot_searchs.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    341          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_hot_searchs.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    342          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_hot_searchs.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    343          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_hot_searchs.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    344          _append(_tmp)  # partial/sidebar_hot_searchs.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    345          _append('</span></li>\n')  # partial/sidebar_hot_searchs.html:10 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    346      _append('\n</ul>\n</div>\n</div>\n')  # partial/sidebar_hot_searchs.html:14 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    347      _append('\n')  # partial/sidebar_global.html:12 (via additives.html:8, base.html:54)
    348      _append('\n')  # additives.html:9 (via base.html:54)
    349      _append('\n</div>\n</div>\n</div>\n<div id="footer">\n<div class="inner">\n<div class="right">\n<span class="belief">make the world a little better and easier</span>\n</div>\n<div class="left">\n<ul>\n<li><a href="/about">\xe5\x85\xb3\xe4\xba\x8e</a> <!--<span class="divider">/</span>--></li>\n<!--<li><a href="/feedback">\xe5\x8f\x8d\xe9\xa6\x88</a> <span class="divider">/</span></li>-->\n<!--<li><a href="/blog">\xe6\x97\xa5\xe5\xbf\x97</a></li>-->\n</ul>\n</div>\n</div>\n</div>\n<script type="text/javascript">\nvar _gaq = _gaq || [];\n_gaq.push([\'_setAccount\', \'UA-1281124-23\']);\n_gaq.push([\'_trackPageview\']);\n(function() {\nvar ga = document.createElement(\'script\'); ga.type = \'text/javascript\'; ga.async = true;\nga.src = (\'https:\' == document.location.protocol ? \'https://ssl\' : \'http://www\') + \'.google-analytics.com/ga.js\';\nvar s = document.getElementsByTagName(\'script\')[0]; s.parentNode.insertBefore(ga, s);\n})();\n</script>\n<!-- love your mom! -->\n</body>\n<meta name="description" content="\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - " />\n')  # base.html:89
    350      return _utf8('').join(_buffer)  # base.html:0
[E 120721 12:30:54 web:1031] Uncaught exception GET / (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.100', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cookie': 'viewed_additive_ids="\\0541\\0542\\0543\\0544\\0545"; __utma=148685175.647871982.1342707625.1342831755.1342840246.6; __utmb=148685175.27.10.1342840246; __utmc=148685175; __utmz=148685175.1342707625.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)', 'Cache-Control': 'max-age=0', 'X-Real-Ip': '192.168.0.100', 'If-None-Match': '"f6f9700d6dfdfbd05b4ac4f605c28a5839a25a94"'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "src/sites/www/handlers/home.py", line 14, in get
        return self._render('hot')
      File "src/sites/www/handlers/base.py", line 87, in _render
        current_additive = additive,
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 474, in render
        html = self.render_string(template_name, **kwargs)
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 586, in render_string
        return t.generate(**args)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 253, in generate
        return execute()
      File "additives_html.generated.py", line 330, in _execute
        hot_searchs = models.Additive_Search().hot_searchs  # partial/sidebar_hot_searchs.html:2 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
      File "/home/dk/work/python/safood/src/common/models/additive_search.py", line 22, in hot_searchs
        return hot_searchs
      File "/home/dk/work/python/safood/src/common/models/additive_search.py", line 22, in hot_searchs
        return hot_searchs
      File "/usr/lib/python2.7/bdb.py", line 48, in trace_dispatch
        return self.dispatch_line(frame)
      File "/usr/lib/python2.7/bdb.py", line 67, in dispatch_line
        if self.quitting: raise BdbQuit
    BdbQuit
[E 120721 12:30:54 web:1393] 500 GET / (127.0.0.1) 3391257.79ms
[W 120721 12:30:54 web:1393] 404 GET /favicon.ico (127.0.0.1) 3.07ms
[E 120721 12:30:54 template:256] additives.html code:
      1  def _execute():  # base.html:0
      2      _buffer = []  # base.html:0
      3      _append = _buffer.append  # base.html:0
      4      _append('<!doctype html>\n<head>\n<meta charset="UTF-8" />\n<meta content="True" name="HandheldFriendly" />\n<meta content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0; name=\'viewport\'" />\n<title>\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - \xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81')  # base.html:6
      5      _append('</title>\n<link rel="stylesheet" type="text/css" media="screen" href="/static/css/vendor/jquery.fancybox.css" />\n<link rel="stylesheet" type="text/css" media="screen" href="/static/css/main.css" />\n<link rel="shortcut icon" href="/static/img/favicon.ico" />\n<link rel="canonical" href="http://wuditoo.com/" />\n<meta name="description" content="\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - \xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81" />\n<script src="/static/js/vendor/jquery.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.history.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.fancybox.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.scrollTo.min.js" type="text/javascript"></script>\n')  # base.html:16
      6      _append('\n<script type="text/javascript">\n')  # additives.html:13 (via base.html:16)
      7      if current_additive:  # additives.html:13 (via base.html:16)
      8          _append('\nmeta_additive = {\nurl: "/additive/')  # additives.html:15 (via base.html:16)
      9          _tmp = current_additive.id  # additives.html:15 (via base.html:16)
     10          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # additives.html:15 (via base.html:16)
     11          else: _tmp = _utf8(str(_tmp))  # additives.html:15 (via base.html:16)
     12          _tmp = _utf8(xhtml_escape(_tmp))  # additives.html:15 (via base.html:16)
     13          _append(_tmp)  # additives.html:15 (via base.html:16)
     14          _append('",\nwidth: ')  # additives.html:16 (via base.html:16)
     15          _tmp = current_additive.width  # additives.html:16 (via base.html:16)
     16          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # additives.html:16 (via base.html:16)
     17          else: _tmp = _utf8(str(_tmp))  # additives.html:16 (via base.html:16)
     18          _tmp = _utf8(xhtml_escape(_tmp))  # additives.html:16 (via base.html:16)
     19          _append(_tmp)  # additives.html:16 (via base.html:16)
     20          _append(',\nheight: ')  # additives.html:17 (via base.html:16)
     21          _tmp = current_additive.height  # additives.html:17 (via base.html:16)
     22          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # additives.html:17 (via base.html:16)
     23          else: _tmp = _utf8(str(_tmp))  # additives.html:17 (via base.html:16)
     24          _tmp = _utf8(xhtml_escape(_tmp))  # additives.html:17 (via base.html:16)
     25          _append(_tmp)  # additives.html:17 (via base.html:16)
     26          _append('\n}\n')  # additives.html:19 (via base.html:16)
     27      _append('\n</script>\n')  # additives.html:21 (via base.html:16)
     28      _append('\n<script src="/static/js/main.js" type="text/javascript"></script>\n</head>\n<!--[if IE 7 ]><body class="ie7"><![endif]-->\n<!--[if gt IE 7]><body class="ie"><![endif]-->\n<!--[if !IE]><body><![endif]-->\n<div id="header">\n<div class="inner">\n<div id="logo"><a href="/">\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</a></div>\n<div id="slogon">\xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81</div>\n<div id="witticism">')  # base.html:27
     29      _tmp = home_sentence()  # base.html:27
     30      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:27
     31      else: _tmp = _utf8(str(_tmp))  # base.html:27
     32      _tmp = _utf8(xhtml_escape(_tmp))  # base.html:27
     33      _append(_tmp)  # base.html:27
     34      _append('</div>\n<!--\n<ul class="nav-right">\n</ul>\n-->\n</div>\n</div>\n<div id="container">\n<div class="inner">\n<div class="message alert alert-warn">\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0\xe5\x86\xac\xe7\x9c\xa0\xe4\xb8\xad\xef\xbc\x8c\xe8\x8b\x8f\xe9\x86\x92\xe6\x97\xb6\xe9\x97\xb4\xe5\xbe\x85\xe5\xae\x9a\xe3\x80\x82\xe8\xb0\xa2\xe8\xb0\xa2\xe6\x82\xa8\xe7\x9a\x84\xe5\x88\xb0\xe8\xae\xbf\xef\xbc\x9a\xef\xbc\x89</div>\n')  # base.html:38
     35      message = get_message()  # base.html:38
     36      _append('\n')  # base.html:39
     37      for message_type in ('error', 'success', 'info', 'warn'):  # base.html:39
     38          _append('\n')  # base.html:40
     39          if message and message_type == message[0]:  # base.html:40
     40              _append('\n<div id="')  # base.html:41
     41              _tmp = message_type  # base.html:41
     42              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     43              else: _tmp = _utf8(str(_tmp))  # base.html:41
     44              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     45              _append(_tmp)  # base.html:41
     46              _append('-message" class="message alert alert-')  # base.html:41
     47              _tmp = message_type  # base.html:41
     48              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     49              else: _tmp = _utf8(str(_tmp))  # base.html:41
     50              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     51              _append(_tmp)  # base.html:41
     52              _append('">')  # base.html:41
     53              _tmp = message[1]  # base.html:41
     54              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     55              else: _tmp = _utf8(str(_tmp))  # base.html:41
     56              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     57              _append(_tmp)  # base.html:41
     58              _append('</div>\n')  # base.html:42
     59          else:  # base.html:42
     60              _append('\n<div id="')  # base.html:43
     61              _tmp = message_type  # base.html:43
     62              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:43
     63              else: _tmp = _utf8(str(_tmp))  # base.html:43
     64              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:43
     65              _append(_tmp)  # base.html:43
     66              _append('-message" class="message alert alert-')  # base.html:43
     67              _tmp = message_type  # base.html:43
     68              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:43
     69              else: _tmp = _utf8(str(_tmp))  # base.html:43
     70              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:43
     71              _append(_tmp)  # base.html:43
     72              _append(' hide"></div>\n')  # base.html:44
     73          _append('\n')  # base.html:45
     74      _append('\n')  # base.html:47
     75      _append('\n<div id="main">\n')  # base.html:50
     76      _append('\n')  # additives.html:4 (via base.html:50)
     77      _append('<div class="box" id="additives">\n<div class="header">')  # partial/additives.html:2 (via additives.html:4, base.html:50)
     78      _tmp = additives_title  # partial/additives.html:2 (via additives.html:4, base.html:50)
     79      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:2 (via additives.html:4, base.html:50)
     80      else: _tmp = _utf8(str(_tmp))  # partial/additives.html:2 (via additives.html:4, base.html:50)
     81      _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:2 (via additives.html:4, base.html:50)
     82      _append(_tmp)  # partial/additives.html:2 (via additives.html:4, base.html:50)
     83      _append('</div>\n<div class="body main ul">\n')  # partial/additives.html:4 (via additives.html:4, base.html:50)
     84      for index, additive in enumerate(additives):  # partial/additives.html:4 (via additives.html:4, base.html:50)
     85          _append('\n')  # partial/additives.html:5 (via additives.html:4, base.html:50)
     86          creator = additive.creator  # partial/additives.html:5 (via additives.html:4, base.html:50)
     87          _append('\n<div class="additive-item">\n<div class="header">\n<a class="avatar" href="/additive/')  # partial/additives.html:8 (via additives.html:4, base.html:50)
     88          _tmp = additive.id  # partial/additives.html:8 (via additives.html:4, base.html:50)
     89          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     90          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     91          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     92          _append(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     93          _append('"><img src="')  # partial/additives.html:8 (via additives.html:4, base.html:50)
     94          _tmp = get_avatar_url(creator, 's')  # partial/additives.html:8 (via additives.html:4, base.html:50)
     95          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     96          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     97          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     98          _append(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     99          _append('" /></a> ')  # partial/additives.html:8 (via additives.html:4, base.html:50)
    100          _tmp = additive.name  # partial/additives.html:8 (via additives.html:4, base.html:50)
    101          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
    102          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
    103          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
    104          _append(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
    105          _append('\n</div>\n<div class="body">\n<div class="additive_alias">\xe5\x85\xb6\xe4\xbb\x96\xe5\x90\x8d\xe7\xa7\xb0:')  # partial/additives.html:11 (via additives.html:4, base.html:50)
    106          _tmp = additive.alias  # partial/additives.html:11 (via additives.html:4, base.html:50)
    107          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:11 (via additives.html:4, base.html:50)
    108          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:11 (via additives.html:4, base.html:50)
    109          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:11 (via additives.html:4, base.html:50)
    110          _append(_tmp)  # partial/additives.html:11 (via additives.html:4, base.html:50)
    111          _append('</div>\n<div class="additive_cns">CNS\xe5\x8f\xb7:')  # partial/additives.html:12 (via additives.html:4, base.html:50)
    112          _tmp = additive.cns  # partial/additives.html:12 (via additives.html:4, base.html:50)
    113          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:12 (via additives.html:4, base.html:50)
    114          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:12 (via additives.html:4, base.html:50)
    115          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:12 (via additives.html:4, base.html:50)
    116          _append(_tmp)  # partial/additives.html:12 (via additives.html:4, base.html:50)
    117          _append('</div>\n<div class="additive_ins">INS\xe5\x8f\xb7:')  # partial/additives.html:13 (via additives.html:4, base.html:50)
    118          _tmp = additive.ins  # partial/additives.html:13 (via additives.html:4, base.html:50)
    119          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:13 (via additives.html:4, base.html:50)
    120          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:13 (via additives.html:4, base.html:50)
    121          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:13 (via additives.html:4, base.html:50)
    122          _append(_tmp)  # partial/additives.html:13 (via additives.html:4, base.html:50)
    123          _append('</div>\n<div class="additive_effect">\xe5\x8a\x9f\xe8\x83\xbd:')  # partial/additives.html:14 (via additives.html:4, base.html:50)
    124          _tmp = additive.effect  # partial/additives.html:14 (via additives.html:4, base.html:50)
    125          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:14 (via additives.html:4, base.html:50)
    126          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:14 (via additives.html:4, base.html:50)
    127          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:14 (via additives.html:4, base.html:50)
    128          _append(_tmp)  # partial/additives.html:14 (via additives.html:4, base.html:50)
    129          _append('</div>\n</div>\n<div class="footer">\n<span class="meta">\n<ul>\n<li><i class="icon-view"></i> ')  # partial/additives.html:19 (via additives.html:4, base.html:50)
    130          _tmp = additive.views_count  # partial/additives.html:19 (via additives.html:4, base.html:50)
    131          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:19 (via additives.html:4, base.html:50)
    132          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:19 (via additives.html:4, base.html:50)
    133          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:19 (via additives.html:4, base.html:50)
    134          _append(_tmp)  # partial/additives.html:19 (via additives.html:4, base.html:50)
    135          _append('</li>\n</ul>\n</span>\n<span class="created">\n')  # partial/additives.html:23 (via additives.html:4, base.html:50)
    136          _tmp = timesince(additive.created)  # partial/additives.html:23 (via additives.html:4, base.html:50)
    137          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:23 (via additives.html:4, base.html:50)
    138          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:23 (via additives.html:4, base.html:50)
    139          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:23 (via additives.html:4, base.html:50)
    140          _append(_tmp)  # partial/additives.html:23 (via additives.html:4, base.html:50)
    141          _append('\n</span>\n</div>\n</div>\n')  # partial/additives.html:27 (via additives.html:4, base.html:50)
    142          _append('\n')  # partial/additives.html:28 (via additives.html:4, base.html:50)
    143          if index > 0 and (index + 1) % 3 == 0:  # partial/additives.html:28 (via additives.html:4, base.html:50)
    144              _append('\n<div class="clearfix"></div>\n')  # partial/additives.html:30 (via additives.html:4, base.html:50)
    145          _append('\n')  # partial/additives.html:32 (via additives.html:4, base.html:50)
    146      _append('\n')  # partial/additives.html:33 (via additives.html:4, base.html:50)
    147      page_type = 'additives'  # partial/additives.html:33 (via additives.html:4, base.html:50)
    148      _append('\n')  # partial/additives.html:34 (via additives.html:4, base.html:50)
    149      _append('\n')  # partial/pagination.html:3 (via partial/additives.html:34, additives.html:4, base.html:50)
    150      from macros.macro import ADDITIVES_PER_PAGE, USERS_PER_PAGE  # partial/pagination.html:3 (via partial/additives.html:34, additives.html:4, base.html:50)
    151      _append('\n')  # partial/pagination.html:4 (via partial/additives.html:34, additives.html:4, base.html:50)
    152      import math  # partial/pagination.html:4 (via partial/additives.html:34, additives.html:4, base.html:50)
    153      _append('\n')  # partial/pagination.html:6 (via partial/additives.html:34, additives.html:4, base.html:50)
    154      if page_type == 'additives':  # partial/pagination.html:6 (via partial/additives.html:34, additives.html:4, base.html:50)
    155          _append('\n')  # partial/pagination.html:7 (via partial/additives.html:34, additives.html:4, base.html:50)
    156          items_per_page = ADDITIVES_PER_PAGE  # partial/pagination.html:7 (via partial/additives.html:34, additives.html:4, base.html:50)
    157          _append('\n')  # partial/pagination.html:8 (via partial/additives.html:34, additives.html:4, base.html:50)
    158      else:  # partial/pagination.html:8 (via partial/additives.html:34, additives.html:4, base.html:50)
    159          _append('\n')  # partial/pagination.html:9 (via partial/additives.html:34, additives.html:4, base.html:50)
    160          items_per_page = USERS_PER_PAGE  # partial/pagination.html:9 (via partial/additives.html:34, additives.html:4, base.html:50)
    161          _append('\n')  # partial/pagination.html:10 (via partial/additives.html:34, additives.html:4, base.html:50)
    162      _append('\n')  # partial/pagination.html:12 (via partial/additives.html:34, additives.html:4, base.html:50)
    163      total_page = int(math.ceil(float(total_items) / items_per_page))  # partial/pagination.html:12 (via partial/additives.html:34, additives.html:4, base.html:50)
    164      _append('\n')  # partial/pagination.html:14 (via partial/additives.html:34, additives.html:4, base.html:50)
    165      current_page = int(handler.get_argument('page', 1))  # partial/pagination.html:14 (via partial/additives.html:34, additives.html:4, base.html:50)
    166      _append('\n')  # partial/pagination.html:16 (via partial/additives.html:34, additives.html:4, base.html:50)
    167      if current_page <=6:  # partial/pagination.html:16 (via partial/additives.html:34, additives.html:4, base.html:50)
    168          _append('\n')  # partial/pagination.html:17 (via partial/additives.html:34, additives.html:4, base.html:50)
    169          end_page = min(total_page, 10)  # partial/pagination.html:17 (via partial/additives.html:34, additives.html:4, base.html:50)
    170          _append('\n')  # partial/pagination.html:18 (via partial/additives.html:34, additives.html:4, base.html:50)
    171          start_page = 1  # partial/pagination.html:18 (via partial/additives.html:34, additives.html:4, base.html:50)
    172          _append('\n')  # partial/pagination.html:19 (via partial/additives.html:34, additives.html:4, base.html:50)
    173      else:  # partial/pagination.html:19 (via partial/additives.html:34, additives.html:4, base.html:50)
    174          _append('\n')  # partial/pagination.html:20 (via partial/additives.html:34, additives.html:4, base.html:50)
    175          end_page = min(total_page, current_page+4)  # partial/pagination.html:20 (via partial/additives.html:34, additives.html:4, base.html:50)
    176          _append('\n')  # partial/pagination.html:21 (via partial/additives.html:34, additives.html:4, base.html:50)
    177          start_page = current_page - 5  # partial/pagination.html:21 (via partial/additives.html:34, additives.html:4, base.html:50)
    178          _append('\n')  # partial/pagination.html:22 (via partial/additives.html:34, additives.html:4, base.html:50)
    179      _append('\n')  # partial/pagination.html:24 (via partial/additives.html:34, additives.html:4, base.html:50)
    180      if total_page > 1:  # partial/pagination.html:24 (via partial/additives.html:34, additives.html:4, base.html:50)
    181          _append('\n<div class="pagination">\n<ul>\n')  # partial/pagination.html:27 (via partial/additives.html:34, additives.html:4, base.html:50)
    182          if current_page == 1:  # partial/pagination.html:27 (via partial/additives.html:34, additives.html:4, base.html:50)
    183              _append('\n<li class="disabled">\xe2\x86\x90 </li>\n')  # partial/pagination.html:29 (via partial/additives.html:34, additives.html:4, base.html:50)
    184          else:  # partial/pagination.html:29 (via partial/additives.html:34, additives.html:4, base.html:50)
    185              _append('\n<li><a href="')  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    186              _tmp = page_path  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    187              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    188              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    189              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    190              _append(_tmp)  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    191              _append('?page=1">\xe2\x86\x90 </a></li>\n')  # partial/pagination.html:31 (via partial/additives.html:34, additives.html:4, base.html:50)
    192          _append('\n')  # partial/pagination.html:33 (via partial/additives.html:34, additives.html:4, base.html:50)
    193          for i in range(start_page, end_page + 1):  # partial/pagination.html:33 (via partial/additives.html:34, additives.html:4, base.html:50)
    194              _append('\n<li ')  # partial/pagination.html:34 (via partial/additives.html:34, additives.html:4, base.html:50)
    195              if current_page == i:  # partial/pagination.html:34 (via partial/additives.html:34, additives.html:4, base.html:50)
    196                  _append('class="active"')  # partial/pagination.html:34 (via partial/additives.html:34, additives.html:4, base.html:50)
    197              _append('>\n<a href="')  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    198              _tmp = page_path  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    199              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    200              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    201              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    202              _append(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    203              _append('?page=')  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    204              _tmp = i  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    205              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    206              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    207              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    208              _append(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    209              _append('">')  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    210              _tmp = i  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    211              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    212              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    213              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    214              _append(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    215              _append('</a>\n</li>\n')  # partial/pagination.html:37 (via partial/additives.html:34, additives.html:4, base.html:50)
    216          _append('\n')  # partial/pagination.html:39 (via partial/additives.html:34, additives.html:4, base.html:50)
    217          if current_page == total_page:  # partial/pagination.html:39 (via partial/additives.html:34, additives.html:4, base.html:50)
    218              _append('\n<li class="disabled">\xe2\x86\x92 </li>\n')  # partial/pagination.html:41 (via partial/additives.html:34, additives.html:4, base.html:50)
    219          else:  # partial/pagination.html:41 (via partial/additives.html:34, additives.html:4, base.html:50)
    220              _append('\n<li><a href="')  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    221              _tmp = page_path  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    222              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    223              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    224              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    225              _append(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    226              _append('?page=')  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    227              _tmp = current_page+1  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    228              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    229              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    230              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    231              _append(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    232              _append('">\xe2\x86\x92 </a></li>\n')  # partial/pagination.html:43 (via partial/additives.html:34, additives.html:4, base.html:50)
    233          _append('\n</ul>\n</div>\n')  # partial/pagination.html:46 (via partial/additives.html:34, additives.html:4, base.html:50)
    234      _append('\n')  # partial/pagination.html:47 (via partial/additives.html:34, additives.html:4, base.html:50)
    235      _append('\n</div>\n</div>\n')  # partial/additives.html:37 (via additives.html:4, base.html:50)
    236      _append('\n')  # additives.html:5 (via base.html:50)
    237      _append('\n</div>\n<div id="sidebar">\n')  # base.html:54
    238      _append('\n')  # additives.html:8 (via base.html:54)
    239      if current_user:  # partial/sidebar_global.html:1 (via additives.html:8, base.html:54)
    240          _append('\n')  # partial/sidebar_global.html:2 (via additives.html:8, base.html:54)
    241          _append('<div class="upload item ')  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    242          if not current_user.left_upload_count:  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    243              _append('disabled')  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    244          _append('" data-url="/photo/upload" data-title="\xe9\x87\x87\xe9\x9b\x86\xe7\x85\xa7\xe7\x89\x87" >\n<div class="left"></div>\n<div class="center">\n')  # partial/sidebar_upload.html:5 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    245          if current_user.left_upload_count:  # partial/sidebar_upload.html:5 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    246              _append('\n\xe9\x87\x87\xe9\x9b\x86\xe7\x85\xa7\xe7\x89\x87(\xe6\x9c\xac\xe5\x91\xa8\xe8\xbf\x98\xe5\x89\xa9')  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    247              _tmp = current_user.left_upload_count  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    248              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    249              else: _tmp = _utf8(str(_tmp))  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    250              _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    251              _append(_tmp)  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    252              _append('\xe5\xbc\xa0)\n')  # partial/sidebar_upload.html:7 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    253          else:  # partial/sidebar_upload.html:7 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    254              _append('\n\xe6\x9c\xac\xe5\x91\xa8\xe7\x9a\x84\xe9\x87\x87\xe9\x9b\x86\xe4\xbd\x99\xe9\xa2\x9d\xe5\xb7\xb2\xe7\x94\xa8\xe5\xae\x8c\xe4\xba\x86\n')  # partial/sidebar_upload.html:9 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    255          _append('\n</div>\n<div class="right"></div>\n</div>\n')  # partial/sidebar_upload.html:13 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    256          _append('\n')  # partial/sidebar_global.html:3 (via additives.html:8, base.html:54)
    257          _append('<div class="box" id="panel-me">\n<div class="header"><a class="right" href="/logout">\xe7\x99\xbb\xe5\x87\xba</a>\xe6\x88\x91\xe7\x9a\x84\xe4\xbf\xa1\xe6\x81\xaf</div>\n<div class="body">\n<div class="me">\n<a class="settings item" href="/settings" data-title="\xe8\xae\xbe\xe7\xbd\xae" data-url="/settings">\xe8\xae\xbe\xe7\xbd\xae</a>\n<a href="/user/')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    258          _tmp = current_user.username  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    259          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    260          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    261          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    262          _append(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    263          _append('"><img class="avatar" src="')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    264          _tmp = get_avatar_url(current_user, 's')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    265          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    266          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    267          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    268          _append(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    269          _append('" /></a>\n<a href="/user/')  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    270          _tmp = current_user.username  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    271          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    272          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    273          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    274          _append(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    275          _append('">')  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    276          _tmp = current_user.fullname  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    277          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    278          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    279          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    280          _append(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    281          _append('</a>\n<i class="level icon-level')  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    282          _tmp = current_user.level  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    283          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    284          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    285          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    286          _append(_tmp)  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    287          _append('"></i>\n</div>\n<div class="follow">\n<div class="following item" data-title="\xe6\x88\x91\xe5\x85\xb3\xe6\xb3\xa8\xe7\x9a\x84\xe4\xba\xba" data-url="/mine/following">\n<h3 class="anchor">')  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    288          _tmp = current_user.following_count  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    289          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    290          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    291          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    292          _append(_tmp)  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    293          _append('</h3>\n<span>following</span>\n</div>\n<div class="follower item" data-title="\xe5\x85\xb3\xe6\xb3\xa8\xe6\x88\x91\xe7\x9a\x84\xe4\xba\xba" data-url="/mine/follower">\n<h3 class="anchor">')  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    294          _tmp = current_user.follower_count  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    295          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    296          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    297          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    298          _append(_tmp)  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    299          _append('</h3>\n<span>followers</span>\n</div>\n</div>\n<ul>\n<li class="item" data-url="/mine/invite" data-title="\xe9\x82\x80\xe8\xaf\xb7\xe6\x9c\x8b\xe5\x8f\x8b\xe5\x8a\xa0\xe5\x85\xa5"> <span class="num">')  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    300          _tmp = current_user.unused_invite_key_count  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    301          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    302          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    303          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    304          _append(_tmp)  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    305          _append('</span><span class="anchor">\xe9\x82\x80\xe8\xaf\xb7\xe6\x9c\x8b\xe5\x8f\x8b\xe5\x8a\xa0\xe5\x85\xa5</span></li>\n<li class="item" data-title="\xe6\x88\x91\xe6\xb7\xbb\xe5\x8a\xa0\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87" data-url="/mine/photos"> <span class="num">')  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    306          _tmp = current_user.photo_count  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    307          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    308          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    309          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    310          _append(_tmp)  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    311          _append('</span><span class="anchor">\xe6\x88\x91\xe6\xb7\xbb\xe5\x8a\xa0\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87</span></li>\n<li class="item" data-title="\xe6\x88\x91\xe5\x96\x9c\xe6\xac\xa2\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87" data-url="/mine/likes_photos"><span class="num">')  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    312          _tmp = current_user.likes_count  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    313          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    314          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    315          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    316          _append(_tmp)  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    317          _append('</span><span class="anchor">\xe6\x88\x91\xe5\x96\x9c\xe6\xac\xa2\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87</span> </li>\n</ul>\n</div>\n</div>\n')  # partial/sidebar_me.html:27 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    318          _append('\n')  # partial/sidebar_global.html:4 (via additives.html:8, base.html:54)
    319      else:  # partial/sidebar_global.html:4 (via additives.html:8, base.html:54)
    320          _append('\n')  # partial/sidebar_global.html:5 (via additives.html:8, base.html:54)
    321          _append('<div class="box" id="panel-about">\n<div class="header">\xe5\x85\xb3\xe4\xba\x8e\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</div>\n<div class="body">\n<p>\xe5\x85\xb3\xe6\xb3\xa8\xe9\xa3\x9f\xe5\x93\x81\xe5\xae\x89\xe5\x85\xa8\xef\xbc\x8c\xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe4\xb8\x96\xe7\x95\x8c</p>\n<p>\xe6\x89\x80\xe6\x9c\x89\xe9\xa3\x9f\xe5\x93\x81\xe5\x92\x8c\xe6\xb7\xbb\xe5\x8a\xa0\xe5\x89\x82\xe8\xb5\x84\xe6\x96\x99\xe6\x9d\xa5\xe8\x87\xaa\xe4\xba\x8eiearth-\xe7\x88\xb1\xe5\x9c\xb0\xe7\x90\x83\xe7\x8e\xaf\xe4\xbf\x9d\xe6\x9c\xba\xe6\x9e\x84</p>\n</div>\n</div>\n')  # partial/sidebar_about.html:8 (via partial/sidebar_global.html:5, additives.html:8, base.html:54)
    322          _append('\n')  # partial/sidebar_global.html:6 (via additives.html:8, base.html:54)
    323          _append('<div class="box" id="panel-login">\n<div class="header">\xe7\x99\xbb\xe5\x85\xa5\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</div>\n<div class="body">\n<form action="/login" method="POST">\n<div class="section">\n<input type="TEXT" name="username" placeholder="\xe7\x94\xa8\xe6\x88\xb7\xe5\x90\x8d/Email" />\n</div>\n<div class="section">\n<input type="PASSWORD" name="password" placeholder="\xe5\xaf\x86\xe7\xa0\x81" />\n</div>\n<div class="section">\n<input type="SUBMIT" value="\xe7\x99\xbb\xe5\x85\xa5" class="btn primary-btn" />\n<span class="tip">\xe4\xbc\x9a\xe8\xae\xb0\xe4\xbd\x8f\xe7\x99\xbb\xe5\x85\xa5\xe4\xb8\x80\xe4\xb8\xaa\xe6\x9c\x88</span>\n</div>\n</form>\n<div class="alert alert-info">\xe5\x86\x85\xe6\xb5\x8b\xe4\xb8\xad\xef\xbc\x8c\xe5\x8f\xaa\xe6\x8e\xa5\xe5\x8f\x97\xe9\x82\x80\xe8\xaf\xb7\xe6\xb3\xa8\xe5\x86\x8c</div>\n</div>\n</div>\n')  # partial/sidebar_login.html:19 (via partial/sidebar_global.html:6, additives.html:8, base.html:54)
    324          _append('\n')  # partial/sidebar_global.html:8 (via additives.html:8, base.html:54)
    325      _append('\n')  # partial/sidebar_global.html:10 (via additives.html:8, base.html:54)
    326      _append('<div class="box">\n<div class="header">\xe6\xb5\x8f\xe8\xa7\x88\xe9\xa3\x9f\xe5\x93\x81</div>\n<div class="body">\n<ul>\n<li class="item" data-url="/photos/hot" data-title="\xe7\x83\xad\xe9\x97\xa8\xe9\xa3\x9f\xe5\x93\x81"><span class="anchor">\xe7\x83\xad\xe9\x97\xa8\xe9\xa3\x9f\xe5\x93\x81</span></li>\n<li class="item" data-url="/photos/latest" data-title="\xe6\x9c\x80\xe6\x96\xb0\xe9\xa3\x9f\xe5\x93\x81"><span class="anchor">\xe6\x9c\x80\xe6\x96\xb0\xe9\xa3\x9f\xe5\x93\x81</span></li>\n</ul>\n</div>\n</div>\n')  # partial/sidebar_photos_nav.html:10 (via partial/sidebar_global.html:10, additives.html:8, base.html:54)
    327      _append('\n')  # partial/sidebar_global.html:11 (via additives.html:8, base.html:54)
    328      import models  # partial/sidebar_hot_searchs.html:1 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    329      _append('\n')  # partial/sidebar_hot_searchs.html:2 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    330      hot_searchs = models.Additive_Search().hot_searchs  # partial/sidebar_hot_searchs.html:2 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    331      _append('\n<div class="box" id="panel-searchs">\n<div class="header">\xe7\x83\xad\xe9\x97\xa8\xe6\x90\x9c\xe7\xb4\xa2</div>\n<div class="body">\n<ul>\n')  # partial/sidebar_hot_searchs.html:8 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    332      for search in hot_searchs:  # partial/sidebar_hot_searchs.html:8 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    333          _append('\n<li class="item" data-url="/search/')  # partial/sidebar_hot_searchs.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    334          _tmp = search.search  # partial/sidebar_hot_searchs.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    335          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_hot_searchs.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    336          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_hot_searchs.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    337          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_hot_searchs.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    338          _append(_tmp)  # partial/sidebar_hot_searchs.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    339          _append('"><i class="icon-search"></i><span class="anchor">')  # partial/sidebar_hot_searchs.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    340          _tmp = search.search  # partial/sidebar_hot_searchs.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    341          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_hot_searchs.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    342          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_hot_searchs.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    343          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_hot_searchs.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    344          _append(_tmp)  # partial/sidebar_hot_searchs.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    345          _append('</span></li>\n')  # partial/sidebar_hot_searchs.html:10 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    346      _append('\n</ul>\n</div>\n</div>\n')  # partial/sidebar_hot_searchs.html:14 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    347      _append('\n')  # partial/sidebar_global.html:12 (via additives.html:8, base.html:54)
    348      _append('\n')  # additives.html:9 (via base.html:54)
    349      _append('\n</div>\n</div>\n</div>\n<div id="footer">\n<div class="inner">\n<div class="right">\n<span class="belief">make the world a little better and easier</span>\n</div>\n<div class="left">\n<ul>\n<li><a href="/about">\xe5\x85\xb3\xe4\xba\x8e</a> <!--<span class="divider">/</span>--></li>\n<!--<li><a href="/feedback">\xe5\x8f\x8d\xe9\xa6\x88</a> <span class="divider">/</span></li>-->\n<!--<li><a href="/blog">\xe6\x97\xa5\xe5\xbf\x97</a></li>-->\n</ul>\n</div>\n</div>\n</div>\n<script type="text/javascript">\nvar _gaq = _gaq || [];\n_gaq.push([\'_setAccount\', \'UA-1281124-23\']);\n_gaq.push([\'_trackPageview\']);\n(function() {\nvar ga = document.createElement(\'script\'); ga.type = \'text/javascript\'; ga.async = true;\nga.src = (\'https:\' == document.location.protocol ? \'https://ssl\' : \'http://www\') + \'.google-analytics.com/ga.js\';\nvar s = document.getElementsByTagName(\'script\')[0]; s.parentNode.insertBefore(ga, s);\n})();\n</script>\n<!-- love your mom! -->\n</body>\n<meta name="description" content="\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - " />\n')  # base.html:89
    350      return _utf8('').join(_buffer)  # base.html:0
[E 120721 12:30:54 web:1031] Uncaught exception GET / (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.100', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cookie': 'viewed_additive_ids="\\0541\\0542\\0543\\0544\\0545"; __utma=148685175.647871982.1342707625.1342831755.1342840246.6; __utmc=148685175; __utmz=148685175.1342707625.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)', 'Cache-Control': 'max-age=0', 'X-Real-Ip': '192.168.0.100'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "src/sites/www/handlers/home.py", line 14, in get
        return self._render('hot')
      File "src/sites/www/handlers/base.py", line 87, in _render
        current_additive = additive,
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 474, in render
        html = self.render_string(template_name, **kwargs)
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 586, in render_string
        return t.generate(**args)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 253, in generate
        return execute()
      File "additives_html.generated.py", line 334, in _execute
        _tmp = search.search  # partial/sidebar_hot_searchs.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    AttributeError: Could not locate column in row for column 'search'
[E 120721 12:30:54 web:1393] 500 GET / (127.0.0.1) 142.37ms
[E 120721 12:31:05 template:256] additives.html code:
      1  def _execute():  # base.html:0
      2      _buffer = []  # base.html:0
      3      _append = _buffer.append  # base.html:0
      4      _append('<!doctype html>\n<head>\n<meta charset="UTF-8" />\n<meta content="True" name="HandheldFriendly" />\n<meta content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0; name=\'viewport\'" />\n<title>\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - \xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81')  # base.html:6
      5      _append('</title>\n<link rel="stylesheet" type="text/css" media="screen" href="/static/css/vendor/jquery.fancybox.css" />\n<link rel="stylesheet" type="text/css" media="screen" href="/static/css/main.css" />\n<link rel="shortcut icon" href="/static/img/favicon.ico" />\n<link rel="canonical" href="http://wuditoo.com/" />\n<meta name="description" content="\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - \xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81" />\n<script src="/static/js/vendor/jquery.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.history.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.fancybox.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.scrollTo.min.js" type="text/javascript"></script>\n')  # base.html:16
      6      _append('\n<script type="text/javascript">\n')  # additives.html:13 (via base.html:16)
      7      if current_additive:  # additives.html:13 (via base.html:16)
      8          _append('\nmeta_additive = {\nurl: "/additive/')  # additives.html:15 (via base.html:16)
      9          _tmp = current_additive.id  # additives.html:15 (via base.html:16)
     10          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # additives.html:15 (via base.html:16)
     11          else: _tmp = _utf8(str(_tmp))  # additives.html:15 (via base.html:16)
     12          _tmp = _utf8(xhtml_escape(_tmp))  # additives.html:15 (via base.html:16)
     13          _append(_tmp)  # additives.html:15 (via base.html:16)
     14          _append('",\nwidth: ')  # additives.html:16 (via base.html:16)
     15          _tmp = current_additive.width  # additives.html:16 (via base.html:16)
     16          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # additives.html:16 (via base.html:16)
     17          else: _tmp = _utf8(str(_tmp))  # additives.html:16 (via base.html:16)
     18          _tmp = _utf8(xhtml_escape(_tmp))  # additives.html:16 (via base.html:16)
     19          _append(_tmp)  # additives.html:16 (via base.html:16)
     20          _append(',\nheight: ')  # additives.html:17 (via base.html:16)
     21          _tmp = current_additive.height  # additives.html:17 (via base.html:16)
     22          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # additives.html:17 (via base.html:16)
     23          else: _tmp = _utf8(str(_tmp))  # additives.html:17 (via base.html:16)
     24          _tmp = _utf8(xhtml_escape(_tmp))  # additives.html:17 (via base.html:16)
     25          _append(_tmp)  # additives.html:17 (via base.html:16)
     26          _append('\n}\n')  # additives.html:19 (via base.html:16)
     27      _append('\n</script>\n')  # additives.html:21 (via base.html:16)
     28      _append('\n<script src="/static/js/main.js" type="text/javascript"></script>\n</head>\n<!--[if IE 7 ]><body class="ie7"><![endif]-->\n<!--[if gt IE 7]><body class="ie"><![endif]-->\n<!--[if !IE]><body><![endif]-->\n<div id="header">\n<div class="inner">\n<div id="logo"><a href="/">\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</a></div>\n<div id="slogon">\xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81</div>\n<div id="witticism">')  # base.html:27
     29      _tmp = home_sentence()  # base.html:27
     30      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:27
     31      else: _tmp = _utf8(str(_tmp))  # base.html:27
     32      _tmp = _utf8(xhtml_escape(_tmp))  # base.html:27
     33      _append(_tmp)  # base.html:27
     34      _append('</div>\n<!--\n<ul class="nav-right">\n</ul>\n-->\n</div>\n</div>\n<div id="container">\n<div class="inner">\n<div class="message alert alert-warn">\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0\xe5\x86\xac\xe7\x9c\xa0\xe4\xb8\xad\xef\xbc\x8c\xe8\x8b\x8f\xe9\x86\x92\xe6\x97\xb6\xe9\x97\xb4\xe5\xbe\x85\xe5\xae\x9a\xe3\x80\x82\xe8\xb0\xa2\xe8\xb0\xa2\xe6\x82\xa8\xe7\x9a\x84\xe5\x88\xb0\xe8\xae\xbf\xef\xbc\x9a\xef\xbc\x89</div>\n')  # base.html:38
     35      message = get_message()  # base.html:38
     36      _append('\n')  # base.html:39
     37      for message_type in ('error', 'success', 'info', 'warn'):  # base.html:39
     38          _append('\n')  # base.html:40
     39          if message and message_type == message[0]:  # base.html:40
     40              _append('\n<div id="')  # base.html:41
     41              _tmp = message_type  # base.html:41
     42              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     43              else: _tmp = _utf8(str(_tmp))  # base.html:41
     44              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     45              _append(_tmp)  # base.html:41
     46              _append('-message" class="message alert alert-')  # base.html:41
     47              _tmp = message_type  # base.html:41
     48              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     49              else: _tmp = _utf8(str(_tmp))  # base.html:41
     50              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     51              _append(_tmp)  # base.html:41
     52              _append('">')  # base.html:41
     53              _tmp = message[1]  # base.html:41
     54              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     55              else: _tmp = _utf8(str(_tmp))  # base.html:41
     56              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     57              _append(_tmp)  # base.html:41
     58              _append('</div>\n')  # base.html:42
     59          else:  # base.html:42
     60              _append('\n<div id="')  # base.html:43
     61              _tmp = message_type  # base.html:43
     62              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:43
     63              else: _tmp = _utf8(str(_tmp))  # base.html:43
     64              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:43
     65              _append(_tmp)  # base.html:43
     66              _append('-message" class="message alert alert-')  # base.html:43
     67              _tmp = message_type  # base.html:43
     68              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:43
     69              else: _tmp = _utf8(str(_tmp))  # base.html:43
     70              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:43
     71              _append(_tmp)  # base.html:43
     72              _append(' hide"></div>\n')  # base.html:44
     73          _append('\n')  # base.html:45
     74      _append('\n')  # base.html:47
     75      _append('\n<div id="main">\n')  # base.html:50
     76      _append('\n')  # additives.html:4 (via base.html:50)
     77      _append('<div class="box" id="additives">\n<div class="header">')  # partial/additives.html:2 (via additives.html:4, base.html:50)
     78      _tmp = additives_title  # partial/additives.html:2 (via additives.html:4, base.html:50)
     79      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:2 (via additives.html:4, base.html:50)
     80      else: _tmp = _utf8(str(_tmp))  # partial/additives.html:2 (via additives.html:4, base.html:50)
     81      _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:2 (via additives.html:4, base.html:50)
     82      _append(_tmp)  # partial/additives.html:2 (via additives.html:4, base.html:50)
     83      _append('</div>\n<div class="body main ul">\n')  # partial/additives.html:4 (via additives.html:4, base.html:50)
     84      for index, additive in enumerate(additives):  # partial/additives.html:4 (via additives.html:4, base.html:50)
     85          _append('\n')  # partial/additives.html:5 (via additives.html:4, base.html:50)
     86          creator = additive.creator  # partial/additives.html:5 (via additives.html:4, base.html:50)
     87          _append('\n<div class="additive-item">\n<div class="header">\n<a class="avatar" href="/additive/')  # partial/additives.html:8 (via additives.html:4, base.html:50)
     88          _tmp = additive.id  # partial/additives.html:8 (via additives.html:4, base.html:50)
     89          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     90          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     91          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     92          _append(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     93          _append('"><img src="')  # partial/additives.html:8 (via additives.html:4, base.html:50)
     94          _tmp = get_avatar_url(creator, 's')  # partial/additives.html:8 (via additives.html:4, base.html:50)
     95          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     96          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     97          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     98          _append(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     99          _append('" /></a> ')  # partial/additives.html:8 (via additives.html:4, base.html:50)
    100          _tmp = additive.name  # partial/additives.html:8 (via additives.html:4, base.html:50)
    101          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
    102          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
    103          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
    104          _append(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
    105          _append('\n</div>\n<div class="body">\n<div class="additive_alias">\xe5\x85\xb6\xe4\xbb\x96\xe5\x90\x8d\xe7\xa7\xb0:')  # partial/additives.html:11 (via additives.html:4, base.html:50)
    106          _tmp = additive.alias  # partial/additives.html:11 (via additives.html:4, base.html:50)
    107          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:11 (via additives.html:4, base.html:50)
    108          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:11 (via additives.html:4, base.html:50)
    109          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:11 (via additives.html:4, base.html:50)
    110          _append(_tmp)  # partial/additives.html:11 (via additives.html:4, base.html:50)
    111          _append('</div>\n<div class="additive_cns">CNS\xe5\x8f\xb7:')  # partial/additives.html:12 (via additives.html:4, base.html:50)
    112          _tmp = additive.cns  # partial/additives.html:12 (via additives.html:4, base.html:50)
    113          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:12 (via additives.html:4, base.html:50)
    114          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:12 (via additives.html:4, base.html:50)
    115          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:12 (via additives.html:4, base.html:50)
    116          _append(_tmp)  # partial/additives.html:12 (via additives.html:4, base.html:50)
    117          _append('</div>\n<div class="additive_ins">INS\xe5\x8f\xb7:')  # partial/additives.html:13 (via additives.html:4, base.html:50)
    118          _tmp = additive.ins  # partial/additives.html:13 (via additives.html:4, base.html:50)
    119          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:13 (via additives.html:4, base.html:50)
    120          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:13 (via additives.html:4, base.html:50)
    121          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:13 (via additives.html:4, base.html:50)
    122          _append(_tmp)  # partial/additives.html:13 (via additives.html:4, base.html:50)
    123          _append('</div>\n<div class="additive_effect">\xe5\x8a\x9f\xe8\x83\xbd:')  # partial/additives.html:14 (via additives.html:4, base.html:50)
    124          _tmp = additive.effect  # partial/additives.html:14 (via additives.html:4, base.html:50)
    125          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:14 (via additives.html:4, base.html:50)
    126          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:14 (via additives.html:4, base.html:50)
    127          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:14 (via additives.html:4, base.html:50)
    128          _append(_tmp)  # partial/additives.html:14 (via additives.html:4, base.html:50)
    129          _append('</div>\n</div>\n<div class="footer">\n<span class="meta">\n<ul>\n<li><i class="icon-view"></i> ')  # partial/additives.html:19 (via additives.html:4, base.html:50)
    130          _tmp = additive.views_count  # partial/additives.html:19 (via additives.html:4, base.html:50)
    131          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:19 (via additives.html:4, base.html:50)
    132          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:19 (via additives.html:4, base.html:50)
    133          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:19 (via additives.html:4, base.html:50)
    134          _append(_tmp)  # partial/additives.html:19 (via additives.html:4, base.html:50)
    135          _append('</li>\n</ul>\n</span>\n<span class="created">\n')  # partial/additives.html:23 (via additives.html:4, base.html:50)
    136          _tmp = timesince(additive.created)  # partial/additives.html:23 (via additives.html:4, base.html:50)
    137          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:23 (via additives.html:4, base.html:50)
    138          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:23 (via additives.html:4, base.html:50)
    139          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:23 (via additives.html:4, base.html:50)
    140          _append(_tmp)  # partial/additives.html:23 (via additives.html:4, base.html:50)
    141          _append('\n</span>\n</div>\n</div>\n')  # partial/additives.html:27 (via additives.html:4, base.html:50)
    142          _append('\n')  # partial/additives.html:28 (via additives.html:4, base.html:50)
    143          if index > 0 and (index + 1) % 3 == 0:  # partial/additives.html:28 (via additives.html:4, base.html:50)
    144              _append('\n<div class="clearfix"></div>\n')  # partial/additives.html:30 (via additives.html:4, base.html:50)
    145          _append('\n')  # partial/additives.html:32 (via additives.html:4, base.html:50)
    146      _append('\n')  # partial/additives.html:33 (via additives.html:4, base.html:50)
    147      page_type = 'additives'  # partial/additives.html:33 (via additives.html:4, base.html:50)
    148      _append('\n')  # partial/additives.html:34 (via additives.html:4, base.html:50)
    149      _append('\n')  # partial/pagination.html:3 (via partial/additives.html:34, additives.html:4, base.html:50)
    150      from macros.macro import ADDITIVES_PER_PAGE, USERS_PER_PAGE  # partial/pagination.html:3 (via partial/additives.html:34, additives.html:4, base.html:50)
    151      _append('\n')  # partial/pagination.html:4 (via partial/additives.html:34, additives.html:4, base.html:50)
    152      import math  # partial/pagination.html:4 (via partial/additives.html:34, additives.html:4, base.html:50)
    153      _append('\n')  # partial/pagination.html:6 (via partial/additives.html:34, additives.html:4, base.html:50)
    154      if page_type == 'additives':  # partial/pagination.html:6 (via partial/additives.html:34, additives.html:4, base.html:50)
    155          _append('\n')  # partial/pagination.html:7 (via partial/additives.html:34, additives.html:4, base.html:50)
    156          items_per_page = ADDITIVES_PER_PAGE  # partial/pagination.html:7 (via partial/additives.html:34, additives.html:4, base.html:50)
    157          _append('\n')  # partial/pagination.html:8 (via partial/additives.html:34, additives.html:4, base.html:50)
    158      else:  # partial/pagination.html:8 (via partial/additives.html:34, additives.html:4, base.html:50)
    159          _append('\n')  # partial/pagination.html:9 (via partial/additives.html:34, additives.html:4, base.html:50)
    160          items_per_page = USERS_PER_PAGE  # partial/pagination.html:9 (via partial/additives.html:34, additives.html:4, base.html:50)
    161          _append('\n')  # partial/pagination.html:10 (via partial/additives.html:34, additives.html:4, base.html:50)
    162      _append('\n')  # partial/pagination.html:12 (via partial/additives.html:34, additives.html:4, base.html:50)
    163      total_page = int(math.ceil(float(total_items) / items_per_page))  # partial/pagination.html:12 (via partial/additives.html:34, additives.html:4, base.html:50)
    164      _append('\n')  # partial/pagination.html:14 (via partial/additives.html:34, additives.html:4, base.html:50)
    165      current_page = int(handler.get_argument('page', 1))  # partial/pagination.html:14 (via partial/additives.html:34, additives.html:4, base.html:50)
    166      _append('\n')  # partial/pagination.html:16 (via partial/additives.html:34, additives.html:4, base.html:50)
    167      if current_page <=6:  # partial/pagination.html:16 (via partial/additives.html:34, additives.html:4, base.html:50)
    168          _append('\n')  # partial/pagination.html:17 (via partial/additives.html:34, additives.html:4, base.html:50)
    169          end_page = min(total_page, 10)  # partial/pagination.html:17 (via partial/additives.html:34, additives.html:4, base.html:50)
    170          _append('\n')  # partial/pagination.html:18 (via partial/additives.html:34, additives.html:4, base.html:50)
    171          start_page = 1  # partial/pagination.html:18 (via partial/additives.html:34, additives.html:4, base.html:50)
    172          _append('\n')  # partial/pagination.html:19 (via partial/additives.html:34, additives.html:4, base.html:50)
    173      else:  # partial/pagination.html:19 (via partial/additives.html:34, additives.html:4, base.html:50)
    174          _append('\n')  # partial/pagination.html:20 (via partial/additives.html:34, additives.html:4, base.html:50)
    175          end_page = min(total_page, current_page+4)  # partial/pagination.html:20 (via partial/additives.html:34, additives.html:4, base.html:50)
    176          _append('\n')  # partial/pagination.html:21 (via partial/additives.html:34, additives.html:4, base.html:50)
    177          start_page = current_page - 5  # partial/pagination.html:21 (via partial/additives.html:34, additives.html:4, base.html:50)
    178          _append('\n')  # partial/pagination.html:22 (via partial/additives.html:34, additives.html:4, base.html:50)
    179      _append('\n')  # partial/pagination.html:24 (via partial/additives.html:34, additives.html:4, base.html:50)
    180      if total_page > 1:  # partial/pagination.html:24 (via partial/additives.html:34, additives.html:4, base.html:50)
    181          _append('\n<div class="pagination">\n<ul>\n')  # partial/pagination.html:27 (via partial/additives.html:34, additives.html:4, base.html:50)
    182          if current_page == 1:  # partial/pagination.html:27 (via partial/additives.html:34, additives.html:4, base.html:50)
    183              _append('\n<li class="disabled">\xe2\x86\x90 </li>\n')  # partial/pagination.html:29 (via partial/additives.html:34, additives.html:4, base.html:50)
    184          else:  # partial/pagination.html:29 (via partial/additives.html:34, additives.html:4, base.html:50)
    185              _append('\n<li><a href="')  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    186              _tmp = page_path  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    187              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    188              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    189              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    190              _append(_tmp)  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    191              _append('?page=1">\xe2\x86\x90 </a></li>\n')  # partial/pagination.html:31 (via partial/additives.html:34, additives.html:4, base.html:50)
    192          _append('\n')  # partial/pagination.html:33 (via partial/additives.html:34, additives.html:4, base.html:50)
    193          for i in range(start_page, end_page + 1):  # partial/pagination.html:33 (via partial/additives.html:34, additives.html:4, base.html:50)
    194              _append('\n<li ')  # partial/pagination.html:34 (via partial/additives.html:34, additives.html:4, base.html:50)
    195              if current_page == i:  # partial/pagination.html:34 (via partial/additives.html:34, additives.html:4, base.html:50)
    196                  _append('class="active"')  # partial/pagination.html:34 (via partial/additives.html:34, additives.html:4, base.html:50)
    197              _append('>\n<a href="')  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    198              _tmp = page_path  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    199              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    200              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    201              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    202              _append(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    203              _append('?page=')  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    204              _tmp = i  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    205              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    206              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    207              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    208              _append(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    209              _append('">')  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    210              _tmp = i  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    211              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    212              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    213              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    214              _append(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    215              _append('</a>\n</li>\n')  # partial/pagination.html:37 (via partial/additives.html:34, additives.html:4, base.html:50)
    216          _append('\n')  # partial/pagination.html:39 (via partial/additives.html:34, additives.html:4, base.html:50)
    217          if current_page == total_page:  # partial/pagination.html:39 (via partial/additives.html:34, additives.html:4, base.html:50)
    218              _append('\n<li class="disabled">\xe2\x86\x92 </li>\n')  # partial/pagination.html:41 (via partial/additives.html:34, additives.html:4, base.html:50)
    219          else:  # partial/pagination.html:41 (via partial/additives.html:34, additives.html:4, base.html:50)
    220              _append('\n<li><a href="')  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    221              _tmp = page_path  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    222              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    223              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    224              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    225              _append(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    226              _append('?page=')  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    227              _tmp = current_page+1  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    228              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    229              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    230              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    231              _append(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    232              _append('">\xe2\x86\x92 </a></li>\n')  # partial/pagination.html:43 (via partial/additives.html:34, additives.html:4, base.html:50)
    233          _append('\n</ul>\n</div>\n')  # partial/pagination.html:46 (via partial/additives.html:34, additives.html:4, base.html:50)
    234      _append('\n')  # partial/pagination.html:47 (via partial/additives.html:34, additives.html:4, base.html:50)
    235      _append('\n</div>\n</div>\n')  # partial/additives.html:37 (via additives.html:4, base.html:50)
    236      _append('\n')  # additives.html:5 (via base.html:50)
    237      _append('\n</div>\n<div id="sidebar">\n')  # base.html:54
    238      _append('\n')  # additives.html:8 (via base.html:54)
    239      if current_user:  # partial/sidebar_global.html:1 (via additives.html:8, base.html:54)
    240          _append('\n')  # partial/sidebar_global.html:2 (via additives.html:8, base.html:54)
    241          _append('<div class="upload item ')  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    242          if not current_user.left_upload_count:  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    243              _append('disabled')  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    244          _append('" data-url="/photo/upload" data-title="\xe9\x87\x87\xe9\x9b\x86\xe7\x85\xa7\xe7\x89\x87" >\n<div class="left"></div>\n<div class="center">\n')  # partial/sidebar_upload.html:5 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    245          if current_user.left_upload_count:  # partial/sidebar_upload.html:5 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    246              _append('\n\xe9\x87\x87\xe9\x9b\x86\xe7\x85\xa7\xe7\x89\x87(\xe6\x9c\xac\xe5\x91\xa8\xe8\xbf\x98\xe5\x89\xa9')  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    247              _tmp = current_user.left_upload_count  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    248              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    249              else: _tmp = _utf8(str(_tmp))  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    250              _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    251              _append(_tmp)  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    252              _append('\xe5\xbc\xa0)\n')  # partial/sidebar_upload.html:7 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    253          else:  # partial/sidebar_upload.html:7 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    254              _append('\n\xe6\x9c\xac\xe5\x91\xa8\xe7\x9a\x84\xe9\x87\x87\xe9\x9b\x86\xe4\xbd\x99\xe9\xa2\x9d\xe5\xb7\xb2\xe7\x94\xa8\xe5\xae\x8c\xe4\xba\x86\n')  # partial/sidebar_upload.html:9 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    255          _append('\n</div>\n<div class="right"></div>\n</div>\n')  # partial/sidebar_upload.html:13 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    256          _append('\n')  # partial/sidebar_global.html:3 (via additives.html:8, base.html:54)
    257          _append('<div class="box" id="panel-me">\n<div class="header"><a class="right" href="/logout">\xe7\x99\xbb\xe5\x87\xba</a>\xe6\x88\x91\xe7\x9a\x84\xe4\xbf\xa1\xe6\x81\xaf</div>\n<div class="body">\n<div class="me">\n<a class="settings item" href="/settings" data-title="\xe8\xae\xbe\xe7\xbd\xae" data-url="/settings">\xe8\xae\xbe\xe7\xbd\xae</a>\n<a href="/user/')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    258          _tmp = current_user.username  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    259          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    260          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    261          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    262          _append(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    263          _append('"><img class="avatar" src="')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    264          _tmp = get_avatar_url(current_user, 's')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    265          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    266          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    267          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    268          _append(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    269          _append('" /></a>\n<a href="/user/')  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    270          _tmp = current_user.username  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    271          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    272          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    273          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    274          _append(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    275          _append('">')  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    276          _tmp = current_user.fullname  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    277          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    278          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    279          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    280          _append(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    281          _append('</a>\n<i class="level icon-level')  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    282          _tmp = current_user.level  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    283          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    284          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    285          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    286          _append(_tmp)  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    287          _append('"></i>\n</div>\n<div class="follow">\n<div class="following item" data-title="\xe6\x88\x91\xe5\x85\xb3\xe6\xb3\xa8\xe7\x9a\x84\xe4\xba\xba" data-url="/mine/following">\n<h3 class="anchor">')  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    288          _tmp = current_user.following_count  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    289          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    290          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    291          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    292          _append(_tmp)  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    293          _append('</h3>\n<span>following</span>\n</div>\n<div class="follower item" data-title="\xe5\x85\xb3\xe6\xb3\xa8\xe6\x88\x91\xe7\x9a\x84\xe4\xba\xba" data-url="/mine/follower">\n<h3 class="anchor">')  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    294          _tmp = current_user.follower_count  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    295          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    296          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    297          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    298          _append(_tmp)  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    299          _append('</h3>\n<span>followers</span>\n</div>\n</div>\n<ul>\n<li class="item" data-url="/mine/invite" data-title="\xe9\x82\x80\xe8\xaf\xb7\xe6\x9c\x8b\xe5\x8f\x8b\xe5\x8a\xa0\xe5\x85\xa5"> <span class="num">')  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    300          _tmp = current_user.unused_invite_key_count  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    301          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    302          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    303          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    304          _append(_tmp)  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    305          _append('</span><span class="anchor">\xe9\x82\x80\xe8\xaf\xb7\xe6\x9c\x8b\xe5\x8f\x8b\xe5\x8a\xa0\xe5\x85\xa5</span></li>\n<li class="item" data-title="\xe6\x88\x91\xe6\xb7\xbb\xe5\x8a\xa0\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87" data-url="/mine/photos"> <span class="num">')  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    306          _tmp = current_user.photo_count  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    307          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    308          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    309          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    310          _append(_tmp)  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    311          _append('</span><span class="anchor">\xe6\x88\x91\xe6\xb7\xbb\xe5\x8a\xa0\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87</span></li>\n<li class="item" data-title="\xe6\x88\x91\xe5\x96\x9c\xe6\xac\xa2\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87" data-url="/mine/likes_photos"><span class="num">')  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    312          _tmp = current_user.likes_count  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    313          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    314          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    315          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    316          _append(_tmp)  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    317          _append('</span><span class="anchor">\xe6\x88\x91\xe5\x96\x9c\xe6\xac\xa2\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87</span> </li>\n</ul>\n</div>\n</div>\n')  # partial/sidebar_me.html:27 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    318          _append('\n')  # partial/sidebar_global.html:4 (via additives.html:8, base.html:54)
    319      else:  # partial/sidebar_global.html:4 (via additives.html:8, base.html:54)
    320          _append('\n')  # partial/sidebar_global.html:5 (via additives.html:8, base.html:54)
    321          _append('<div class="box" id="panel-about">\n<div class="header">\xe5\x85\xb3\xe4\xba\x8e\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</div>\n<div class="body">\n<p>\xe5\x85\xb3\xe6\xb3\xa8\xe9\xa3\x9f\xe5\x93\x81\xe5\xae\x89\xe5\x85\xa8\xef\xbc\x8c\xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe4\xb8\x96\xe7\x95\x8c</p>\n<p>\xe6\x89\x80\xe6\x9c\x89\xe9\xa3\x9f\xe5\x93\x81\xe5\x92\x8c\xe6\xb7\xbb\xe5\x8a\xa0\xe5\x89\x82\xe8\xb5\x84\xe6\x96\x99\xe6\x9d\xa5\xe8\x87\xaa\xe4\xba\x8eiearth-\xe7\x88\xb1\xe5\x9c\xb0\xe7\x90\x83\xe7\x8e\xaf\xe4\xbf\x9d\xe6\x9c\xba\xe6\x9e\x84</p>\n</div>\n</div>\n')  # partial/sidebar_about.html:8 (via partial/sidebar_global.html:5, additives.html:8, base.html:54)
    322          _append('\n')  # partial/sidebar_global.html:6 (via additives.html:8, base.html:54)
    323          _append('<div class="box" id="panel-login">\n<div class="header">\xe7\x99\xbb\xe5\x85\xa5\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</div>\n<div class="body">\n<form action="/login" method="POST">\n<div class="section">\n<input type="TEXT" name="username" placeholder="\xe7\x94\xa8\xe6\x88\xb7\xe5\x90\x8d/Email" />\n</div>\n<div class="section">\n<input type="PASSWORD" name="password" placeholder="\xe5\xaf\x86\xe7\xa0\x81" />\n</div>\n<div class="section">\n<input type="SUBMIT" value="\xe7\x99\xbb\xe5\x85\xa5" class="btn primary-btn" />\n<span class="tip">\xe4\xbc\x9a\xe8\xae\xb0\xe4\xbd\x8f\xe7\x99\xbb\xe5\x85\xa5\xe4\xb8\x80\xe4\xb8\xaa\xe6\x9c\x88</span>\n</div>\n</form>\n<div class="alert alert-info">\xe5\x86\x85\xe6\xb5\x8b\xe4\xb8\xad\xef\xbc\x8c\xe5\x8f\xaa\xe6\x8e\xa5\xe5\x8f\x97\xe9\x82\x80\xe8\xaf\xb7\xe6\xb3\xa8\xe5\x86\x8c</div>\n</div>\n</div>\n')  # partial/sidebar_login.html:19 (via partial/sidebar_global.html:6, additives.html:8, base.html:54)
    324          _append('\n')  # partial/sidebar_global.html:8 (via additives.html:8, base.html:54)
    325      _append('\n')  # partial/sidebar_global.html:10 (via additives.html:8, base.html:54)
    326      _append('<div class="box">\n<div class="header">\xe6\xb5\x8f\xe8\xa7\x88\xe9\xa3\x9f\xe5\x93\x81</div>\n<div class="body">\n<ul>\n<li class="item" data-url="/photos/hot" data-title="\xe7\x83\xad\xe9\x97\xa8\xe9\xa3\x9f\xe5\x93\x81"><span class="anchor">\xe7\x83\xad\xe9\x97\xa8\xe9\xa3\x9f\xe5\x93\x81</span></li>\n<li class="item" data-url="/photos/latest" data-title="\xe6\x9c\x80\xe6\x96\xb0\xe9\xa3\x9f\xe5\x93\x81"><span class="anchor">\xe6\x9c\x80\xe6\x96\xb0\xe9\xa3\x9f\xe5\x93\x81</span></li>\n</ul>\n</div>\n</div>\n')  # partial/sidebar_photos_nav.html:10 (via partial/sidebar_global.html:10, additives.html:8, base.html:54)
    327      _append('\n')  # partial/sidebar_global.html:11 (via additives.html:8, base.html:54)
    328      import models  # partial/sidebar_hot_searchs.html:1 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    329      _append('\n')  # partial/sidebar_hot_searchs.html:2 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    330      hot_searchs = models.Additive_Search().hot_searchs  # partial/sidebar_hot_searchs.html:2 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    331      _append('\n<div class="box" id="panel-searchs">\n<div class="header">\xe7\x83\xad\xe9\x97\xa8\xe6\x90\x9c\xe7\xb4\xa2</div>\n<div class="body">\n<ul>\n')  # partial/sidebar_hot_searchs.html:8 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    332      for search in hot_searchs:  # partial/sidebar_hot_searchs.html:8 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    333          _append('\n<li class="item" data-url="/search/')  # partial/sidebar_hot_searchs.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    334          _tmp = search.search  # partial/sidebar_hot_searchs.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    335          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_hot_searchs.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    336          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_hot_searchs.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    337          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_hot_searchs.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    338          _append(_tmp)  # partial/sidebar_hot_searchs.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    339          _append('"><i class="icon-search"></i><span class="anchor">')  # partial/sidebar_hot_searchs.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    340          _tmp = search.search  # partial/sidebar_hot_searchs.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    341          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_hot_searchs.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    342          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_hot_searchs.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    343          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_hot_searchs.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    344          _append(_tmp)  # partial/sidebar_hot_searchs.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    345          _append('</span></li>\n')  # partial/sidebar_hot_searchs.html:10 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    346      _append('\n</ul>\n</div>\n</div>\n')  # partial/sidebar_hot_searchs.html:14 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    347      _append('\n')  # partial/sidebar_global.html:12 (via additives.html:8, base.html:54)
    348      _append('\n')  # additives.html:9 (via base.html:54)
    349      _append('\n</div>\n</div>\n</div>\n<div id="footer">\n<div class="inner">\n<div class="right">\n<span class="belief">make the world a little better and easier</span>\n</div>\n<div class="left">\n<ul>\n<li><a href="/about">\xe5\x85\xb3\xe4\xba\x8e</a> <!--<span class="divider">/</span>--></li>\n<!--<li><a href="/feedback">\xe5\x8f\x8d\xe9\xa6\x88</a> <span class="divider">/</span></li>-->\n<!--<li><a href="/blog">\xe6\x97\xa5\xe5\xbf\x97</a></li>-->\n</ul>\n</div>\n</div>\n</div>\n<script type="text/javascript">\nvar _gaq = _gaq || [];\n_gaq.push([\'_setAccount\', \'UA-1281124-23\']);\n_gaq.push([\'_trackPageview\']);\n(function() {\nvar ga = document.createElement(\'script\'); ga.type = \'text/javascript\'; ga.async = true;\nga.src = (\'https:\' == document.location.protocol ? \'https://ssl\' : \'http://www\') + \'.google-analytics.com/ga.js\';\nvar s = document.getElementsByTagName(\'script\')[0]; s.parentNode.insertBefore(ga, s);\n})();\n</script>\n<!-- love your mom! -->\n</body>\n<meta name="description" content="\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - " />\n')  # base.html:89
    350      return _utf8('').join(_buffer)  # base.html:0
[E 120721 12:31:05 web:1031] Uncaught exception GET / (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.100', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cookie': 'viewed_additive_ids="\\0541\\0542\\0543\\0544\\0545"; __utma=148685175.647871982.1342707625.1342831755.1342840246.6; __utmc=148685175; __utmz=148685175.1342707625.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)', 'Cache-Control': 'max-age=0', 'X-Real-Ip': '192.168.0.100'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "src/sites/www/handlers/home.py", line 14, in get
        return self._render('hot')
      File "src/sites/www/handlers/base.py", line 87, in _render
        current_additive = additive,
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 474, in render
        html = self.render_string(template_name, **kwargs)
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 586, in render_string
        return t.generate(**args)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 253, in generate
        return execute()
      File "additives_html.generated.py", line 334, in _execute
        _tmp = search.search  # partial/sidebar_hot_searchs.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    AttributeError: Could not locate column in row for column 'search'
[E 120721 12:31:05 web:1393] 500 GET / (127.0.0.1) 1758.50ms
[I 120721 12:55:33 autoreload:133] /home/dk/work/python/safood/src/common/models/additive_search.py modified; restarting server
[E 120721 12:55:53 template:256] additives.html code:
      1  def _execute():  # base.html:0
      2      _buffer = []  # base.html:0
      3      _append = _buffer.append  # base.html:0
      4      _append('<!doctype html>\n<head>\n<meta charset="UTF-8" />\n<meta content="True" name="HandheldFriendly" />\n<meta content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0; name=\'viewport\'" />\n<title>\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - \xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81')  # base.html:6
      5      _append('</title>\n<link rel="stylesheet" type="text/css" media="screen" href="/static/css/vendor/jquery.fancybox.css" />\n<link rel="stylesheet" type="text/css" media="screen" href="/static/css/main.css" />\n<link rel="shortcut icon" href="/static/img/favicon.ico" />\n<link rel="canonical" href="http://wuditoo.com/" />\n<meta name="description" content="\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - \xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81" />\n<script src="/static/js/vendor/jquery.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.history.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.fancybox.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.scrollTo.min.js" type="text/javascript"></script>\n')  # base.html:16
      6      _append('\n<script type="text/javascript">\n')  # additives.html:13 (via base.html:16)
      7      if current_additive:  # additives.html:13 (via base.html:16)
      8          _append('\nmeta_additive = {\nurl: "/additive/')  # additives.html:15 (via base.html:16)
      9          _tmp = current_additive.id  # additives.html:15 (via base.html:16)
     10          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # additives.html:15 (via base.html:16)
     11          else: _tmp = _utf8(str(_tmp))  # additives.html:15 (via base.html:16)
     12          _tmp = _utf8(xhtml_escape(_tmp))  # additives.html:15 (via base.html:16)
     13          _append(_tmp)  # additives.html:15 (via base.html:16)
     14          _append('",\nwidth: ')  # additives.html:16 (via base.html:16)
     15          _tmp = current_additive.width  # additives.html:16 (via base.html:16)
     16          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # additives.html:16 (via base.html:16)
     17          else: _tmp = _utf8(str(_tmp))  # additives.html:16 (via base.html:16)
     18          _tmp = _utf8(xhtml_escape(_tmp))  # additives.html:16 (via base.html:16)
     19          _append(_tmp)  # additives.html:16 (via base.html:16)
     20          _append(',\nheight: ')  # additives.html:17 (via base.html:16)
     21          _tmp = current_additive.height  # additives.html:17 (via base.html:16)
     22          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # additives.html:17 (via base.html:16)
     23          else: _tmp = _utf8(str(_tmp))  # additives.html:17 (via base.html:16)
     24          _tmp = _utf8(xhtml_escape(_tmp))  # additives.html:17 (via base.html:16)
     25          _append(_tmp)  # additives.html:17 (via base.html:16)
     26          _append('\n}\n')  # additives.html:19 (via base.html:16)
     27      _append('\n</script>\n')  # additives.html:21 (via base.html:16)
     28      _append('\n<script src="/static/js/main.js" type="text/javascript"></script>\n</head>\n<!--[if IE 7 ]><body class="ie7"><![endif]-->\n<!--[if gt IE 7]><body class="ie"><![endif]-->\n<!--[if !IE]><body><![endif]-->\n<div id="header">\n<div class="inner">\n<div id="logo"><a href="/">\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</a></div>\n<div id="slogon">\xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81</div>\n<div id="witticism">')  # base.html:27
     29      _tmp = home_sentence()  # base.html:27
     30      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:27
     31      else: _tmp = _utf8(str(_tmp))  # base.html:27
     32      _tmp = _utf8(xhtml_escape(_tmp))  # base.html:27
     33      _append(_tmp)  # base.html:27
     34      _append('</div>\n<!--\n<ul class="nav-right">\n</ul>\n-->\n</div>\n</div>\n<div id="container">\n<div class="inner">\n<div class="message alert alert-warn">\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0\xe5\x86\xac\xe7\x9c\xa0\xe4\xb8\xad\xef\xbc\x8c\xe8\x8b\x8f\xe9\x86\x92\xe6\x97\xb6\xe9\x97\xb4\xe5\xbe\x85\xe5\xae\x9a\xe3\x80\x82\xe8\xb0\xa2\xe8\xb0\xa2\xe6\x82\xa8\xe7\x9a\x84\xe5\x88\xb0\xe8\xae\xbf\xef\xbc\x9a\xef\xbc\x89</div>\n')  # base.html:38
     35      message = get_message()  # base.html:38
     36      _append('\n')  # base.html:39
     37      for message_type in ('error', 'success', 'info', 'warn'):  # base.html:39
     38          _append('\n')  # base.html:40
     39          if message and message_type == message[0]:  # base.html:40
     40              _append('\n<div id="')  # base.html:41
     41              _tmp = message_type  # base.html:41
     42              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     43              else: _tmp = _utf8(str(_tmp))  # base.html:41
     44              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     45              _append(_tmp)  # base.html:41
     46              _append('-message" class="message alert alert-')  # base.html:41
     47              _tmp = message_type  # base.html:41
     48              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     49              else: _tmp = _utf8(str(_tmp))  # base.html:41
     50              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     51              _append(_tmp)  # base.html:41
     52              _append('">')  # base.html:41
     53              _tmp = message[1]  # base.html:41
     54              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     55              else: _tmp = _utf8(str(_tmp))  # base.html:41
     56              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     57              _append(_tmp)  # base.html:41
     58              _append('</div>\n')  # base.html:42
     59          else:  # base.html:42
     60              _append('\n<div id="')  # base.html:43
     61              _tmp = message_type  # base.html:43
     62              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:43
     63              else: _tmp = _utf8(str(_tmp))  # base.html:43
     64              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:43
     65              _append(_tmp)  # base.html:43
     66              _append('-message" class="message alert alert-')  # base.html:43
     67              _tmp = message_type  # base.html:43
     68              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:43
     69              else: _tmp = _utf8(str(_tmp))  # base.html:43
     70              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:43
     71              _append(_tmp)  # base.html:43
     72              _append(' hide"></div>\n')  # base.html:44
     73          _append('\n')  # base.html:45
     74      _append('\n')  # base.html:47
     75      _append('\n<div id="main">\n')  # base.html:50
     76      _append('\n')  # additives.html:4 (via base.html:50)
     77      _append('<div class="box" id="additives">\n<div class="header">')  # partial/additives.html:2 (via additives.html:4, base.html:50)
     78      _tmp = additives_title  # partial/additives.html:2 (via additives.html:4, base.html:50)
     79      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:2 (via additives.html:4, base.html:50)
     80      else: _tmp = _utf8(str(_tmp))  # partial/additives.html:2 (via additives.html:4, base.html:50)
     81      _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:2 (via additives.html:4, base.html:50)
     82      _append(_tmp)  # partial/additives.html:2 (via additives.html:4, base.html:50)
     83      _append('</div>\n<div class="body main ul">\n')  # partial/additives.html:4 (via additives.html:4, base.html:50)
     84      for index, additive in enumerate(additives):  # partial/additives.html:4 (via additives.html:4, base.html:50)
     85          _append('\n')  # partial/additives.html:5 (via additives.html:4, base.html:50)
     86          creator = additive.creator  # partial/additives.html:5 (via additives.html:4, base.html:50)
     87          _append('\n<div class="additive-item">\n<div class="header">\n<a class="avatar" href="/additive/')  # partial/additives.html:8 (via additives.html:4, base.html:50)
     88          _tmp = additive.id  # partial/additives.html:8 (via additives.html:4, base.html:50)
     89          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     90          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     91          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     92          _append(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     93          _append('"><img src="')  # partial/additives.html:8 (via additives.html:4, base.html:50)
     94          _tmp = get_avatar_url(creator, 's')  # partial/additives.html:8 (via additives.html:4, base.html:50)
     95          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     96          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     97          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     98          _append(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     99          _append('" /></a> ')  # partial/additives.html:8 (via additives.html:4, base.html:50)
    100          _tmp = additive.name  # partial/additives.html:8 (via additives.html:4, base.html:50)
    101          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
    102          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
    103          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
    104          _append(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
    105          _append('\n</div>\n<div class="body">\n<div class="additive_alias">\xe5\x85\xb6\xe4\xbb\x96\xe5\x90\x8d\xe7\xa7\xb0:')  # partial/additives.html:11 (via additives.html:4, base.html:50)
    106          _tmp = additive.alias  # partial/additives.html:11 (via additives.html:4, base.html:50)
    107          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:11 (via additives.html:4, base.html:50)
    108          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:11 (via additives.html:4, base.html:50)
    109          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:11 (via additives.html:4, base.html:50)
    110          _append(_tmp)  # partial/additives.html:11 (via additives.html:4, base.html:50)
    111          _append('</div>\n<div class="additive_cns">CNS\xe5\x8f\xb7:')  # partial/additives.html:12 (via additives.html:4, base.html:50)
    112          _tmp = additive.cns  # partial/additives.html:12 (via additives.html:4, base.html:50)
    113          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:12 (via additives.html:4, base.html:50)
    114          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:12 (via additives.html:4, base.html:50)
    115          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:12 (via additives.html:4, base.html:50)
    116          _append(_tmp)  # partial/additives.html:12 (via additives.html:4, base.html:50)
    117          _append('</div>\n<div class="additive_ins">INS\xe5\x8f\xb7:')  # partial/additives.html:13 (via additives.html:4, base.html:50)
    118          _tmp = additive.ins  # partial/additives.html:13 (via additives.html:4, base.html:50)
    119          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:13 (via additives.html:4, base.html:50)
    120          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:13 (via additives.html:4, base.html:50)
    121          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:13 (via additives.html:4, base.html:50)
    122          _append(_tmp)  # partial/additives.html:13 (via additives.html:4, base.html:50)
    123          _append('</div>\n<div class="additive_effect">\xe5\x8a\x9f\xe8\x83\xbd:')  # partial/additives.html:14 (via additives.html:4, base.html:50)
    124          _tmp = additive.effect  # partial/additives.html:14 (via additives.html:4, base.html:50)
    125          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:14 (via additives.html:4, base.html:50)
    126          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:14 (via additives.html:4, base.html:50)
    127          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:14 (via additives.html:4, base.html:50)
    128          _append(_tmp)  # partial/additives.html:14 (via additives.html:4, base.html:50)
    129          _append('</div>\n</div>\n<div class="footer">\n<span class="meta">\n<ul>\n<li><i class="icon-view"></i> ')  # partial/additives.html:19 (via additives.html:4, base.html:50)
    130          _tmp = additive.views_count  # partial/additives.html:19 (via additives.html:4, base.html:50)
    131          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:19 (via additives.html:4, base.html:50)
    132          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:19 (via additives.html:4, base.html:50)
    133          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:19 (via additives.html:4, base.html:50)
    134          _append(_tmp)  # partial/additives.html:19 (via additives.html:4, base.html:50)
    135          _append('</li>\n</ul>\n</span>\n<span class="created">\n')  # partial/additives.html:23 (via additives.html:4, base.html:50)
    136          _tmp = timesince(additive.created)  # partial/additives.html:23 (via additives.html:4, base.html:50)
    137          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:23 (via additives.html:4, base.html:50)
    138          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:23 (via additives.html:4, base.html:50)
    139          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:23 (via additives.html:4, base.html:50)
    140          _append(_tmp)  # partial/additives.html:23 (via additives.html:4, base.html:50)
    141          _append('\n</span>\n</div>\n</div>\n')  # partial/additives.html:27 (via additives.html:4, base.html:50)
    142          _append('\n')  # partial/additives.html:28 (via additives.html:4, base.html:50)
    143          if index > 0 and (index + 1) % 3 == 0:  # partial/additives.html:28 (via additives.html:4, base.html:50)
    144              _append('\n<div class="clearfix"></div>\n')  # partial/additives.html:30 (via additives.html:4, base.html:50)
    145          _append('\n')  # partial/additives.html:32 (via additives.html:4, base.html:50)
    146      _append('\n')  # partial/additives.html:33 (via additives.html:4, base.html:50)
    147      page_type = 'additives'  # partial/additives.html:33 (via additives.html:4, base.html:50)
    148      _append('\n')  # partial/additives.html:34 (via additives.html:4, base.html:50)
    149      _append('\n')  # partial/pagination.html:3 (via partial/additives.html:34, additives.html:4, base.html:50)
    150      from macros.macro import ADDITIVES_PER_PAGE, USERS_PER_PAGE  # partial/pagination.html:3 (via partial/additives.html:34, additives.html:4, base.html:50)
    151      _append('\n')  # partial/pagination.html:4 (via partial/additives.html:34, additives.html:4, base.html:50)
    152      import math  # partial/pagination.html:4 (via partial/additives.html:34, additives.html:4, base.html:50)
    153      _append('\n')  # partial/pagination.html:6 (via partial/additives.html:34, additives.html:4, base.html:50)
    154      if page_type == 'additives':  # partial/pagination.html:6 (via partial/additives.html:34, additives.html:4, base.html:50)
    155          _append('\n')  # partial/pagination.html:7 (via partial/additives.html:34, additives.html:4, base.html:50)
    156          items_per_page = ADDITIVES_PER_PAGE  # partial/pagination.html:7 (via partial/additives.html:34, additives.html:4, base.html:50)
    157          _append('\n')  # partial/pagination.html:8 (via partial/additives.html:34, additives.html:4, base.html:50)
    158      else:  # partial/pagination.html:8 (via partial/additives.html:34, additives.html:4, base.html:50)
    159          _append('\n')  # partial/pagination.html:9 (via partial/additives.html:34, additives.html:4, base.html:50)
    160          items_per_page = USERS_PER_PAGE  # partial/pagination.html:9 (via partial/additives.html:34, additives.html:4, base.html:50)
    161          _append('\n')  # partial/pagination.html:10 (via partial/additives.html:34, additives.html:4, base.html:50)
    162      _append('\n')  # partial/pagination.html:12 (via partial/additives.html:34, additives.html:4, base.html:50)
    163      total_page = int(math.ceil(float(total_items) / items_per_page))  # partial/pagination.html:12 (via partial/additives.html:34, additives.html:4, base.html:50)
    164      _append('\n')  # partial/pagination.html:14 (via partial/additives.html:34, additives.html:4, base.html:50)
    165      current_page = int(handler.get_argument('page', 1))  # partial/pagination.html:14 (via partial/additives.html:34, additives.html:4, base.html:50)
    166      _append('\n')  # partial/pagination.html:16 (via partial/additives.html:34, additives.html:4, base.html:50)
    167      if current_page <=6:  # partial/pagination.html:16 (via partial/additives.html:34, additives.html:4, base.html:50)
    168          _append('\n')  # partial/pagination.html:17 (via partial/additives.html:34, additives.html:4, base.html:50)
    169          end_page = min(total_page, 10)  # partial/pagination.html:17 (via partial/additives.html:34, additives.html:4, base.html:50)
    170          _append('\n')  # partial/pagination.html:18 (via partial/additives.html:34, additives.html:4, base.html:50)
    171          start_page = 1  # partial/pagination.html:18 (via partial/additives.html:34, additives.html:4, base.html:50)
    172          _append('\n')  # partial/pagination.html:19 (via partial/additives.html:34, additives.html:4, base.html:50)
    173      else:  # partial/pagination.html:19 (via partial/additives.html:34, additives.html:4, base.html:50)
    174          _append('\n')  # partial/pagination.html:20 (via partial/additives.html:34, additives.html:4, base.html:50)
    175          end_page = min(total_page, current_page+4)  # partial/pagination.html:20 (via partial/additives.html:34, additives.html:4, base.html:50)
    176          _append('\n')  # partial/pagination.html:21 (via partial/additives.html:34, additives.html:4, base.html:50)
    177          start_page = current_page - 5  # partial/pagination.html:21 (via partial/additives.html:34, additives.html:4, base.html:50)
    178          _append('\n')  # partial/pagination.html:22 (via partial/additives.html:34, additives.html:4, base.html:50)
    179      _append('\n')  # partial/pagination.html:24 (via partial/additives.html:34, additives.html:4, base.html:50)
    180      if total_page > 1:  # partial/pagination.html:24 (via partial/additives.html:34, additives.html:4, base.html:50)
    181          _append('\n<div class="pagination">\n<ul>\n')  # partial/pagination.html:27 (via partial/additives.html:34, additives.html:4, base.html:50)
    182          if current_page == 1:  # partial/pagination.html:27 (via partial/additives.html:34, additives.html:4, base.html:50)
    183              _append('\n<li class="disabled">\xe2\x86\x90 </li>\n')  # partial/pagination.html:29 (via partial/additives.html:34, additives.html:4, base.html:50)
    184          else:  # partial/pagination.html:29 (via partial/additives.html:34, additives.html:4, base.html:50)
    185              _append('\n<li><a href="')  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    186              _tmp = page_path  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    187              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    188              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    189              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    190              _append(_tmp)  # partial/pagination.html:30 (via partial/additives.html:34, additives.html:4, base.html:50)
    191              _append('?page=1">\xe2\x86\x90 </a></li>\n')  # partial/pagination.html:31 (via partial/additives.html:34, additives.html:4, base.html:50)
    192          _append('\n')  # partial/pagination.html:33 (via partial/additives.html:34, additives.html:4, base.html:50)
    193          for i in range(start_page, end_page + 1):  # partial/pagination.html:33 (via partial/additives.html:34, additives.html:4, base.html:50)
    194              _append('\n<li ')  # partial/pagination.html:34 (via partial/additives.html:34, additives.html:4, base.html:50)
    195              if current_page == i:  # partial/pagination.html:34 (via partial/additives.html:34, additives.html:4, base.html:50)
    196                  _append('class="active"')  # partial/pagination.html:34 (via partial/additives.html:34, additives.html:4, base.html:50)
    197              _append('>\n<a href="')  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    198              _tmp = page_path  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    199              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    200              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    201              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    202              _append(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    203              _append('?page=')  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    204              _tmp = i  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    205              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    206              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    207              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    208              _append(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    209              _append('">')  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    210              _tmp = i  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    211              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    212              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    213              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    214              _append(_tmp)  # partial/pagination.html:35 (via partial/additives.html:34, additives.html:4, base.html:50)
    215              _append('</a>\n</li>\n')  # partial/pagination.html:37 (via partial/additives.html:34, additives.html:4, base.html:50)
    216          _append('\n')  # partial/pagination.html:39 (via partial/additives.html:34, additives.html:4, base.html:50)
    217          if current_page == total_page:  # partial/pagination.html:39 (via partial/additives.html:34, additives.html:4, base.html:50)
    218              _append('\n<li class="disabled">\xe2\x86\x92 </li>\n')  # partial/pagination.html:41 (via partial/additives.html:34, additives.html:4, base.html:50)
    219          else:  # partial/pagination.html:41 (via partial/additives.html:34, additives.html:4, base.html:50)
    220              _append('\n<li><a href="')  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    221              _tmp = page_path  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    222              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    223              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    224              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    225              _append(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    226              _append('?page=')  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    227              _tmp = current_page+1  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    228              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    229              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    230              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    231              _append(_tmp)  # partial/pagination.html:42 (via partial/additives.html:34, additives.html:4, base.html:50)
    232              _append('">\xe2\x86\x92 </a></li>\n')  # partial/pagination.html:43 (via partial/additives.html:34, additives.html:4, base.html:50)
    233          _append('\n</ul>\n</div>\n')  # partial/pagination.html:46 (via partial/additives.html:34, additives.html:4, base.html:50)
    234      _append('\n')  # partial/pagination.html:47 (via partial/additives.html:34, additives.html:4, base.html:50)
    235      _append('\n</div>\n</div>\n')  # partial/additives.html:37 (via additives.html:4, base.html:50)
    236      _append('\n')  # additives.html:5 (via base.html:50)
    237      _append('\n</div>\n<div id="sidebar">\n')  # base.html:54
    238      _append('\n')  # additives.html:8 (via base.html:54)
    239      if current_user:  # partial/sidebar_global.html:1 (via additives.html:8, base.html:54)
    240          _append('\n')  # partial/sidebar_global.html:2 (via additives.html:8, base.html:54)
    241          _append('<div class="upload item ')  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    242          if not current_user.left_upload_count:  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    243              _append('disabled')  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    244          _append('" data-url="/photo/upload" data-title="\xe9\x87\x87\xe9\x9b\x86\xe7\x85\xa7\xe7\x89\x87" >\n<div class="left"></div>\n<div class="center">\n')  # partial/sidebar_upload.html:5 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    245          if current_user.left_upload_count:  # partial/sidebar_upload.html:5 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    246              _append('\n\xe9\x87\x87\xe9\x9b\x86\xe7\x85\xa7\xe7\x89\x87(\xe6\x9c\xac\xe5\x91\xa8\xe8\xbf\x98\xe5\x89\xa9')  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    247              _tmp = current_user.left_upload_count  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    248              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    249              else: _tmp = _utf8(str(_tmp))  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    250              _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    251              _append(_tmp)  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    252              _append('\xe5\xbc\xa0)\n')  # partial/sidebar_upload.html:7 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    253          else:  # partial/sidebar_upload.html:7 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    254              _append('\n\xe6\x9c\xac\xe5\x91\xa8\xe7\x9a\x84\xe9\x87\x87\xe9\x9b\x86\xe4\xbd\x99\xe9\xa2\x9d\xe5\xb7\xb2\xe7\x94\xa8\xe5\xae\x8c\xe4\xba\x86\n')  # partial/sidebar_upload.html:9 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    255          _append('\n</div>\n<div class="right"></div>\n</div>\n')  # partial/sidebar_upload.html:13 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    256          _append('\n')  # partial/sidebar_global.html:3 (via additives.html:8, base.html:54)
    257          _append('<div class="box" id="panel-me">\n<div class="header"><a class="right" href="/logout">\xe7\x99\xbb\xe5\x87\xba</a>\xe6\x88\x91\xe7\x9a\x84\xe4\xbf\xa1\xe6\x81\xaf</div>\n<div class="body">\n<div class="me">\n<a class="settings item" href="/settings" data-title="\xe8\xae\xbe\xe7\xbd\xae" data-url="/settings">\xe8\xae\xbe\xe7\xbd\xae</a>\n<a href="/user/')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    258          _tmp = current_user.username  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    259          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    260          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    261          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    262          _append(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    263          _append('"><img class="avatar" src="')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    264          _tmp = get_avatar_url(current_user, 's')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    265          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    266          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    267          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    268          _append(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    269          _append('" /></a>\n<a href="/user/')  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    270          _tmp = current_user.username  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    271          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    272          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    273          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    274          _append(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    275          _append('">')  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    276          _tmp = current_user.fullname  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    277          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    278          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    279          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    280          _append(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    281          _append('</a>\n<i class="level icon-level')  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    282          _tmp = current_user.level  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    283          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    284          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    285          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    286          _append(_tmp)  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    287          _append('"></i>\n</div>\n<div class="follow">\n<div class="following item" data-title="\xe6\x88\x91\xe5\x85\xb3\xe6\xb3\xa8\xe7\x9a\x84\xe4\xba\xba" data-url="/mine/following">\n<h3 class="anchor">')  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    288          _tmp = current_user.following_count  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    289          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    290          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    291          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    292          _append(_tmp)  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    293          _append('</h3>\n<span>following</span>\n</div>\n<div class="follower item" data-title="\xe5\x85\xb3\xe6\xb3\xa8\xe6\x88\x91\xe7\x9a\x84\xe4\xba\xba" data-url="/mine/follower">\n<h3 class="anchor">')  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    294          _tmp = current_user.follower_count  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    295          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    296          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    297          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    298          _append(_tmp)  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    299          _append('</h3>\n<span>followers</span>\n</div>\n</div>\n<ul>\n<li class="item" data-url="/mine/invite" data-title="\xe9\x82\x80\xe8\xaf\xb7\xe6\x9c\x8b\xe5\x8f\x8b\xe5\x8a\xa0\xe5\x85\xa5"> <span class="num">')  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    300          _tmp = current_user.unused_invite_key_count  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    301          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    302          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    303          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    304          _append(_tmp)  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    305          _append('</span><span class="anchor">\xe9\x82\x80\xe8\xaf\xb7\xe6\x9c\x8b\xe5\x8f\x8b\xe5\x8a\xa0\xe5\x85\xa5</span></li>\n<li class="item" data-title="\xe6\x88\x91\xe6\xb7\xbb\xe5\x8a\xa0\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87" data-url="/mine/photos"> <span class="num">')  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    306          _tmp = current_user.photo_count  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    307          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    308          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    309          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    310          _append(_tmp)  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    311          _append('</span><span class="anchor">\xe6\x88\x91\xe6\xb7\xbb\xe5\x8a\xa0\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87</span></li>\n<li class="item" data-title="\xe6\x88\x91\xe5\x96\x9c\xe6\xac\xa2\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87" data-url="/mine/likes_photos"><span class="num">')  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    312          _tmp = current_user.likes_count  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    313          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    314          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    315          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    316          _append(_tmp)  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    317          _append('</span><span class="anchor">\xe6\x88\x91\xe5\x96\x9c\xe6\xac\xa2\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87</span> </li>\n</ul>\n</div>\n</div>\n')  # partial/sidebar_me.html:27 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    318          _append('\n')  # partial/sidebar_global.html:4 (via additives.html:8, base.html:54)
    319      else:  # partial/sidebar_global.html:4 (via additives.html:8, base.html:54)
    320          _append('\n')  # partial/sidebar_global.html:5 (via additives.html:8, base.html:54)
    321          _append('<div class="box" id="panel-about">\n<div class="header">\xe5\x85\xb3\xe4\xba\x8e\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</div>\n<div class="body">\n<p>\xe5\x85\xb3\xe6\xb3\xa8\xe9\xa3\x9f\xe5\x93\x81\xe5\xae\x89\xe5\x85\xa8\xef\xbc\x8c\xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe4\xb8\x96\xe7\x95\x8c</p>\n<p>\xe6\x89\x80\xe6\x9c\x89\xe9\xa3\x9f\xe5\x93\x81\xe5\x92\x8c\xe6\xb7\xbb\xe5\x8a\xa0\xe5\x89\x82\xe8\xb5\x84\xe6\x96\x99\xe6\x9d\xa5\xe8\x87\xaa\xe4\xba\x8eiearth-\xe7\x88\xb1\xe5\x9c\xb0\xe7\x90\x83\xe7\x8e\xaf\xe4\xbf\x9d\xe6\x9c\xba\xe6\x9e\x84</p>\n</div>\n</div>\n')  # partial/sidebar_about.html:8 (via partial/sidebar_global.html:5, additives.html:8, base.html:54)
    322          _append('\n')  # partial/sidebar_global.html:6 (via additives.html:8, base.html:54)
    323          _append('<div class="box" id="panel-login">\n<div class="header">\xe7\x99\xbb\xe5\x85\xa5\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</div>\n<div class="body">\n<form action="/login" method="POST">\n<div class="section">\n<input type="TEXT" name="username" placeholder="\xe7\x94\xa8\xe6\x88\xb7\xe5\x90\x8d/Email" />\n</div>\n<div class="section">\n<input type="PASSWORD" name="password" placeholder="\xe5\xaf\x86\xe7\xa0\x81" />\n</div>\n<div class="section">\n<input type="SUBMIT" value="\xe7\x99\xbb\xe5\x85\xa5" class="btn primary-btn" />\n<span class="tip">\xe4\xbc\x9a\xe8\xae\xb0\xe4\xbd\x8f\xe7\x99\xbb\xe5\x85\xa5\xe4\xb8\x80\xe4\xb8\xaa\xe6\x9c\x88</span>\n</div>\n</form>\n<div class="alert alert-info">\xe5\x86\x85\xe6\xb5\x8b\xe4\xb8\xad\xef\xbc\x8c\xe5\x8f\xaa\xe6\x8e\xa5\xe5\x8f\x97\xe9\x82\x80\xe8\xaf\xb7\xe6\xb3\xa8\xe5\x86\x8c</div>\n</div>\n</div>\n')  # partial/sidebar_login.html:19 (via partial/sidebar_global.html:6, additives.html:8, base.html:54)
    324          _append('\n')  # partial/sidebar_global.html:8 (via additives.html:8, base.html:54)
    325      _append('\n')  # partial/sidebar_global.html:10 (via additives.html:8, base.html:54)
    326      _append('<div class="box">\n<div class="header">\xe6\xb5\x8f\xe8\xa7\x88\xe9\xa3\x9f\xe5\x93\x81</div>\n<div class="body">\n<ul>\n<li class="item" data-url="/photos/hot" data-title="\xe7\x83\xad\xe9\x97\xa8\xe9\xa3\x9f\xe5\x93\x81"><span class="anchor">\xe7\x83\xad\xe9\x97\xa8\xe9\xa3\x9f\xe5\x93\x81</span></li>\n<li class="item" data-url="/photos/latest" data-title="\xe6\x9c\x80\xe6\x96\xb0\xe9\xa3\x9f\xe5\x93\x81"><span class="anchor">\xe6\x9c\x80\xe6\x96\xb0\xe9\xa3\x9f\xe5\x93\x81</span></li>\n</ul>\n</div>\n</div>\n')  # partial/sidebar_photos_nav.html:10 (via partial/sidebar_global.html:10, additives.html:8, base.html:54)
    327      _append('\n')  # partial/sidebar_global.html:11 (via additives.html:8, base.html:54)
    328      import models  # partial/sidebar_hot_searchs.html:1 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    329      _append('\n')  # partial/sidebar_hot_searchs.html:2 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    330      hot_searchs = models.Additive_Search().hot_searchs  # partial/sidebar_hot_searchs.html:2 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    331      _append('\n<div class="box" id="panel-searchs">\n<div class="header">\xe7\x83\xad\xe9\x97\xa8\xe6\x90\x9c\xe7\xb4\xa2</div>\n<div class="body">\n<ul>\n')  # partial/sidebar_hot_searchs.html:8 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    332      for search in hot_searchs:  # partial/sidebar_hot_searchs.html:8 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    333          _append('\n<li class="item" data-url="/search/')  # partial/sidebar_hot_searchs.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    334          _tmp = search.search  # partial/sidebar_hot_searchs.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    335          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_hot_searchs.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    336          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_hot_searchs.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    337          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_hot_searchs.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    338          _append(_tmp)  # partial/sidebar_hot_searchs.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    339          _append('"><i class="icon-search"></i><span class="anchor">')  # partial/sidebar_hot_searchs.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    340          _tmp = search.search  # partial/sidebar_hot_searchs.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    341          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_hot_searchs.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    342          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_hot_searchs.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    343          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_hot_searchs.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    344          _append(_tmp)  # partial/sidebar_hot_searchs.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    345          _append('</span></li>\n')  # partial/sidebar_hot_searchs.html:10 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    346      _append('\n</ul>\n</div>\n</div>\n')  # partial/sidebar_hot_searchs.html:14 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    347      _append('\n')  # partial/sidebar_global.html:12 (via additives.html:8, base.html:54)
    348      _append('\n')  # additives.html:9 (via base.html:54)
    349      _append('\n</div>\n</div>\n</div>\n<div id="footer">\n<div class="inner">\n<div class="right">\n<span class="belief">make the world a little better and easier</span>\n</div>\n<div class="left">\n<ul>\n<li><a href="/about">\xe5\x85\xb3\xe4\xba\x8e</a> <!--<span class="divider">/</span>--></li>\n<!--<li><a href="/feedback">\xe5\x8f\x8d\xe9\xa6\x88</a> <span class="divider">/</span></li>-->\n<!--<li><a href="/blog">\xe6\x97\xa5\xe5\xbf\x97</a></li>-->\n</ul>\n</div>\n</div>\n</div>\n<script type="text/javascript">\nvar _gaq = _gaq || [];\n_gaq.push([\'_setAccount\', \'UA-1281124-23\']);\n_gaq.push([\'_trackPageview\']);\n(function() {\nvar ga = document.createElement(\'script\'); ga.type = \'text/javascript\'; ga.async = true;\nga.src = (\'https:\' == document.location.protocol ? \'https://ssl\' : \'http://www\') + \'.google-analytics.com/ga.js\';\nvar s = document.getElementsByTagName(\'script\')[0]; s.parentNode.insertBefore(ga, s);\n})();\n</script>\n<!-- love your mom! -->\n</body>\n<meta name="description" content="\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - " />\n')  # base.html:89
    350      return _utf8('').join(_buffer)  # base.html:0
[E 120721 12:55:53 web:1031] Uncaught exception GET / (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.100', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cookie': 'viewed_additive_ids="\\0541\\0542\\0543\\0544\\0545"; __utma=148685175.647871982.1342707625.1342831755.1342840246.6; __utmc=148685175; __utmz=148685175.1342707625.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)', 'Cache-Control': 'max-age=0', 'X-Real-Ip': '192.168.0.100'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "src/sites/www/handlers/home.py", line 14, in get
        return self._render('hot')
      File "src/sites/www/handlers/base.py", line 87, in _render
        current_additive = additive,
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 474, in render
        html = self.render_string(template_name, **kwargs)
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 586, in render_string
        return t.generate(**args)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 253, in generate
        return execute()
      File "additives_html.generated.py", line 334, in _execute
        _tmp = search.search  # partial/sidebar_hot_searchs.html:9 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    AttributeError: Could not locate column in row for column 'search'
[E 120721 12:55:53 web:1393] 500 GET / (127.0.0.1) 1383.83ms
[W 120721 12:55:53 web:1393] 404 GET /favicon.ico (127.0.0.1) 8.70ms
[I 120721 13:38:07 web:1393] 200 GET / (127.0.0.1) 1375.73ms
[I 120721 13:45:07 autoreload:133] /home/dk/work/python/safood/src/common/models/additive_search.py modified; restarting server
[I 120721 13:45:31 web:1393] 200 GET / (127.0.0.1) 1640.16ms
[W 120721 13:45:36 web:1393] 404 GET /additive/search/2 (127.0.0.1) 6.44ms
[W 120721 13:45:39 web:1393] 404 GET /additive/search/3 (127.0.0.1) 7.22ms
[W 120721 13:45:51 web:1393] 404 GET /additive/search/4 (127.0.0.1) 3.57ms
[W 120721 13:45:52 web:1393] 404 GET /additive/search/2 (127.0.0.1) 4.44ms
[W 120721 13:45:54 web:1393] 404 GET /additive/search/3 (127.0.0.1) 3.89ms
[W 120721 13:45:55 web:1393] 404 GET /additive/search/4 (127.0.0.1) 6.01ms
[W 120721 13:45:56 web:1393] 404 GET /additive/search/4 (127.0.0.1) 4.58ms
[W 120721 13:45:56 web:1393] 404 GET /additive/search/3 (127.0.0.1) 6.61ms
[W 120721 13:45:57 web:1393] 404 GET /additive/search/2 (127.0.0.1) 4.72ms
[I 120721 13:48:09 autoreload:133] src/sites/www/handlers/additive.py modified; restarting server
[I 120721 13:48:13 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/additive.py modified; restarting server
[I 120721 13:49:20 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/additive.py modified; restarting server
[I 120721 13:50:20 web:1393] 200 GET /additive/4 (127.0.0.1) 176.13ms
[I 120721 13:50:50 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/additive.py modified; restarting server
[I 120721 13:51:16 web:1393] 200 GET / (127.0.0.1) 246.06ms
[W 120721 13:51:23 web:1393] 404 GET /additive/search/2 (127.0.0.1) 3.07ms
[W 120721 13:51:24 web:1393] 404 GET /additive/search/2 (127.0.0.1) 0.98ms
[I 120721 13:56:51 web:1393] 200 GET / (127.0.0.1) 1671.68ms
[W 120721 13:56:57 web:1393] 404 GET /additive/search/2 (127.0.0.1) 4.53ms
[W 120721 13:57:00 web:1393] 404 GET /additive/search/3 (127.0.0.1) 7.17ms
[I 120721 13:59:51 web:1393] 200 GET / (127.0.0.1) 440.85ms
[I 120721 13:59:55 web:1393] 200 GET / (127.0.0.1) 199.22ms
[I 120721 13:59:57 web:1393] 304 GET / (127.0.0.1) 193.57ms
[I 120721 13:59:58 web:1393] 304 GET / (127.0.0.1) 200.93ms
[I 120721 14:00:09 web:1393] 304 GET / (127.0.0.1) 180.31ms
[I 120721 14:00:11 web:1393] 304 GET / (127.0.0.1) 234.55ms
[I 120721 14:00:29 web:1393] 304 GET / (127.0.0.1) 191.16ms
[I 120721 14:00:47 autoreload:133] src/sites/www/routes.py modified; restarting server
[I 120721 14:00:59 web:1393] 304 GET / (127.0.0.1) 184.30ms
[I 120721 14:02:02 web:1393] 304 GET / (127.0.0.1) 117.20ms
[I 120721 14:02:04 web:1393] 304 GET / (127.0.0.1) 93.36ms
[I 120721 14:02:23 web:1393] 200 GET / (127.0.0.1) 105.94ms
[I 120721 14:02:30 web:1393] 200 GET / (127.0.0.1) 42.29ms
[I 120721 14:02:34 web:1393] 304 GET / (127.0.0.1) 40.17ms
[I 120721 14:02:38 web:1393] 304 GET / (127.0.0.1) 210.04ms
[I 120721 14:04:38 web:1393] 304 GET / (127.0.0.1) 47.40ms
[I 120721 14:05:51 web:1393] 200 GET / (127.0.0.1) 131.36ms
[I 120721 14:05:57 web:1393] 200 GET / (127.0.0.1) 50.88ms
[I 120721 14:06:00 web:1393] 304 GET / (127.0.0.1) 52.80ms
[I 120721 14:06:12 web:1393] 304 GET / (127.0.0.1) 46.94ms
[I 120721 14:06:51 web:1393] 200 GET /additive/3 (127.0.0.1) 37.34ms
[I 120721 14:13:56 web:1393] 200 GET / (127.0.0.1) 179.20ms
[I 120721 14:14:01 web:1393] 200 GET /additive/2 (127.0.0.1) 31.58ms
[I 120721 14:14:45 web:1393] 200 GET /additive/4 (127.0.0.1) 37.06ms
[I 120721 14:14:46 web:1393] 200 GET /additive/4 (127.0.0.1) 83.87ms
[I 120721 14:14:46 web:1393] 200 GET /additive/4 (127.0.0.1) 29.11ms
[I 120721 14:14:46 web:1393] 200 GET /additive/4 (127.0.0.1) 35.66ms
[I 120721 14:14:46 web:1393] 200 GET /additive/4 (127.0.0.1) 30.94ms
[I 120721 14:14:46 web:1393] 200 GET /additive/4 (127.0.0.1) 75.55ms
[I 120721 14:15:25 web:1393] 200 GET /additive/2 (127.0.0.1) 39.81ms
[I 120721 14:15:25 web:1393] 200 GET /additive/2 (127.0.0.1) 32.92ms
[I 120721 14:15:25 web:1393] 200 GET /additive/2 (127.0.0.1) 42.16ms
[I 120721 14:15:26 web:1393] 200 GET /additive/2 (127.0.0.1) 71.93ms
[I 120721 14:15:26 web:1393] 200 GET /additive/2 (127.0.0.1) 42.29ms
[I 120721 14:15:26 web:1393] 200 GET /additive/2 (127.0.0.1) 58.47ms
[I 120721 14:15:26 web:1393] 200 GET /additive/2 (127.0.0.1) 42.29ms
[I 120721 14:15:26 web:1393] 200 GET /additive/2 (127.0.0.1) 45.51ms
[I 120721 14:15:26 web:1393] 200 GET /additive/2 (127.0.0.1) 37.74ms
[I 120721 14:15:26 web:1393] 200 GET /additive/2 (127.0.0.1) 43.51ms
[I 120721 14:15:26 web:1393] 304 GET /additive/2 (127.0.0.1) 35.89ms
[I 120721 14:15:26 web:1393] 200 GET /additive/2 (127.0.0.1) 40.53ms
[I 120721 14:15:26 web:1393] 200 GET /additive/2 (127.0.0.1) 35.99ms
[I 120721 14:15:26 web:1393] 200 GET /additive/2 (127.0.0.1) 35.62ms
[I 120721 14:15:26 web:1393] 200 GET /additive/2 (127.0.0.1) 42.91ms
[I 120721 14:15:26 web:1393] 200 GET /additive/2 (127.0.0.1) 37.14ms
[I 120721 14:15:26 web:1393] 200 GET /additive/2 (127.0.0.1) 32.99ms
[I 120721 14:15:26 web:1393] 200 GET /additive/2 (127.0.0.1) 38.03ms
[I 120721 14:15:26 web:1393] 200 GET /additive/2 (127.0.0.1) 37.41ms
[I 120721 14:15:26 web:1393] 200 GET /additive/2 (127.0.0.1) 36.23ms
[I 120721 14:15:26 web:1393] 200 GET /additive/2 (127.0.0.1) 34.89ms
[I 120721 14:15:26 web:1393] 200 GET /additive/2 (127.0.0.1) 38.07ms
[I 120721 14:15:27 web:1393] 200 GET /additive/2 (127.0.0.1) 37.70ms
[I 120721 14:15:27 web:1393] 200 GET /additive/2 (127.0.0.1) 39.50ms
[I 120721 14:15:27 web:1393] 200 GET /additive/2 (127.0.0.1) 46.75ms
[I 120721 14:15:27 web:1393] 200 GET /additive/2 (127.0.0.1) 36.95ms
[I 120721 14:15:27 web:1393] 304 GET /additive/2 (127.0.0.1) 40.37ms
[I 120721 14:15:27 web:1393] 200 GET /additive/2 (127.0.0.1) 37.85ms
[I 120721 14:15:27 web:1393] 200 GET /additive/2 (127.0.0.1) 51.80ms
[I 120721 14:15:27 web:1393] 200 GET /additive/2 (127.0.0.1) 47.73ms
[I 120721 14:15:27 web:1393] 200 GET /additive/2 (127.0.0.1) 55.03ms
[I 120721 14:15:27 web:1393] 200 GET /additive/2 (127.0.0.1) 50.27ms
[I 120721 14:15:27 web:1393] 200 GET /additive/2 (127.0.0.1) 49.18ms
[I 120721 14:15:27 web:1393] 200 GET /additive/2 (127.0.0.1) 51.81ms
[I 120721 14:15:27 web:1393] 200 GET /additive/2 (127.0.0.1) 44.14ms
[I 120721 14:15:27 web:1393] 200 GET /additive/2 (127.0.0.1) 42.71ms
[I 120721 14:15:27 web:1393] 200 GET /additive/2 (127.0.0.1) 37.62ms
[I 120721 14:15:27 web:1393] 200 GET /additive/2 (127.0.0.1) 36.66ms
[I 120721 14:15:27 web:1393] 200 GET /additive/2 (127.0.0.1) 37.13ms
[I 120721 14:15:27 web:1393] 200 GET /additive/2 (127.0.0.1) 38.33ms
[I 120721 14:15:27 web:1393] 200 GET /additive/2 (127.0.0.1) 48.19ms
[I 120721 14:15:28 web:1393] 200 GET /additive/2 (127.0.0.1) 38.41ms
[I 120721 14:15:28 web:1393] 200 GET /additive/2 (127.0.0.1) 45.02ms
[I 120721 14:15:28 web:1393] 200 GET /additive/2 (127.0.0.1) 42.89ms
[I 120721 14:15:28 web:1393] 200 GET /additive/2 (127.0.0.1) 40.77ms
[I 120721 14:15:28 web:1393] 200 GET /additive/2 (127.0.0.1) 39.19ms
[I 120721 14:15:28 web:1393] 200 GET /additive/2 (127.0.0.1) 43.36ms
[I 120721 14:15:28 web:1393] 200 GET /additive/2 (127.0.0.1) 38.82ms
[I 120721 14:15:28 web:1393] 200 GET /additive/2 (127.0.0.1) 41.20ms
[I 120721 14:15:28 web:1393] 200 GET /additive/2 (127.0.0.1) 44.42ms
[I 120721 14:15:28 web:1393] 200 GET /additive/2 (127.0.0.1) 34.52ms
[I 120721 14:15:28 web:1393] 200 GET /additive/2 (127.0.0.1) 40.08ms
[I 120721 14:15:28 web:1393] 200 GET /additive/2 (127.0.0.1) 40.73ms
[I 120721 14:15:28 web:1393] 200 GET /additive/2 (127.0.0.1) 38.54ms
[I 120721 14:15:28 web:1393] 200 GET /additive/2 (127.0.0.1) 41.06ms
[I 120721 14:15:28 web:1393] 200 GET /additive/2 (127.0.0.1) 46.87ms
[I 120721 14:15:28 web:1393] 200 GET /additive/2 (127.0.0.1) 42.93ms
[I 120721 14:15:28 web:1393] 200 GET /additive/2 (127.0.0.1) 41.31ms
[I 120721 14:15:28 web:1393] 200 GET /additive/2 (127.0.0.1) 42.22ms
[I 120721 14:15:28 web:1393] 200 GET /additive/2 (127.0.0.1) 35.26ms
[I 120721 14:15:28 web:1393] 200 GET /additive/2 (127.0.0.1) 41.12ms
[I 120721 14:15:29 web:1393] 200 GET /additive/2 (127.0.0.1) 45.69ms
[I 120721 14:15:29 web:1393] 200 GET /additive/2 (127.0.0.1) 39.80ms
[I 120721 14:15:29 web:1393] 304 GET /additive/2 (127.0.0.1) 40.77ms
[I 120721 14:15:29 web:1393] 200 GET /additive/2 (127.0.0.1) 40.54ms
[I 120721 14:15:29 web:1393] 304 GET /additive/2 (127.0.0.1) 37.59ms
[I 120721 14:15:29 web:1393] 200 GET /additive/2 (127.0.0.1) 42.36ms
[I 120721 14:15:29 web:1393] 200 GET /additive/2 (127.0.0.1) 43.94ms
[I 120721 14:15:29 web:1393] 200 GET /additive/2 (127.0.0.1) 68.72ms
[I 120721 14:15:29 web:1393] 200 GET /additive/2 (127.0.0.1) 37.11ms
[I 120721 14:15:29 web:1393] 200 GET /additive/2 (127.0.0.1) 49.13ms
[I 120721 14:15:29 web:1393] 200 GET /additive/2 (127.0.0.1) 37.48ms
[I 120721 14:15:29 web:1393] 200 GET /additive/2 (127.0.0.1) 40.74ms
[I 120721 14:15:29 web:1393] 200 GET /additive/2 (127.0.0.1) 39.43ms
[I 120721 14:15:29 web:1393] 200 GET /additive/2 (127.0.0.1) 42.26ms
[I 120721 14:15:29 web:1393] 200 GET /additive/2 (127.0.0.1) 44.23ms
[I 120721 14:15:29 web:1393] 200 GET /additive/2 (127.0.0.1) 42.39ms
[I 120721 14:15:29 web:1393] 200 GET /additive/2 (127.0.0.1) 38.32ms
[I 120721 14:15:29 web:1393] 200 GET /additive/2 (127.0.0.1) 40.76ms
[I 120721 14:15:29 web:1393] 200 GET /additive/2 (127.0.0.1) 43.24ms
[I 120721 14:15:29 web:1393] 200 GET /additive/2 (127.0.0.1) 44.98ms
[I 120721 14:15:30 web:1393] 200 GET /additive/2 (127.0.0.1) 40.20ms
[I 120721 14:15:30 web:1393] 200 GET /additive/2 (127.0.0.1) 45.28ms
[I 120721 14:15:30 web:1393] 200 GET /additive/2 (127.0.0.1) 42.87ms
[I 120721 14:20:07 web:1393] 200 GET / (127.0.0.1) 1750.06ms
[I 120721 14:20:12 web:1393] 200 GET / (127.0.0.1) 192.93ms
[I 120721 14:20:17 web:1393] 304 GET / (127.0.0.1) 185.77ms
[I 120721 14:20:18 web:1393] 304 GET / (127.0.0.1) 222.56ms
[I 120721 14:32:57 web:1393] 200 GET / (127.0.0.1) 546.94ms
[I 120721 14:33:09 web:1393] 200 GET / (127.0.0.1) 178.00ms
[I 120721 14:33:13 web:1393] 304 GET / (127.0.0.1) 173.82ms
[I 120721 14:33:46 web:1393] 200 GET / (127.0.0.1) 432.77ms
[I 120721 14:33:48 web:1393] 200 GET / (127.0.0.1) 197.51ms
[I 120721 14:33:56 web:1393] 304 GET / (127.0.0.1) 194.18ms
[I 120721 14:34:13 web:1393] 304 GET / (127.0.0.1) 193.59ms
[I 120721 14:34:53 autoreload:133] src/sites/www/routes.py modified; restarting server
[I 120721 14:35:07 web:1393] 200 GET / (127.0.0.1) 239.25ms
[I 120721 14:35:11 web:1393] 200 GET / (127.0.0.1) 43.13ms
[I 120721 14:35:14 web:1393] 304 GET / (127.0.0.1) 42.61ms
[I 120721 14:35:31 autoreload:133] /home/dk/work/python/safood/src/common/models/additive_search.py modified; restarting server
[I 120721 14:35:49 autoreload:133] /home/dk/work/python/safood/src/common/models/additive_search.py modified; restarting server
[I 120721 14:36:22 web:1393] 200 GET /additive/2 (127.0.0.1) 176.22ms
[W 120721 14:36:45 web:1393] 404 GET /favicon.ico (127.0.0.1) 3.13ms
[I 120721 14:36:51 web:1393] 200 GET / (127.0.0.1) 124.97ms
[I 120721 14:36:55 web:1393] 200 GET /additive/1 (127.0.0.1) 36.77ms
[I 120721 14:37:07 web:1393] 200 GET / (127.0.0.1) 180.62ms
[I 120721 14:37:33 autoreload:133] /home/dk/work/python/safood/src/sites/www/routes.py modified; restarting server
[I 120721 14:39:28 web:1393] 200 GET / (127.0.0.1) 257.25ms
[I 120721 14:39:38 web:1393] 200 GET / (127.0.0.1) 45.47ms
[I 120721 14:39:40 web:1393] 304 GET / (127.0.0.1) 45.35ms
[I 120721 14:39:45 web:1393] 304 GET / (127.0.0.1) 47.97ms
[I 120721 14:39:46 web:1393] 304 GET / (127.0.0.1) 46.30ms
[I 120721 14:40:10 web:1393] 200 GET / (127.0.0.1) 111.86ms
[I 120721 14:40:13 web:1393] 200 GET / (127.0.0.1) 44.29ms
[I 120721 14:40:15 web:1393] 304 GET / (127.0.0.1) 46.23ms
[I 120721 14:40:16 web:1393] 304 GET / (127.0.0.1) 40.26ms
[I 120721 14:40:17 web:1393] 304 GET / (127.0.0.1) 45.23ms
[W 120721 14:40:23 web:1393] 404 GET /photos/hot (127.0.0.1) 2.75ms
[W 120721 14:40:24 web:1393] 404 GET /photos/hot (127.0.0.1) 0.93ms
[W 120721 14:40:25 web:1393] 404 GET /photos/latest (127.0.0.1) 1.35ms
[I 120721 14:40:46 web:1393] 200 GET /additive/1 (127.0.0.1) 43.12ms
[W 120721 14:40:52 web:1393] 404 GET /favicon.ico (127.0.0.1) 2.60ms
[I 120721 14:40:57 web:1393] 200 GET / (127.0.0.1) 111.87ms
[I 120721 15:37:32 web:1393] 200 GET / (127.0.0.1) 62.61ms
[I 120721 15:37:34 web:1393] 304 GET / (127.0.0.1) 45.46ms
[I 120721 15:37:43 web:1393] 304 GET / (127.0.0.1) 45.48ms
[I 120721 15:38:33 web:1393] 200 GET / (127.0.0.1) 117.75ms
[I 120721 15:38:55 web:1393] 200 GET / (127.0.0.1) 56.93ms
[I 120721 15:39:01 web:1393] 304 GET / (127.0.0.1) 41.14ms
[I 120721 15:42:08 web:1393] 200 GET / (127.0.0.1) 131.87ms
[I 120721 15:42:21 web:1393] 200 GET / (127.0.0.1) 65.05ms
[I 120721 15:42:24 web:1393] 304 GET / (127.0.0.1) 60.81ms
[I 120721 15:42:32 web:1393] 304 GET / (127.0.0.1) 54.62ms
[I 120721 15:42:52 web:1393] 200 GET /additive/4 (127.0.0.1) 35.89ms
[W 120721 15:42:56 web:1393] 404 GET /favicon.ico (127.0.0.1) 3.80ms
[W 120721 15:42:57 web:1393] 404 GET /favicon.ico (127.0.0.1) 1.11ms
[W 120721 15:42:59 web:1393] 404 GET /favicon.ico (127.0.0.1) 1.18ms
[I 120721 15:43:06 web:1393] 200 GET / (127.0.0.1) 120.22ms
[I 120721 15:46:43 web:1393] 200 GET / (127.0.0.1) 108.44ms
[I 120721 15:47:14 web:1393] 200 GET / (127.0.0.1) 119.70ms
[I 120721 15:47:16 web:1393] 200 GET / (127.0.0.1) 46.99ms
[I 120721 15:47:19 web:1393] 304 GET / (127.0.0.1) 47.06ms
[I 120721 15:47:20 web:1393] 304 GET / (127.0.0.1) 50.38ms
[I 120721 15:47:21 web:1393] 304 GET / (127.0.0.1) 45.75ms
[I 120721 15:47:22 web:1393] 304 GET / (127.0.0.1) 46.65ms
[I 120721 15:49:04 web:1393] 200 GET / (127.0.0.1) 151.00ms
[I 120721 16:00:11 web:1393] 200 GET / (127.0.0.1) 108.03ms
[I 120721 16:00:15 web:1393] 200 GET /additive/3 (127.0.0.1) 33.46ms
[I 120721 16:00:20 web:1393] 200 GET / (127.0.0.1) 121.32ms
[I 120721 16:00:28 web:1393] 200 GET /additive/2 (127.0.0.1) 34.48ms
[I 120721 16:01:45 web:1393] 200 GET / (127.0.0.1) 131.90ms
[I 120721 16:01:54 web:1393] 200 GET /additive/2 (127.0.0.1) 35.92ms
[I 120721 16:01:58 web:1393] 200 GET /additive/3 (127.0.0.1) 29.41ms
[I 120721 16:02:01 web:1393] 200 GET /additive/4 (127.0.0.1) 134.09ms
[I 120721 16:03:50 web:1393] 200 GET / (127.0.0.1) 131.43ms
[I 120721 16:05:13 web:1393] 200 GET / (127.0.0.1) 123.62ms
[I 120721 16:14:07 web:1393] 200 GET / (127.0.0.1) 136.90ms
[I 120721 16:16:04 web:1393] 200 GET / (127.0.0.1) 147.50ms
[I 120721 16:21:33 web:1393] 200 GET / (127.0.0.1) 115.04ms
[I 120721 16:22:00 web:1393] 200 GET / (127.0.0.1) 117.68ms
[I 120721 16:24:04 web:1393] 200 GET / (127.0.0.1) 116.65ms
[I 120721 16:24:21 web:1393] 200 GET / (127.0.0.1) 107.18ms
[I 120721 16:26:07 web:1393] 200 GET / (127.0.0.1) 137.99ms
[I 120721 16:26:32 web:1393] 200 GET / (127.0.0.1) 114.69ms
[I 120721 16:26:44 web:1393] 200 GET / (127.0.0.1) 115.95ms
[I 120721 16:27:51 web:1393] 200 GET / (127.0.0.1) 129.25ms
[I 120721 16:28:21 web:1393] 200 GET / (127.0.0.1) 113.98ms
[I 120722 11:18:47 web:1393] 200 GET / (127.0.0.1) 2605.82ms
[I 120722 11:19:09 web:1393] 200 GET / (127.0.0.1) 514.74ms
[W 120722 11:19:30 web:1393] 404 GET /favicon.ico (127.0.0.1) 280.24ms
[I 120722 11:19:30 web:1393] 200 GET / (127.0.0.1) 655.01ms
[W 120722 11:19:31 web:1393] 404 GET /favicon.ico (127.0.0.1) 12.25ms
[I 120722 13:23:30 web:1393] 304 GET /additive/1 (127.0.0.1) 228.62ms
[I 120722 13:23:46 web:1393] 200 GET /additive/2 (127.0.0.1) 119.97ms
[I 120722 13:23:55 web:1393] 200 GET /additive/3 (127.0.0.1) 126.69ms
[E 120722 13:29:12 web:1031] Uncaught exception GET /additive/1 (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/additive/1', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.100', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cookie': 'viewed_additive_ids="\\0541\\0542\\0543\\0544\\0545"; __utma=148685175.647871982.1342707625.1342927143.1342934611.10; __utmb=148685175.6.10.1342934611; __utmc=148685175; __utmz=148685175.1342707625.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)', 'Referer': 'http://192.168.0.189/', 'X-Real-Ip': '192.168.0.100', 'If-None-Match': '"7c14547796ca5c42daf0fc68a0b0a4bc8db8dd14"'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "src/sites/www/handlers/additive.py", line 27, in get
        return self.render('partial/additive.html',
      File "src/sites/www/handlers/additive.py", line 27, in get
        return self.render('partial/additive.html',
      File "/usr/lib/python2.7/bdb.py", line 48, in trace_dispatch
        return self.dispatch_line(frame)
      File "/usr/lib/python2.7/bdb.py", line 67, in dispatch_line
        if self.quitting: raise BdbQuit
    BdbQuit
[E 120722 13:29:13 web:1393] 500 GET /additive/1 (127.0.0.1) 131691.67ms
[W 120722 13:29:13 web:1393] 404 GET /favicon.ico (127.0.0.1) 4.00ms
[I 120722 13:33:24 web:1393] 200 GET / (127.0.0.1) 1622.76ms
[I 120722 13:39:38 web:1393] 200 GET /additive/1 (127.0.0.1) 350955.88ms
[W 120722 13:39:38 web:1393] 404 GET /favicon.ico (127.0.0.1) 6.71ms
[I 120722 13:39:38 web:1393] 200 GET / (127.0.0.1) 579.07ms
[W 120722 13:39:38 web:1393] 404 GET /favicon.ico (127.0.0.1) 5.21ms
[W 120722 13:39:38 web:1393] 404 GET /favicon.ico (127.0.0.1) 4.19ms
[W 120722 13:39:38 web:1393] 404 GET /favicon.ico (127.0.0.1) 4.16ms
[I 120722 13:39:52 web:1393] 200 GET / (127.0.0.1) 496.42ms
[I 120722 13:46:08 web:1393] 200 GET /additive/2 (127.0.0.1) 364530.16ms
[W 120722 13:46:08 web:1393] 404 GET /favicon.ico (127.0.0.1) 6.41ms
[I 120722 13:46:31 web:1393] 200 GET /additive/5 (127.0.0.1) 139.48ms
[I 120722 13:52:56 web:1393] 200 GET /additive/4 (127.0.0.1) 370629.58ms
[W 120722 13:52:56 web:1393] 404 GET /favicon.ico (127.0.0.1) 6.74ms
[I 120722 13:53:14 web:1393] 200 GET / (127.0.0.1) 1723.21ms
[I 120722 13:54:35 autoreload:133] /home/dk/work/python/safood/src/common/models/additive.py modified; restarting server
[I 120722 13:55:05 autoreload:133] /home/dk/work/python/safood/src/common/models/additive.py modified; restarting server
[I 120722 13:55:24 web:1393] 200 GET /additive/2 (127.0.0.1) 1417.58ms
[I 120722 13:55:32 web:1393] 200 GET /additive/1 (127.0.0.1) 159.78ms
[I 120722 13:55:49 web:1393] 200 GET / (127.0.0.1) 532.85ms
[I 120722 16:06:27 web:1393] 200 GET /additive/3 (127.0.0.1) 172.29ms
[I 120722 16:06:31 web:1393] 200 GET / (127.0.0.1) 547.79ms
[I 120722 16:06:44 web:1393] 200 GET /additive/4 (127.0.0.1) 207.98ms
[I 120722 16:06:52 web:1393] 200 GET /additive/4 (127.0.0.1) 126.74ms
[I 120722 16:06:59 web:1393] 200 GET / (127.0.0.1) 530.42ms
[I 120722 16:07:02 web:1393] 200 GET /additive/4 (127.0.0.1) 121.60ms
[I 120722 16:08:40 web:1393] 200 GET / (127.0.0.1) 521.69ms
[W 120722 16:08:51 web:1393] 404 GET /photos/hot (127.0.0.1) 5.17ms
[W 120722 16:08:51 web:1393] 404 GET /photos/latest (127.0.0.1) 5.01ms
[W 120722 16:08:52 web:1393] 404 GET /photos/hot (127.0.0.1) 3.60ms
[I 120722 16:14:07 autoreload:133] /home/dk/work/python/safood/src/common/helpers/__init__.py modified; restarting server
[I 120722 17:07:28 autoreload:133] /home/dk/work/python/safood/src/common/helpers/__init__.py modified; restarting server
[I 120722 17:08:28 autoreload:133] /home/dk/work/python/safood/src/common/helpers/__init__.py modified; restarting server
[I 120722 17:14:28 autoreload:133] /home/dk/work/python/safood/src/common/helpers/__init__.py modified; restarting server
[I 120722 17:15:53 autoreload:133] /home/dk/work/python/safood/src/common/helpers/__init__.py modified; restarting server
[I 120722 17:15:57 web:1393] 200 GET / (127.0.0.1) 234.33ms
[I 120722 17:16:04 web:1393] 200 GET / (127.0.0.1) 118.11ms
[I 120722 17:16:09 web:1393] 304 GET / (127.0.0.1) 120.85ms
[I 120722 17:16:11 web:1393] 304 GET / (127.0.0.1) 112.27ms
[I 120722 17:20:19 web:1393] 200 GET / (127.0.0.1) 128.18ms
[I 120722 17:20:22 web:1393] 200 GET / (127.0.0.1) 44.72ms
[I 120722 17:20:24 web:1393] 304 GET / (127.0.0.1) 43.96ms
[I 120722 17:20:24 web:1393] 304 GET / (127.0.0.1) 44.97ms
[I 120722 17:20:25 web:1393] 304 GET / (127.0.0.1) 45.25ms
[I 120722 17:21:47 web:1393] 200 GET / (127.0.0.1) 132.10ms
[I 120722 17:21:50 web:1393] 200 GET / (127.0.0.1) 119.59ms
[I 120722 17:21:52 web:1393] 304 GET / (127.0.0.1) 49.30ms
[I 120722 17:21:53 web:1393] 304 GET / (127.0.0.1) 45.12ms
[I 120722 17:22:10 web:1393] 200 GET / (127.0.0.1) 117.47ms
[I 120722 17:22:12 web:1393] 200 GET / (127.0.0.1) 46.38ms
[I 120722 17:22:13 web:1393] 304 GET / (127.0.0.1) 46.38ms
[I 120722 17:22:28 web:1393] 200 GET / (127.0.0.1) 120.67ms
[W 120722 17:22:31 web:1393] 404 GET /food/latest (127.0.0.1) 2.25ms
[W 120722 17:22:32 web:1393] 404 GET /favicon.ico (127.0.0.1) 2.60ms
[W 120722 17:22:38 web:1393] 404 GET /food/hot (127.0.0.1) 0.94ms
[W 120722 17:22:38 web:1393] 404 GET /favicon.ico (127.0.0.1) 1.09ms
[I 120722 17:37:57 autoreload:133] /home/dk/work/python/safood/src/sites/www/routes.py modified; restarting server
[E 120723 08:02:27 template:256] additives.html code:
      1  def _execute():  # base.html:0
      2      _buffer = []  # base.html:0
      3      _append = _buffer.append  # base.html:0
      4      _append('<!doctype html>\n<head>\n<meta charset="UTF-8" />\n<meta content="True" name="HandheldFriendly" />\n<meta content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0; name=\'viewport\'" />\n<title>\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - \xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81')  # base.html:6
      5      _append('</title>\n<link rel="stylesheet" type="text/css" media="screen" href="/static/css/vendor/jquery.fancybox.css" />\n<link rel="stylesheet" type="text/css" media="screen" href="/static/css/main.css" />\n<link rel="shortcut icon" href="/static/img/favicon.ico" />\n<link rel="canonical" href="http://wuditoo.com/" />\n<meta name="description" content="\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - \xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81" />\n<script src="/static/js/vendor/jquery.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.history.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.fancybox.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.scrollTo.min.js" type="text/javascript"></script>\n')  # base.html:16
      6      _append('\n<script type="text/javascript">\n')  # additives.html:13 (via base.html:16)
      7      if current_additive:  # additives.html:13 (via base.html:16)
      8          _append('\nmeta_additive = {\nurl: "/additive/')  # additives.html:15 (via base.html:16)
      9          _tmp = current_additive.id  # additives.html:15 (via base.html:16)
     10          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # additives.html:15 (via base.html:16)
     11          else: _tmp = _utf8(str(_tmp))  # additives.html:15 (via base.html:16)
     12          _tmp = _utf8(xhtml_escape(_tmp))  # additives.html:15 (via base.html:16)
     13          _append(_tmp)  # additives.html:15 (via base.html:16)
     14          _append('",\nwidth: ')  # additives.html:16 (via base.html:16)
     15          _tmp = current_additive.width  # additives.html:16 (via base.html:16)
     16          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # additives.html:16 (via base.html:16)
     17          else: _tmp = _utf8(str(_tmp))  # additives.html:16 (via base.html:16)
     18          _tmp = _utf8(xhtml_escape(_tmp))  # additives.html:16 (via base.html:16)
     19          _append(_tmp)  # additives.html:16 (via base.html:16)
     20          _append(',\nheight: ')  # additives.html:17 (via base.html:16)
     21          _tmp = current_additive.height  # additives.html:17 (via base.html:16)
     22          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # additives.html:17 (via base.html:16)
     23          else: _tmp = _utf8(str(_tmp))  # additives.html:17 (via base.html:16)
     24          _tmp = _utf8(xhtml_escape(_tmp))  # additives.html:17 (via base.html:16)
     25          _append(_tmp)  # additives.html:17 (via base.html:16)
     26          _append('\n}\n')  # additives.html:19 (via base.html:16)
     27      _append('\n</script>\n')  # additives.html:21 (via base.html:16)
     28      _append('\n<script src="/static/js/main.js" type="text/javascript"></script>\n</head>\n<!--[if IE 7 ]><body class="ie7"><![endif]-->\n<!--[if gt IE 7]><body class="ie"><![endif]-->\n<!--[if !IE]><body><![endif]-->\n<div id="header">\n<div class="inner">\n<div id="logo"><a href="/">\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</a></div>\n<div id="slogon">\xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81</div>\n<div id="witticism">')  # base.html:27
     29      _tmp = home_sentence()  # base.html:27
     30      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:27
     31      else: _tmp = _utf8(str(_tmp))  # base.html:27
     32      _tmp = _utf8(xhtml_escape(_tmp))  # base.html:27
     33      _append(_tmp)  # base.html:27
     34      _append('</div>\n<!--\n<ul class="nav-right">\n</ul>\n-->\n</div>\n</div>\n<div id="container">\n<div class="inner">\n<div class="message alert alert-warn">\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0\xe5\xad\x95\xe8\x82\xb2\xe4\xb8\xad\xef\xbc\x8c\xe6\x97\xb6\xe9\x97\xb4\xe5\xbe\x85\xe5\xae\x9a\xe3\x80\x82\xe8\xb0\xa2\xe8\xb0\xa2\xe6\x82\xa8\xe7\x9a\x84\xe5\x88\xb0\xe8\xae\xbf\xef\xbc\x9a\xef\xbc\x89</div>\n')  # base.html:38
     35      message = get_message()  # base.html:38
     36      _append('\n')  # base.html:39
     37      for message_type in ('error', 'success', 'info', 'warn'):  # base.html:39
     38          _append('\n')  # base.html:40
     39          if message and message_type == message[0]:  # base.html:40
     40              _append('\n<div id="')  # base.html:41
     41              _tmp = message_type  # base.html:41
     42              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     43              else: _tmp = _utf8(str(_tmp))  # base.html:41
     44              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     45              _append(_tmp)  # base.html:41
     46              _append('-message" class="message alert alert-')  # base.html:41
     47              _tmp = message_type  # base.html:41
     48              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     49              else: _tmp = _utf8(str(_tmp))  # base.html:41
     50              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     51              _append(_tmp)  # base.html:41
     52              _append('">')  # base.html:41
     53              _tmp = message[1]  # base.html:41
     54              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     55              else: _tmp = _utf8(str(_tmp))  # base.html:41
     56              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     57              _append(_tmp)  # base.html:41
     58              _append('</div>\n')  # base.html:42
     59          else:  # base.html:42
     60              _append('\n<div id="')  # base.html:43
     61              _tmp = message_type  # base.html:43
     62              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:43
     63              else: _tmp = _utf8(str(_tmp))  # base.html:43
     64              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:43
     65              _append(_tmp)  # base.html:43
     66              _append('-message" class="message alert alert-')  # base.html:43
     67              _tmp = message_type  # base.html:43
     68              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:43
     69              else: _tmp = _utf8(str(_tmp))  # base.html:43
     70              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:43
     71              _append(_tmp)  # base.html:43
     72              _append(' hide"></div>\n')  # base.html:44
     73          _append('\n')  # base.html:45
     74      _append('\n')  # base.html:47
     75      _append('\n<div id="main">\n')  # base.html:50
     76      _append('\n')  # additives.html:4 (via base.html:50)
     77      _append('<div class="box" id="foods">\n<div class="header">')  # partial/additives.html:2 (via additives.html:4, base.html:50)
     78      _tmp = foods_title  # partial/additives.html:2 (via additives.html:4, base.html:50)
     79      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:2 (via additives.html:4, base.html:50)
     80      else: _tmp = _utf8(str(_tmp))  # partial/additives.html:2 (via additives.html:4, base.html:50)
     81      _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:2 (via additives.html:4, base.html:50)
     82      _append(_tmp)  # partial/additives.html:2 (via additives.html:4, base.html:50)
     83      _append('</div>\n<div class="body main ul">\n')  # partial/additives.html:4 (via additives.html:4, base.html:50)
     84      for index, food in enumerate(foods):  # partial/additives.html:4 (via additives.html:4, base.html:50)
     85          _append('\n')  # partial/additives.html:5 (via additives.html:4, base.html:50)
     86          creator = food.creator  # partial/additives.html:5 (via additives.html:4, base.html:50)
     87          _append('\n<div class="food-item">\n<div class="header">\n<a class="avatar" href="/food/')  # partial/additives.html:8 (via additives.html:4, base.html:50)
     88          _tmp = food.id  # partial/additives.html:8 (via additives.html:4, base.html:50)
     89          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     90          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     91          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     92          _append(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     93          _append('"><img src="')  # partial/additives.html:8 (via additives.html:4, base.html:50)
     94          _tmp = get_avatar_url(creator, 's')  # partial/additives.html:8 (via additives.html:4, base.html:50)
     95          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     96          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     97          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     98          _append(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     99          _append('" /> ')  # partial/additives.html:8 (via additives.html:4, base.html:50)
    100          _tmp = food.name  # partial/additives.html:8 (via additives.html:4, base.html:50)
    101          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
    102          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
    103          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
    104          _append(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
    105          _append('</a>\n</div>\n<div class="body">\n')  # partial/additives.html:11 (via additives.html:4, base.html:50)
    106          for index, food_part in enumerate(food_parts):  # partial/additives.html:11 (via additives.html:4, base.html:50)
    107              _append('\n<div class="food_part">')  # partial/additives.html:12 (via additives.html:4, base.html:50)
    108              _tmp = food_part.name  # partial/additives.html:12 (via additives.html:4, base.html:50)
    109              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:12 (via additives.html:4, base.html:50)
    110              else: _tmp = _utf8(str(_tmp))  # partial/additives.html:12 (via additives.html:4, base.html:50)
    111              _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:12 (via additives.html:4, base.html:50)
    112              _append(_tmp)  # partial/additives.html:12 (via additives.html:4, base.html:50)
    113              _append('</div>\n')  # partial/additives.html:13 (via additives.html:4, base.html:50)
    114          _append('\n</div>\n<div class="footer">\n<span class="meta">\n<li><i class="icon-view"></i> ')  # partial/additives.html:18 (via additives.html:4, base.html:50)
    115          _tmp = food.views_count  # partial/additives.html:18 (via additives.html:4, base.html:50)
    116          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:18 (via additives.html:4, base.html:50)
    117          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:18 (via additives.html:4, base.html:50)
    118          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:18 (via additives.html:4, base.html:50)
    119          _append(_tmp)  # partial/additives.html:18 (via additives.html:4, base.html:50)
    120          _append(' | Created:')  # partial/additives.html:18 (via additives.html:4, base.html:50)
    121          _tmp = timesince(food.created)  # partial/additives.html:18 (via additives.html:4, base.html:50)
    122          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:18 (via additives.html:4, base.html:50)
    123          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:18 (via additives.html:4, base.html:50)
    124          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:18 (via additives.html:4, base.html:50)
    125          _append(_tmp)  # partial/additives.html:18 (via additives.html:4, base.html:50)
    126          _append('</li>\n</span>\n<span class="created">\n</span>\n</div>\n</div>\n')  # partial/additives.html:25 (via additives.html:4, base.html:50)
    127          _append('\n')  # partial/additives.html:26 (via additives.html:4, base.html:50)
    128          if index > 0 and (index + 1) % 3 == 0:  # partial/additives.html:26 (via additives.html:4, base.html:50)
    129              _append('\n<div class="clearfix"></div>\n')  # partial/additives.html:28 (via additives.html:4, base.html:50)
    130          _append('\n')  # partial/additives.html:30 (via additives.html:4, base.html:50)
    131      _append('\n')  # partial/additives.html:31 (via additives.html:4, base.html:50)
    132      page_type = 'foods'  # partial/additives.html:31 (via additives.html:4, base.html:50)
    133      _append('\n')  # partial/additives.html:32 (via additives.html:4, base.html:50)
    134      _append('\n')  # partial/pagination.html:3 (via partial/additives.html:32, additives.html:4, base.html:50)
    135      from macros.macro import ADDITIVES_PER_PAGE, USERS_PER_PAGE  # partial/pagination.html:3 (via partial/additives.html:32, additives.html:4, base.html:50)
    136      _append('\n')  # partial/pagination.html:4 (via partial/additives.html:32, additives.html:4, base.html:50)
    137      import math  # partial/pagination.html:4 (via partial/additives.html:32, additives.html:4, base.html:50)
    138      _append('\n')  # partial/pagination.html:6 (via partial/additives.html:32, additives.html:4, base.html:50)
    139      if page_type == 'additives':  # partial/pagination.html:6 (via partial/additives.html:32, additives.html:4, base.html:50)
    140          _append('\n')  # partial/pagination.html:7 (via partial/additives.html:32, additives.html:4, base.html:50)
    141          items_per_page = ADDITIVES_PER_PAGE  # partial/pagination.html:7 (via partial/additives.html:32, additives.html:4, base.html:50)
    142          _append('\n')  # partial/pagination.html:8 (via partial/additives.html:32, additives.html:4, base.html:50)
    143      else:  # partial/pagination.html:8 (via partial/additives.html:32, additives.html:4, base.html:50)
    144          _append('\n')  # partial/pagination.html:9 (via partial/additives.html:32, additives.html:4, base.html:50)
    145          items_per_page = USERS_PER_PAGE  # partial/pagination.html:9 (via partial/additives.html:32, additives.html:4, base.html:50)
    146          _append('\n')  # partial/pagination.html:10 (via partial/additives.html:32, additives.html:4, base.html:50)
    147      _append('\n')  # partial/pagination.html:12 (via partial/additives.html:32, additives.html:4, base.html:50)
    148      total_page = int(math.ceil(float(total_items) / items_per_page))  # partial/pagination.html:12 (via partial/additives.html:32, additives.html:4, base.html:50)
    149      _append('\n')  # partial/pagination.html:14 (via partial/additives.html:32, additives.html:4, base.html:50)
    150      current_page = int(handler.get_argument('page', 1))  # partial/pagination.html:14 (via partial/additives.html:32, additives.html:4, base.html:50)
    151      _append('\n')  # partial/pagination.html:16 (via partial/additives.html:32, additives.html:4, base.html:50)
    152      if current_page <=6:  # partial/pagination.html:16 (via partial/additives.html:32, additives.html:4, base.html:50)
    153          _append('\n')  # partial/pagination.html:17 (via partial/additives.html:32, additives.html:4, base.html:50)
    154          end_page = min(total_page, 10)  # partial/pagination.html:17 (via partial/additives.html:32, additives.html:4, base.html:50)
    155          _append('\n')  # partial/pagination.html:18 (via partial/additives.html:32, additives.html:4, base.html:50)
    156          start_page = 1  # partial/pagination.html:18 (via partial/additives.html:32, additives.html:4, base.html:50)
    157          _append('\n')  # partial/pagination.html:19 (via partial/additives.html:32, additives.html:4, base.html:50)
    158      else:  # partial/pagination.html:19 (via partial/additives.html:32, additives.html:4, base.html:50)
    159          _append('\n')  # partial/pagination.html:20 (via partial/additives.html:32, additives.html:4, base.html:50)
    160          end_page = min(total_page, current_page+4)  # partial/pagination.html:20 (via partial/additives.html:32, additives.html:4, base.html:50)
    161          _append('\n')  # partial/pagination.html:21 (via partial/additives.html:32, additives.html:4, base.html:50)
    162          start_page = current_page - 5  # partial/pagination.html:21 (via partial/additives.html:32, additives.html:4, base.html:50)
    163          _append('\n')  # partial/pagination.html:22 (via partial/additives.html:32, additives.html:4, base.html:50)
    164      _append('\n')  # partial/pagination.html:24 (via partial/additives.html:32, additives.html:4, base.html:50)
    165      if total_page > 1:  # partial/pagination.html:24 (via partial/additives.html:32, additives.html:4, base.html:50)
    166          _append('\n<div class="pagination">\n<ul>\n')  # partial/pagination.html:27 (via partial/additives.html:32, additives.html:4, base.html:50)
    167          if current_page == 1:  # partial/pagination.html:27 (via partial/additives.html:32, additives.html:4, base.html:50)
    168              _append('\n<li class="disabled">\xe2\x86\x90 </li>\n')  # partial/pagination.html:29 (via partial/additives.html:32, additives.html:4, base.html:50)
    169          else:  # partial/pagination.html:29 (via partial/additives.html:32, additives.html:4, base.html:50)
    170              _append('\n<li><a href="')  # partial/pagination.html:30 (via partial/additives.html:32, additives.html:4, base.html:50)
    171              _tmp = page_path  # partial/pagination.html:30 (via partial/additives.html:32, additives.html:4, base.html:50)
    172              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:30 (via partial/additives.html:32, additives.html:4, base.html:50)
    173              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:30 (via partial/additives.html:32, additives.html:4, base.html:50)
    174              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:30 (via partial/additives.html:32, additives.html:4, base.html:50)
    175              _append(_tmp)  # partial/pagination.html:30 (via partial/additives.html:32, additives.html:4, base.html:50)
    176              _append('?page=1">\xe2\x86\x90 </a></li>\n')  # partial/pagination.html:31 (via partial/additives.html:32, additives.html:4, base.html:50)
    177          _append('\n')  # partial/pagination.html:33 (via partial/additives.html:32, additives.html:4, base.html:50)
    178          for i in range(start_page, end_page + 1):  # partial/pagination.html:33 (via partial/additives.html:32, additives.html:4, base.html:50)
    179              _append('\n<li ')  # partial/pagination.html:34 (via partial/additives.html:32, additives.html:4, base.html:50)
    180              if current_page == i:  # partial/pagination.html:34 (via partial/additives.html:32, additives.html:4, base.html:50)
    181                  _append('class="active"')  # partial/pagination.html:34 (via partial/additives.html:32, additives.html:4, base.html:50)
    182              _append('>\n<a href="')  # partial/pagination.html:35 (via partial/additives.html:32, additives.html:4, base.html:50)
    183              _tmp = page_path  # partial/pagination.html:35 (via partial/additives.html:32, additives.html:4, base.html:50)
    184              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/additives.html:32, additives.html:4, base.html:50)
    185              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/additives.html:32, additives.html:4, base.html:50)
    186              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/additives.html:32, additives.html:4, base.html:50)
    187              _append(_tmp)  # partial/pagination.html:35 (via partial/additives.html:32, additives.html:4, base.html:50)
    188              _append('?page=')  # partial/pagination.html:35 (via partial/additives.html:32, additives.html:4, base.html:50)
    189              _tmp = i  # partial/pagination.html:35 (via partial/additives.html:32, additives.html:4, base.html:50)
    190              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/additives.html:32, additives.html:4, base.html:50)
    191              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/additives.html:32, additives.html:4, base.html:50)
    192              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/additives.html:32, additives.html:4, base.html:50)
    193              _append(_tmp)  # partial/pagination.html:35 (via partial/additives.html:32, additives.html:4, base.html:50)
    194              _append('">')  # partial/pagination.html:35 (via partial/additives.html:32, additives.html:4, base.html:50)
    195              _tmp = i  # partial/pagination.html:35 (via partial/additives.html:32, additives.html:4, base.html:50)
    196              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/additives.html:32, additives.html:4, base.html:50)
    197              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/additives.html:32, additives.html:4, base.html:50)
    198              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/additives.html:32, additives.html:4, base.html:50)
    199              _append(_tmp)  # partial/pagination.html:35 (via partial/additives.html:32, additives.html:4, base.html:50)
    200              _append('</a>\n</li>\n')  # partial/pagination.html:37 (via partial/additives.html:32, additives.html:4, base.html:50)
    201          _append('\n')  # partial/pagination.html:39 (via partial/additives.html:32, additives.html:4, base.html:50)
    202          if current_page == total_page:  # partial/pagination.html:39 (via partial/additives.html:32, additives.html:4, base.html:50)
    203              _append('\n<li class="disabled">\xe2\x86\x92 </li>\n')  # partial/pagination.html:41 (via partial/additives.html:32, additives.html:4, base.html:50)
    204          else:  # partial/pagination.html:41 (via partial/additives.html:32, additives.html:4, base.html:50)
    205              _append('\n<li><a href="')  # partial/pagination.html:42 (via partial/additives.html:32, additives.html:4, base.html:50)
    206              _tmp = page_path  # partial/pagination.html:42 (via partial/additives.html:32, additives.html:4, base.html:50)
    207              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:42 (via partial/additives.html:32, additives.html:4, base.html:50)
    208              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:42 (via partial/additives.html:32, additives.html:4, base.html:50)
    209              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:42 (via partial/additives.html:32, additives.html:4, base.html:50)
    210              _append(_tmp)  # partial/pagination.html:42 (via partial/additives.html:32, additives.html:4, base.html:50)
    211              _append('?page=')  # partial/pagination.html:42 (via partial/additives.html:32, additives.html:4, base.html:50)
    212              _tmp = current_page+1  # partial/pagination.html:42 (via partial/additives.html:32, additives.html:4, base.html:50)
    213              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:42 (via partial/additives.html:32, additives.html:4, base.html:50)
    214              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:42 (via partial/additives.html:32, additives.html:4, base.html:50)
    215              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:42 (via partial/additives.html:32, additives.html:4, base.html:50)
    216              _append(_tmp)  # partial/pagination.html:42 (via partial/additives.html:32, additives.html:4, base.html:50)
    217              _append('">\xe2\x86\x92 </a></li>\n')  # partial/pagination.html:43 (via partial/additives.html:32, additives.html:4, base.html:50)
    218          _append('\n</ul>\n</div>\n')  # partial/pagination.html:46 (via partial/additives.html:32, additives.html:4, base.html:50)
    219      _append('\n')  # partial/pagination.html:47 (via partial/additives.html:32, additives.html:4, base.html:50)
    220      _append('\n</div>\n</div>\n')  # partial/additives.html:35 (via additives.html:4, base.html:50)
    221      _append('\n')  # additives.html:5 (via base.html:50)
    222      _append('\n</div>\n<div id="sidebar">\n')  # base.html:54
    223      _append('\n')  # additives.html:8 (via base.html:54)
    224      if current_user:  # partial/sidebar_global.html:1 (via additives.html:8, base.html:54)
    225          _append('\n')  # partial/sidebar_global.html:2 (via additives.html:8, base.html:54)
    226          _append('<div class="upload item ')  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    227          if not current_user.left_upload_count:  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    228              _append('disabled')  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    229          _append('" data-url="/photo/upload" data-title="\xe9\x87\x87\xe9\x9b\x86\xe7\x85\xa7\xe7\x89\x87" >\n<div class="left"></div>\n<div class="center">\n')  # partial/sidebar_upload.html:5 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    230          if current_user.left_upload_count:  # partial/sidebar_upload.html:5 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    231              _append('\n\xe9\x87\x87\xe9\x9b\x86\xe7\x85\xa7\xe7\x89\x87(\xe6\x9c\xac\xe5\x91\xa8\xe8\xbf\x98\xe5\x89\xa9')  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    232              _tmp = current_user.left_upload_count  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    233              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    234              else: _tmp = _utf8(str(_tmp))  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    235              _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    236              _append(_tmp)  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    237              _append('\xe5\xbc\xa0)\n')  # partial/sidebar_upload.html:7 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    238          else:  # partial/sidebar_upload.html:7 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    239              _append('\n\xe6\x9c\xac\xe5\x91\xa8\xe7\x9a\x84\xe9\x87\x87\xe9\x9b\x86\xe4\xbd\x99\xe9\xa2\x9d\xe5\xb7\xb2\xe7\x94\xa8\xe5\xae\x8c\xe4\xba\x86\n')  # partial/sidebar_upload.html:9 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    240          _append('\n</div>\n<div class="right"></div>\n</div>\n')  # partial/sidebar_upload.html:13 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    241          _append('\n')  # partial/sidebar_global.html:3 (via additives.html:8, base.html:54)
    242          _append('<div class="box" id="panel-me">\n<div class="header"><a class="right" href="/logout">\xe7\x99\xbb\xe5\x87\xba</a>\xe6\x88\x91\xe7\x9a\x84\xe4\xbf\xa1\xe6\x81\xaf</div>\n<div class="body">\n<div class="me">\n<a class="settings item" href="/settings" data-title="\xe8\xae\xbe\xe7\xbd\xae" data-url="/settings">\xe8\xae\xbe\xe7\xbd\xae</a>\n<a href="/user/')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    243          _tmp = current_user.username  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    244          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    245          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    246          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    247          _append(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    248          _append('"><img class="avatar" src="')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    249          _tmp = get_avatar_url(current_user, 's')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    250          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    251          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    252          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    253          _append(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    254          _append('" /></a>\n<a href="/user/')  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    255          _tmp = current_user.username  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    256          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    257          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    258          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    259          _append(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    260          _append('">')  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    261          _tmp = current_user.fullname  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    262          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    263          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    264          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    265          _append(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    266          _append('</a>\n<i class="level icon-level')  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    267          _tmp = current_user.level  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    268          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    269          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    270          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    271          _append(_tmp)  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    272          _append('"></i>\n</div>\n<div class="follow">\n<div class="following item" data-title="\xe6\x88\x91\xe5\x85\xb3\xe6\xb3\xa8\xe7\x9a\x84\xe4\xba\xba" data-url="/mine/following">\n<h3 class="anchor">')  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    273          _tmp = current_user.following_count  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    274          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    275          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    276          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    277          _append(_tmp)  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    278          _append('</h3>\n<span>following</span>\n</div>\n<div class="follower item" data-title="\xe5\x85\xb3\xe6\xb3\xa8\xe6\x88\x91\xe7\x9a\x84\xe4\xba\xba" data-url="/mine/follower">\n<h3 class="anchor">')  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    279          _tmp = current_user.follower_count  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    280          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    281          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    282          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    283          _append(_tmp)  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    284          _append('</h3>\n<span>followers</span>\n</div>\n</div>\n<ul>\n<li class="item" data-url="/mine/invite" data-title="\xe9\x82\x80\xe8\xaf\xb7\xe6\x9c\x8b\xe5\x8f\x8b\xe5\x8a\xa0\xe5\x85\xa5"> <span class="num">')  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    285          _tmp = current_user.unused_invite_key_count  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    286          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    287          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    288          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    289          _append(_tmp)  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    290          _append('</span><span class="anchor">\xe9\x82\x80\xe8\xaf\xb7\xe6\x9c\x8b\xe5\x8f\x8b\xe5\x8a\xa0\xe5\x85\xa5</span></li>\n<li class="item" data-title="\xe6\x88\x91\xe6\xb7\xbb\xe5\x8a\xa0\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87" data-url="/mine/photos"> <span class="num">')  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    291          _tmp = current_user.photo_count  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    292          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    293          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    294          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    295          _append(_tmp)  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    296          _append('</span><span class="anchor">\xe6\x88\x91\xe6\xb7\xbb\xe5\x8a\xa0\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87</span></li>\n<li class="item" data-title="\xe6\x88\x91\xe5\x96\x9c\xe6\xac\xa2\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87" data-url="/mine/likes_photos"><span class="num">')  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    297          _tmp = current_user.likes_count  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    298          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    299          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    300          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    301          _append(_tmp)  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    302          _append('</span><span class="anchor">\xe6\x88\x91\xe5\x96\x9c\xe6\xac\xa2\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87</span> </li>\n</ul>\n</div>\n</div>\n')  # partial/sidebar_me.html:27 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    303          _append('\n')  # partial/sidebar_global.html:4 (via additives.html:8, base.html:54)
    304      else:  # partial/sidebar_global.html:4 (via additives.html:8, base.html:54)
    305          _append('\n')  # partial/sidebar_global.html:5 (via additives.html:8, base.html:54)
    306          _append('<div class="box" id="panel-about">\n<div class="header">\xe5\x85\xb3\xe4\xba\x8e\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</div>\n<div class="body">\n<p>\xe5\x85\xb3\xe6\xb3\xa8\xe9\xa3\x9f\xe5\x93\x81\xe5\xae\x89\xe5\x85\xa8\xef\xbc\x8c\xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe4\xb8\x96\xe7\x95\x8c</p>\n<p>\xe6\x89\x80\xe6\x9c\x89\xe9\xa3\x9f\xe5\x93\x81\xe5\x92\x8c\xe6\xb7\xbb\xe5\x8a\xa0\xe5\x89\x82\xe8\xb5\x84\xe6\x96\x99\xe6\x9d\xa5\xe8\x87\xaa\xe4\xba\x8eiearth-\xe7\x88\xb1\xe5\x9c\xb0\xe7\x90\x83\xe7\x8e\xaf\xe4\xbf\x9d\xe6\x9c\xba\xe6\x9e\x84</p>\n</div>\n</div>\n')  # partial/sidebar_about.html:8 (via partial/sidebar_global.html:5, additives.html:8, base.html:54)
    307          _append('\n')  # partial/sidebar_global.html:6 (via additives.html:8, base.html:54)
    308          _append('<div class="box" id="panel-login">\n<div class="header">\xe7\x99\xbb\xe5\x85\xa5\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</div>\n<div class="body">\n<form action="/login" method="POST">\n<div class="section">\n<input type="TEXT" name="username" placeholder="\xe7\x94\xa8\xe6\x88\xb7\xe5\x90\x8d/Email" />\n</div>\n<div class="section">\n<input type="PASSWORD" name="password" placeholder="\xe5\xaf\x86\xe7\xa0\x81" />\n</div>\n<div class="section">\n<input type="SUBMIT" value="\xe7\x99\xbb\xe5\x85\xa5" class="btn primary-btn" />\n<span class="tip">\xe4\xbc\x9a\xe8\xae\xb0\xe4\xbd\x8f\xe7\x99\xbb\xe5\x85\xa5\xe4\xb8\x80\xe4\xb8\xaa\xe6\x9c\x88</span>\n</div>\n</form>\n<div class="alert alert-info">\xe5\x86\x85\xe6\xb5\x8b\xe4\xb8\xad\xef\xbc\x8c\xe5\x8f\xaa\xe6\x8e\xa5\xe5\x8f\x97\xe9\x82\x80\xe8\xaf\xb7\xe6\xb3\xa8\xe5\x86\x8c</div>\n</div>\n</div>\n')  # partial/sidebar_login.html:19 (via partial/sidebar_global.html:6, additives.html:8, base.html:54)
    309          _append('\n')  # partial/sidebar_global.html:8 (via additives.html:8, base.html:54)
    310      _append('\n')  # partial/sidebar_global.html:10 (via additives.html:8, base.html:54)
    311      _append('<div class="box">\n<div class="header">\xe6\xb5\x8f\xe8\xa7\x88\xe9\xa3\x9f\xe5\x93\x81</div>\n<div class="body">\n<ul>\n<a href="/food/hot">\n<li data-title="\xe7\x83\xad\xe9\x97\xa8\xe9\xa3\x9f\xe5\x93\x81"><span class="anchor">\xe7\x83\xad\xe9\x97\xa8\xe9\xa3\x9f\xe5\x93\x81</span></li>\n</a>\n<a href="/food/latest">\n<li data-title="\xe6\x9c\x80\xe6\x96\xb0\xe9\xa3\x9f\xe5\x93\x81"><span class="anchor">\xe6\x9c\x80\xe6\x96\xb0\xe9\xa3\x9f\xe5\x93\x81</span></li>\n</a>\n</ul>\n</div>\n</div>\n')  # partial/sidebar_food_nav.html:15 (via partial/sidebar_global.html:10, additives.html:8, base.html:54)
    312      _append('\n')  # partial/sidebar_global.html:11 (via additives.html:8, base.html:54)
    313      import models  # partial/sidebar_hot_searchs.html:1 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    314      _append('\n')  # partial/sidebar_hot_searchs.html:2 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    315      hot_searchs = models.Additive_Search().hot_searchs  # partial/sidebar_hot_searchs.html:2 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    316      _append('\n<div class="box" id="panel-searchs">\n<div class="header">\xe7\x83\xad\xe9\x97\xa8\xe6\x90\x9c\xe7\xb4\xa2</div>\n<div class="body">\n<ul>\n')  # partial/sidebar_hot_searchs.html:8 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    317      for search in hot_searchs:  # partial/sidebar_hot_searchs.html:8 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    318          _append('\n<!--\n<a class="avatar" href="/additive/')  # partial/sidebar_hot_searchs.html:10 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    319          _tmp = search[1]  # partial/sidebar_hot_searchs.html:10 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    320          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_hot_searchs.html:10 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    321          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_hot_searchs.html:10 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    322          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_hot_searchs.html:10 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    323          _append(_tmp)  # partial/sidebar_hot_searchs.html:10 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    324          _append('">\n-->\n<a class="avatar" href="/additive/')  # partial/sidebar_hot_searchs.html:12 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    325          _tmp = search[1]  # partial/sidebar_hot_searchs.html:12 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    326          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_hot_searchs.html:12 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    327          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_hot_searchs.html:12 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    328          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_hot_searchs.html:12 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    329          _append(_tmp)  # partial/sidebar_hot_searchs.html:12 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    330          _append('">\n<li>\n')  # partial/sidebar_hot_searchs.html:14 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    331          _tmp = search[0]  # partial/sidebar_hot_searchs.html:14 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    332          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_hot_searchs.html:14 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    333          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_hot_searchs.html:14 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    334          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_hot_searchs.html:14 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    335          _append(_tmp)  # partial/sidebar_hot_searchs.html:14 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    336          _append('\n</li>\n<!--\n<li class="item">\n<span class="anchor">')  # partial/sidebar_hot_searchs.html:18 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    337          _tmp = search[0]  # partial/sidebar_hot_searchs.html:18 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    338          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_hot_searchs.html:18 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    339          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_hot_searchs.html:18 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    340          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_hot_searchs.html:18 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    341          _append(_tmp)  # partial/sidebar_hot_searchs.html:18 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    342          _append('</span>\n</li>\n-->\n</a>\n')  # partial/sidebar_hot_searchs.html:22 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    343      _append('\n</ul>\n</div>\n</div>\n')  # partial/sidebar_hot_searchs.html:26 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    344      _append('\n')  # partial/sidebar_global.html:12 (via additives.html:8, base.html:54)
    345      _append('\n')  # additives.html:9 (via base.html:54)
    346      _append('\n</div>\n</div>\n</div>\n<div id="footer">\n<div class="inner">\n<div class="right">\n<span class="belief">make the world a little better and easier</span>\n</div>\n<div class="left">\n<ul>\n<li><a href="/about">\xe5\x85\xb3\xe4\xba\x8e</a> <!--<span class="divider">/</span>--></li>\n<!--<li><a href="/feedback">\xe5\x8f\x8d\xe9\xa6\x88</a> <span class="divider">/</span></li>-->\n<!--<li><a href="/blog">\xe6\x97\xa5\xe5\xbf\x97</a></li>-->\n</ul>\n</div>\n</div>\n</div>\n<script type="text/javascript">\nvar _gaq = _gaq || [];\n_gaq.push([\'_setAccount\', \'UA-1281124-23\']);\n_gaq.push([\'_trackPageview\']);\n(function() {\nvar ga = document.createElement(\'script\'); ga.type = \'text/javascript\'; ga.async = true;\nga.src = (\'https:\' == document.location.protocol ? \'https://ssl\' : \'http://www\') + \'.google-analytics.com/ga.js\';\nvar s = document.getElementsByTagName(\'script\')[0]; s.parentNode.insertBefore(ga, s);\n})();\n</script>\n<!-- love your mom! -->\n</body>\n<meta name="description" content="\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - " />\n')  # base.html:89
    347      return _utf8('').join(_buffer)  # base.html:0
[E 120723 08:02:27 web:1031] Uncaught exception GET / (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.100', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cookie': '__utma=148685175.1070362998.1342935208.1342944388.1342948559.3; __utmz=148685175.1342935208.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)', 'Cache-Control': 'max-age=0', 'X-Real-Ip': '192.168.0.100'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "src/sites/www/handlers/home.py", line 14, in get
        return self._render('hot')
      File "src/sites/www/handlers/base.py", line 87, in _render
        current_additive = additive,
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 474, in render
        html = self.render_string(template_name, **kwargs)
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 586, in render_string
        return t.generate(**args)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 253, in generate
        return execute()
      File "additives_html.generated.py", line 78, in _execute
        _tmp = foods_title  # partial/additives.html:2 (via additives.html:4, base.html:50)
    NameError: global name 'foods_title' is not defined
[E 120723 08:02:27 web:1393] 500 GET / (127.0.0.1) 2097.18ms
[E 120723 08:04:49 template:256] additives.html code:
      1  def _execute():  # base.html:0
      2      _buffer = []  # base.html:0
      3      _append = _buffer.append  # base.html:0
      4      _append('<!doctype html>\n<head>\n<meta charset="UTF-8" />\n<meta content="True" name="HandheldFriendly" />\n<meta content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0; name=\'viewport\'" />\n<title>\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - \xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81')  # base.html:6
      5      _append('</title>\n<link rel="stylesheet" type="text/css" media="screen" href="/static/css/vendor/jquery.fancybox.css" />\n<link rel="stylesheet" type="text/css" media="screen" href="/static/css/main.css" />\n<link rel="shortcut icon" href="/static/img/favicon.ico" />\n<link rel="canonical" href="http://wuditoo.com/" />\n<meta name="description" content="\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - \xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81" />\n<script src="/static/js/vendor/jquery.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.history.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.fancybox.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.scrollTo.min.js" type="text/javascript"></script>\n')  # base.html:16
      6      _append('\n<script type="text/javascript">\n')  # additives.html:13 (via base.html:16)
      7      if current_additive:  # additives.html:13 (via base.html:16)
      8          _append('\nmeta_additive = {\nurl: "/additive/')  # additives.html:15 (via base.html:16)
      9          _tmp = current_additive.id  # additives.html:15 (via base.html:16)
     10          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # additives.html:15 (via base.html:16)
     11          else: _tmp = _utf8(str(_tmp))  # additives.html:15 (via base.html:16)
     12          _tmp = _utf8(xhtml_escape(_tmp))  # additives.html:15 (via base.html:16)
     13          _append(_tmp)  # additives.html:15 (via base.html:16)
     14          _append('",\nwidth: ')  # additives.html:16 (via base.html:16)
     15          _tmp = current_additive.width  # additives.html:16 (via base.html:16)
     16          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # additives.html:16 (via base.html:16)
     17          else: _tmp = _utf8(str(_tmp))  # additives.html:16 (via base.html:16)
     18          _tmp = _utf8(xhtml_escape(_tmp))  # additives.html:16 (via base.html:16)
     19          _append(_tmp)  # additives.html:16 (via base.html:16)
     20          _append(',\nheight: ')  # additives.html:17 (via base.html:16)
     21          _tmp = current_additive.height  # additives.html:17 (via base.html:16)
     22          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # additives.html:17 (via base.html:16)
     23          else: _tmp = _utf8(str(_tmp))  # additives.html:17 (via base.html:16)
     24          _tmp = _utf8(xhtml_escape(_tmp))  # additives.html:17 (via base.html:16)
     25          _append(_tmp)  # additives.html:17 (via base.html:16)
     26          _append('\n}\n')  # additives.html:19 (via base.html:16)
     27      _append('\n</script>\n')  # additives.html:21 (via base.html:16)
     28      _append('\n<script src="/static/js/main.js" type="text/javascript"></script>\n</head>\n<!--[if IE 7 ]><body class="ie7"><![endif]-->\n<!--[if gt IE 7]><body class="ie"><![endif]-->\n<!--[if !IE]><body><![endif]-->\n<div id="header">\n<div class="inner">\n<div id="logo"><a href="/">\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</a></div>\n<div id="slogon">\xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81</div>\n<div id="witticism">')  # base.html:27
     29      _tmp = home_sentence()  # base.html:27
     30      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:27
     31      else: _tmp = _utf8(str(_tmp))  # base.html:27
     32      _tmp = _utf8(xhtml_escape(_tmp))  # base.html:27
     33      _append(_tmp)  # base.html:27
     34      _append('</div>\n<!--\n<ul class="nav-right">\n</ul>\n-->\n</div>\n</div>\n<div id="container">\n<div class="inner">\n<div class="message alert alert-warn">\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0\xe5\xad\x95\xe8\x82\xb2\xe4\xb8\xad\xef\xbc\x8c\xe6\x97\xb6\xe9\x97\xb4\xe5\xbe\x85\xe5\xae\x9a\xe3\x80\x82\xe8\xb0\xa2\xe8\xb0\xa2\xe6\x82\xa8\xe7\x9a\x84\xe5\x88\xb0\xe8\xae\xbf\xef\xbc\x9a\xef\xbc\x89</div>\n')  # base.html:38
     35      message = get_message()  # base.html:38
     36      _append('\n')  # base.html:39
     37      for message_type in ('error', 'success', 'info', 'warn'):  # base.html:39
     38          _append('\n')  # base.html:40
     39          if message and message_type == message[0]:  # base.html:40
     40              _append('\n<div id="')  # base.html:41
     41              _tmp = message_type  # base.html:41
     42              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     43              else: _tmp = _utf8(str(_tmp))  # base.html:41
     44              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     45              _append(_tmp)  # base.html:41
     46              _append('-message" class="message alert alert-')  # base.html:41
     47              _tmp = message_type  # base.html:41
     48              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     49              else: _tmp = _utf8(str(_tmp))  # base.html:41
     50              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     51              _append(_tmp)  # base.html:41
     52              _append('">')  # base.html:41
     53              _tmp = message[1]  # base.html:41
     54              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     55              else: _tmp = _utf8(str(_tmp))  # base.html:41
     56              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     57              _append(_tmp)  # base.html:41
     58              _append('</div>\n')  # base.html:42
     59          else:  # base.html:42
     60              _append('\n<div id="')  # base.html:43
     61              _tmp = message_type  # base.html:43
     62              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:43
     63              else: _tmp = _utf8(str(_tmp))  # base.html:43
     64              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:43
     65              _append(_tmp)  # base.html:43
     66              _append('-message" class="message alert alert-')  # base.html:43
     67              _tmp = message_type  # base.html:43
     68              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:43
     69              else: _tmp = _utf8(str(_tmp))  # base.html:43
     70              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:43
     71              _append(_tmp)  # base.html:43
     72              _append(' hide"></div>\n')  # base.html:44
     73          _append('\n')  # base.html:45
     74      _append('\n')  # base.html:47
     75      _append('\n<div id="main">\n')  # base.html:50
     76      _append('\n')  # additives.html:4 (via base.html:50)
     77      _append('<div class="box" id="foods">\n<div class="header">')  # partial/additives.html:2 (via additives.html:4, base.html:50)
     78      _tmp = foods_title  # partial/additives.html:2 (via additives.html:4, base.html:50)
     79      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:2 (via additives.html:4, base.html:50)
     80      else: _tmp = _utf8(str(_tmp))  # partial/additives.html:2 (via additives.html:4, base.html:50)
     81      _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:2 (via additives.html:4, base.html:50)
     82      _append(_tmp)  # partial/additives.html:2 (via additives.html:4, base.html:50)
     83      _append('</div>\n<div class="body main ul">\n')  # partial/additives.html:4 (via additives.html:4, base.html:50)
     84      for index, food in enumerate(foods):  # partial/additives.html:4 (via additives.html:4, base.html:50)
     85          _append('\n')  # partial/additives.html:5 (via additives.html:4, base.html:50)
     86          creator = food.creator  # partial/additives.html:5 (via additives.html:4, base.html:50)
     87          _append('\n<div class="food-item">\n<div class="header">\n<a class="avatar" href="/food/')  # partial/additives.html:8 (via additives.html:4, base.html:50)
     88          _tmp = food.id  # partial/additives.html:8 (via additives.html:4, base.html:50)
     89          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     90          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     91          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     92          _append(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     93          _append('"><img src="')  # partial/additives.html:8 (via additives.html:4, base.html:50)
     94          _tmp = get_avatar_url(creator, 's')  # partial/additives.html:8 (via additives.html:4, base.html:50)
     95          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     96          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     97          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     98          _append(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     99          _append('" /> ')  # partial/additives.html:8 (via additives.html:4, base.html:50)
    100          _tmp = food.name  # partial/additives.html:8 (via additives.html:4, base.html:50)
    101          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
    102          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
    103          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
    104          _append(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
    105          _append('</a>\n</div>\n<div class="body">\n')  # partial/additives.html:11 (via additives.html:4, base.html:50)
    106          for index, food_part in enumerate(food_parts):  # partial/additives.html:11 (via additives.html:4, base.html:50)
    107              _append('\n<div class="food_part">')  # partial/additives.html:12 (via additives.html:4, base.html:50)
    108              _tmp = food_part.name  # partial/additives.html:12 (via additives.html:4, base.html:50)
    109              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:12 (via additives.html:4, base.html:50)
    110              else: _tmp = _utf8(str(_tmp))  # partial/additives.html:12 (via additives.html:4, base.html:50)
    111              _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:12 (via additives.html:4, base.html:50)
    112              _append(_tmp)  # partial/additives.html:12 (via additives.html:4, base.html:50)
    113              _append('</div>\n')  # partial/additives.html:13 (via additives.html:4, base.html:50)
    114          _append('\n</div>\n<div class="footer">\n<span class="meta">\n<li><i class="icon-view"></i> ')  # partial/additives.html:18 (via additives.html:4, base.html:50)
    115          _tmp = food.views_count  # partial/additives.html:18 (via additives.html:4, base.html:50)
    116          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:18 (via additives.html:4, base.html:50)
    117          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:18 (via additives.html:4, base.html:50)
    118          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:18 (via additives.html:4, base.html:50)
    119          _append(_tmp)  # partial/additives.html:18 (via additives.html:4, base.html:50)
    120          _append(' | Created:')  # partial/additives.html:18 (via additives.html:4, base.html:50)
    121          _tmp = timesince(food.created)  # partial/additives.html:18 (via additives.html:4, base.html:50)
    122          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:18 (via additives.html:4, base.html:50)
    123          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:18 (via additives.html:4, base.html:50)
    124          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:18 (via additives.html:4, base.html:50)
    125          _append(_tmp)  # partial/additives.html:18 (via additives.html:4, base.html:50)
    126          _append('</li>\n</span>\n<span class="created">\n</span>\n</div>\n</div>\n')  # partial/additives.html:25 (via additives.html:4, base.html:50)
    127          _append('\n')  # partial/additives.html:26 (via additives.html:4, base.html:50)
    128          if index > 0 and (index + 1) % 3 == 0:  # partial/additives.html:26 (via additives.html:4, base.html:50)
    129              _append('\n<div class="clearfix"></div>\n')  # partial/additives.html:28 (via additives.html:4, base.html:50)
    130          _append('\n')  # partial/additives.html:30 (via additives.html:4, base.html:50)
    131      _append('\n')  # partial/additives.html:31 (via additives.html:4, base.html:50)
    132      page_type = 'foods'  # partial/additives.html:31 (via additives.html:4, base.html:50)
    133      _append('\n')  # partial/additives.html:32 (via additives.html:4, base.html:50)
    134      _append('\n')  # partial/pagination.html:3 (via partial/additives.html:32, additives.html:4, base.html:50)
    135      from macros.macro import ADDITIVES_PER_PAGE, USERS_PER_PAGE  # partial/pagination.html:3 (via partial/additives.html:32, additives.html:4, base.html:50)
    136      _append('\n')  # partial/pagination.html:4 (via partial/additives.html:32, additives.html:4, base.html:50)
    137      import math  # partial/pagination.html:4 (via partial/additives.html:32, additives.html:4, base.html:50)
    138      _append('\n')  # partial/pagination.html:6 (via partial/additives.html:32, additives.html:4, base.html:50)
    139      if page_type == 'additives':  # partial/pagination.html:6 (via partial/additives.html:32, additives.html:4, base.html:50)
    140          _append('\n')  # partial/pagination.html:7 (via partial/additives.html:32, additives.html:4, base.html:50)
    141          items_per_page = ADDITIVES_PER_PAGE  # partial/pagination.html:7 (via partial/additives.html:32, additives.html:4, base.html:50)
    142          _append('\n')  # partial/pagination.html:8 (via partial/additives.html:32, additives.html:4, base.html:50)
    143      else:  # partial/pagination.html:8 (via partial/additives.html:32, additives.html:4, base.html:50)
    144          _append('\n')  # partial/pagination.html:9 (via partial/additives.html:32, additives.html:4, base.html:50)
    145          items_per_page = USERS_PER_PAGE  # partial/pagination.html:9 (via partial/additives.html:32, additives.html:4, base.html:50)
    146          _append('\n')  # partial/pagination.html:10 (via partial/additives.html:32, additives.html:4, base.html:50)
    147      _append('\n')  # partial/pagination.html:12 (via partial/additives.html:32, additives.html:4, base.html:50)
    148      total_page = int(math.ceil(float(total_items) / items_per_page))  # partial/pagination.html:12 (via partial/additives.html:32, additives.html:4, base.html:50)
    149      _append('\n')  # partial/pagination.html:14 (via partial/additives.html:32, additives.html:4, base.html:50)
    150      current_page = int(handler.get_argument('page', 1))  # partial/pagination.html:14 (via partial/additives.html:32, additives.html:4, base.html:50)
    151      _append('\n')  # partial/pagination.html:16 (via partial/additives.html:32, additives.html:4, base.html:50)
    152      if current_page <=6:  # partial/pagination.html:16 (via partial/additives.html:32, additives.html:4, base.html:50)
    153          _append('\n')  # partial/pagination.html:17 (via partial/additives.html:32, additives.html:4, base.html:50)
    154          end_page = min(total_page, 10)  # partial/pagination.html:17 (via partial/additives.html:32, additives.html:4, base.html:50)
    155          _append('\n')  # partial/pagination.html:18 (via partial/additives.html:32, additives.html:4, base.html:50)
    156          start_page = 1  # partial/pagination.html:18 (via partial/additives.html:32, additives.html:4, base.html:50)
    157          _append('\n')  # partial/pagination.html:19 (via partial/additives.html:32, additives.html:4, base.html:50)
    158      else:  # partial/pagination.html:19 (via partial/additives.html:32, additives.html:4, base.html:50)
    159          _append('\n')  # partial/pagination.html:20 (via partial/additives.html:32, additives.html:4, base.html:50)
    160          end_page = min(total_page, current_page+4)  # partial/pagination.html:20 (via partial/additives.html:32, additives.html:4, base.html:50)
    161          _append('\n')  # partial/pagination.html:21 (via partial/additives.html:32, additives.html:4, base.html:50)
    162          start_page = current_page - 5  # partial/pagination.html:21 (via partial/additives.html:32, additives.html:4, base.html:50)
    163          _append('\n')  # partial/pagination.html:22 (via partial/additives.html:32, additives.html:4, base.html:50)
    164      _append('\n')  # partial/pagination.html:24 (via partial/additives.html:32, additives.html:4, base.html:50)
    165      if total_page > 1:  # partial/pagination.html:24 (via partial/additives.html:32, additives.html:4, base.html:50)
    166          _append('\n<div class="pagination">\n<ul>\n')  # partial/pagination.html:27 (via partial/additives.html:32, additives.html:4, base.html:50)
    167          if current_page == 1:  # partial/pagination.html:27 (via partial/additives.html:32, additives.html:4, base.html:50)
    168              _append('\n<li class="disabled">\xe2\x86\x90 </li>\n')  # partial/pagination.html:29 (via partial/additives.html:32, additives.html:4, base.html:50)
    169          else:  # partial/pagination.html:29 (via partial/additives.html:32, additives.html:4, base.html:50)
    170              _append('\n<li><a href="')  # partial/pagination.html:30 (via partial/additives.html:32, additives.html:4, base.html:50)
    171              _tmp = page_path  # partial/pagination.html:30 (via partial/additives.html:32, additives.html:4, base.html:50)
    172              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:30 (via partial/additives.html:32, additives.html:4, base.html:50)
    173              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:30 (via partial/additives.html:32, additives.html:4, base.html:50)
    174              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:30 (via partial/additives.html:32, additives.html:4, base.html:50)
    175              _append(_tmp)  # partial/pagination.html:30 (via partial/additives.html:32, additives.html:4, base.html:50)
    176              _append('?page=1">\xe2\x86\x90 </a></li>\n')  # partial/pagination.html:31 (via partial/additives.html:32, additives.html:4, base.html:50)
    177          _append('\n')  # partial/pagination.html:33 (via partial/additives.html:32, additives.html:4, base.html:50)
    178          for i in range(start_page, end_page + 1):  # partial/pagination.html:33 (via partial/additives.html:32, additives.html:4, base.html:50)
    179              _append('\n<li ')  # partial/pagination.html:34 (via partial/additives.html:32, additives.html:4, base.html:50)
    180              if current_page == i:  # partial/pagination.html:34 (via partial/additives.html:32, additives.html:4, base.html:50)
    181                  _append('class="active"')  # partial/pagination.html:34 (via partial/additives.html:32, additives.html:4, base.html:50)
    182              _append('>\n<a href="')  # partial/pagination.html:35 (via partial/additives.html:32, additives.html:4, base.html:50)
    183              _tmp = page_path  # partial/pagination.html:35 (via partial/additives.html:32, additives.html:4, base.html:50)
    184              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/additives.html:32, additives.html:4, base.html:50)
    185              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/additives.html:32, additives.html:4, base.html:50)
    186              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/additives.html:32, additives.html:4, base.html:50)
    187              _append(_tmp)  # partial/pagination.html:35 (via partial/additives.html:32, additives.html:4, base.html:50)
    188              _append('?page=')  # partial/pagination.html:35 (via partial/additives.html:32, additives.html:4, base.html:50)
    189              _tmp = i  # partial/pagination.html:35 (via partial/additives.html:32, additives.html:4, base.html:50)
    190              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/additives.html:32, additives.html:4, base.html:50)
    191              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/additives.html:32, additives.html:4, base.html:50)
    192              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/additives.html:32, additives.html:4, base.html:50)
    193              _append(_tmp)  # partial/pagination.html:35 (via partial/additives.html:32, additives.html:4, base.html:50)
    194              _append('">')  # partial/pagination.html:35 (via partial/additives.html:32, additives.html:4, base.html:50)
    195              _tmp = i  # partial/pagination.html:35 (via partial/additives.html:32, additives.html:4, base.html:50)
    196              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/additives.html:32, additives.html:4, base.html:50)
    197              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/additives.html:32, additives.html:4, base.html:50)
    198              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/additives.html:32, additives.html:4, base.html:50)
    199              _append(_tmp)  # partial/pagination.html:35 (via partial/additives.html:32, additives.html:4, base.html:50)
    200              _append('</a>\n</li>\n')  # partial/pagination.html:37 (via partial/additives.html:32, additives.html:4, base.html:50)
    201          _append('\n')  # partial/pagination.html:39 (via partial/additives.html:32, additives.html:4, base.html:50)
    202          if current_page == total_page:  # partial/pagination.html:39 (via partial/additives.html:32, additives.html:4, base.html:50)
    203              _append('\n<li class="disabled">\xe2\x86\x92 </li>\n')  # partial/pagination.html:41 (via partial/additives.html:32, additives.html:4, base.html:50)
    204          else:  # partial/pagination.html:41 (via partial/additives.html:32, additives.html:4, base.html:50)
    205              _append('\n<li><a href="')  # partial/pagination.html:42 (via partial/additives.html:32, additives.html:4, base.html:50)
    206              _tmp = page_path  # partial/pagination.html:42 (via partial/additives.html:32, additives.html:4, base.html:50)
    207              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:42 (via partial/additives.html:32, additives.html:4, base.html:50)
    208              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:42 (via partial/additives.html:32, additives.html:4, base.html:50)
    209              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:42 (via partial/additives.html:32, additives.html:4, base.html:50)
    210              _append(_tmp)  # partial/pagination.html:42 (via partial/additives.html:32, additives.html:4, base.html:50)
    211              _append('?page=')  # partial/pagination.html:42 (via partial/additives.html:32, additives.html:4, base.html:50)
    212              _tmp = current_page+1  # partial/pagination.html:42 (via partial/additives.html:32, additives.html:4, base.html:50)
    213              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:42 (via partial/additives.html:32, additives.html:4, base.html:50)
    214              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:42 (via partial/additives.html:32, additives.html:4, base.html:50)
    215              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:42 (via partial/additives.html:32, additives.html:4, base.html:50)
    216              _append(_tmp)  # partial/pagination.html:42 (via partial/additives.html:32, additives.html:4, base.html:50)
    217              _append('">\xe2\x86\x92 </a></li>\n')  # partial/pagination.html:43 (via partial/additives.html:32, additives.html:4, base.html:50)
    218          _append('\n</ul>\n</div>\n')  # partial/pagination.html:46 (via partial/additives.html:32, additives.html:4, base.html:50)
    219      _append('\n')  # partial/pagination.html:47 (via partial/additives.html:32, additives.html:4, base.html:50)
    220      _append('\n</div>\n</div>\n')  # partial/additives.html:35 (via additives.html:4, base.html:50)
    221      _append('\n')  # additives.html:5 (via base.html:50)
    222      _append('\n</div>\n<div id="sidebar">\n')  # base.html:54
    223      _append('\n')  # additives.html:8 (via base.html:54)
    224      if current_user:  # partial/sidebar_global.html:1 (via additives.html:8, base.html:54)
    225          _append('\n')  # partial/sidebar_global.html:2 (via additives.html:8, base.html:54)
    226          _append('<div class="upload item ')  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    227          if not current_user.left_upload_count:  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    228              _append('disabled')  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    229          _append('" data-url="/photo/upload" data-title="\xe9\x87\x87\xe9\x9b\x86\xe7\x85\xa7\xe7\x89\x87" >\n<div class="left"></div>\n<div class="center">\n')  # partial/sidebar_upload.html:5 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    230          if current_user.left_upload_count:  # partial/sidebar_upload.html:5 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    231              _append('\n\xe9\x87\x87\xe9\x9b\x86\xe7\x85\xa7\xe7\x89\x87(\xe6\x9c\xac\xe5\x91\xa8\xe8\xbf\x98\xe5\x89\xa9')  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    232              _tmp = current_user.left_upload_count  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    233              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    234              else: _tmp = _utf8(str(_tmp))  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    235              _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    236              _append(_tmp)  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    237              _append('\xe5\xbc\xa0)\n')  # partial/sidebar_upload.html:7 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    238          else:  # partial/sidebar_upload.html:7 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    239              _append('\n\xe6\x9c\xac\xe5\x91\xa8\xe7\x9a\x84\xe9\x87\x87\xe9\x9b\x86\xe4\xbd\x99\xe9\xa2\x9d\xe5\xb7\xb2\xe7\x94\xa8\xe5\xae\x8c\xe4\xba\x86\n')  # partial/sidebar_upload.html:9 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    240          _append('\n</div>\n<div class="right"></div>\n</div>\n')  # partial/sidebar_upload.html:13 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    241          _append('\n')  # partial/sidebar_global.html:3 (via additives.html:8, base.html:54)
    242          _append('<div class="box" id="panel-me">\n<div class="header"><a class="right" href="/logout">\xe7\x99\xbb\xe5\x87\xba</a>\xe6\x88\x91\xe7\x9a\x84\xe4\xbf\xa1\xe6\x81\xaf</div>\n<div class="body">\n<div class="me">\n<a class="settings item" href="/settings" data-title="\xe8\xae\xbe\xe7\xbd\xae" data-url="/settings">\xe8\xae\xbe\xe7\xbd\xae</a>\n<a href="/user/')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    243          _tmp = current_user.username  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    244          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    245          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    246          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    247          _append(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    248          _append('"><img class="avatar" src="')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    249          _tmp = get_avatar_url(current_user, 's')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    250          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    251          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    252          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    253          _append(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    254          _append('" /></a>\n<a href="/user/')  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    255          _tmp = current_user.username  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    256          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    257          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    258          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    259          _append(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    260          _append('">')  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    261          _tmp = current_user.fullname  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    262          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    263          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    264          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    265          _append(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    266          _append('</a>\n<i class="level icon-level')  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    267          _tmp = current_user.level  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    268          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    269          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    270          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    271          _append(_tmp)  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    272          _append('"></i>\n</div>\n<div class="follow">\n<div class="following item" data-title="\xe6\x88\x91\xe5\x85\xb3\xe6\xb3\xa8\xe7\x9a\x84\xe4\xba\xba" data-url="/mine/following">\n<h3 class="anchor">')  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    273          _tmp = current_user.following_count  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    274          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    275          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    276          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    277          _append(_tmp)  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    278          _append('</h3>\n<span>following</span>\n</div>\n<div class="follower item" data-title="\xe5\x85\xb3\xe6\xb3\xa8\xe6\x88\x91\xe7\x9a\x84\xe4\xba\xba" data-url="/mine/follower">\n<h3 class="anchor">')  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    279          _tmp = current_user.follower_count  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    280          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    281          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    282          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    283          _append(_tmp)  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    284          _append('</h3>\n<span>followers</span>\n</div>\n</div>\n<ul>\n<li class="item" data-url="/mine/invite" data-title="\xe9\x82\x80\xe8\xaf\xb7\xe6\x9c\x8b\xe5\x8f\x8b\xe5\x8a\xa0\xe5\x85\xa5"> <span class="num">')  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    285          _tmp = current_user.unused_invite_key_count  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    286          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    287          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    288          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    289          _append(_tmp)  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    290          _append('</span><span class="anchor">\xe9\x82\x80\xe8\xaf\xb7\xe6\x9c\x8b\xe5\x8f\x8b\xe5\x8a\xa0\xe5\x85\xa5</span></li>\n<li class="item" data-title="\xe6\x88\x91\xe6\xb7\xbb\xe5\x8a\xa0\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87" data-url="/mine/photos"> <span class="num">')  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    291          _tmp = current_user.photo_count  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    292          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    293          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    294          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    295          _append(_tmp)  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    296          _append('</span><span class="anchor">\xe6\x88\x91\xe6\xb7\xbb\xe5\x8a\xa0\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87</span></li>\n<li class="item" data-title="\xe6\x88\x91\xe5\x96\x9c\xe6\xac\xa2\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87" data-url="/mine/likes_photos"><span class="num">')  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    297          _tmp = current_user.likes_count  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    298          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    299          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    300          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    301          _append(_tmp)  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    302          _append('</span><span class="anchor">\xe6\x88\x91\xe5\x96\x9c\xe6\xac\xa2\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87</span> </li>\n</ul>\n</div>\n</div>\n')  # partial/sidebar_me.html:27 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    303          _append('\n')  # partial/sidebar_global.html:4 (via additives.html:8, base.html:54)
    304      else:  # partial/sidebar_global.html:4 (via additives.html:8, base.html:54)
    305          _append('\n')  # partial/sidebar_global.html:5 (via additives.html:8, base.html:54)
    306          _append('<div class="box" id="panel-about">\n<div class="header">\xe5\x85\xb3\xe4\xba\x8e\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</div>\n<div class="body">\n<p>\xe5\x85\xb3\xe6\xb3\xa8\xe9\xa3\x9f\xe5\x93\x81\xe5\xae\x89\xe5\x85\xa8\xef\xbc\x8c\xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe4\xb8\x96\xe7\x95\x8c</p>\n<p>\xe6\x89\x80\xe6\x9c\x89\xe9\xa3\x9f\xe5\x93\x81\xe5\x92\x8c\xe6\xb7\xbb\xe5\x8a\xa0\xe5\x89\x82\xe8\xb5\x84\xe6\x96\x99\xe6\x9d\xa5\xe8\x87\xaa\xe4\xba\x8eiearth-\xe7\x88\xb1\xe5\x9c\xb0\xe7\x90\x83\xe7\x8e\xaf\xe4\xbf\x9d\xe6\x9c\xba\xe6\x9e\x84</p>\n</div>\n</div>\n')  # partial/sidebar_about.html:8 (via partial/sidebar_global.html:5, additives.html:8, base.html:54)
    307          _append('\n')  # partial/sidebar_global.html:6 (via additives.html:8, base.html:54)
    308          _append('<div class="box" id="panel-login">\n<div class="header">\xe7\x99\xbb\xe5\x85\xa5\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</div>\n<div class="body">\n<form action="/login" method="POST">\n<div class="section">\n<input type="TEXT" name="username" placeholder="\xe7\x94\xa8\xe6\x88\xb7\xe5\x90\x8d/Email" />\n</div>\n<div class="section">\n<input type="PASSWORD" name="password" placeholder="\xe5\xaf\x86\xe7\xa0\x81" />\n</div>\n<div class="section">\n<input type="SUBMIT" value="\xe7\x99\xbb\xe5\x85\xa5" class="btn primary-btn" />\n<span class="tip">\xe4\xbc\x9a\xe8\xae\xb0\xe4\xbd\x8f\xe7\x99\xbb\xe5\x85\xa5\xe4\xb8\x80\xe4\xb8\xaa\xe6\x9c\x88</span>\n</div>\n</form>\n<div class="alert alert-info">\xe5\x86\x85\xe6\xb5\x8b\xe4\xb8\xad\xef\xbc\x8c\xe5\x8f\xaa\xe6\x8e\xa5\xe5\x8f\x97\xe9\x82\x80\xe8\xaf\xb7\xe6\xb3\xa8\xe5\x86\x8c</div>\n</div>\n</div>\n')  # partial/sidebar_login.html:19 (via partial/sidebar_global.html:6, additives.html:8, base.html:54)
    309          _append('\n')  # partial/sidebar_global.html:8 (via additives.html:8, base.html:54)
    310      _append('\n')  # partial/sidebar_global.html:10 (via additives.html:8, base.html:54)
    311      _append('<div class="box">\n<div class="header">\xe6\xb5\x8f\xe8\xa7\x88\xe9\xa3\x9f\xe5\x93\x81</div>\n<div class="body">\n<ul>\n<a href="/food/hot">\n<li data-title="\xe7\x83\xad\xe9\x97\xa8\xe9\xa3\x9f\xe5\x93\x81"><span class="anchor">\xe7\x83\xad\xe9\x97\xa8\xe9\xa3\x9f\xe5\x93\x81</span></li>\n</a>\n<a href="/food/latest">\n<li data-title="\xe6\x9c\x80\xe6\x96\xb0\xe9\xa3\x9f\xe5\x93\x81"><span class="anchor">\xe6\x9c\x80\xe6\x96\xb0\xe9\xa3\x9f\xe5\x93\x81</span></li>\n</a>\n</ul>\n</div>\n</div>\n')  # partial/sidebar_food_nav.html:15 (via partial/sidebar_global.html:10, additives.html:8, base.html:54)
    312      _append('\n')  # partial/sidebar_global.html:11 (via additives.html:8, base.html:54)
    313      import models  # partial/sidebar_hot_searchs.html:1 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    314      _append('\n')  # partial/sidebar_hot_searchs.html:2 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    315      hot_searchs = models.Additive_Search().hot_searchs  # partial/sidebar_hot_searchs.html:2 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    316      _append('\n<div class="box" id="panel-searchs">\n<div class="header">\xe7\x83\xad\xe9\x97\xa8\xe6\x90\x9c\xe7\xb4\xa2</div>\n<div class="body">\n<ul>\n')  # partial/sidebar_hot_searchs.html:8 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    317      for search in hot_searchs:  # partial/sidebar_hot_searchs.html:8 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    318          _append('\n<!--\n<a class="avatar" href="/additive/')  # partial/sidebar_hot_searchs.html:10 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    319          _tmp = search[1]  # partial/sidebar_hot_searchs.html:10 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    320          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_hot_searchs.html:10 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    321          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_hot_searchs.html:10 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    322          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_hot_searchs.html:10 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    323          _append(_tmp)  # partial/sidebar_hot_searchs.html:10 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    324          _append('">\n-->\n<a class="avatar" href="/additive/')  # partial/sidebar_hot_searchs.html:12 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    325          _tmp = search[1]  # partial/sidebar_hot_searchs.html:12 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    326          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_hot_searchs.html:12 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    327          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_hot_searchs.html:12 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    328          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_hot_searchs.html:12 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    329          _append(_tmp)  # partial/sidebar_hot_searchs.html:12 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    330          _append('">\n<li>\n')  # partial/sidebar_hot_searchs.html:14 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    331          _tmp = search[0]  # partial/sidebar_hot_searchs.html:14 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    332          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_hot_searchs.html:14 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    333          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_hot_searchs.html:14 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    334          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_hot_searchs.html:14 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    335          _append(_tmp)  # partial/sidebar_hot_searchs.html:14 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    336          _append('\n</li>\n<!--\n<li class="item">\n<span class="anchor">')  # partial/sidebar_hot_searchs.html:18 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    337          _tmp = search[0]  # partial/sidebar_hot_searchs.html:18 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    338          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_hot_searchs.html:18 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    339          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_hot_searchs.html:18 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    340          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_hot_searchs.html:18 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    341          _append(_tmp)  # partial/sidebar_hot_searchs.html:18 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    342          _append('</span>\n</li>\n-->\n</a>\n')  # partial/sidebar_hot_searchs.html:22 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    343      _append('\n</ul>\n</div>\n</div>\n')  # partial/sidebar_hot_searchs.html:26 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    344      _append('\n')  # partial/sidebar_global.html:12 (via additives.html:8, base.html:54)
    345      _append('\n')  # additives.html:9 (via base.html:54)
    346      _append('\n</div>\n</div>\n</div>\n<div id="footer">\n<div class="inner">\n<div class="right">\n<span class="belief">make the world a little better and easier</span>\n</div>\n<div class="left">\n<ul>\n<li><a href="/about">\xe5\x85\xb3\xe4\xba\x8e</a> <!--<span class="divider">/</span>--></li>\n<!--<li><a href="/feedback">\xe5\x8f\x8d\xe9\xa6\x88</a> <span class="divider">/</span></li>-->\n<!--<li><a href="/blog">\xe6\x97\xa5\xe5\xbf\x97</a></li>-->\n</ul>\n</div>\n</div>\n</div>\n<script type="text/javascript">\nvar _gaq = _gaq || [];\n_gaq.push([\'_setAccount\', \'UA-1281124-23\']);\n_gaq.push([\'_trackPageview\']);\n(function() {\nvar ga = document.createElement(\'script\'); ga.type = \'text/javascript\'; ga.async = true;\nga.src = (\'https:\' == document.location.protocol ? \'https://ssl\' : \'http://www\') + \'.google-analytics.com/ga.js\';\nvar s = document.getElementsByTagName(\'script\')[0]; s.parentNode.insertBefore(ga, s);\n})();\n</script>\n<!-- love your mom! -->\n</body>\n<meta name="description" content="\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - " />\n')  # base.html:89
    347      return _utf8('').join(_buffer)  # base.html:0
[E 120723 08:04:49 web:1031] Uncaught exception GET / (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.100', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cookie': '__utma=148685175.1070362998.1342935208.1342944388.1342948559.3; __utmz=148685175.1342935208.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)', 'Cache-Control': 'max-age=0', 'X-Real-Ip': '192.168.0.100'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "src/sites/www/handlers/home.py", line 14, in get
        return self._render('hot')
      File "src/sites/www/handlers/base.py", line 87, in _render
        current_additive = additive,
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 474, in render
        html = self.render_string(template_name, **kwargs)
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 586, in render_string
        return t.generate(**args)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 253, in generate
        return execute()
      File "additives_html.generated.py", line 78, in _execute
        _tmp = foods_title  # partial/additives.html:2 (via additives.html:4, base.html:50)
    NameError: global name 'foods_title' is not defined
[E 120723 08:04:49 web:1393] 500 GET / (127.0.0.1) 440.25ms
[E 120723 08:05:05 template:256] additives.html code:
      1  def _execute():  # base.html:0
      2      _buffer = []  # base.html:0
      3      _append = _buffer.append  # base.html:0
      4      _append('<!doctype html>\n<head>\n<meta charset="UTF-8" />\n<meta content="True" name="HandheldFriendly" />\n<meta content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0; name=\'viewport\'" />\n<title>\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - \xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81')  # base.html:6
      5      _append('</title>\n<link rel="stylesheet" type="text/css" media="screen" href="/static/css/vendor/jquery.fancybox.css" />\n<link rel="stylesheet" type="text/css" media="screen" href="/static/css/main.css" />\n<link rel="shortcut icon" href="/static/img/favicon.ico" />\n<link rel="canonical" href="http://wuditoo.com/" />\n<meta name="description" content="\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - \xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81" />\n<script src="/static/js/vendor/jquery.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.history.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.fancybox.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.scrollTo.min.js" type="text/javascript"></script>\n')  # base.html:16
      6      _append('\n<script type="text/javascript">\n')  # additives.html:13 (via base.html:16)
      7      if current_additive:  # additives.html:13 (via base.html:16)
      8          _append('\nmeta_additive = {\nurl: "/additive/')  # additives.html:15 (via base.html:16)
      9          _tmp = current_additive.id  # additives.html:15 (via base.html:16)
     10          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # additives.html:15 (via base.html:16)
     11          else: _tmp = _utf8(str(_tmp))  # additives.html:15 (via base.html:16)
     12          _tmp = _utf8(xhtml_escape(_tmp))  # additives.html:15 (via base.html:16)
     13          _append(_tmp)  # additives.html:15 (via base.html:16)
     14          _append('",\nwidth: ')  # additives.html:16 (via base.html:16)
     15          _tmp = current_additive.width  # additives.html:16 (via base.html:16)
     16          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # additives.html:16 (via base.html:16)
     17          else: _tmp = _utf8(str(_tmp))  # additives.html:16 (via base.html:16)
     18          _tmp = _utf8(xhtml_escape(_tmp))  # additives.html:16 (via base.html:16)
     19          _append(_tmp)  # additives.html:16 (via base.html:16)
     20          _append(',\nheight: ')  # additives.html:17 (via base.html:16)
     21          _tmp = current_additive.height  # additives.html:17 (via base.html:16)
     22          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # additives.html:17 (via base.html:16)
     23          else: _tmp = _utf8(str(_tmp))  # additives.html:17 (via base.html:16)
     24          _tmp = _utf8(xhtml_escape(_tmp))  # additives.html:17 (via base.html:16)
     25          _append(_tmp)  # additives.html:17 (via base.html:16)
     26          _append('\n}\n')  # additives.html:19 (via base.html:16)
     27      _append('\n</script>\n')  # additives.html:21 (via base.html:16)
     28      _append('\n<script src="/static/js/main.js" type="text/javascript"></script>\n</head>\n<!--[if IE 7 ]><body class="ie7"><![endif]-->\n<!--[if gt IE 7]><body class="ie"><![endif]-->\n<!--[if !IE]><body><![endif]-->\n<div id="header">\n<div class="inner">\n<div id="logo"><a href="/">\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</a></div>\n<div id="slogon">\xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81</div>\n<div id="witticism">')  # base.html:27
     29      _tmp = home_sentence()  # base.html:27
     30      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:27
     31      else: _tmp = _utf8(str(_tmp))  # base.html:27
     32      _tmp = _utf8(xhtml_escape(_tmp))  # base.html:27
     33      _append(_tmp)  # base.html:27
     34      _append('</div>\n<!--\n<ul class="nav-right">\n</ul>\n-->\n</div>\n</div>\n<div id="container">\n<div class="inner">\n<div class="message alert alert-warn">\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0\xe5\xad\x95\xe8\x82\xb2\xe4\xb8\xad\xef\xbc\x8c\xe6\x97\xb6\xe9\x97\xb4\xe5\xbe\x85\xe5\xae\x9a\xe3\x80\x82\xe8\xb0\xa2\xe8\xb0\xa2\xe6\x82\xa8\xe7\x9a\x84\xe5\x88\xb0\xe8\xae\xbf\xef\xbc\x9a\xef\xbc\x89</div>\n')  # base.html:38
     35      message = get_message()  # base.html:38
     36      _append('\n')  # base.html:39
     37      for message_type in ('error', 'success', 'info', 'warn'):  # base.html:39
     38          _append('\n')  # base.html:40
     39          if message and message_type == message[0]:  # base.html:40
     40              _append('\n<div id="')  # base.html:41
     41              _tmp = message_type  # base.html:41
     42              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     43              else: _tmp = _utf8(str(_tmp))  # base.html:41
     44              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     45              _append(_tmp)  # base.html:41
     46              _append('-message" class="message alert alert-')  # base.html:41
     47              _tmp = message_type  # base.html:41
     48              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     49              else: _tmp = _utf8(str(_tmp))  # base.html:41
     50              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     51              _append(_tmp)  # base.html:41
     52              _append('">')  # base.html:41
     53              _tmp = message[1]  # base.html:41
     54              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     55              else: _tmp = _utf8(str(_tmp))  # base.html:41
     56              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     57              _append(_tmp)  # base.html:41
     58              _append('</div>\n')  # base.html:42
     59          else:  # base.html:42
     60              _append('\n<div id="')  # base.html:43
     61              _tmp = message_type  # base.html:43
     62              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:43
     63              else: _tmp = _utf8(str(_tmp))  # base.html:43
     64              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:43
     65              _append(_tmp)  # base.html:43
     66              _append('-message" class="message alert alert-')  # base.html:43
     67              _tmp = message_type  # base.html:43
     68              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:43
     69              else: _tmp = _utf8(str(_tmp))  # base.html:43
     70              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:43
     71              _append(_tmp)  # base.html:43
     72              _append(' hide"></div>\n')  # base.html:44
     73          _append('\n')  # base.html:45
     74      _append('\n')  # base.html:47
     75      _append('\n<div id="main">\n')  # base.html:50
     76      _append('\n')  # additives.html:4 (via base.html:50)
     77      _append('<div class="box" id="foods">\n<div class="header">')  # partial/additives.html:2 (via additives.html:4, base.html:50)
     78      _tmp = foods_title  # partial/additives.html:2 (via additives.html:4, base.html:50)
     79      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:2 (via additives.html:4, base.html:50)
     80      else: _tmp = _utf8(str(_tmp))  # partial/additives.html:2 (via additives.html:4, base.html:50)
     81      _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:2 (via additives.html:4, base.html:50)
     82      _append(_tmp)  # partial/additives.html:2 (via additives.html:4, base.html:50)
     83      _append('</div>\n<div class="body main ul">\n')  # partial/additives.html:4 (via additives.html:4, base.html:50)
     84      for index, food in enumerate(foods):  # partial/additives.html:4 (via additives.html:4, base.html:50)
     85          _append('\n')  # partial/additives.html:5 (via additives.html:4, base.html:50)
     86          creator = food.creator  # partial/additives.html:5 (via additives.html:4, base.html:50)
     87          _append('\n<div class="food-item">\n<div class="header">\n<a class="avatar" href="/food/')  # partial/additives.html:8 (via additives.html:4, base.html:50)
     88          _tmp = food.id  # partial/additives.html:8 (via additives.html:4, base.html:50)
     89          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     90          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     91          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     92          _append(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     93          _append('"><img src="')  # partial/additives.html:8 (via additives.html:4, base.html:50)
     94          _tmp = get_avatar_url(creator, 's')  # partial/additives.html:8 (via additives.html:4, base.html:50)
     95          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     96          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     97          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
     98          _append(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
     99          _append('" /> ')  # partial/additives.html:8 (via additives.html:4, base.html:50)
    100          _tmp = food.name  # partial/additives.html:8 (via additives.html:4, base.html:50)
    101          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
    102          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
    103          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:8 (via additives.html:4, base.html:50)
    104          _append(_tmp)  # partial/additives.html:8 (via additives.html:4, base.html:50)
    105          _append('</a>\n</div>\n<div class="body">\n')  # partial/additives.html:11 (via additives.html:4, base.html:50)
    106          for index, food_part in enumerate(food_parts):  # partial/additives.html:11 (via additives.html:4, base.html:50)
    107              _append('\n<div class="food_part">')  # partial/additives.html:12 (via additives.html:4, base.html:50)
    108              _tmp = food_part.name  # partial/additives.html:12 (via additives.html:4, base.html:50)
    109              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:12 (via additives.html:4, base.html:50)
    110              else: _tmp = _utf8(str(_tmp))  # partial/additives.html:12 (via additives.html:4, base.html:50)
    111              _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:12 (via additives.html:4, base.html:50)
    112              _append(_tmp)  # partial/additives.html:12 (via additives.html:4, base.html:50)
    113              _append('</div>\n')  # partial/additives.html:13 (via additives.html:4, base.html:50)
    114          _append('\n</div>\n<div class="footer">\n<span class="meta">\n<li><i class="icon-view"></i> ')  # partial/additives.html:18 (via additives.html:4, base.html:50)
    115          _tmp = food.views_count  # partial/additives.html:18 (via additives.html:4, base.html:50)
    116          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:18 (via additives.html:4, base.html:50)
    117          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:18 (via additives.html:4, base.html:50)
    118          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:18 (via additives.html:4, base.html:50)
    119          _append(_tmp)  # partial/additives.html:18 (via additives.html:4, base.html:50)
    120          _append(' | Created:')  # partial/additives.html:18 (via additives.html:4, base.html:50)
    121          _tmp = timesince(food.created)  # partial/additives.html:18 (via additives.html:4, base.html:50)
    122          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/additives.html:18 (via additives.html:4, base.html:50)
    123          else: _tmp = _utf8(str(_tmp))  # partial/additives.html:18 (via additives.html:4, base.html:50)
    124          _tmp = _utf8(xhtml_escape(_tmp))  # partial/additives.html:18 (via additives.html:4, base.html:50)
    125          _append(_tmp)  # partial/additives.html:18 (via additives.html:4, base.html:50)
    126          _append('</li>\n</span>\n<span class="created">\n</span>\n</div>\n</div>\n')  # partial/additives.html:25 (via additives.html:4, base.html:50)
    127          _append('\n')  # partial/additives.html:26 (via additives.html:4, base.html:50)
    128          if index > 0 and (index + 1) % 3 == 0:  # partial/additives.html:26 (via additives.html:4, base.html:50)
    129              _append('\n<div class="clearfix"></div>\n')  # partial/additives.html:28 (via additives.html:4, base.html:50)
    130          _append('\n')  # partial/additives.html:30 (via additives.html:4, base.html:50)
    131      _append('\n')  # partial/additives.html:31 (via additives.html:4, base.html:50)
    132      page_type = 'foods'  # partial/additives.html:31 (via additives.html:4, base.html:50)
    133      _append('\n')  # partial/additives.html:32 (via additives.html:4, base.html:50)
    134      _append('\n')  # partial/pagination.html:3 (via partial/additives.html:32, additives.html:4, base.html:50)
    135      from macros.macro import ADDITIVES_PER_PAGE, USERS_PER_PAGE  # partial/pagination.html:3 (via partial/additives.html:32, additives.html:4, base.html:50)
    136      _append('\n')  # partial/pagination.html:4 (via partial/additives.html:32, additives.html:4, base.html:50)
    137      import math  # partial/pagination.html:4 (via partial/additives.html:32, additives.html:4, base.html:50)
    138      _append('\n')  # partial/pagination.html:6 (via partial/additives.html:32, additives.html:4, base.html:50)
    139      if page_type == 'additives':  # partial/pagination.html:6 (via partial/additives.html:32, additives.html:4, base.html:50)
    140          _append('\n')  # partial/pagination.html:7 (via partial/additives.html:32, additives.html:4, base.html:50)
    141          items_per_page = ADDITIVES_PER_PAGE  # partial/pagination.html:7 (via partial/additives.html:32, additives.html:4, base.html:50)
    142          _append('\n')  # partial/pagination.html:8 (via partial/additives.html:32, additives.html:4, base.html:50)
    143      else:  # partial/pagination.html:8 (via partial/additives.html:32, additives.html:4, base.html:50)
    144          _append('\n')  # partial/pagination.html:9 (via partial/additives.html:32, additives.html:4, base.html:50)
    145          items_per_page = USERS_PER_PAGE  # partial/pagination.html:9 (via partial/additives.html:32, additives.html:4, base.html:50)
    146          _append('\n')  # partial/pagination.html:10 (via partial/additives.html:32, additives.html:4, base.html:50)
    147      _append('\n')  # partial/pagination.html:12 (via partial/additives.html:32, additives.html:4, base.html:50)
    148      total_page = int(math.ceil(float(total_items) / items_per_page))  # partial/pagination.html:12 (via partial/additives.html:32, additives.html:4, base.html:50)
    149      _append('\n')  # partial/pagination.html:14 (via partial/additives.html:32, additives.html:4, base.html:50)
    150      current_page = int(handler.get_argument('page', 1))  # partial/pagination.html:14 (via partial/additives.html:32, additives.html:4, base.html:50)
    151      _append('\n')  # partial/pagination.html:16 (via partial/additives.html:32, additives.html:4, base.html:50)
    152      if current_page <=6:  # partial/pagination.html:16 (via partial/additives.html:32, additives.html:4, base.html:50)
    153          _append('\n')  # partial/pagination.html:17 (via partial/additives.html:32, additives.html:4, base.html:50)
    154          end_page = min(total_page, 10)  # partial/pagination.html:17 (via partial/additives.html:32, additives.html:4, base.html:50)
    155          _append('\n')  # partial/pagination.html:18 (via partial/additives.html:32, additives.html:4, base.html:50)
    156          start_page = 1  # partial/pagination.html:18 (via partial/additives.html:32, additives.html:4, base.html:50)
    157          _append('\n')  # partial/pagination.html:19 (via partial/additives.html:32, additives.html:4, base.html:50)
    158      else:  # partial/pagination.html:19 (via partial/additives.html:32, additives.html:4, base.html:50)
    159          _append('\n')  # partial/pagination.html:20 (via partial/additives.html:32, additives.html:4, base.html:50)
    160          end_page = min(total_page, current_page+4)  # partial/pagination.html:20 (via partial/additives.html:32, additives.html:4, base.html:50)
    161          _append('\n')  # partial/pagination.html:21 (via partial/additives.html:32, additives.html:4, base.html:50)
    162          start_page = current_page - 5  # partial/pagination.html:21 (via partial/additives.html:32, additives.html:4, base.html:50)
    163          _append('\n')  # partial/pagination.html:22 (via partial/additives.html:32, additives.html:4, base.html:50)
    164      _append('\n')  # partial/pagination.html:24 (via partial/additives.html:32, additives.html:4, base.html:50)
    165      if total_page > 1:  # partial/pagination.html:24 (via partial/additives.html:32, additives.html:4, base.html:50)
    166          _append('\n<div class="pagination">\n<ul>\n')  # partial/pagination.html:27 (via partial/additives.html:32, additives.html:4, base.html:50)
    167          if current_page == 1:  # partial/pagination.html:27 (via partial/additives.html:32, additives.html:4, base.html:50)
    168              _append('\n<li class="disabled">\xe2\x86\x90 </li>\n')  # partial/pagination.html:29 (via partial/additives.html:32, additives.html:4, base.html:50)
    169          else:  # partial/pagination.html:29 (via partial/additives.html:32, additives.html:4, base.html:50)
    170              _append('\n<li><a href="')  # partial/pagination.html:30 (via partial/additives.html:32, additives.html:4, base.html:50)
    171              _tmp = page_path  # partial/pagination.html:30 (via partial/additives.html:32, additives.html:4, base.html:50)
    172              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:30 (via partial/additives.html:32, additives.html:4, base.html:50)
    173              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:30 (via partial/additives.html:32, additives.html:4, base.html:50)
    174              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:30 (via partial/additives.html:32, additives.html:4, base.html:50)
    175              _append(_tmp)  # partial/pagination.html:30 (via partial/additives.html:32, additives.html:4, base.html:50)
    176              _append('?page=1">\xe2\x86\x90 </a></li>\n')  # partial/pagination.html:31 (via partial/additives.html:32, additives.html:4, base.html:50)
    177          _append('\n')  # partial/pagination.html:33 (via partial/additives.html:32, additives.html:4, base.html:50)
    178          for i in range(start_page, end_page + 1):  # partial/pagination.html:33 (via partial/additives.html:32, additives.html:4, base.html:50)
    179              _append('\n<li ')  # partial/pagination.html:34 (via partial/additives.html:32, additives.html:4, base.html:50)
    180              if current_page == i:  # partial/pagination.html:34 (via partial/additives.html:32, additives.html:4, base.html:50)
    181                  _append('class="active"')  # partial/pagination.html:34 (via partial/additives.html:32, additives.html:4, base.html:50)
    182              _append('>\n<a href="')  # partial/pagination.html:35 (via partial/additives.html:32, additives.html:4, base.html:50)
    183              _tmp = page_path  # partial/pagination.html:35 (via partial/additives.html:32, additives.html:4, base.html:50)
    184              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/additives.html:32, additives.html:4, base.html:50)
    185              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/additives.html:32, additives.html:4, base.html:50)
    186              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/additives.html:32, additives.html:4, base.html:50)
    187              _append(_tmp)  # partial/pagination.html:35 (via partial/additives.html:32, additives.html:4, base.html:50)
    188              _append('?page=')  # partial/pagination.html:35 (via partial/additives.html:32, additives.html:4, base.html:50)
    189              _tmp = i  # partial/pagination.html:35 (via partial/additives.html:32, additives.html:4, base.html:50)
    190              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/additives.html:32, additives.html:4, base.html:50)
    191              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/additives.html:32, additives.html:4, base.html:50)
    192              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/additives.html:32, additives.html:4, base.html:50)
    193              _append(_tmp)  # partial/pagination.html:35 (via partial/additives.html:32, additives.html:4, base.html:50)
    194              _append('">')  # partial/pagination.html:35 (via partial/additives.html:32, additives.html:4, base.html:50)
    195              _tmp = i  # partial/pagination.html:35 (via partial/additives.html:32, additives.html:4, base.html:50)
    196              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/additives.html:32, additives.html:4, base.html:50)
    197              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/additives.html:32, additives.html:4, base.html:50)
    198              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/additives.html:32, additives.html:4, base.html:50)
    199              _append(_tmp)  # partial/pagination.html:35 (via partial/additives.html:32, additives.html:4, base.html:50)
    200              _append('</a>\n</li>\n')  # partial/pagination.html:37 (via partial/additives.html:32, additives.html:4, base.html:50)
    201          _append('\n')  # partial/pagination.html:39 (via partial/additives.html:32, additives.html:4, base.html:50)
    202          if current_page == total_page:  # partial/pagination.html:39 (via partial/additives.html:32, additives.html:4, base.html:50)
    203              _append('\n<li class="disabled">\xe2\x86\x92 </li>\n')  # partial/pagination.html:41 (via partial/additives.html:32, additives.html:4, base.html:50)
    204          else:  # partial/pagination.html:41 (via partial/additives.html:32, additives.html:4, base.html:50)
    205              _append('\n<li><a href="')  # partial/pagination.html:42 (via partial/additives.html:32, additives.html:4, base.html:50)
    206              _tmp = page_path  # partial/pagination.html:42 (via partial/additives.html:32, additives.html:4, base.html:50)
    207              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:42 (via partial/additives.html:32, additives.html:4, base.html:50)
    208              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:42 (via partial/additives.html:32, additives.html:4, base.html:50)
    209              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:42 (via partial/additives.html:32, additives.html:4, base.html:50)
    210              _append(_tmp)  # partial/pagination.html:42 (via partial/additives.html:32, additives.html:4, base.html:50)
    211              _append('?page=')  # partial/pagination.html:42 (via partial/additives.html:32, additives.html:4, base.html:50)
    212              _tmp = current_page+1  # partial/pagination.html:42 (via partial/additives.html:32, additives.html:4, base.html:50)
    213              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:42 (via partial/additives.html:32, additives.html:4, base.html:50)
    214              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:42 (via partial/additives.html:32, additives.html:4, base.html:50)
    215              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:42 (via partial/additives.html:32, additives.html:4, base.html:50)
    216              _append(_tmp)  # partial/pagination.html:42 (via partial/additives.html:32, additives.html:4, base.html:50)
    217              _append('">\xe2\x86\x92 </a></li>\n')  # partial/pagination.html:43 (via partial/additives.html:32, additives.html:4, base.html:50)
    218          _append('\n</ul>\n</div>\n')  # partial/pagination.html:46 (via partial/additives.html:32, additives.html:4, base.html:50)
    219      _append('\n')  # partial/pagination.html:47 (via partial/additives.html:32, additives.html:4, base.html:50)
    220      _append('\n</div>\n</div>\n')  # partial/additives.html:35 (via additives.html:4, base.html:50)
    221      _append('\n')  # additives.html:5 (via base.html:50)
    222      _append('\n</div>\n<div id="sidebar">\n')  # base.html:54
    223      _append('\n')  # additives.html:8 (via base.html:54)
    224      if current_user:  # partial/sidebar_global.html:1 (via additives.html:8, base.html:54)
    225          _append('\n')  # partial/sidebar_global.html:2 (via additives.html:8, base.html:54)
    226          _append('<div class="upload item ')  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    227          if not current_user.left_upload_count:  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    228              _append('disabled')  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    229          _append('" data-url="/photo/upload" data-title="\xe9\x87\x87\xe9\x9b\x86\xe7\x85\xa7\xe7\x89\x87" >\n<div class="left"></div>\n<div class="center">\n')  # partial/sidebar_upload.html:5 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    230          if current_user.left_upload_count:  # partial/sidebar_upload.html:5 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    231              _append('\n\xe9\x87\x87\xe9\x9b\x86\xe7\x85\xa7\xe7\x89\x87(\xe6\x9c\xac\xe5\x91\xa8\xe8\xbf\x98\xe5\x89\xa9')  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    232              _tmp = current_user.left_upload_count  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    233              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    234              else: _tmp = _utf8(str(_tmp))  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    235              _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    236              _append(_tmp)  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    237              _append('\xe5\xbc\xa0)\n')  # partial/sidebar_upload.html:7 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    238          else:  # partial/sidebar_upload.html:7 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    239              _append('\n\xe6\x9c\xac\xe5\x91\xa8\xe7\x9a\x84\xe9\x87\x87\xe9\x9b\x86\xe4\xbd\x99\xe9\xa2\x9d\xe5\xb7\xb2\xe7\x94\xa8\xe5\xae\x8c\xe4\xba\x86\n')  # partial/sidebar_upload.html:9 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    240          _append('\n</div>\n<div class="right"></div>\n</div>\n')  # partial/sidebar_upload.html:13 (via partial/sidebar_global.html:2, additives.html:8, base.html:54)
    241          _append('\n')  # partial/sidebar_global.html:3 (via additives.html:8, base.html:54)
    242          _append('<div class="box" id="panel-me">\n<div class="header"><a class="right" href="/logout">\xe7\x99\xbb\xe5\x87\xba</a>\xe6\x88\x91\xe7\x9a\x84\xe4\xbf\xa1\xe6\x81\xaf</div>\n<div class="body">\n<div class="me">\n<a class="settings item" href="/settings" data-title="\xe8\xae\xbe\xe7\xbd\xae" data-url="/settings">\xe8\xae\xbe\xe7\xbd\xae</a>\n<a href="/user/')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    243          _tmp = current_user.username  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    244          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    245          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    246          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    247          _append(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    248          _append('"><img class="avatar" src="')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    249          _tmp = get_avatar_url(current_user, 's')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    250          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    251          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    252          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    253          _append(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    254          _append('" /></a>\n<a href="/user/')  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    255          _tmp = current_user.username  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    256          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    257          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    258          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    259          _append(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    260          _append('">')  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    261          _tmp = current_user.fullname  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    262          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    263          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    264          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    265          _append(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    266          _append('</a>\n<i class="level icon-level')  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    267          _tmp = current_user.level  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    268          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    269          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    270          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    271          _append(_tmp)  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    272          _append('"></i>\n</div>\n<div class="follow">\n<div class="following item" data-title="\xe6\x88\x91\xe5\x85\xb3\xe6\xb3\xa8\xe7\x9a\x84\xe4\xba\xba" data-url="/mine/following">\n<h3 class="anchor">')  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    273          _tmp = current_user.following_count  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    274          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    275          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    276          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    277          _append(_tmp)  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    278          _append('</h3>\n<span>following</span>\n</div>\n<div class="follower item" data-title="\xe5\x85\xb3\xe6\xb3\xa8\xe6\x88\x91\xe7\x9a\x84\xe4\xba\xba" data-url="/mine/follower">\n<h3 class="anchor">')  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    279          _tmp = current_user.follower_count  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    280          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    281          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    282          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    283          _append(_tmp)  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    284          _append('</h3>\n<span>followers</span>\n</div>\n</div>\n<ul>\n<li class="item" data-url="/mine/invite" data-title="\xe9\x82\x80\xe8\xaf\xb7\xe6\x9c\x8b\xe5\x8f\x8b\xe5\x8a\xa0\xe5\x85\xa5"> <span class="num">')  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    285          _tmp = current_user.unused_invite_key_count  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    286          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    287          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    288          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    289          _append(_tmp)  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    290          _append('</span><span class="anchor">\xe9\x82\x80\xe8\xaf\xb7\xe6\x9c\x8b\xe5\x8f\x8b\xe5\x8a\xa0\xe5\x85\xa5</span></li>\n<li class="item" data-title="\xe6\x88\x91\xe6\xb7\xbb\xe5\x8a\xa0\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87" data-url="/mine/photos"> <span class="num">')  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    291          _tmp = current_user.photo_count  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    292          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    293          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    294          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    295          _append(_tmp)  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    296          _append('</span><span class="anchor">\xe6\x88\x91\xe6\xb7\xbb\xe5\x8a\xa0\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87</span></li>\n<li class="item" data-title="\xe6\x88\x91\xe5\x96\x9c\xe6\xac\xa2\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87" data-url="/mine/likes_photos"><span class="num">')  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    297          _tmp = current_user.likes_count  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    298          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    299          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    300          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    301          _append(_tmp)  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    302          _append('</span><span class="anchor">\xe6\x88\x91\xe5\x96\x9c\xe6\xac\xa2\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87</span> </li>\n</ul>\n</div>\n</div>\n')  # partial/sidebar_me.html:27 (via partial/sidebar_global.html:3, additives.html:8, base.html:54)
    303          _append('\n')  # partial/sidebar_global.html:4 (via additives.html:8, base.html:54)
    304      else:  # partial/sidebar_global.html:4 (via additives.html:8, base.html:54)
    305          _append('\n')  # partial/sidebar_global.html:5 (via additives.html:8, base.html:54)
    306          _append('<div class="box" id="panel-about">\n<div class="header">\xe5\x85\xb3\xe4\xba\x8e\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</div>\n<div class="body">\n<p>\xe5\x85\xb3\xe6\xb3\xa8\xe9\xa3\x9f\xe5\x93\x81\xe5\xae\x89\xe5\x85\xa8\xef\xbc\x8c\xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe4\xb8\x96\xe7\x95\x8c</p>\n<p>\xe6\x89\x80\xe6\x9c\x89\xe9\xa3\x9f\xe5\x93\x81\xe5\x92\x8c\xe6\xb7\xbb\xe5\x8a\xa0\xe5\x89\x82\xe8\xb5\x84\xe6\x96\x99\xe6\x9d\xa5\xe8\x87\xaa\xe4\xba\x8eiearth-\xe7\x88\xb1\xe5\x9c\xb0\xe7\x90\x83\xe7\x8e\xaf\xe4\xbf\x9d\xe6\x9c\xba\xe6\x9e\x84</p>\n</div>\n</div>\n')  # partial/sidebar_about.html:8 (via partial/sidebar_global.html:5, additives.html:8, base.html:54)
    307          _append('\n')  # partial/sidebar_global.html:6 (via additives.html:8, base.html:54)
    308          _append('<div class="box" id="panel-login">\n<div class="header">\xe7\x99\xbb\xe5\x85\xa5\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</div>\n<div class="body">\n<form action="/login" method="POST">\n<div class="section">\n<input type="TEXT" name="username" placeholder="\xe7\x94\xa8\xe6\x88\xb7\xe5\x90\x8d/Email" />\n</div>\n<div class="section">\n<input type="PASSWORD" name="password" placeholder="\xe5\xaf\x86\xe7\xa0\x81" />\n</div>\n<div class="section">\n<input type="SUBMIT" value="\xe7\x99\xbb\xe5\x85\xa5" class="btn primary-btn" />\n<span class="tip">\xe4\xbc\x9a\xe8\xae\xb0\xe4\xbd\x8f\xe7\x99\xbb\xe5\x85\xa5\xe4\xb8\x80\xe4\xb8\xaa\xe6\x9c\x88</span>\n</div>\n</form>\n<div class="alert alert-info">\xe5\x86\x85\xe6\xb5\x8b\xe4\xb8\xad\xef\xbc\x8c\xe5\x8f\xaa\xe6\x8e\xa5\xe5\x8f\x97\xe9\x82\x80\xe8\xaf\xb7\xe6\xb3\xa8\xe5\x86\x8c</div>\n</div>\n</div>\n')  # partial/sidebar_login.html:19 (via partial/sidebar_global.html:6, additives.html:8, base.html:54)
    309          _append('\n')  # partial/sidebar_global.html:8 (via additives.html:8, base.html:54)
    310      _append('\n')  # partial/sidebar_global.html:10 (via additives.html:8, base.html:54)
    311      _append('<div class="box">\n<div class="header">\xe6\xb5\x8f\xe8\xa7\x88\xe9\xa3\x9f\xe5\x93\x81</div>\n<div class="body">\n<ul>\n<a href="/food/hot">\n<li data-title="\xe7\x83\xad\xe9\x97\xa8\xe9\xa3\x9f\xe5\x93\x81"><span class="anchor">\xe7\x83\xad\xe9\x97\xa8\xe9\xa3\x9f\xe5\x93\x81</span></li>\n</a>\n<a href="/food/latest">\n<li data-title="\xe6\x9c\x80\xe6\x96\xb0\xe9\xa3\x9f\xe5\x93\x81"><span class="anchor">\xe6\x9c\x80\xe6\x96\xb0\xe9\xa3\x9f\xe5\x93\x81</span></li>\n</a>\n</ul>\n</div>\n</div>\n')  # partial/sidebar_food_nav.html:15 (via partial/sidebar_global.html:10, additives.html:8, base.html:54)
    312      _append('\n')  # partial/sidebar_global.html:11 (via additives.html:8, base.html:54)
    313      import models  # partial/sidebar_hot_searchs.html:1 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    314      _append('\n')  # partial/sidebar_hot_searchs.html:2 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    315      hot_searchs = models.Additive_Search().hot_searchs  # partial/sidebar_hot_searchs.html:2 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    316      _append('\n<div class="box" id="panel-searchs">\n<div class="header">\xe7\x83\xad\xe9\x97\xa8\xe6\x90\x9c\xe7\xb4\xa2</div>\n<div class="body">\n<ul>\n')  # partial/sidebar_hot_searchs.html:8 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    317      for search in hot_searchs:  # partial/sidebar_hot_searchs.html:8 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    318          _append('\n<!--\n<a class="avatar" href="/additive/')  # partial/sidebar_hot_searchs.html:10 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    319          _tmp = search[1]  # partial/sidebar_hot_searchs.html:10 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    320          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_hot_searchs.html:10 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    321          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_hot_searchs.html:10 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    322          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_hot_searchs.html:10 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    323          _append(_tmp)  # partial/sidebar_hot_searchs.html:10 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    324          _append('">\n-->\n<a class="avatar" href="/additive/')  # partial/sidebar_hot_searchs.html:12 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    325          _tmp = search[1]  # partial/sidebar_hot_searchs.html:12 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    326          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_hot_searchs.html:12 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    327          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_hot_searchs.html:12 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    328          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_hot_searchs.html:12 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    329          _append(_tmp)  # partial/sidebar_hot_searchs.html:12 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    330          _append('">\n<li>\n')  # partial/sidebar_hot_searchs.html:14 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    331          _tmp = search[0]  # partial/sidebar_hot_searchs.html:14 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    332          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_hot_searchs.html:14 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    333          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_hot_searchs.html:14 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    334          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_hot_searchs.html:14 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    335          _append(_tmp)  # partial/sidebar_hot_searchs.html:14 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    336          _append('\n</li>\n<!--\n<li class="item">\n<span class="anchor">')  # partial/sidebar_hot_searchs.html:18 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    337          _tmp = search[0]  # partial/sidebar_hot_searchs.html:18 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    338          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_hot_searchs.html:18 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    339          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_hot_searchs.html:18 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    340          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_hot_searchs.html:18 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    341          _append(_tmp)  # partial/sidebar_hot_searchs.html:18 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    342          _append('</span>\n</li>\n-->\n</a>\n')  # partial/sidebar_hot_searchs.html:22 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    343      _append('\n</ul>\n</div>\n</div>\n')  # partial/sidebar_hot_searchs.html:26 (via partial/sidebar_global.html:11, additives.html:8, base.html:54)
    344      _append('\n')  # partial/sidebar_global.html:12 (via additives.html:8, base.html:54)
    345      _append('\n')  # additives.html:9 (via base.html:54)
    346      _append('\n</div>\n</div>\n</div>\n<div id="footer">\n<div class="inner">\n<div class="right">\n<span class="belief">make the world a little better and easier</span>\n</div>\n<div class="left">\n<ul>\n<li><a href="/about">\xe5\x85\xb3\xe4\xba\x8e</a> <!--<span class="divider">/</span>--></li>\n<!--<li><a href="/feedback">\xe5\x8f\x8d\xe9\xa6\x88</a> <span class="divider">/</span></li>-->\n<!--<li><a href="/blog">\xe6\x97\xa5\xe5\xbf\x97</a></li>-->\n</ul>\n</div>\n</div>\n</div>\n<script type="text/javascript">\nvar _gaq = _gaq || [];\n_gaq.push([\'_setAccount\', \'UA-1281124-23\']);\n_gaq.push([\'_trackPageview\']);\n(function() {\nvar ga = document.createElement(\'script\'); ga.type = \'text/javascript\'; ga.async = true;\nga.src = (\'https:\' == document.location.protocol ? \'https://ssl\' : \'http://www\') + \'.google-analytics.com/ga.js\';\nvar s = document.getElementsByTagName(\'script\')[0]; s.parentNode.insertBefore(ga, s);\n})();\n</script>\n<!-- love your mom! -->\n</body>\n<meta name="description" content="\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - " />\n')  # base.html:89
    347      return _utf8('').join(_buffer)  # base.html:0
[E 120723 08:05:05 web:1031] Uncaught exception GET / (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.100', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cookie': '__utma=148685175.1070362998.1342935208.1342944388.1342948559.3; __utmz=148685175.1342935208.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)', 'Cache-Control': 'max-age=0', 'X-Real-Ip': '192.168.0.100'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "src/sites/www/handlers/home.py", line 14, in get
        return self._render('hot')
      File "src/sites/www/handlers/base.py", line 87, in _render
        current_additive = additive,
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 474, in render
        html = self.render_string(template_name, **kwargs)
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 586, in render_string
        return t.generate(**args)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 253, in generate
        return execute()
      File "additives_html.generated.py", line 78, in _execute
        _tmp = foods_title  # partial/additives.html:2 (via additives.html:4, base.html:50)
    NameError: global name 'foods_title' is not defined
[E 120723 08:05:05 web:1393] 500 GET / (127.0.0.1) 1268.71ms
[W 120723 08:05:06 web:1393] 404 GET /favicon.ico (127.0.0.1) 4.00ms
[I 120723 08:05:56 web:1393] 200 GET / (127.0.0.1) 1400.79ms
[W 120723 08:06:03 web:1393] 404 GET /food/hot (127.0.0.1) 4.00ms
[W 120723 08:06:03 web:1393] 404 GET /favicon.ico (127.0.0.1) 8.01ms
[I 120723 08:08:28 web:1393] 200 GET / (127.0.0.1) 1440.81ms
[E 120723 08:08:30 web:1031] Uncaught exception GET /foods/hot (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/foods/hot', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.100', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cookie': '__utma=148685175.1070362998.1342935208.1342948559.1343001966.4; __utmb=148685175.2.10.1343001966; __utmc=148685175; __utmz=148685175.1342935208.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)', 'X-Real-Ip': '192.168.0.100', 'Referer': 'http://192.168.0.189/'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "src/sites/www/handlers/food.py", line 115, in get
        return self._render('hot')
      File "src/sites/www/handlers/base.py", line 120, in _render
        offset = (int(self.get_argument('page', 1)) - 1) * FOODS_PER_PAGE
    NameError: global name 'FOODS_PER_PAGE' is not defined
[E 120723 08:08:30 web:1393] 500 GET /foods/hot (127.0.0.1) 12.01ms
[W 120723 08:08:31 web:1393] 404 GET /favicon.ico (127.0.0.1) 8.00ms
[I 120723 08:29:12 web:1393] 200 GET / (127.0.0.1) 1520.85ms
[E 120723 08:29:18 web:1031] Uncaught exception GET /foods/hot (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/foods/hot', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.100', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cookie': '__utma=148685175.1070362998.1342935208.1342948559.1343001966.4; __utmb=148685175.4.10.1343001966; __utmc=148685175; __utmz=148685175.1342935208.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)', 'X-Real-Ip': '192.168.0.100', 'Referer': 'http://192.168.0.189/'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "src/sites/www/handlers/food.py", line 115, in get
        return self._render('hot')
      File "src/sites/www/handlers/base.py", line 120, in _render
        offset = (int(self.get_argument('page', 1)) - 1) * FOODS_PER_PAGE
    NameError: global name 'FOODS_PER_PAGE' is not defined
[E 120723 08:29:18 web:1393] 500 GET /foods/hot (127.0.0.1) 8.01ms
[W 120723 08:29:18 web:1393] 404 GET /favicon.ico (127.0.0.1) 4.00ms
[I 120723 08:30:32 autoreload:133] src/sites/www/handlers/base.py modified; restarting server
[I 120723 08:30:44 web:1393] 200 GET / (127.0.0.1) 1588.89ms
[E 120723 08:30:45 web:1031] Uncaught exception GET /foods/hot (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/foods/hot', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.100', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cookie': '__utma=148685175.1070362998.1342935208.1342948559.1343001966.4; __utmb=148685175.6.10.1343001966; __utmc=148685175; __utmz=148685175.1342935208.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)', 'X-Real-Ip': '192.168.0.100', 'Referer': 'http://192.168.0.189/'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "src/sites/www/handlers/food.py", line 115, in get
        return self._render('hot')
      File "src/sites/www/handlers/base.py", line 126, in _render
        foods = (models.Food().order_by('-karma')
    AttributeError: 'module' object has no attribute 'Food'
[E 120723 08:30:45 web:1393] 500 GET /foods/hot (127.0.0.1) 8.01ms
[W 120723 08:30:45 web:1393] 404 GET /favicon.ico (127.0.0.1) 0.00ms
[I 120723 08:32:37 autoreload:133] /home/dk/work/python/safood/src/common/models/__init__.py modified; restarting server
[I 120723 08:36:14 web:1393] 304 GET / (127.0.0.1) 1480.83ms
[E 120723 08:36:17 web:1031] Uncaught exception GET /foods/hot (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/foods/hot', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.100', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cookie': '__utma=148685175.1070362998.1342935208.1342948559.1343001966.4; __utmb=148685175.8.10.1343001966; __utmc=148685175; __utmz=148685175.1342935208.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)', 'X-Real-Ip': '192.168.0.100', 'Referer': 'http://192.168.0.189/'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "src/sites/www/handlers/food.py", line 115, in get
        return self._render('hot')
      File "src/sites/www/handlers/base.py", line 161, in _render
        current_food = food,
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 474, in render
        html = self.render_string(template_name, **kwargs)
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 573, in render_string
        t = loader.load(template_name)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 323, in load
        self.templates[name] = self._create_template(name)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 353, in _create_template
        f = open(path, "r")
    IOError: [Errno 2] No such file or directory: '/home/dk/work/python/safood/src/sites/www/templates/foods.html'
[E 120723 08:36:17 web:1393] 500 GET /foods/hot (127.0.0.1) 64.04ms
[W 120723 08:36:17 web:1393] 404 GET /favicon.ico (127.0.0.1) 4.00ms
[I 120723 08:38:35 web:1393] 304 GET / (127.0.0.1) 1476.83ms
[E 120723 08:38:45 template:256] foods.html code:
      1  def _execute():  # base.html:0
      2      _buffer = []  # base.html:0
      3      _append = _buffer.append  # base.html:0
      4      _append('<!doctype html>\n<head>\n<meta charset="UTF-8" />\n<meta content="True" name="HandheldFriendly" />\n<meta content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0; name=\'viewport\'" />\n<title>\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - \xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81')  # base.html:6
      5      _append('</title>\n<link rel="stylesheet" type="text/css" media="screen" href="/static/css/vendor/jquery.fancybox.css" />\n<link rel="stylesheet" type="text/css" media="screen" href="/static/css/main.css" />\n<link rel="shortcut icon" href="/static/img/favicon.ico" />\n<link rel="canonical" href="http://wuditoo.com/" />\n<meta name="description" content="\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - \xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81" />\n<script src="/static/js/vendor/jquery.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.history.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.fancybox.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.scrollTo.min.js" type="text/javascript"></script>\n')  # base.html:16
      6      _append('\n<script type="text/javascript">\n')  # foods.html:13 (via base.html:16)
      7      if current_food:  # foods.html:13 (via base.html:16)
      8          _append('\nmeta_food = {\nurl: "/food/')  # foods.html:15 (via base.html:16)
      9          _tmp = current_food.id  # foods.html:15 (via base.html:16)
     10          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # foods.html:15 (via base.html:16)
     11          else: _tmp = _utf8(str(_tmp))  # foods.html:15 (via base.html:16)
     12          _tmp = _utf8(xhtml_escape(_tmp))  # foods.html:15 (via base.html:16)
     13          _append(_tmp)  # foods.html:15 (via base.html:16)
     14          _append('",\n}\n')  # foods.html:17 (via base.html:16)
     15      _append('\n</script>\n')  # foods.html:19 (via base.html:16)
     16      _append('\n<script src="/static/js/main.js" type="text/javascript"></script>\n</head>\n<!--[if IE 7 ]><body class="ie7"><![endif]-->\n<!--[if gt IE 7]><body class="ie"><![endif]-->\n<!--[if !IE]><body><![endif]-->\n<div id="header">\n<div class="inner">\n<div id="logo"><a href="/">\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</a></div>\n<div id="slogon">\xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81</div>\n<div id="witticism">')  # base.html:27
     17      _tmp = home_sentence()  # base.html:27
     18      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:27
     19      else: _tmp = _utf8(str(_tmp))  # base.html:27
     20      _tmp = _utf8(xhtml_escape(_tmp))  # base.html:27
     21      _append(_tmp)  # base.html:27
     22      _append('</div>\n<!--\n<ul class="nav-right">\n</ul>\n-->\n</div>\n</div>\n<div id="container">\n<div class="inner">\n<div class="message alert alert-warn">\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0\xe5\xad\x95\xe8\x82\xb2\xe4\xb8\xad\xef\xbc\x8c\xe6\x97\xb6\xe9\x97\xb4\xe5\xbe\x85\xe5\xae\x9a\xe3\x80\x82\xe8\xb0\xa2\xe8\xb0\xa2\xe6\x82\xa8\xe7\x9a\x84\xe5\x88\xb0\xe8\xae\xbf\xef\xbc\x9a\xef\xbc\x89</div>\n')  # base.html:38
     23      message = get_message()  # base.html:38
     24      _append('\n')  # base.html:39
     25      for message_type in ('error', 'success', 'info', 'warn'):  # base.html:39
     26          _append('\n')  # base.html:40
     27          if message and message_type == message[0]:  # base.html:40
     28              _append('\n<div id="')  # base.html:41
     29              _tmp = message_type  # base.html:41
     30              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     31              else: _tmp = _utf8(str(_tmp))  # base.html:41
     32              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     33              _append(_tmp)  # base.html:41
     34              _append('-message" class="message alert alert-')  # base.html:41
     35              _tmp = message_type  # base.html:41
     36              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     37              else: _tmp = _utf8(str(_tmp))  # base.html:41
     38              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     39              _append(_tmp)  # base.html:41
     40              _append('">')  # base.html:41
     41              _tmp = message[1]  # base.html:41
     42              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     43              else: _tmp = _utf8(str(_tmp))  # base.html:41
     44              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     45              _append(_tmp)  # base.html:41
     46              _append('</div>\n')  # base.html:42
     47          else:  # base.html:42
     48              _append('\n<div id="')  # base.html:43
     49              _tmp = message_type  # base.html:43
     50              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:43
     51              else: _tmp = _utf8(str(_tmp))  # base.html:43
     52              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:43
     53              _append(_tmp)  # base.html:43
     54              _append('-message" class="message alert alert-')  # base.html:43
     55              _tmp = message_type  # base.html:43
     56              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:43
     57              else: _tmp = _utf8(str(_tmp))  # base.html:43
     58              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:43
     59              _append(_tmp)  # base.html:43
     60              _append(' hide"></div>\n')  # base.html:44
     61          _append('\n')  # base.html:45
     62      _append('\n')  # base.html:47
     63      _append('\n<div id="main">\n')  # base.html:50
     64      _append('\n')  # foods.html:4 (via base.html:50)
     65      _append('<div class="box" id="foods">\n<div class="header">')  # partial/foods.html:2 (via foods.html:4, base.html:50)
     66      _tmp = foods_title  # partial/foods.html:2 (via foods.html:4, base.html:50)
     67      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/foods.html:2 (via foods.html:4, base.html:50)
     68      else: _tmp = _utf8(str(_tmp))  # partial/foods.html:2 (via foods.html:4, base.html:50)
     69      _tmp = _utf8(xhtml_escape(_tmp))  # partial/foods.html:2 (via foods.html:4, base.html:50)
     70      _append(_tmp)  # partial/foods.html:2 (via foods.html:4, base.html:50)
     71      _append('</div>\n<div class="body main ul">\n')  # partial/foods.html:4 (via foods.html:4, base.html:50)
     72      for index, food in enumerate(foods):  # partial/foods.html:4 (via foods.html:4, base.html:50)
     73          _append('\n')  # partial/foods.html:5 (via foods.html:4, base.html:50)
     74          creator = food.creator  # partial/foods.html:5 (via foods.html:4, base.html:50)
     75          _append('\n<div class="food-item">\n<div class="header">\n<a class="avatar" href="/food/')  # partial/foods.html:8 (via foods.html:4, base.html:50)
     76          _tmp = food.id  # partial/foods.html:8 (via foods.html:4, base.html:50)
     77          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/foods.html:8 (via foods.html:4, base.html:50)
     78          else: _tmp = _utf8(str(_tmp))  # partial/foods.html:8 (via foods.html:4, base.html:50)
     79          _tmp = _utf8(xhtml_escape(_tmp))  # partial/foods.html:8 (via foods.html:4, base.html:50)
     80          _append(_tmp)  # partial/foods.html:8 (via foods.html:4, base.html:50)
     81          _append('"><img src="')  # partial/foods.html:8 (via foods.html:4, base.html:50)
     82          _tmp = get_avatar_url(creator, 's')  # partial/foods.html:8 (via foods.html:4, base.html:50)
     83          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/foods.html:8 (via foods.html:4, base.html:50)
     84          else: _tmp = _utf8(str(_tmp))  # partial/foods.html:8 (via foods.html:4, base.html:50)
     85          _tmp = _utf8(xhtml_escape(_tmp))  # partial/foods.html:8 (via foods.html:4, base.html:50)
     86          _append(_tmp)  # partial/foods.html:8 (via foods.html:4, base.html:50)
     87          _append('" /> ')  # partial/foods.html:8 (via foods.html:4, base.html:50)
     88          _tmp = food.name  # partial/foods.html:8 (via foods.html:4, base.html:50)
     89          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/foods.html:8 (via foods.html:4, base.html:50)
     90          else: _tmp = _utf8(str(_tmp))  # partial/foods.html:8 (via foods.html:4, base.html:50)
     91          _tmp = _utf8(xhtml_escape(_tmp))  # partial/foods.html:8 (via foods.html:4, base.html:50)
     92          _append(_tmp)  # partial/foods.html:8 (via foods.html:4, base.html:50)
     93          _append('</a>\n</div>\n<div class="body">\n')  # partial/foods.html:11 (via foods.html:4, base.html:50)
     94          for index, food_part in enumerate(food_parts):  # partial/foods.html:11 (via foods.html:4, base.html:50)
     95              _append('\n<div class="food_part">')  # partial/foods.html:12 (via foods.html:4, base.html:50)
     96              _tmp = food_part.name  # partial/foods.html:12 (via foods.html:4, base.html:50)
     97              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/foods.html:12 (via foods.html:4, base.html:50)
     98              else: _tmp = _utf8(str(_tmp))  # partial/foods.html:12 (via foods.html:4, base.html:50)
     99              _tmp = _utf8(xhtml_escape(_tmp))  # partial/foods.html:12 (via foods.html:4, base.html:50)
    100              _append(_tmp)  # partial/foods.html:12 (via foods.html:4, base.html:50)
    101              _append('</div>\n')  # partial/foods.html:13 (via foods.html:4, base.html:50)
    102          _append('\n</div>\n<div class="footer">\n<span class="meta">\n<li><i class="icon-view"></i> ')  # partial/foods.html:18 (via foods.html:4, base.html:50)
    103          _tmp = food.views_count  # partial/foods.html:18 (via foods.html:4, base.html:50)
    104          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/foods.html:18 (via foods.html:4, base.html:50)
    105          else: _tmp = _utf8(str(_tmp))  # partial/foods.html:18 (via foods.html:4, base.html:50)
    106          _tmp = _utf8(xhtml_escape(_tmp))  # partial/foods.html:18 (via foods.html:4, base.html:50)
    107          _append(_tmp)  # partial/foods.html:18 (via foods.html:4, base.html:50)
    108          _append(' | Created:')  # partial/foods.html:18 (via foods.html:4, base.html:50)
    109          _tmp = timesince(food.created)  # partial/foods.html:18 (via foods.html:4, base.html:50)
    110          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/foods.html:18 (via foods.html:4, base.html:50)
    111          else: _tmp = _utf8(str(_tmp))  # partial/foods.html:18 (via foods.html:4, base.html:50)
    112          _tmp = _utf8(xhtml_escape(_tmp))  # partial/foods.html:18 (via foods.html:4, base.html:50)
    113          _append(_tmp)  # partial/foods.html:18 (via foods.html:4, base.html:50)
    114          _append('</li>\n</span>\n<span class="created">\n</span>\n</div>\n</div>\n')  # partial/foods.html:25 (via foods.html:4, base.html:50)
    115          _append('\n')  # partial/foods.html:26 (via foods.html:4, base.html:50)
    116          if index > 0 and (index + 1) % 3 == 0:  # partial/foods.html:26 (via foods.html:4, base.html:50)
    117              _append('\n<div class="clearfix"></div>\n')  # partial/foods.html:28 (via foods.html:4, base.html:50)
    118          _append('\n')  # partial/foods.html:30 (via foods.html:4, base.html:50)
    119      _append('\n')  # partial/foods.html:31 (via foods.html:4, base.html:50)
    120      page_type = 'foods'  # partial/foods.html:31 (via foods.html:4, base.html:50)
    121      _append('\n')  # partial/foods.html:32 (via foods.html:4, base.html:50)
    122      _append('\n')  # partial/pagination.html:3 (via partial/foods.html:32, foods.html:4, base.html:50)
    123      from macros.macro import ADDITIVES_PER_PAGE, USERS_PER_PAGE  # partial/pagination.html:3 (via partial/foods.html:32, foods.html:4, base.html:50)
    124      _append('\n')  # partial/pagination.html:4 (via partial/foods.html:32, foods.html:4, base.html:50)
    125      import math  # partial/pagination.html:4 (via partial/foods.html:32, foods.html:4, base.html:50)
    126      _append('\n')  # partial/pagination.html:6 (via partial/foods.html:32, foods.html:4, base.html:50)
    127      if page_type == 'additives':  # partial/pagination.html:6 (via partial/foods.html:32, foods.html:4, base.html:50)
    128          _append('\n')  # partial/pagination.html:7 (via partial/foods.html:32, foods.html:4, base.html:50)
    129          items_per_page = ADDITIVES_PER_PAGE  # partial/pagination.html:7 (via partial/foods.html:32, foods.html:4, base.html:50)
    130          _append('\n')  # partial/pagination.html:8 (via partial/foods.html:32, foods.html:4, base.html:50)
    131      else:  # partial/pagination.html:8 (via partial/foods.html:32, foods.html:4, base.html:50)
    132          _append('\n')  # partial/pagination.html:9 (via partial/foods.html:32, foods.html:4, base.html:50)
    133          items_per_page = USERS_PER_PAGE  # partial/pagination.html:9 (via partial/foods.html:32, foods.html:4, base.html:50)
    134          _append('\n')  # partial/pagination.html:10 (via partial/foods.html:32, foods.html:4, base.html:50)
    135      _append('\n')  # partial/pagination.html:12 (via partial/foods.html:32, foods.html:4, base.html:50)
    136      total_page = int(math.ceil(float(total_items) / items_per_page))  # partial/pagination.html:12 (via partial/foods.html:32, foods.html:4, base.html:50)
    137      _append('\n')  # partial/pagination.html:14 (via partial/foods.html:32, foods.html:4, base.html:50)
    138      current_page = int(handler.get_argument('page', 1))  # partial/pagination.html:14 (via partial/foods.html:32, foods.html:4, base.html:50)
    139      _append('\n')  # partial/pagination.html:16 (via partial/foods.html:32, foods.html:4, base.html:50)
    140      if current_page <=6:  # partial/pagination.html:16 (via partial/foods.html:32, foods.html:4, base.html:50)
    141          _append('\n')  # partial/pagination.html:17 (via partial/foods.html:32, foods.html:4, base.html:50)
    142          end_page = min(total_page, 10)  # partial/pagination.html:17 (via partial/foods.html:32, foods.html:4, base.html:50)
    143          _append('\n')  # partial/pagination.html:18 (via partial/foods.html:32, foods.html:4, base.html:50)
    144          start_page = 1  # partial/pagination.html:18 (via partial/foods.html:32, foods.html:4, base.html:50)
    145          _append('\n')  # partial/pagination.html:19 (via partial/foods.html:32, foods.html:4, base.html:50)
    146      else:  # partial/pagination.html:19 (via partial/foods.html:32, foods.html:4, base.html:50)
    147          _append('\n')  # partial/pagination.html:20 (via partial/foods.html:32, foods.html:4, base.html:50)
    148          end_page = min(total_page, current_page+4)  # partial/pagination.html:20 (via partial/foods.html:32, foods.html:4, base.html:50)
    149          _append('\n')  # partial/pagination.html:21 (via partial/foods.html:32, foods.html:4, base.html:50)
    150          start_page = current_page - 5  # partial/pagination.html:21 (via partial/foods.html:32, foods.html:4, base.html:50)
    151          _append('\n')  # partial/pagination.html:22 (via partial/foods.html:32, foods.html:4, base.html:50)
    152      _append('\n')  # partial/pagination.html:24 (via partial/foods.html:32, foods.html:4, base.html:50)
    153      if total_page > 1:  # partial/pagination.html:24 (via partial/foods.html:32, foods.html:4, base.html:50)
    154          _append('\n<div class="pagination">\n<ul>\n')  # partial/pagination.html:27 (via partial/foods.html:32, foods.html:4, base.html:50)
    155          if current_page == 1:  # partial/pagination.html:27 (via partial/foods.html:32, foods.html:4, base.html:50)
    156              _append('\n<li class="disabled">\xe2\x86\x90 </li>\n')  # partial/pagination.html:29 (via partial/foods.html:32, foods.html:4, base.html:50)
    157          else:  # partial/pagination.html:29 (via partial/foods.html:32, foods.html:4, base.html:50)
    158              _append('\n<li><a href="')  # partial/pagination.html:30 (via partial/foods.html:32, foods.html:4, base.html:50)
    159              _tmp = page_path  # partial/pagination.html:30 (via partial/foods.html:32, foods.html:4, base.html:50)
    160              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:30 (via partial/foods.html:32, foods.html:4, base.html:50)
    161              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:30 (via partial/foods.html:32, foods.html:4, base.html:50)
    162              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:30 (via partial/foods.html:32, foods.html:4, base.html:50)
    163              _append(_tmp)  # partial/pagination.html:30 (via partial/foods.html:32, foods.html:4, base.html:50)
    164              _append('?page=1">\xe2\x86\x90 </a></li>\n')  # partial/pagination.html:31 (via partial/foods.html:32, foods.html:4, base.html:50)
    165          _append('\n')  # partial/pagination.html:33 (via partial/foods.html:32, foods.html:4, base.html:50)
    166          for i in range(start_page, end_page + 1):  # partial/pagination.html:33 (via partial/foods.html:32, foods.html:4, base.html:50)
    167              _append('\n<li ')  # partial/pagination.html:34 (via partial/foods.html:32, foods.html:4, base.html:50)
    168              if current_page == i:  # partial/pagination.html:34 (via partial/foods.html:32, foods.html:4, base.html:50)
    169                  _append('class="active"')  # partial/pagination.html:34 (via partial/foods.html:32, foods.html:4, base.html:50)
    170              _append('>\n<a href="')  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    171              _tmp = page_path  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    172              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    173              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    174              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    175              _append(_tmp)  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    176              _append('?page=')  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    177              _tmp = i  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    178              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    179              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    180              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    181              _append(_tmp)  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    182              _append('">')  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    183              _tmp = i  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    184              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    185              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    186              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    187              _append(_tmp)  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    188              _append('</a>\n</li>\n')  # partial/pagination.html:37 (via partial/foods.html:32, foods.html:4, base.html:50)
    189          _append('\n')  # partial/pagination.html:39 (via partial/foods.html:32, foods.html:4, base.html:50)
    190          if current_page == total_page:  # partial/pagination.html:39 (via partial/foods.html:32, foods.html:4, base.html:50)
    191              _append('\n<li class="disabled">\xe2\x86\x92 </li>\n')  # partial/pagination.html:41 (via partial/foods.html:32, foods.html:4, base.html:50)
    192          else:  # partial/pagination.html:41 (via partial/foods.html:32, foods.html:4, base.html:50)
    193              _append('\n<li><a href="')  # partial/pagination.html:42 (via partial/foods.html:32, foods.html:4, base.html:50)
    194              _tmp = page_path  # partial/pagination.html:42 (via partial/foods.html:32, foods.html:4, base.html:50)
    195              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:42 (via partial/foods.html:32, foods.html:4, base.html:50)
    196              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:42 (via partial/foods.html:32, foods.html:4, base.html:50)
    197              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:42 (via partial/foods.html:32, foods.html:4, base.html:50)
    198              _append(_tmp)  # partial/pagination.html:42 (via partial/foods.html:32, foods.html:4, base.html:50)
    199              _append('?page=')  # partial/pagination.html:42 (via partial/foods.html:32, foods.html:4, base.html:50)
    200              _tmp = current_page+1  # partial/pagination.html:42 (via partial/foods.html:32, foods.html:4, base.html:50)
    201              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:42 (via partial/foods.html:32, foods.html:4, base.html:50)
    202              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:42 (via partial/foods.html:32, foods.html:4, base.html:50)
    203              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:42 (via partial/foods.html:32, foods.html:4, base.html:50)
    204              _append(_tmp)  # partial/pagination.html:42 (via partial/foods.html:32, foods.html:4, base.html:50)
    205              _append('">\xe2\x86\x92 </a></li>\n')  # partial/pagination.html:43 (via partial/foods.html:32, foods.html:4, base.html:50)
    206          _append('\n</ul>\n</div>\n')  # partial/pagination.html:46 (via partial/foods.html:32, foods.html:4, base.html:50)
    207      _append('\n')  # partial/pagination.html:47 (via partial/foods.html:32, foods.html:4, base.html:50)
    208      _append('\n</div>\n</div>\n')  # partial/foods.html:35 (via foods.html:4, base.html:50)
    209      _append('\n')  # foods.html:5 (via base.html:50)
    210      _append('\n</div>\n<div id="sidebar">\n')  # base.html:54
    211      _append('\n')  # foods.html:8 (via base.html:54)
    212      if current_user:  # partial/sidebar_global.html:1 (via foods.html:8, base.html:54)
    213          _append('\n')  # partial/sidebar_global.html:2 (via foods.html:8, base.html:54)
    214          _append('<div class="upload item ')  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    215          if not current_user.left_upload_count:  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    216              _append('disabled')  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    217          _append('" data-url="/photo/upload" data-title="\xe9\x87\x87\xe9\x9b\x86\xe7\x85\xa7\xe7\x89\x87" >\n<div class="left"></div>\n<div class="center">\n')  # partial/sidebar_upload.html:5 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    218          if current_user.left_upload_count:  # partial/sidebar_upload.html:5 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    219              _append('\n\xe9\x87\x87\xe9\x9b\x86\xe7\x85\xa7\xe7\x89\x87(\xe6\x9c\xac\xe5\x91\xa8\xe8\xbf\x98\xe5\x89\xa9')  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    220              _tmp = current_user.left_upload_count  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    221              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    222              else: _tmp = _utf8(str(_tmp))  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    223              _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    224              _append(_tmp)  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    225              _append('\xe5\xbc\xa0)\n')  # partial/sidebar_upload.html:7 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    226          else:  # partial/sidebar_upload.html:7 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    227              _append('\n\xe6\x9c\xac\xe5\x91\xa8\xe7\x9a\x84\xe9\x87\x87\xe9\x9b\x86\xe4\xbd\x99\xe9\xa2\x9d\xe5\xb7\xb2\xe7\x94\xa8\xe5\xae\x8c\xe4\xba\x86\n')  # partial/sidebar_upload.html:9 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    228          _append('\n</div>\n<div class="right"></div>\n</div>\n')  # partial/sidebar_upload.html:13 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    229          _append('\n')  # partial/sidebar_global.html:3 (via foods.html:8, base.html:54)
    230          _append('<div class="box" id="panel-me">\n<div class="header"><a class="right" href="/logout">\xe7\x99\xbb\xe5\x87\xba</a>\xe6\x88\x91\xe7\x9a\x84\xe4\xbf\xa1\xe6\x81\xaf</div>\n<div class="body">\n<div class="me">\n<a class="settings item" href="/settings" data-title="\xe8\xae\xbe\xe7\xbd\xae" data-url="/settings">\xe8\xae\xbe\xe7\xbd\xae</a>\n<a href="/user/')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    231          _tmp = current_user.username  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    232          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    233          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    234          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    235          _append(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    236          _append('"><img class="avatar" src="')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    237          _tmp = get_avatar_url(current_user, 's')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    238          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    239          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    240          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    241          _append(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    242          _append('" /></a>\n<a href="/user/')  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    243          _tmp = current_user.username  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    244          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    245          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    246          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    247          _append(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    248          _append('">')  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    249          _tmp = current_user.fullname  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    250          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    251          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    252          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    253          _append(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    254          _append('</a>\n<i class="level icon-level')  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    255          _tmp = current_user.level  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    256          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    257          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    258          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    259          _append(_tmp)  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    260          _append('"></i>\n</div>\n<div class="follow">\n<div class="following item" data-title="\xe6\x88\x91\xe5\x85\xb3\xe6\xb3\xa8\xe7\x9a\x84\xe4\xba\xba" data-url="/mine/following">\n<h3 class="anchor">')  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    261          _tmp = current_user.following_count  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    262          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    263          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    264          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    265          _append(_tmp)  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    266          _append('</h3>\n<span>following</span>\n</div>\n<div class="follower item" data-title="\xe5\x85\xb3\xe6\xb3\xa8\xe6\x88\x91\xe7\x9a\x84\xe4\xba\xba" data-url="/mine/follower">\n<h3 class="anchor">')  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    267          _tmp = current_user.follower_count  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    268          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    269          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    270          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    271          _append(_tmp)  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    272          _append('</h3>\n<span>followers</span>\n</div>\n</div>\n<ul>\n<li class="item" data-url="/mine/invite" data-title="\xe9\x82\x80\xe8\xaf\xb7\xe6\x9c\x8b\xe5\x8f\x8b\xe5\x8a\xa0\xe5\x85\xa5"> <span class="num">')  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    273          _tmp = current_user.unused_invite_key_count  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    274          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    275          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    276          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    277          _append(_tmp)  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    278          _append('</span><span class="anchor">\xe9\x82\x80\xe8\xaf\xb7\xe6\x9c\x8b\xe5\x8f\x8b\xe5\x8a\xa0\xe5\x85\xa5</span></li>\n<li class="item" data-title="\xe6\x88\x91\xe6\xb7\xbb\xe5\x8a\xa0\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87" data-url="/mine/photos"> <span class="num">')  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    279          _tmp = current_user.photo_count  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    280          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    281          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    282          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    283          _append(_tmp)  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    284          _append('</span><span class="anchor">\xe6\x88\x91\xe6\xb7\xbb\xe5\x8a\xa0\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87</span></li>\n<li class="item" data-title="\xe6\x88\x91\xe5\x96\x9c\xe6\xac\xa2\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87" data-url="/mine/likes_photos"><span class="num">')  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    285          _tmp = current_user.likes_count  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    286          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    287          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    288          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    289          _append(_tmp)  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    290          _append('</span><span class="anchor">\xe6\x88\x91\xe5\x96\x9c\xe6\xac\xa2\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87</span> </li>\n</ul>\n</div>\n</div>\n')  # partial/sidebar_me.html:27 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    291          _append('\n')  # partial/sidebar_global.html:4 (via foods.html:8, base.html:54)
    292      else:  # partial/sidebar_global.html:4 (via foods.html:8, base.html:54)
    293          _append('\n')  # partial/sidebar_global.html:5 (via foods.html:8, base.html:54)
    294          _append('<div class="box" id="panel-about">\n<div class="header">\xe5\x85\xb3\xe4\xba\x8e\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</div>\n<div class="body">\n<p>\xe5\x85\xb3\xe6\xb3\xa8\xe9\xa3\x9f\xe5\x93\x81\xe5\xae\x89\xe5\x85\xa8\xef\xbc\x8c\xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe4\xb8\x96\xe7\x95\x8c</p>\n<p>\xe6\x89\x80\xe6\x9c\x89\xe9\xa3\x9f\xe5\x93\x81\xe5\x92\x8c\xe6\xb7\xbb\xe5\x8a\xa0\xe5\x89\x82\xe8\xb5\x84\xe6\x96\x99\xe6\x9d\xa5\xe8\x87\xaa\xe4\xba\x8eiearth-\xe7\x88\xb1\xe5\x9c\xb0\xe7\x90\x83\xe7\x8e\xaf\xe4\xbf\x9d\xe6\x9c\xba\xe6\x9e\x84</p>\n</div>\n</div>\n')  # partial/sidebar_about.html:8 (via partial/sidebar_global.html:5, foods.html:8, base.html:54)
    295          _append('\n')  # partial/sidebar_global.html:6 (via foods.html:8, base.html:54)
    296          _append('<div class="box" id="panel-login">\n<div class="header">\xe7\x99\xbb\xe5\x85\xa5\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</div>\n<div class="body">\n<form action="/login" method="POST">\n<div class="section">\n<input type="TEXT" name="username" placeholder="\xe7\x94\xa8\xe6\x88\xb7\xe5\x90\x8d/Email" />\n</div>\n<div class="section">\n<input type="PASSWORD" name="password" placeholder="\xe5\xaf\x86\xe7\xa0\x81" />\n</div>\n<div class="section">\n<input type="SUBMIT" value="\xe7\x99\xbb\xe5\x85\xa5" class="btn primary-btn" />\n<span class="tip">\xe4\xbc\x9a\xe8\xae\xb0\xe4\xbd\x8f\xe7\x99\xbb\xe5\x85\xa5\xe4\xb8\x80\xe4\xb8\xaa\xe6\x9c\x88</span>\n</div>\n</form>\n<div class="alert alert-info">\xe5\x86\x85\xe6\xb5\x8b\xe4\xb8\xad\xef\xbc\x8c\xe5\x8f\xaa\xe6\x8e\xa5\xe5\x8f\x97\xe9\x82\x80\xe8\xaf\xb7\xe6\xb3\xa8\xe5\x86\x8c</div>\n</div>\n</div>\n')  # partial/sidebar_login.html:19 (via partial/sidebar_global.html:6, foods.html:8, base.html:54)
    297          _append('\n')  # partial/sidebar_global.html:8 (via foods.html:8, base.html:54)
    298      _append('\n')  # partial/sidebar_global.html:10 (via foods.html:8, base.html:54)
    299      _append('<div class="box">\n<div class="header">\xe6\xb5\x8f\xe8\xa7\x88\xe9\xa3\x9f\xe5\x93\x81</div>\n<div class="body">\n<ul>\n<a href="/foods/hot">\n<li data-title="\xe7\x83\xad\xe9\x97\xa8\xe9\xa3\x9f\xe5\x93\x81"><span class="anchor">\xe7\x83\xad\xe9\x97\xa8\xe9\xa3\x9f\xe5\x93\x81</span></li>\n</a>\n<a href="/foods/latest">\n<li data-title="\xe6\x9c\x80\xe6\x96\xb0\xe9\xa3\x9f\xe5\x93\x81"><span class="anchor">\xe6\x9c\x80\xe6\x96\xb0\xe9\xa3\x9f\xe5\x93\x81</span></li>\n</a>\n</ul>\n</div>\n</div>\n')  # partial/sidebar_food_nav.html:15 (via partial/sidebar_global.html:10, foods.html:8, base.html:54)
    300      _append('\n')  # partial/sidebar_global.html:11 (via foods.html:8, base.html:54)
    301      import models  # partial/sidebar_hot_searchs.html:1 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    302      _append('\n')  # partial/sidebar_hot_searchs.html:2 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    303      hot_searchs = models.Additive_Search().hot_searchs  # partial/sidebar_hot_searchs.html:2 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    304      _append('\n<div class="box" id="panel-searchs">\n<div class="header">\xe7\x83\xad\xe9\x97\xa8\xe6\x90\x9c\xe7\xb4\xa2</div>\n<div class="body">\n<ul>\n')  # partial/sidebar_hot_searchs.html:8 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    305      for search in hot_searchs:  # partial/sidebar_hot_searchs.html:8 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    306          _append('\n<!--\n<a class="avatar" href="/additive/')  # partial/sidebar_hot_searchs.html:10 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    307          _tmp = search[1]  # partial/sidebar_hot_searchs.html:10 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    308          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_hot_searchs.html:10 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    309          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_hot_searchs.html:10 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    310          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_hot_searchs.html:10 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    311          _append(_tmp)  # partial/sidebar_hot_searchs.html:10 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    312          _append('">\n-->\n<a class="avatar" href="/additive/')  # partial/sidebar_hot_searchs.html:12 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    313          _tmp = search[1]  # partial/sidebar_hot_searchs.html:12 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    314          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_hot_searchs.html:12 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    315          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_hot_searchs.html:12 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    316          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_hot_searchs.html:12 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    317          _append(_tmp)  # partial/sidebar_hot_searchs.html:12 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    318          _append('">\n<li>\n')  # partial/sidebar_hot_searchs.html:14 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    319          _tmp = search[0]  # partial/sidebar_hot_searchs.html:14 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    320          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_hot_searchs.html:14 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    321          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_hot_searchs.html:14 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    322          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_hot_searchs.html:14 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    323          _append(_tmp)  # partial/sidebar_hot_searchs.html:14 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    324          _append('\n</li>\n<!--\n<li class="item">\n<span class="anchor">')  # partial/sidebar_hot_searchs.html:18 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    325          _tmp = search[0]  # partial/sidebar_hot_searchs.html:18 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    326          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_hot_searchs.html:18 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    327          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_hot_searchs.html:18 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    328          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_hot_searchs.html:18 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    329          _append(_tmp)  # partial/sidebar_hot_searchs.html:18 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    330          _append('</span>\n</li>\n-->\n</a>\n')  # partial/sidebar_hot_searchs.html:22 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    331      _append('\n</ul>\n</div>\n</div>\n')  # partial/sidebar_hot_searchs.html:26 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    332      _append('\n')  # partial/sidebar_global.html:12 (via foods.html:8, base.html:54)
    333      _append('\n')  # foods.html:9 (via base.html:54)
    334      _append('\n</div>\n</div>\n</div>\n<div id="footer">\n<div class="inner">\n<div class="right">\n<span class="belief">make the world a little better and easier</span>\n</div>\n<div class="left">\n<ul>\n<li><a href="/about">\xe5\x85\xb3\xe4\xba\x8e</a> <!--<span class="divider">/</span>--></li>\n<!--<li><a href="/feedback">\xe5\x8f\x8d\xe9\xa6\x88</a> <span class="divider">/</span></li>-->\n<!--<li><a href="/blog">\xe6\x97\xa5\xe5\xbf\x97</a></li>-->\n</ul>\n</div>\n</div>\n</div>\n<script type="text/javascript">\nvar _gaq = _gaq || [];\n_gaq.push([\'_setAccount\', \'UA-1281124-23\']);\n_gaq.push([\'_trackPageview\']);\n(function() {\nvar ga = document.createElement(\'script\'); ga.type = \'text/javascript\'; ga.async = true;\nga.src = (\'https:\' == document.location.protocol ? \'https://ssl\' : \'http://www\') + \'.google-analytics.com/ga.js\';\nvar s = document.getElementsByTagName(\'script\')[0]; s.parentNode.insertBefore(ga, s);\n})();\n</script>\n<!-- love your mom! -->\n</body>\n<meta name="description" content="\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - " />\n')  # base.html:89
    335      return _utf8('').join(_buffer)  # base.html:0
[E 120723 08:38:45 web:1031] Uncaught exception GET /foods/hot (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/foods/hot', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.100', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cookie': '__utma=148685175.1070362998.1342935208.1342948559.1343001966.4; __utmb=148685175.10.10.1343001966; __utmc=148685175; __utmz=148685175.1342935208.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)', 'X-Real-Ip': '192.168.0.100', 'Referer': 'http://192.168.0.189/'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "src/sites/www/handlers/food.py", line 115, in get
        return self._render('hot')
      File "src/sites/www/handlers/base.py", line 161, in _render
        current_food = food,
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 474, in render
        html = self.render_string(template_name, **kwargs)
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 586, in render_string
        return t.generate(**args)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 253, in generate
        return execute()
      File "foods_html.generated.py", line 94, in _execute
        for index, food_part in enumerate(food_parts):  # partial/foods.html:11 (via foods.html:4, base.html:50)
    NameError: global name 'food_parts' is not defined
[E 120723 08:38:45 web:1393] 500 GET /foods/hot (127.0.0.1) 528.30ms
[W 120723 08:38:45 web:1393] 404 GET /favicon.ico (127.0.0.1) 4.00ms
[I 120723 08:39:44 autoreload:133] src/sites/www/handlers/food.py modified; restarting server
[E 120723 08:39:54 template:256] foods.html code:
      1  def _execute():  # base.html:0
      2      _buffer = []  # base.html:0
      3      _append = _buffer.append  # base.html:0
      4      _append('<!doctype html>\n<head>\n<meta charset="UTF-8" />\n<meta content="True" name="HandheldFriendly" />\n<meta content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0; name=\'viewport\'" />\n<title>\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - \xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81')  # base.html:6
      5      _append('</title>\n<link rel="stylesheet" type="text/css" media="screen" href="/static/css/vendor/jquery.fancybox.css" />\n<link rel="stylesheet" type="text/css" media="screen" href="/static/css/main.css" />\n<link rel="shortcut icon" href="/static/img/favicon.ico" />\n<link rel="canonical" href="http://wuditoo.com/" />\n<meta name="description" content="\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - \xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81" />\n<script src="/static/js/vendor/jquery.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.history.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.fancybox.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.scrollTo.min.js" type="text/javascript"></script>\n')  # base.html:16
      6      _append('\n<script type="text/javascript">\n')  # foods.html:13 (via base.html:16)
      7      if current_food:  # foods.html:13 (via base.html:16)
      8          _append('\nmeta_food = {\nurl: "/food/')  # foods.html:15 (via base.html:16)
      9          _tmp = current_food.id  # foods.html:15 (via base.html:16)
     10          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # foods.html:15 (via base.html:16)
     11          else: _tmp = _utf8(str(_tmp))  # foods.html:15 (via base.html:16)
     12          _tmp = _utf8(xhtml_escape(_tmp))  # foods.html:15 (via base.html:16)
     13          _append(_tmp)  # foods.html:15 (via base.html:16)
     14          _append('",\n}\n')  # foods.html:17 (via base.html:16)
     15      _append('\n</script>\n')  # foods.html:19 (via base.html:16)
     16      _append('\n<script src="/static/js/main.js" type="text/javascript"></script>\n</head>\n<!--[if IE 7 ]><body class="ie7"><![endif]-->\n<!--[if gt IE 7]><body class="ie"><![endif]-->\n<!--[if !IE]><body><![endif]-->\n<div id="header">\n<div class="inner">\n<div id="logo"><a href="/">\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</a></div>\n<div id="slogon">\xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81</div>\n<div id="witticism">')  # base.html:27
     17      _tmp = home_sentence()  # base.html:27
     18      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:27
     19      else: _tmp = _utf8(str(_tmp))  # base.html:27
     20      _tmp = _utf8(xhtml_escape(_tmp))  # base.html:27
     21      _append(_tmp)  # base.html:27
     22      _append('</div>\n<!--\n<ul class="nav-right">\n</ul>\n-->\n</div>\n</div>\n<div id="container">\n<div class="inner">\n<div class="message alert alert-warn">\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0\xe5\xad\x95\xe8\x82\xb2\xe4\xb8\xad\xef\xbc\x8c\xe6\x97\xb6\xe9\x97\xb4\xe5\xbe\x85\xe5\xae\x9a\xe3\x80\x82\xe8\xb0\xa2\xe8\xb0\xa2\xe6\x82\xa8\xe7\x9a\x84\xe5\x88\xb0\xe8\xae\xbf\xef\xbc\x9a\xef\xbc\x89</div>\n')  # base.html:38
     23      message = get_message()  # base.html:38
     24      _append('\n')  # base.html:39
     25      for message_type in ('error', 'success', 'info', 'warn'):  # base.html:39
     26          _append('\n')  # base.html:40
     27          if message and message_type == message[0]:  # base.html:40
     28              _append('\n<div id="')  # base.html:41
     29              _tmp = message_type  # base.html:41
     30              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     31              else: _tmp = _utf8(str(_tmp))  # base.html:41
     32              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     33              _append(_tmp)  # base.html:41
     34              _append('-message" class="message alert alert-')  # base.html:41
     35              _tmp = message_type  # base.html:41
     36              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     37              else: _tmp = _utf8(str(_tmp))  # base.html:41
     38              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     39              _append(_tmp)  # base.html:41
     40              _append('">')  # base.html:41
     41              _tmp = message[1]  # base.html:41
     42              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     43              else: _tmp = _utf8(str(_tmp))  # base.html:41
     44              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     45              _append(_tmp)  # base.html:41
     46              _append('</div>\n')  # base.html:42
     47          else:  # base.html:42
     48              _append('\n<div id="')  # base.html:43
     49              _tmp = message_type  # base.html:43
     50              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:43
     51              else: _tmp = _utf8(str(_tmp))  # base.html:43
     52              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:43
     53              _append(_tmp)  # base.html:43
     54              _append('-message" class="message alert alert-')  # base.html:43
     55              _tmp = message_type  # base.html:43
     56              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:43
     57              else: _tmp = _utf8(str(_tmp))  # base.html:43
     58              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:43
     59              _append(_tmp)  # base.html:43
     60              _append(' hide"></div>\n')  # base.html:44
     61          _append('\n')  # base.html:45
     62      _append('\n')  # base.html:47
     63      _append('\n<div id="main">\n')  # base.html:50
     64      _append('\n')  # foods.html:4 (via base.html:50)
     65      _append('<div class="box" id="foods">\n<div class="header">')  # partial/foods.html:2 (via foods.html:4, base.html:50)
     66      _tmp = foods_title  # partial/foods.html:2 (via foods.html:4, base.html:50)
     67      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/foods.html:2 (via foods.html:4, base.html:50)
     68      else: _tmp = _utf8(str(_tmp))  # partial/foods.html:2 (via foods.html:4, base.html:50)
     69      _tmp = _utf8(xhtml_escape(_tmp))  # partial/foods.html:2 (via foods.html:4, base.html:50)
     70      _append(_tmp)  # partial/foods.html:2 (via foods.html:4, base.html:50)
     71      _append('</div>\n<div class="body main ul">\n')  # partial/foods.html:4 (via foods.html:4, base.html:50)
     72      for index, food in enumerate(foods):  # partial/foods.html:4 (via foods.html:4, base.html:50)
     73          _append('\n')  # partial/foods.html:5 (via foods.html:4, base.html:50)
     74          creator = food.creator  # partial/foods.html:5 (via foods.html:4, base.html:50)
     75          _append('\n<div class="food-item">\n<div class="header">\n<a class="avatar" href="/food/')  # partial/foods.html:8 (via foods.html:4, base.html:50)
     76          _tmp = food.id  # partial/foods.html:8 (via foods.html:4, base.html:50)
     77          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/foods.html:8 (via foods.html:4, base.html:50)
     78          else: _tmp = _utf8(str(_tmp))  # partial/foods.html:8 (via foods.html:4, base.html:50)
     79          _tmp = _utf8(xhtml_escape(_tmp))  # partial/foods.html:8 (via foods.html:4, base.html:50)
     80          _append(_tmp)  # partial/foods.html:8 (via foods.html:4, base.html:50)
     81          _append('"><img src="')  # partial/foods.html:8 (via foods.html:4, base.html:50)
     82          _tmp = get_avatar_url(creator, 's')  # partial/foods.html:8 (via foods.html:4, base.html:50)
     83          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/foods.html:8 (via foods.html:4, base.html:50)
     84          else: _tmp = _utf8(str(_tmp))  # partial/foods.html:8 (via foods.html:4, base.html:50)
     85          _tmp = _utf8(xhtml_escape(_tmp))  # partial/foods.html:8 (via foods.html:4, base.html:50)
     86          _append(_tmp)  # partial/foods.html:8 (via foods.html:4, base.html:50)
     87          _append('" /> ')  # partial/foods.html:8 (via foods.html:4, base.html:50)
     88          _tmp = food.name  # partial/foods.html:8 (via foods.html:4, base.html:50)
     89          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/foods.html:8 (via foods.html:4, base.html:50)
     90          else: _tmp = _utf8(str(_tmp))  # partial/foods.html:8 (via foods.html:4, base.html:50)
     91          _tmp = _utf8(xhtml_escape(_tmp))  # partial/foods.html:8 (via foods.html:4, base.html:50)
     92          _append(_tmp)  # partial/foods.html:8 (via foods.html:4, base.html:50)
     93          _append('</a>\n</div>\n<div class="body">\n')  # partial/foods.html:11 (via foods.html:4, base.html:50)
     94          for index, food_part in enumerate(food_parts):  # partial/foods.html:11 (via foods.html:4, base.html:50)
     95              _append('\n<div class="food_part">')  # partial/foods.html:12 (via foods.html:4, base.html:50)
     96              _tmp = food_part.name  # partial/foods.html:12 (via foods.html:4, base.html:50)
     97              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/foods.html:12 (via foods.html:4, base.html:50)
     98              else: _tmp = _utf8(str(_tmp))  # partial/foods.html:12 (via foods.html:4, base.html:50)
     99              _tmp = _utf8(xhtml_escape(_tmp))  # partial/foods.html:12 (via foods.html:4, base.html:50)
    100              _append(_tmp)  # partial/foods.html:12 (via foods.html:4, base.html:50)
    101              _append('</div>\n')  # partial/foods.html:13 (via foods.html:4, base.html:50)
    102          _append('\n</div>\n<div class="footer">\n<span class="meta">\n<li><i class="icon-view"></i> ')  # partial/foods.html:18 (via foods.html:4, base.html:50)
    103          _tmp = food.views_count  # partial/foods.html:18 (via foods.html:4, base.html:50)
    104          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/foods.html:18 (via foods.html:4, base.html:50)
    105          else: _tmp = _utf8(str(_tmp))  # partial/foods.html:18 (via foods.html:4, base.html:50)
    106          _tmp = _utf8(xhtml_escape(_tmp))  # partial/foods.html:18 (via foods.html:4, base.html:50)
    107          _append(_tmp)  # partial/foods.html:18 (via foods.html:4, base.html:50)
    108          _append(' | Created:')  # partial/foods.html:18 (via foods.html:4, base.html:50)
    109          _tmp = timesince(food.created)  # partial/foods.html:18 (via foods.html:4, base.html:50)
    110          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/foods.html:18 (via foods.html:4, base.html:50)
    111          else: _tmp = _utf8(str(_tmp))  # partial/foods.html:18 (via foods.html:4, base.html:50)
    112          _tmp = _utf8(xhtml_escape(_tmp))  # partial/foods.html:18 (via foods.html:4, base.html:50)
    113          _append(_tmp)  # partial/foods.html:18 (via foods.html:4, base.html:50)
    114          _append('</li>\n</span>\n<span class="created">\n</span>\n</div>\n</div>\n')  # partial/foods.html:25 (via foods.html:4, base.html:50)
    115          _append('\n')  # partial/foods.html:26 (via foods.html:4, base.html:50)
    116          if index > 0 and (index + 1) % 3 == 0:  # partial/foods.html:26 (via foods.html:4, base.html:50)
    117              _append('\n<div class="clearfix"></div>\n')  # partial/foods.html:28 (via foods.html:4, base.html:50)
    118          _append('\n')  # partial/foods.html:30 (via foods.html:4, base.html:50)
    119      _append('\n')  # partial/foods.html:31 (via foods.html:4, base.html:50)
    120      page_type = 'foods'  # partial/foods.html:31 (via foods.html:4, base.html:50)
    121      _append('\n')  # partial/foods.html:32 (via foods.html:4, base.html:50)
    122      _append('\n')  # partial/pagination.html:3 (via partial/foods.html:32, foods.html:4, base.html:50)
    123      from macros.macro import ADDITIVES_PER_PAGE, USERS_PER_PAGE  # partial/pagination.html:3 (via partial/foods.html:32, foods.html:4, base.html:50)
    124      _append('\n')  # partial/pagination.html:4 (via partial/foods.html:32, foods.html:4, base.html:50)
    125      import math  # partial/pagination.html:4 (via partial/foods.html:32, foods.html:4, base.html:50)
    126      _append('\n')  # partial/pagination.html:6 (via partial/foods.html:32, foods.html:4, base.html:50)
    127      if page_type == 'additives':  # partial/pagination.html:6 (via partial/foods.html:32, foods.html:4, base.html:50)
    128          _append('\n')  # partial/pagination.html:7 (via partial/foods.html:32, foods.html:4, base.html:50)
    129          items_per_page = ADDITIVES_PER_PAGE  # partial/pagination.html:7 (via partial/foods.html:32, foods.html:4, base.html:50)
    130          _append('\n')  # partial/pagination.html:8 (via partial/foods.html:32, foods.html:4, base.html:50)
    131      else:  # partial/pagination.html:8 (via partial/foods.html:32, foods.html:4, base.html:50)
    132          _append('\n')  # partial/pagination.html:9 (via partial/foods.html:32, foods.html:4, base.html:50)
    133          items_per_page = USERS_PER_PAGE  # partial/pagination.html:9 (via partial/foods.html:32, foods.html:4, base.html:50)
    134          _append('\n')  # partial/pagination.html:10 (via partial/foods.html:32, foods.html:4, base.html:50)
    135      _append('\n')  # partial/pagination.html:12 (via partial/foods.html:32, foods.html:4, base.html:50)
    136      total_page = int(math.ceil(float(total_items) / items_per_page))  # partial/pagination.html:12 (via partial/foods.html:32, foods.html:4, base.html:50)
    137      _append('\n')  # partial/pagination.html:14 (via partial/foods.html:32, foods.html:4, base.html:50)
    138      current_page = int(handler.get_argument('page', 1))  # partial/pagination.html:14 (via partial/foods.html:32, foods.html:4, base.html:50)
    139      _append('\n')  # partial/pagination.html:16 (via partial/foods.html:32, foods.html:4, base.html:50)
    140      if current_page <=6:  # partial/pagination.html:16 (via partial/foods.html:32, foods.html:4, base.html:50)
    141          _append('\n')  # partial/pagination.html:17 (via partial/foods.html:32, foods.html:4, base.html:50)
    142          end_page = min(total_page, 10)  # partial/pagination.html:17 (via partial/foods.html:32, foods.html:4, base.html:50)
    143          _append('\n')  # partial/pagination.html:18 (via partial/foods.html:32, foods.html:4, base.html:50)
    144          start_page = 1  # partial/pagination.html:18 (via partial/foods.html:32, foods.html:4, base.html:50)
    145          _append('\n')  # partial/pagination.html:19 (via partial/foods.html:32, foods.html:4, base.html:50)
    146      else:  # partial/pagination.html:19 (via partial/foods.html:32, foods.html:4, base.html:50)
    147          _append('\n')  # partial/pagination.html:20 (via partial/foods.html:32, foods.html:4, base.html:50)
    148          end_page = min(total_page, current_page+4)  # partial/pagination.html:20 (via partial/foods.html:32, foods.html:4, base.html:50)
    149          _append('\n')  # partial/pagination.html:21 (via partial/foods.html:32, foods.html:4, base.html:50)
    150          start_page = current_page - 5  # partial/pagination.html:21 (via partial/foods.html:32, foods.html:4, base.html:50)
    151          _append('\n')  # partial/pagination.html:22 (via partial/foods.html:32, foods.html:4, base.html:50)
    152      _append('\n')  # partial/pagination.html:24 (via partial/foods.html:32, foods.html:4, base.html:50)
    153      if total_page > 1:  # partial/pagination.html:24 (via partial/foods.html:32, foods.html:4, base.html:50)
    154          _append('\n<div class="pagination">\n<ul>\n')  # partial/pagination.html:27 (via partial/foods.html:32, foods.html:4, base.html:50)
    155          if current_page == 1:  # partial/pagination.html:27 (via partial/foods.html:32, foods.html:4, base.html:50)
    156              _append('\n<li class="disabled">\xe2\x86\x90 </li>\n')  # partial/pagination.html:29 (via partial/foods.html:32, foods.html:4, base.html:50)
    157          else:  # partial/pagination.html:29 (via partial/foods.html:32, foods.html:4, base.html:50)
    158              _append('\n<li><a href="')  # partial/pagination.html:30 (via partial/foods.html:32, foods.html:4, base.html:50)
    159              _tmp = page_path  # partial/pagination.html:30 (via partial/foods.html:32, foods.html:4, base.html:50)
    160              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:30 (via partial/foods.html:32, foods.html:4, base.html:50)
    161              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:30 (via partial/foods.html:32, foods.html:4, base.html:50)
    162              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:30 (via partial/foods.html:32, foods.html:4, base.html:50)
    163              _append(_tmp)  # partial/pagination.html:30 (via partial/foods.html:32, foods.html:4, base.html:50)
    164              _append('?page=1">\xe2\x86\x90 </a></li>\n')  # partial/pagination.html:31 (via partial/foods.html:32, foods.html:4, base.html:50)
    165          _append('\n')  # partial/pagination.html:33 (via partial/foods.html:32, foods.html:4, base.html:50)
    166          for i in range(start_page, end_page + 1):  # partial/pagination.html:33 (via partial/foods.html:32, foods.html:4, base.html:50)
    167              _append('\n<li ')  # partial/pagination.html:34 (via partial/foods.html:32, foods.html:4, base.html:50)
    168              if current_page == i:  # partial/pagination.html:34 (via partial/foods.html:32, foods.html:4, base.html:50)
    169                  _append('class="active"')  # partial/pagination.html:34 (via partial/foods.html:32, foods.html:4, base.html:50)
    170              _append('>\n<a href="')  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    171              _tmp = page_path  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    172              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    173              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    174              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    175              _append(_tmp)  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    176              _append('?page=')  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    177              _tmp = i  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    178              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    179              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    180              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    181              _append(_tmp)  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    182              _append('">')  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    183              _tmp = i  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    184              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    185              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    186              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    187              _append(_tmp)  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    188              _append('</a>\n</li>\n')  # partial/pagination.html:37 (via partial/foods.html:32, foods.html:4, base.html:50)
    189          _append('\n')  # partial/pagination.html:39 (via partial/foods.html:32, foods.html:4, base.html:50)
    190          if current_page == total_page:  # partial/pagination.html:39 (via partial/foods.html:32, foods.html:4, base.html:50)
    191              _append('\n<li class="disabled">\xe2\x86\x92 </li>\n')  # partial/pagination.html:41 (via partial/foods.html:32, foods.html:4, base.html:50)
    192          else:  # partial/pagination.html:41 (via partial/foods.html:32, foods.html:4, base.html:50)
    193              _append('\n<li><a href="')  # partial/pagination.html:42 (via partial/foods.html:32, foods.html:4, base.html:50)
    194              _tmp = page_path  # partial/pagination.html:42 (via partial/foods.html:32, foods.html:4, base.html:50)
    195              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:42 (via partial/foods.html:32, foods.html:4, base.html:50)
    196              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:42 (via partial/foods.html:32, foods.html:4, base.html:50)
    197              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:42 (via partial/foods.html:32, foods.html:4, base.html:50)
    198              _append(_tmp)  # partial/pagination.html:42 (via partial/foods.html:32, foods.html:4, base.html:50)
    199              _append('?page=')  # partial/pagination.html:42 (via partial/foods.html:32, foods.html:4, base.html:50)
    200              _tmp = current_page+1  # partial/pagination.html:42 (via partial/foods.html:32, foods.html:4, base.html:50)
    201              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:42 (via partial/foods.html:32, foods.html:4, base.html:50)
    202              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:42 (via partial/foods.html:32, foods.html:4, base.html:50)
    203              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:42 (via partial/foods.html:32, foods.html:4, base.html:50)
    204              _append(_tmp)  # partial/pagination.html:42 (via partial/foods.html:32, foods.html:4, base.html:50)
    205              _append('">\xe2\x86\x92 </a></li>\n')  # partial/pagination.html:43 (via partial/foods.html:32, foods.html:4, base.html:50)
    206          _append('\n</ul>\n</div>\n')  # partial/pagination.html:46 (via partial/foods.html:32, foods.html:4, base.html:50)
    207      _append('\n')  # partial/pagination.html:47 (via partial/foods.html:32, foods.html:4, base.html:50)
    208      _append('\n</div>\n</div>\n')  # partial/foods.html:35 (via foods.html:4, base.html:50)
    209      _append('\n')  # foods.html:5 (via base.html:50)
    210      _append('\n</div>\n<div id="sidebar">\n')  # base.html:54
    211      _append('\n')  # foods.html:8 (via base.html:54)
    212      if current_user:  # partial/sidebar_global.html:1 (via foods.html:8, base.html:54)
    213          _append('\n')  # partial/sidebar_global.html:2 (via foods.html:8, base.html:54)
    214          _append('<div class="upload item ')  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    215          if not current_user.left_upload_count:  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    216              _append('disabled')  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    217          _append('" data-url="/photo/upload" data-title="\xe9\x87\x87\xe9\x9b\x86\xe7\x85\xa7\xe7\x89\x87" >\n<div class="left"></div>\n<div class="center">\n')  # partial/sidebar_upload.html:5 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    218          if current_user.left_upload_count:  # partial/sidebar_upload.html:5 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    219              _append('\n\xe9\x87\x87\xe9\x9b\x86\xe7\x85\xa7\xe7\x89\x87(\xe6\x9c\xac\xe5\x91\xa8\xe8\xbf\x98\xe5\x89\xa9')  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    220              _tmp = current_user.left_upload_count  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    221              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    222              else: _tmp = _utf8(str(_tmp))  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    223              _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    224              _append(_tmp)  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    225              _append('\xe5\xbc\xa0)\n')  # partial/sidebar_upload.html:7 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    226          else:  # partial/sidebar_upload.html:7 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    227              _append('\n\xe6\x9c\xac\xe5\x91\xa8\xe7\x9a\x84\xe9\x87\x87\xe9\x9b\x86\xe4\xbd\x99\xe9\xa2\x9d\xe5\xb7\xb2\xe7\x94\xa8\xe5\xae\x8c\xe4\xba\x86\n')  # partial/sidebar_upload.html:9 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    228          _append('\n</div>\n<div class="right"></div>\n</div>\n')  # partial/sidebar_upload.html:13 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    229          _append('\n')  # partial/sidebar_global.html:3 (via foods.html:8, base.html:54)
    230          _append('<div class="box" id="panel-me">\n<div class="header"><a class="right" href="/logout">\xe7\x99\xbb\xe5\x87\xba</a>\xe6\x88\x91\xe7\x9a\x84\xe4\xbf\xa1\xe6\x81\xaf</div>\n<div class="body">\n<div class="me">\n<a class="settings item" href="/settings" data-title="\xe8\xae\xbe\xe7\xbd\xae" data-url="/settings">\xe8\xae\xbe\xe7\xbd\xae</a>\n<a href="/user/')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    231          _tmp = current_user.username  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    232          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    233          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    234          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    235          _append(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    236          _append('"><img class="avatar" src="')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    237          _tmp = get_avatar_url(current_user, 's')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    238          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    239          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    240          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    241          _append(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    242          _append('" /></a>\n<a href="/user/')  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    243          _tmp = current_user.username  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    244          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    245          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    246          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    247          _append(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    248          _append('">')  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    249          _tmp = current_user.fullname  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    250          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    251          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    252          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    253          _append(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    254          _append('</a>\n<i class="level icon-level')  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    255          _tmp = current_user.level  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    256          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    257          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    258          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    259          _append(_tmp)  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    260          _append('"></i>\n</div>\n<div class="follow">\n<div class="following item" data-title="\xe6\x88\x91\xe5\x85\xb3\xe6\xb3\xa8\xe7\x9a\x84\xe4\xba\xba" data-url="/mine/following">\n<h3 class="anchor">')  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    261          _tmp = current_user.following_count  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    262          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    263          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    264          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    265          _append(_tmp)  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    266          _append('</h3>\n<span>following</span>\n</div>\n<div class="follower item" data-title="\xe5\x85\xb3\xe6\xb3\xa8\xe6\x88\x91\xe7\x9a\x84\xe4\xba\xba" data-url="/mine/follower">\n<h3 class="anchor">')  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    267          _tmp = current_user.follower_count  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    268          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    269          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    270          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    271          _append(_tmp)  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    272          _append('</h3>\n<span>followers</span>\n</div>\n</div>\n<ul>\n<li class="item" data-url="/mine/invite" data-title="\xe9\x82\x80\xe8\xaf\xb7\xe6\x9c\x8b\xe5\x8f\x8b\xe5\x8a\xa0\xe5\x85\xa5"> <span class="num">')  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    273          _tmp = current_user.unused_invite_key_count  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    274          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    275          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    276          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    277          _append(_tmp)  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    278          _append('</span><span class="anchor">\xe9\x82\x80\xe8\xaf\xb7\xe6\x9c\x8b\xe5\x8f\x8b\xe5\x8a\xa0\xe5\x85\xa5</span></li>\n<li class="item" data-title="\xe6\x88\x91\xe6\xb7\xbb\xe5\x8a\xa0\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87" data-url="/mine/photos"> <span class="num">')  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    279          _tmp = current_user.photo_count  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    280          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    281          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    282          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    283          _append(_tmp)  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    284          _append('</span><span class="anchor">\xe6\x88\x91\xe6\xb7\xbb\xe5\x8a\xa0\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87</span></li>\n<li class="item" data-title="\xe6\x88\x91\xe5\x96\x9c\xe6\xac\xa2\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87" data-url="/mine/likes_photos"><span class="num">')  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    285          _tmp = current_user.likes_count  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    286          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    287          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    288          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    289          _append(_tmp)  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    290          _append('</span><span class="anchor">\xe6\x88\x91\xe5\x96\x9c\xe6\xac\xa2\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87</span> </li>\n</ul>\n</div>\n</div>\n')  # partial/sidebar_me.html:27 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    291          _append('\n')  # partial/sidebar_global.html:4 (via foods.html:8, base.html:54)
    292      else:  # partial/sidebar_global.html:4 (via foods.html:8, base.html:54)
    293          _append('\n')  # partial/sidebar_global.html:5 (via foods.html:8, base.html:54)
    294          _append('<div class="box" id="panel-about">\n<div class="header">\xe5\x85\xb3\xe4\xba\x8e\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</div>\n<div class="body">\n<p>\xe5\x85\xb3\xe6\xb3\xa8\xe9\xa3\x9f\xe5\x93\x81\xe5\xae\x89\xe5\x85\xa8\xef\xbc\x8c\xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe4\xb8\x96\xe7\x95\x8c</p>\n<p>\xe6\x89\x80\xe6\x9c\x89\xe9\xa3\x9f\xe5\x93\x81\xe5\x92\x8c\xe6\xb7\xbb\xe5\x8a\xa0\xe5\x89\x82\xe8\xb5\x84\xe6\x96\x99\xe6\x9d\xa5\xe8\x87\xaa\xe4\xba\x8eiearth-\xe7\x88\xb1\xe5\x9c\xb0\xe7\x90\x83\xe7\x8e\xaf\xe4\xbf\x9d\xe6\x9c\xba\xe6\x9e\x84</p>\n</div>\n</div>\n')  # partial/sidebar_about.html:8 (via partial/sidebar_global.html:5, foods.html:8, base.html:54)
    295          _append('\n')  # partial/sidebar_global.html:6 (via foods.html:8, base.html:54)
    296          _append('<div class="box" id="panel-login">\n<div class="header">\xe7\x99\xbb\xe5\x85\xa5\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</div>\n<div class="body">\n<form action="/login" method="POST">\n<div class="section">\n<input type="TEXT" name="username" placeholder="\xe7\x94\xa8\xe6\x88\xb7\xe5\x90\x8d/Email" />\n</div>\n<div class="section">\n<input type="PASSWORD" name="password" placeholder="\xe5\xaf\x86\xe7\xa0\x81" />\n</div>\n<div class="section">\n<input type="SUBMIT" value="\xe7\x99\xbb\xe5\x85\xa5" class="btn primary-btn" />\n<span class="tip">\xe4\xbc\x9a\xe8\xae\xb0\xe4\xbd\x8f\xe7\x99\xbb\xe5\x85\xa5\xe4\xb8\x80\xe4\xb8\xaa\xe6\x9c\x88</span>\n</div>\n</form>\n<div class="alert alert-info">\xe5\x86\x85\xe6\xb5\x8b\xe4\xb8\xad\xef\xbc\x8c\xe5\x8f\xaa\xe6\x8e\xa5\xe5\x8f\x97\xe9\x82\x80\xe8\xaf\xb7\xe6\xb3\xa8\xe5\x86\x8c</div>\n</div>\n</div>\n')  # partial/sidebar_login.html:19 (via partial/sidebar_global.html:6, foods.html:8, base.html:54)
    297          _append('\n')  # partial/sidebar_global.html:8 (via foods.html:8, base.html:54)
    298      _append('\n')  # partial/sidebar_global.html:10 (via foods.html:8, base.html:54)
    299      _append('<div class="box">\n<div class="header">\xe6\xb5\x8f\xe8\xa7\x88\xe9\xa3\x9f\xe5\x93\x81</div>\n<div class="body">\n<ul>\n<a href="/foods/hot">\n<li data-title="\xe7\x83\xad\xe9\x97\xa8\xe9\xa3\x9f\xe5\x93\x81"><span class="anchor">\xe7\x83\xad\xe9\x97\xa8\xe9\xa3\x9f\xe5\x93\x81</span></li>\n</a>\n<a href="/foods/latest">\n<li data-title="\xe6\x9c\x80\xe6\x96\xb0\xe9\xa3\x9f\xe5\x93\x81"><span class="anchor">\xe6\x9c\x80\xe6\x96\xb0\xe9\xa3\x9f\xe5\x93\x81</span></li>\n</a>\n</ul>\n</div>\n</div>\n')  # partial/sidebar_food_nav.html:15 (via partial/sidebar_global.html:10, foods.html:8, base.html:54)
    300      _append('\n')  # partial/sidebar_global.html:11 (via foods.html:8, base.html:54)
    301      import models  # partial/sidebar_hot_searchs.html:1 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    302      _append('\n')  # partial/sidebar_hot_searchs.html:2 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    303      hot_searchs = models.Additive_Search().hot_searchs  # partial/sidebar_hot_searchs.html:2 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    304      _append('\n<div class="box" id="panel-searchs">\n<div class="header">\xe7\x83\xad\xe9\x97\xa8\xe6\x90\x9c\xe7\xb4\xa2</div>\n<div class="body">\n<ul>\n')  # partial/sidebar_hot_searchs.html:8 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    305      for search in hot_searchs:  # partial/sidebar_hot_searchs.html:8 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    306          _append('\n<!--\n<a class="avatar" href="/additive/')  # partial/sidebar_hot_searchs.html:10 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    307          _tmp = search[1]  # partial/sidebar_hot_searchs.html:10 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    308          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_hot_searchs.html:10 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    309          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_hot_searchs.html:10 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    310          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_hot_searchs.html:10 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    311          _append(_tmp)  # partial/sidebar_hot_searchs.html:10 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    312          _append('">\n-->\n<a class="avatar" href="/additive/')  # partial/sidebar_hot_searchs.html:12 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    313          _tmp = search[1]  # partial/sidebar_hot_searchs.html:12 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    314          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_hot_searchs.html:12 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    315          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_hot_searchs.html:12 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    316          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_hot_searchs.html:12 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    317          _append(_tmp)  # partial/sidebar_hot_searchs.html:12 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    318          _append('">\n<li>\n')  # partial/sidebar_hot_searchs.html:14 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    319          _tmp = search[0]  # partial/sidebar_hot_searchs.html:14 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    320          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_hot_searchs.html:14 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    321          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_hot_searchs.html:14 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    322          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_hot_searchs.html:14 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    323          _append(_tmp)  # partial/sidebar_hot_searchs.html:14 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    324          _append('\n</li>\n<!--\n<li class="item">\n<span class="anchor">')  # partial/sidebar_hot_searchs.html:18 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    325          _tmp = search[0]  # partial/sidebar_hot_searchs.html:18 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    326          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_hot_searchs.html:18 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    327          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_hot_searchs.html:18 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    328          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_hot_searchs.html:18 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    329          _append(_tmp)  # partial/sidebar_hot_searchs.html:18 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    330          _append('</span>\n</li>\n-->\n</a>\n')  # partial/sidebar_hot_searchs.html:22 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    331      _append('\n</ul>\n</div>\n</div>\n')  # partial/sidebar_hot_searchs.html:26 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    332      _append('\n')  # partial/sidebar_global.html:12 (via foods.html:8, base.html:54)
    333      _append('\n')  # foods.html:9 (via base.html:54)
    334      _append('\n</div>\n</div>\n</div>\n<div id="footer">\n<div class="inner">\n<div class="right">\n<span class="belief">make the world a little better and easier</span>\n</div>\n<div class="left">\n<ul>\n<li><a href="/about">\xe5\x85\xb3\xe4\xba\x8e</a> <!--<span class="divider">/</span>--></li>\n<!--<li><a href="/feedback">\xe5\x8f\x8d\xe9\xa6\x88</a> <span class="divider">/</span></li>-->\n<!--<li><a href="/blog">\xe6\x97\xa5\xe5\xbf\x97</a></li>-->\n</ul>\n</div>\n</div>\n</div>\n<script type="text/javascript">\nvar _gaq = _gaq || [];\n_gaq.push([\'_setAccount\', \'UA-1281124-23\']);\n_gaq.push([\'_trackPageview\']);\n(function() {\nvar ga = document.createElement(\'script\'); ga.type = \'text/javascript\'; ga.async = true;\nga.src = (\'https:\' == document.location.protocol ? \'https://ssl\' : \'http://www\') + \'.google-analytics.com/ga.js\';\nvar s = document.getElementsByTagName(\'script\')[0]; s.parentNode.insertBefore(ga, s);\n})();\n</script>\n<!-- love your mom! -->\n</body>\n<meta name="description" content="\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - " />\n')  # base.html:89
    335      return _utf8('').join(_buffer)  # base.html:0
[E 120723 08:39:54 web:1031] Uncaught exception GET /foods/hot (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/foods/hot', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.100', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cookie': '__utma=148685175.1070362998.1342935208.1342948559.1343001966.4; __utmb=148685175.11.10.1343001966; __utmc=148685175; __utmz=148685175.1342935208.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)', 'X-Real-Ip': '192.168.0.100', 'Referer': 'http://192.168.0.189/'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "/home/dk/work/python/safood/src/sites/www/handlers/food.py", line 115, in get
        return self._render('hot')
      File "/home/dk/work/python/safood/src/sites/www/handlers/base.py", line 161, in _render
        current_food = food,
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 474, in render
        html = self.render_string(template_name, **kwargs)
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 586, in render_string
        return t.generate(**args)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 253, in generate
        return execute()
      File "foods_html.generated.py", line 94, in _execute
        for index, food_part in enumerate(food_parts):  # partial/foods.html:11 (via foods.html:4, base.html:50)
    NameError: global name 'food_parts' is not defined
[E 120723 08:39:54 web:1393] 500 GET /foods/hot (127.0.0.1) 268.15ms
[W 120723 08:39:54 web:1393] 404 GET /favicon.ico (127.0.0.1) 4.00ms
[I 120723 08:40:06 web:1393] 200 GET / (127.0.0.1) 144.08ms
[E 120723 08:40:08 template:256] foods.html code:
      1  def _execute():  # base.html:0
      2      _buffer = []  # base.html:0
      3      _append = _buffer.append  # base.html:0
      4      _append('<!doctype html>\n<head>\n<meta charset="UTF-8" />\n<meta content="True" name="HandheldFriendly" />\n<meta content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0; name=\'viewport\'" />\n<title>\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - \xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81')  # base.html:6
      5      _append('</title>\n<link rel="stylesheet" type="text/css" media="screen" href="/static/css/vendor/jquery.fancybox.css" />\n<link rel="stylesheet" type="text/css" media="screen" href="/static/css/main.css" />\n<link rel="shortcut icon" href="/static/img/favicon.ico" />\n<link rel="canonical" href="http://wuditoo.com/" />\n<meta name="description" content="\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - \xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81" />\n<script src="/static/js/vendor/jquery.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.history.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.fancybox.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.scrollTo.min.js" type="text/javascript"></script>\n')  # base.html:16
      6      _append('\n<script type="text/javascript">\n')  # foods.html:13 (via base.html:16)
      7      if current_food:  # foods.html:13 (via base.html:16)
      8          _append('\nmeta_food = {\nurl: "/food/')  # foods.html:15 (via base.html:16)
      9          _tmp = current_food.id  # foods.html:15 (via base.html:16)
     10          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # foods.html:15 (via base.html:16)
     11          else: _tmp = _utf8(str(_tmp))  # foods.html:15 (via base.html:16)
     12          _tmp = _utf8(xhtml_escape(_tmp))  # foods.html:15 (via base.html:16)
     13          _append(_tmp)  # foods.html:15 (via base.html:16)
     14          _append('",\n}\n')  # foods.html:17 (via base.html:16)
     15      _append('\n</script>\n')  # foods.html:19 (via base.html:16)
     16      _append('\n<script src="/static/js/main.js" type="text/javascript"></script>\n</head>\n<!--[if IE 7 ]><body class="ie7"><![endif]-->\n<!--[if gt IE 7]><body class="ie"><![endif]-->\n<!--[if !IE]><body><![endif]-->\n<div id="header">\n<div class="inner">\n<div id="logo"><a href="/">\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</a></div>\n<div id="slogon">\xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81</div>\n<div id="witticism">')  # base.html:27
     17      _tmp = home_sentence()  # base.html:27
     18      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:27
     19      else: _tmp = _utf8(str(_tmp))  # base.html:27
     20      _tmp = _utf8(xhtml_escape(_tmp))  # base.html:27
     21      _append(_tmp)  # base.html:27
     22      _append('</div>\n<!--\n<ul class="nav-right">\n</ul>\n-->\n</div>\n</div>\n<div id="container">\n<div class="inner">\n<div class="message alert alert-warn">\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0\xe5\xad\x95\xe8\x82\xb2\xe4\xb8\xad\xef\xbc\x8c\xe6\x97\xb6\xe9\x97\xb4\xe5\xbe\x85\xe5\xae\x9a\xe3\x80\x82\xe8\xb0\xa2\xe8\xb0\xa2\xe6\x82\xa8\xe7\x9a\x84\xe5\x88\xb0\xe8\xae\xbf\xef\xbc\x9a\xef\xbc\x89</div>\n')  # base.html:38
     23      message = get_message()  # base.html:38
     24      _append('\n')  # base.html:39
     25      for message_type in ('error', 'success', 'info', 'warn'):  # base.html:39
     26          _append('\n')  # base.html:40
     27          if message and message_type == message[0]:  # base.html:40
     28              _append('\n<div id="')  # base.html:41
     29              _tmp = message_type  # base.html:41
     30              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     31              else: _tmp = _utf8(str(_tmp))  # base.html:41
     32              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     33              _append(_tmp)  # base.html:41
     34              _append('-message" class="message alert alert-')  # base.html:41
     35              _tmp = message_type  # base.html:41
     36              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     37              else: _tmp = _utf8(str(_tmp))  # base.html:41
     38              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     39              _append(_tmp)  # base.html:41
     40              _append('">')  # base.html:41
     41              _tmp = message[1]  # base.html:41
     42              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     43              else: _tmp = _utf8(str(_tmp))  # base.html:41
     44              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     45              _append(_tmp)  # base.html:41
     46              _append('</div>\n')  # base.html:42
     47          else:  # base.html:42
     48              _append('\n<div id="')  # base.html:43
     49              _tmp = message_type  # base.html:43
     50              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:43
     51              else: _tmp = _utf8(str(_tmp))  # base.html:43
     52              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:43
     53              _append(_tmp)  # base.html:43
     54              _append('-message" class="message alert alert-')  # base.html:43
     55              _tmp = message_type  # base.html:43
     56              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:43
     57              else: _tmp = _utf8(str(_tmp))  # base.html:43
     58              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:43
     59              _append(_tmp)  # base.html:43
     60              _append(' hide"></div>\n')  # base.html:44
     61          _append('\n')  # base.html:45
     62      _append('\n')  # base.html:47
     63      _append('\n<div id="main">\n')  # base.html:50
     64      _append('\n')  # foods.html:4 (via base.html:50)
     65      _append('<div class="box" id="foods">\n<div class="header">')  # partial/foods.html:2 (via foods.html:4, base.html:50)
     66      _tmp = foods_title  # partial/foods.html:2 (via foods.html:4, base.html:50)
     67      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/foods.html:2 (via foods.html:4, base.html:50)
     68      else: _tmp = _utf8(str(_tmp))  # partial/foods.html:2 (via foods.html:4, base.html:50)
     69      _tmp = _utf8(xhtml_escape(_tmp))  # partial/foods.html:2 (via foods.html:4, base.html:50)
     70      _append(_tmp)  # partial/foods.html:2 (via foods.html:4, base.html:50)
     71      _append('</div>\n<div class="body main ul">\n')  # partial/foods.html:4 (via foods.html:4, base.html:50)
     72      for index, food in enumerate(foods):  # partial/foods.html:4 (via foods.html:4, base.html:50)
     73          _append('\n')  # partial/foods.html:5 (via foods.html:4, base.html:50)
     74          creator = food.creator  # partial/foods.html:5 (via foods.html:4, base.html:50)
     75          _append('\n<div class="food-item">\n<div class="header">\n<a class="avatar" href="/food/')  # partial/foods.html:8 (via foods.html:4, base.html:50)
     76          _tmp = food.id  # partial/foods.html:8 (via foods.html:4, base.html:50)
     77          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/foods.html:8 (via foods.html:4, base.html:50)
     78          else: _tmp = _utf8(str(_tmp))  # partial/foods.html:8 (via foods.html:4, base.html:50)
     79          _tmp = _utf8(xhtml_escape(_tmp))  # partial/foods.html:8 (via foods.html:4, base.html:50)
     80          _append(_tmp)  # partial/foods.html:8 (via foods.html:4, base.html:50)
     81          _append('"><img src="')  # partial/foods.html:8 (via foods.html:4, base.html:50)
     82          _tmp = get_avatar_url(creator, 's')  # partial/foods.html:8 (via foods.html:4, base.html:50)
     83          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/foods.html:8 (via foods.html:4, base.html:50)
     84          else: _tmp = _utf8(str(_tmp))  # partial/foods.html:8 (via foods.html:4, base.html:50)
     85          _tmp = _utf8(xhtml_escape(_tmp))  # partial/foods.html:8 (via foods.html:4, base.html:50)
     86          _append(_tmp)  # partial/foods.html:8 (via foods.html:4, base.html:50)
     87          _append('" /> ')  # partial/foods.html:8 (via foods.html:4, base.html:50)
     88          _tmp = food.name  # partial/foods.html:8 (via foods.html:4, base.html:50)
     89          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/foods.html:8 (via foods.html:4, base.html:50)
     90          else: _tmp = _utf8(str(_tmp))  # partial/foods.html:8 (via foods.html:4, base.html:50)
     91          _tmp = _utf8(xhtml_escape(_tmp))  # partial/foods.html:8 (via foods.html:4, base.html:50)
     92          _append(_tmp)  # partial/foods.html:8 (via foods.html:4, base.html:50)
     93          _append('</a>\n</div>\n<div class="body">\n')  # partial/foods.html:11 (via foods.html:4, base.html:50)
     94          for index, food_part in enumerate(food_parts):  # partial/foods.html:11 (via foods.html:4, base.html:50)
     95              _append('\n<div class="food_part">')  # partial/foods.html:12 (via foods.html:4, base.html:50)
     96              _tmp = food_part.name  # partial/foods.html:12 (via foods.html:4, base.html:50)
     97              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/foods.html:12 (via foods.html:4, base.html:50)
     98              else: _tmp = _utf8(str(_tmp))  # partial/foods.html:12 (via foods.html:4, base.html:50)
     99              _tmp = _utf8(xhtml_escape(_tmp))  # partial/foods.html:12 (via foods.html:4, base.html:50)
    100              _append(_tmp)  # partial/foods.html:12 (via foods.html:4, base.html:50)
    101              _append('</div>\n')  # partial/foods.html:13 (via foods.html:4, base.html:50)
    102          _append('\n</div>\n<div class="footer">\n<span class="meta">\n<li><i class="icon-view"></i> ')  # partial/foods.html:18 (via foods.html:4, base.html:50)
    103          _tmp = food.views_count  # partial/foods.html:18 (via foods.html:4, base.html:50)
    104          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/foods.html:18 (via foods.html:4, base.html:50)
    105          else: _tmp = _utf8(str(_tmp))  # partial/foods.html:18 (via foods.html:4, base.html:50)
    106          _tmp = _utf8(xhtml_escape(_tmp))  # partial/foods.html:18 (via foods.html:4, base.html:50)
    107          _append(_tmp)  # partial/foods.html:18 (via foods.html:4, base.html:50)
    108          _append(' | Created:')  # partial/foods.html:18 (via foods.html:4, base.html:50)
    109          _tmp = timesince(food.created)  # partial/foods.html:18 (via foods.html:4, base.html:50)
    110          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/foods.html:18 (via foods.html:4, base.html:50)
    111          else: _tmp = _utf8(str(_tmp))  # partial/foods.html:18 (via foods.html:4, base.html:50)
    112          _tmp = _utf8(xhtml_escape(_tmp))  # partial/foods.html:18 (via foods.html:4, base.html:50)
    113          _append(_tmp)  # partial/foods.html:18 (via foods.html:4, base.html:50)
    114          _append('</li>\n</span>\n<span class="created">\n</span>\n</div>\n</div>\n')  # partial/foods.html:25 (via foods.html:4, base.html:50)
    115          _append('\n')  # partial/foods.html:26 (via foods.html:4, base.html:50)
    116          if index > 0 and (index + 1) % 3 == 0:  # partial/foods.html:26 (via foods.html:4, base.html:50)
    117              _append('\n<div class="clearfix"></div>\n')  # partial/foods.html:28 (via foods.html:4, base.html:50)
    118          _append('\n')  # partial/foods.html:30 (via foods.html:4, base.html:50)
    119      _append('\n')  # partial/foods.html:31 (via foods.html:4, base.html:50)
    120      page_type = 'foods'  # partial/foods.html:31 (via foods.html:4, base.html:50)
    121      _append('\n')  # partial/foods.html:32 (via foods.html:4, base.html:50)
    122      _append('\n')  # partial/pagination.html:3 (via partial/foods.html:32, foods.html:4, base.html:50)
    123      from macros.macro import ADDITIVES_PER_PAGE, USERS_PER_PAGE  # partial/pagination.html:3 (via partial/foods.html:32, foods.html:4, base.html:50)
    124      _append('\n')  # partial/pagination.html:4 (via partial/foods.html:32, foods.html:4, base.html:50)
    125      import math  # partial/pagination.html:4 (via partial/foods.html:32, foods.html:4, base.html:50)
    126      _append('\n')  # partial/pagination.html:6 (via partial/foods.html:32, foods.html:4, base.html:50)
    127      if page_type == 'additives':  # partial/pagination.html:6 (via partial/foods.html:32, foods.html:4, base.html:50)
    128          _append('\n')  # partial/pagination.html:7 (via partial/foods.html:32, foods.html:4, base.html:50)
    129          items_per_page = ADDITIVES_PER_PAGE  # partial/pagination.html:7 (via partial/foods.html:32, foods.html:4, base.html:50)
    130          _append('\n')  # partial/pagination.html:8 (via partial/foods.html:32, foods.html:4, base.html:50)
    131      else:  # partial/pagination.html:8 (via partial/foods.html:32, foods.html:4, base.html:50)
    132          _append('\n')  # partial/pagination.html:9 (via partial/foods.html:32, foods.html:4, base.html:50)
    133          items_per_page = USERS_PER_PAGE  # partial/pagination.html:9 (via partial/foods.html:32, foods.html:4, base.html:50)
    134          _append('\n')  # partial/pagination.html:10 (via partial/foods.html:32, foods.html:4, base.html:50)
    135      _append('\n')  # partial/pagination.html:12 (via partial/foods.html:32, foods.html:4, base.html:50)
    136      total_page = int(math.ceil(float(total_items) / items_per_page))  # partial/pagination.html:12 (via partial/foods.html:32, foods.html:4, base.html:50)
    137      _append('\n')  # partial/pagination.html:14 (via partial/foods.html:32, foods.html:4, base.html:50)
    138      current_page = int(handler.get_argument('page', 1))  # partial/pagination.html:14 (via partial/foods.html:32, foods.html:4, base.html:50)
    139      _append('\n')  # partial/pagination.html:16 (via partial/foods.html:32, foods.html:4, base.html:50)
    140      if current_page <=6:  # partial/pagination.html:16 (via partial/foods.html:32, foods.html:4, base.html:50)
    141          _append('\n')  # partial/pagination.html:17 (via partial/foods.html:32, foods.html:4, base.html:50)
    142          end_page = min(total_page, 10)  # partial/pagination.html:17 (via partial/foods.html:32, foods.html:4, base.html:50)
    143          _append('\n')  # partial/pagination.html:18 (via partial/foods.html:32, foods.html:4, base.html:50)
    144          start_page = 1  # partial/pagination.html:18 (via partial/foods.html:32, foods.html:4, base.html:50)
    145          _append('\n')  # partial/pagination.html:19 (via partial/foods.html:32, foods.html:4, base.html:50)
    146      else:  # partial/pagination.html:19 (via partial/foods.html:32, foods.html:4, base.html:50)
    147          _append('\n')  # partial/pagination.html:20 (via partial/foods.html:32, foods.html:4, base.html:50)
    148          end_page = min(total_page, current_page+4)  # partial/pagination.html:20 (via partial/foods.html:32, foods.html:4, base.html:50)
    149          _append('\n')  # partial/pagination.html:21 (via partial/foods.html:32, foods.html:4, base.html:50)
    150          start_page = current_page - 5  # partial/pagination.html:21 (via partial/foods.html:32, foods.html:4, base.html:50)
    151          _append('\n')  # partial/pagination.html:22 (via partial/foods.html:32, foods.html:4, base.html:50)
    152      _append('\n')  # partial/pagination.html:24 (via partial/foods.html:32, foods.html:4, base.html:50)
    153      if total_page > 1:  # partial/pagination.html:24 (via partial/foods.html:32, foods.html:4, base.html:50)
    154          _append('\n<div class="pagination">\n<ul>\n')  # partial/pagination.html:27 (via partial/foods.html:32, foods.html:4, base.html:50)
    155          if current_page == 1:  # partial/pagination.html:27 (via partial/foods.html:32, foods.html:4, base.html:50)
    156              _append('\n<li class="disabled">\xe2\x86\x90 </li>\n')  # partial/pagination.html:29 (via partial/foods.html:32, foods.html:4, base.html:50)
    157          else:  # partial/pagination.html:29 (via partial/foods.html:32, foods.html:4, base.html:50)
    158              _append('\n<li><a href="')  # partial/pagination.html:30 (via partial/foods.html:32, foods.html:4, base.html:50)
    159              _tmp = page_path  # partial/pagination.html:30 (via partial/foods.html:32, foods.html:4, base.html:50)
    160              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:30 (via partial/foods.html:32, foods.html:4, base.html:50)
    161              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:30 (via partial/foods.html:32, foods.html:4, base.html:50)
    162              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:30 (via partial/foods.html:32, foods.html:4, base.html:50)
    163              _append(_tmp)  # partial/pagination.html:30 (via partial/foods.html:32, foods.html:4, base.html:50)
    164              _append('?page=1">\xe2\x86\x90 </a></li>\n')  # partial/pagination.html:31 (via partial/foods.html:32, foods.html:4, base.html:50)
    165          _append('\n')  # partial/pagination.html:33 (via partial/foods.html:32, foods.html:4, base.html:50)
    166          for i in range(start_page, end_page + 1):  # partial/pagination.html:33 (via partial/foods.html:32, foods.html:4, base.html:50)
    167              _append('\n<li ')  # partial/pagination.html:34 (via partial/foods.html:32, foods.html:4, base.html:50)
    168              if current_page == i:  # partial/pagination.html:34 (via partial/foods.html:32, foods.html:4, base.html:50)
    169                  _append('class="active"')  # partial/pagination.html:34 (via partial/foods.html:32, foods.html:4, base.html:50)
    170              _append('>\n<a href="')  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    171              _tmp = page_path  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    172              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    173              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    174              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    175              _append(_tmp)  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    176              _append('?page=')  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    177              _tmp = i  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    178              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    179              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    180              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    181              _append(_tmp)  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    182              _append('">')  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    183              _tmp = i  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    184              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    185              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    186              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    187              _append(_tmp)  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    188              _append('</a>\n</li>\n')  # partial/pagination.html:37 (via partial/foods.html:32, foods.html:4, base.html:50)
    189          _append('\n')  # partial/pagination.html:39 (via partial/foods.html:32, foods.html:4, base.html:50)
    190          if current_page == total_page:  # partial/pagination.html:39 (via partial/foods.html:32, foods.html:4, base.html:50)
    191              _append('\n<li class="disabled">\xe2\x86\x92 </li>\n')  # partial/pagination.html:41 (via partial/foods.html:32, foods.html:4, base.html:50)
    192          else:  # partial/pagination.html:41 (via partial/foods.html:32, foods.html:4, base.html:50)
    193              _append('\n<li><a href="')  # partial/pagination.html:42 (via partial/foods.html:32, foods.html:4, base.html:50)
    194              _tmp = page_path  # partial/pagination.html:42 (via partial/foods.html:32, foods.html:4, base.html:50)
    195              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:42 (via partial/foods.html:32, foods.html:4, base.html:50)
    196              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:42 (via partial/foods.html:32, foods.html:4, base.html:50)
    197              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:42 (via partial/foods.html:32, foods.html:4, base.html:50)
    198              _append(_tmp)  # partial/pagination.html:42 (via partial/foods.html:32, foods.html:4, base.html:50)
    199              _append('?page=')  # partial/pagination.html:42 (via partial/foods.html:32, foods.html:4, base.html:50)
    200              _tmp = current_page+1  # partial/pagination.html:42 (via partial/foods.html:32, foods.html:4, base.html:50)
    201              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:42 (via partial/foods.html:32, foods.html:4, base.html:50)
    202              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:42 (via partial/foods.html:32, foods.html:4, base.html:50)
    203              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:42 (via partial/foods.html:32, foods.html:4, base.html:50)
    204              _append(_tmp)  # partial/pagination.html:42 (via partial/foods.html:32, foods.html:4, base.html:50)
    205              _append('">\xe2\x86\x92 </a></li>\n')  # partial/pagination.html:43 (via partial/foods.html:32, foods.html:4, base.html:50)
    206          _append('\n</ul>\n</div>\n')  # partial/pagination.html:46 (via partial/foods.html:32, foods.html:4, base.html:50)
    207      _append('\n')  # partial/pagination.html:47 (via partial/foods.html:32, foods.html:4, base.html:50)
    208      _append('\n</div>\n</div>\n')  # partial/foods.html:35 (via foods.html:4, base.html:50)
    209      _append('\n')  # foods.html:5 (via base.html:50)
    210      _append('\n</div>\n<div id="sidebar">\n')  # base.html:54
    211      _append('\n')  # foods.html:8 (via base.html:54)
    212      if current_user:  # partial/sidebar_global.html:1 (via foods.html:8, base.html:54)
    213          _append('\n')  # partial/sidebar_global.html:2 (via foods.html:8, base.html:54)
    214          _append('<div class="upload item ')  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    215          if not current_user.left_upload_count:  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    216              _append('disabled')  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    217          _append('" data-url="/photo/upload" data-title="\xe9\x87\x87\xe9\x9b\x86\xe7\x85\xa7\xe7\x89\x87" >\n<div class="left"></div>\n<div class="center">\n')  # partial/sidebar_upload.html:5 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    218          if current_user.left_upload_count:  # partial/sidebar_upload.html:5 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    219              _append('\n\xe9\x87\x87\xe9\x9b\x86\xe7\x85\xa7\xe7\x89\x87(\xe6\x9c\xac\xe5\x91\xa8\xe8\xbf\x98\xe5\x89\xa9')  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    220              _tmp = current_user.left_upload_count  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    221              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    222              else: _tmp = _utf8(str(_tmp))  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    223              _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    224              _append(_tmp)  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    225              _append('\xe5\xbc\xa0)\n')  # partial/sidebar_upload.html:7 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    226          else:  # partial/sidebar_upload.html:7 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    227              _append('\n\xe6\x9c\xac\xe5\x91\xa8\xe7\x9a\x84\xe9\x87\x87\xe9\x9b\x86\xe4\xbd\x99\xe9\xa2\x9d\xe5\xb7\xb2\xe7\x94\xa8\xe5\xae\x8c\xe4\xba\x86\n')  # partial/sidebar_upload.html:9 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    228          _append('\n</div>\n<div class="right"></div>\n</div>\n')  # partial/sidebar_upload.html:13 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    229          _append('\n')  # partial/sidebar_global.html:3 (via foods.html:8, base.html:54)
    230          _append('<div class="box" id="panel-me">\n<div class="header"><a class="right" href="/logout">\xe7\x99\xbb\xe5\x87\xba</a>\xe6\x88\x91\xe7\x9a\x84\xe4\xbf\xa1\xe6\x81\xaf</div>\n<div class="body">\n<div class="me">\n<a class="settings item" href="/settings" data-title="\xe8\xae\xbe\xe7\xbd\xae" data-url="/settings">\xe8\xae\xbe\xe7\xbd\xae</a>\n<a href="/user/')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    231          _tmp = current_user.username  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    232          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    233          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    234          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    235          _append(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    236          _append('"><img class="avatar" src="')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    237          _tmp = get_avatar_url(current_user, 's')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    238          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    239          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    240          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    241          _append(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    242          _append('" /></a>\n<a href="/user/')  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    243          _tmp = current_user.username  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    244          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    245          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    246          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    247          _append(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    248          _append('">')  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    249          _tmp = current_user.fullname  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    250          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    251          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    252          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    253          _append(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    254          _append('</a>\n<i class="level icon-level')  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    255          _tmp = current_user.level  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    256          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    257          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    258          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    259          _append(_tmp)  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    260          _append('"></i>\n</div>\n<div class="follow">\n<div class="following item" data-title="\xe6\x88\x91\xe5\x85\xb3\xe6\xb3\xa8\xe7\x9a\x84\xe4\xba\xba" data-url="/mine/following">\n<h3 class="anchor">')  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    261          _tmp = current_user.following_count  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    262          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    263          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    264          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    265          _append(_tmp)  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    266          _append('</h3>\n<span>following</span>\n</div>\n<div class="follower item" data-title="\xe5\x85\xb3\xe6\xb3\xa8\xe6\x88\x91\xe7\x9a\x84\xe4\xba\xba" data-url="/mine/follower">\n<h3 class="anchor">')  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    267          _tmp = current_user.follower_count  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    268          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    269          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    270          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    271          _append(_tmp)  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    272          _append('</h3>\n<span>followers</span>\n</div>\n</div>\n<ul>\n<li class="item" data-url="/mine/invite" data-title="\xe9\x82\x80\xe8\xaf\xb7\xe6\x9c\x8b\xe5\x8f\x8b\xe5\x8a\xa0\xe5\x85\xa5"> <span class="num">')  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    273          _tmp = current_user.unused_invite_key_count  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    274          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    275          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    276          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    277          _append(_tmp)  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    278          _append('</span><span class="anchor">\xe9\x82\x80\xe8\xaf\xb7\xe6\x9c\x8b\xe5\x8f\x8b\xe5\x8a\xa0\xe5\x85\xa5</span></li>\n<li class="item" data-title="\xe6\x88\x91\xe6\xb7\xbb\xe5\x8a\xa0\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87" data-url="/mine/photos"> <span class="num">')  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    279          _tmp = current_user.photo_count  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    280          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    281          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    282          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    283          _append(_tmp)  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    284          _append('</span><span class="anchor">\xe6\x88\x91\xe6\xb7\xbb\xe5\x8a\xa0\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87</span></li>\n<li class="item" data-title="\xe6\x88\x91\xe5\x96\x9c\xe6\xac\xa2\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87" data-url="/mine/likes_photos"><span class="num">')  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    285          _tmp = current_user.likes_count  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    286          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    287          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    288          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    289          _append(_tmp)  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    290          _append('</span><span class="anchor">\xe6\x88\x91\xe5\x96\x9c\xe6\xac\xa2\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87</span> </li>\n</ul>\n</div>\n</div>\n')  # partial/sidebar_me.html:27 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    291          _append('\n')  # partial/sidebar_global.html:4 (via foods.html:8, base.html:54)
    292      else:  # partial/sidebar_global.html:4 (via foods.html:8, base.html:54)
    293          _append('\n')  # partial/sidebar_global.html:5 (via foods.html:8, base.html:54)
    294          _append('<div class="box" id="panel-about">\n<div class="header">\xe5\x85\xb3\xe4\xba\x8e\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</div>\n<div class="body">\n<p>\xe5\x85\xb3\xe6\xb3\xa8\xe9\xa3\x9f\xe5\x93\x81\xe5\xae\x89\xe5\x85\xa8\xef\xbc\x8c\xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe4\xb8\x96\xe7\x95\x8c</p>\n<p>\xe6\x89\x80\xe6\x9c\x89\xe9\xa3\x9f\xe5\x93\x81\xe5\x92\x8c\xe6\xb7\xbb\xe5\x8a\xa0\xe5\x89\x82\xe8\xb5\x84\xe6\x96\x99\xe6\x9d\xa5\xe8\x87\xaa\xe4\xba\x8eiearth-\xe7\x88\xb1\xe5\x9c\xb0\xe7\x90\x83\xe7\x8e\xaf\xe4\xbf\x9d\xe6\x9c\xba\xe6\x9e\x84</p>\n</div>\n</div>\n')  # partial/sidebar_about.html:8 (via partial/sidebar_global.html:5, foods.html:8, base.html:54)
    295          _append('\n')  # partial/sidebar_global.html:6 (via foods.html:8, base.html:54)
    296          _append('<div class="box" id="panel-login">\n<div class="header">\xe7\x99\xbb\xe5\x85\xa5\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</div>\n<div class="body">\n<form action="/login" method="POST">\n<div class="section">\n<input type="TEXT" name="username" placeholder="\xe7\x94\xa8\xe6\x88\xb7\xe5\x90\x8d/Email" />\n</div>\n<div class="section">\n<input type="PASSWORD" name="password" placeholder="\xe5\xaf\x86\xe7\xa0\x81" />\n</div>\n<div class="section">\n<input type="SUBMIT" value="\xe7\x99\xbb\xe5\x85\xa5" class="btn primary-btn" />\n<span class="tip">\xe4\xbc\x9a\xe8\xae\xb0\xe4\xbd\x8f\xe7\x99\xbb\xe5\x85\xa5\xe4\xb8\x80\xe4\xb8\xaa\xe6\x9c\x88</span>\n</div>\n</form>\n<div class="alert alert-info">\xe5\x86\x85\xe6\xb5\x8b\xe4\xb8\xad\xef\xbc\x8c\xe5\x8f\xaa\xe6\x8e\xa5\xe5\x8f\x97\xe9\x82\x80\xe8\xaf\xb7\xe6\xb3\xa8\xe5\x86\x8c</div>\n</div>\n</div>\n')  # partial/sidebar_login.html:19 (via partial/sidebar_global.html:6, foods.html:8, base.html:54)
    297          _append('\n')  # partial/sidebar_global.html:8 (via foods.html:8, base.html:54)
    298      _append('\n')  # partial/sidebar_global.html:10 (via foods.html:8, base.html:54)
    299      _append('<div class="box">\n<div class="header">\xe6\xb5\x8f\xe8\xa7\x88\xe9\xa3\x9f\xe5\x93\x81</div>\n<div class="body">\n<ul>\n<a href="/foods/hot">\n<li data-title="\xe7\x83\xad\xe9\x97\xa8\xe9\xa3\x9f\xe5\x93\x81"><span class="anchor">\xe7\x83\xad\xe9\x97\xa8\xe9\xa3\x9f\xe5\x93\x81</span></li>\n</a>\n<a href="/foods/latest">\n<li data-title="\xe6\x9c\x80\xe6\x96\xb0\xe9\xa3\x9f\xe5\x93\x81"><span class="anchor">\xe6\x9c\x80\xe6\x96\xb0\xe9\xa3\x9f\xe5\x93\x81</span></li>\n</a>\n</ul>\n</div>\n</div>\n')  # partial/sidebar_food_nav.html:15 (via partial/sidebar_global.html:10, foods.html:8, base.html:54)
    300      _append('\n')  # partial/sidebar_global.html:11 (via foods.html:8, base.html:54)
    301      import models  # partial/sidebar_hot_searchs.html:1 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    302      _append('\n')  # partial/sidebar_hot_searchs.html:2 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    303      hot_searchs = models.Additive_Search().hot_searchs  # partial/sidebar_hot_searchs.html:2 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    304      _append('\n<div class="box" id="panel-searchs">\n<div class="header">\xe7\x83\xad\xe9\x97\xa8\xe6\x90\x9c\xe7\xb4\xa2</div>\n<div class="body">\n<ul>\n')  # partial/sidebar_hot_searchs.html:8 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    305      for search in hot_searchs:  # partial/sidebar_hot_searchs.html:8 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    306          _append('\n<!--\n<a class="avatar" href="/additive/')  # partial/sidebar_hot_searchs.html:10 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    307          _tmp = search[1]  # partial/sidebar_hot_searchs.html:10 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    308          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_hot_searchs.html:10 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    309          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_hot_searchs.html:10 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    310          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_hot_searchs.html:10 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    311          _append(_tmp)  # partial/sidebar_hot_searchs.html:10 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    312          _append('">\n-->\n<a class="avatar" href="/additive/')  # partial/sidebar_hot_searchs.html:12 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    313          _tmp = search[1]  # partial/sidebar_hot_searchs.html:12 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    314          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_hot_searchs.html:12 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    315          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_hot_searchs.html:12 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    316          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_hot_searchs.html:12 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    317          _append(_tmp)  # partial/sidebar_hot_searchs.html:12 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    318          _append('">\n<li>\n')  # partial/sidebar_hot_searchs.html:14 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    319          _tmp = search[0]  # partial/sidebar_hot_searchs.html:14 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    320          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_hot_searchs.html:14 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    321          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_hot_searchs.html:14 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    322          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_hot_searchs.html:14 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    323          _append(_tmp)  # partial/sidebar_hot_searchs.html:14 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    324          _append('\n</li>\n<!--\n<li class="item">\n<span class="anchor">')  # partial/sidebar_hot_searchs.html:18 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    325          _tmp = search[0]  # partial/sidebar_hot_searchs.html:18 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    326          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_hot_searchs.html:18 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    327          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_hot_searchs.html:18 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    328          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_hot_searchs.html:18 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    329          _append(_tmp)  # partial/sidebar_hot_searchs.html:18 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    330          _append('</span>\n</li>\n-->\n</a>\n')  # partial/sidebar_hot_searchs.html:22 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    331      _append('\n</ul>\n</div>\n</div>\n')  # partial/sidebar_hot_searchs.html:26 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    332      _append('\n')  # partial/sidebar_global.html:12 (via foods.html:8, base.html:54)
    333      _append('\n')  # foods.html:9 (via base.html:54)
    334      _append('\n</div>\n</div>\n</div>\n<div id="footer">\n<div class="inner">\n<div class="right">\n<span class="belief">make the world a little better and easier</span>\n</div>\n<div class="left">\n<ul>\n<li><a href="/about">\xe5\x85\xb3\xe4\xba\x8e</a> <!--<span class="divider">/</span>--></li>\n<!--<li><a href="/feedback">\xe5\x8f\x8d\xe9\xa6\x88</a> <span class="divider">/</span></li>-->\n<!--<li><a href="/blog">\xe6\x97\xa5\xe5\xbf\x97</a></li>-->\n</ul>\n</div>\n</div>\n</div>\n<script type="text/javascript">\nvar _gaq = _gaq || [];\n_gaq.push([\'_setAccount\', \'UA-1281124-23\']);\n_gaq.push([\'_trackPageview\']);\n(function() {\nvar ga = document.createElement(\'script\'); ga.type = \'text/javascript\'; ga.async = true;\nga.src = (\'https:\' == document.location.protocol ? \'https://ssl\' : \'http://www\') + \'.google-analytics.com/ga.js\';\nvar s = document.getElementsByTagName(\'script\')[0]; s.parentNode.insertBefore(ga, s);\n})();\n</script>\n<!-- love your mom! -->\n</body>\n<meta name="description" content="\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - " />\n')  # base.html:89
    335      return _utf8('').join(_buffer)  # base.html:0
[E 120723 08:40:08 web:1031] Uncaught exception GET /foods/hot (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/foods/hot', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.100', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cookie': '__utma=148685175.1070362998.1342935208.1342948559.1343001966.4; __utmb=148685175.13.10.1343001966; __utmc=148685175; __utmz=148685175.1342935208.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)', 'X-Real-Ip': '192.168.0.100', 'Referer': 'http://192.168.0.189/'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "/home/dk/work/python/safood/src/sites/www/handlers/food.py", line 115, in get
        return self._render('hot')
      File "/home/dk/work/python/safood/src/sites/www/handlers/base.py", line 161, in _render
        current_food = food,
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 474, in render
        html = self.render_string(template_name, **kwargs)
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 586, in render_string
        return t.generate(**args)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 253, in generate
        return execute()
      File "foods_html.generated.py", line 94, in _execute
        for index, food_part in enumerate(food_parts):  # partial/foods.html:11 (via foods.html:4, base.html:50)
    NameError: global name 'food_parts' is not defined
[E 120723 08:40:08 web:1393] 500 GET /foods/hot (127.0.0.1) 140.08ms
[W 120723 08:40:08 web:1393] 404 GET /favicon.ico (127.0.0.1) 4.00ms
[I 120723 08:40:20 web:1393] 200 GET / (127.0.0.1) 1460.82ms
[E 120723 08:40:22 template:256] foods.html code:
      1  def _execute():  # base.html:0
      2      _buffer = []  # base.html:0
      3      _append = _buffer.append  # base.html:0
      4      _append('<!doctype html>\n<head>\n<meta charset="UTF-8" />\n<meta content="True" name="HandheldFriendly" />\n<meta content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0; name=\'viewport\'" />\n<title>\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - \xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81')  # base.html:6
      5      _append('</title>\n<link rel="stylesheet" type="text/css" media="screen" href="/static/css/vendor/jquery.fancybox.css" />\n<link rel="stylesheet" type="text/css" media="screen" href="/static/css/main.css" />\n<link rel="shortcut icon" href="/static/img/favicon.ico" />\n<link rel="canonical" href="http://wuditoo.com/" />\n<meta name="description" content="\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - \xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81" />\n<script src="/static/js/vendor/jquery.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.history.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.fancybox.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.scrollTo.min.js" type="text/javascript"></script>\n')  # base.html:16
      6      _append('\n<script type="text/javascript">\n')  # foods.html:13 (via base.html:16)
      7      if current_food:  # foods.html:13 (via base.html:16)
      8          _append('\nmeta_food = {\nurl: "/food/')  # foods.html:15 (via base.html:16)
      9          _tmp = current_food.id  # foods.html:15 (via base.html:16)
     10          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # foods.html:15 (via base.html:16)
     11          else: _tmp = _utf8(str(_tmp))  # foods.html:15 (via base.html:16)
     12          _tmp = _utf8(xhtml_escape(_tmp))  # foods.html:15 (via base.html:16)
     13          _append(_tmp)  # foods.html:15 (via base.html:16)
     14          _append('",\n}\n')  # foods.html:17 (via base.html:16)
     15      _append('\n</script>\n')  # foods.html:19 (via base.html:16)
     16      _append('\n<script src="/static/js/main.js" type="text/javascript"></script>\n</head>\n<!--[if IE 7 ]><body class="ie7"><![endif]-->\n<!--[if gt IE 7]><body class="ie"><![endif]-->\n<!--[if !IE]><body><![endif]-->\n<div id="header">\n<div class="inner">\n<div id="logo"><a href="/">\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</a></div>\n<div id="slogon">\xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81</div>\n<div id="witticism">')  # base.html:27
     17      _tmp = home_sentence()  # base.html:27
     18      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:27
     19      else: _tmp = _utf8(str(_tmp))  # base.html:27
     20      _tmp = _utf8(xhtml_escape(_tmp))  # base.html:27
     21      _append(_tmp)  # base.html:27
     22      _append('</div>\n<!--\n<ul class="nav-right">\n</ul>\n-->\n</div>\n</div>\n<div id="container">\n<div class="inner">\n<div class="message alert alert-warn">\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0\xe5\xad\x95\xe8\x82\xb2\xe4\xb8\xad\xef\xbc\x8c\xe6\x97\xb6\xe9\x97\xb4\xe5\xbe\x85\xe5\xae\x9a\xe3\x80\x82\xe8\xb0\xa2\xe8\xb0\xa2\xe6\x82\xa8\xe7\x9a\x84\xe5\x88\xb0\xe8\xae\xbf\xef\xbc\x9a\xef\xbc\x89</div>\n')  # base.html:38
     23      message = get_message()  # base.html:38
     24      _append('\n')  # base.html:39
     25      for message_type in ('error', 'success', 'info', 'warn'):  # base.html:39
     26          _append('\n')  # base.html:40
     27          if message and message_type == message[0]:  # base.html:40
     28              _append('\n<div id="')  # base.html:41
     29              _tmp = message_type  # base.html:41
     30              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     31              else: _tmp = _utf8(str(_tmp))  # base.html:41
     32              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     33              _append(_tmp)  # base.html:41
     34              _append('-message" class="message alert alert-')  # base.html:41
     35              _tmp = message_type  # base.html:41
     36              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     37              else: _tmp = _utf8(str(_tmp))  # base.html:41
     38              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     39              _append(_tmp)  # base.html:41
     40              _append('">')  # base.html:41
     41              _tmp = message[1]  # base.html:41
     42              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     43              else: _tmp = _utf8(str(_tmp))  # base.html:41
     44              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     45              _append(_tmp)  # base.html:41
     46              _append('</div>\n')  # base.html:42
     47          else:  # base.html:42
     48              _append('\n<div id="')  # base.html:43
     49              _tmp = message_type  # base.html:43
     50              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:43
     51              else: _tmp = _utf8(str(_tmp))  # base.html:43
     52              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:43
     53              _append(_tmp)  # base.html:43
     54              _append('-message" class="message alert alert-')  # base.html:43
     55              _tmp = message_type  # base.html:43
     56              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:43
     57              else: _tmp = _utf8(str(_tmp))  # base.html:43
     58              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:43
     59              _append(_tmp)  # base.html:43
     60              _append(' hide"></div>\n')  # base.html:44
     61          _append('\n')  # base.html:45
     62      _append('\n')  # base.html:47
     63      _append('\n<div id="main">\n')  # base.html:50
     64      _append('\n')  # foods.html:4 (via base.html:50)
     65      _append('<div class="box" id="foods">\n<div class="header">')  # partial/foods.html:2 (via foods.html:4, base.html:50)
     66      _tmp = foods_title  # partial/foods.html:2 (via foods.html:4, base.html:50)
     67      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/foods.html:2 (via foods.html:4, base.html:50)
     68      else: _tmp = _utf8(str(_tmp))  # partial/foods.html:2 (via foods.html:4, base.html:50)
     69      _tmp = _utf8(xhtml_escape(_tmp))  # partial/foods.html:2 (via foods.html:4, base.html:50)
     70      _append(_tmp)  # partial/foods.html:2 (via foods.html:4, base.html:50)
     71      _append('</div>\n<div class="body main ul">\n')  # partial/foods.html:4 (via foods.html:4, base.html:50)
     72      for index, food in enumerate(foods):  # partial/foods.html:4 (via foods.html:4, base.html:50)
     73          _append('\n')  # partial/foods.html:5 (via foods.html:4, base.html:50)
     74          creator = food.creator  # partial/foods.html:5 (via foods.html:4, base.html:50)
     75          _append('\n<div class="food-item">\n<div class="header">\n<a class="avatar" href="/food/')  # partial/foods.html:8 (via foods.html:4, base.html:50)
     76          _tmp = food.id  # partial/foods.html:8 (via foods.html:4, base.html:50)
     77          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/foods.html:8 (via foods.html:4, base.html:50)
     78          else: _tmp = _utf8(str(_tmp))  # partial/foods.html:8 (via foods.html:4, base.html:50)
     79          _tmp = _utf8(xhtml_escape(_tmp))  # partial/foods.html:8 (via foods.html:4, base.html:50)
     80          _append(_tmp)  # partial/foods.html:8 (via foods.html:4, base.html:50)
     81          _append('"><img src="')  # partial/foods.html:8 (via foods.html:4, base.html:50)
     82          _tmp = get_avatar_url(creator, 's')  # partial/foods.html:8 (via foods.html:4, base.html:50)
     83          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/foods.html:8 (via foods.html:4, base.html:50)
     84          else: _tmp = _utf8(str(_tmp))  # partial/foods.html:8 (via foods.html:4, base.html:50)
     85          _tmp = _utf8(xhtml_escape(_tmp))  # partial/foods.html:8 (via foods.html:4, base.html:50)
     86          _append(_tmp)  # partial/foods.html:8 (via foods.html:4, base.html:50)
     87          _append('" /> ')  # partial/foods.html:8 (via foods.html:4, base.html:50)
     88          _tmp = food.name  # partial/foods.html:8 (via foods.html:4, base.html:50)
     89          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/foods.html:8 (via foods.html:4, base.html:50)
     90          else: _tmp = _utf8(str(_tmp))  # partial/foods.html:8 (via foods.html:4, base.html:50)
     91          _tmp = _utf8(xhtml_escape(_tmp))  # partial/foods.html:8 (via foods.html:4, base.html:50)
     92          _append(_tmp)  # partial/foods.html:8 (via foods.html:4, base.html:50)
     93          _append('</a>\n</div>\n<div class="body">\n')  # partial/foods.html:11 (via foods.html:4, base.html:50)
     94          for index, food_part in enumerate(food_parts):  # partial/foods.html:11 (via foods.html:4, base.html:50)
     95              _append('\n<div class="food_part">')  # partial/foods.html:12 (via foods.html:4, base.html:50)
     96              _tmp = food_part.name  # partial/foods.html:12 (via foods.html:4, base.html:50)
     97              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/foods.html:12 (via foods.html:4, base.html:50)
     98              else: _tmp = _utf8(str(_tmp))  # partial/foods.html:12 (via foods.html:4, base.html:50)
     99              _tmp = _utf8(xhtml_escape(_tmp))  # partial/foods.html:12 (via foods.html:4, base.html:50)
    100              _append(_tmp)  # partial/foods.html:12 (via foods.html:4, base.html:50)
    101              _append('</div>\n')  # partial/foods.html:13 (via foods.html:4, base.html:50)
    102          _append('\n</div>\n<div class="footer">\n<span class="meta">\n<li><i class="icon-view"></i> ')  # partial/foods.html:18 (via foods.html:4, base.html:50)
    103          _tmp = food.views_count  # partial/foods.html:18 (via foods.html:4, base.html:50)
    104          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/foods.html:18 (via foods.html:4, base.html:50)
    105          else: _tmp = _utf8(str(_tmp))  # partial/foods.html:18 (via foods.html:4, base.html:50)
    106          _tmp = _utf8(xhtml_escape(_tmp))  # partial/foods.html:18 (via foods.html:4, base.html:50)
    107          _append(_tmp)  # partial/foods.html:18 (via foods.html:4, base.html:50)
    108          _append(' | Created:')  # partial/foods.html:18 (via foods.html:4, base.html:50)
    109          _tmp = timesince(food.created)  # partial/foods.html:18 (via foods.html:4, base.html:50)
    110          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/foods.html:18 (via foods.html:4, base.html:50)
    111          else: _tmp = _utf8(str(_tmp))  # partial/foods.html:18 (via foods.html:4, base.html:50)
    112          _tmp = _utf8(xhtml_escape(_tmp))  # partial/foods.html:18 (via foods.html:4, base.html:50)
    113          _append(_tmp)  # partial/foods.html:18 (via foods.html:4, base.html:50)
    114          _append('</li>\n</span>\n<span class="created">\n</span>\n</div>\n</div>\n')  # partial/foods.html:25 (via foods.html:4, base.html:50)
    115          _append('\n')  # partial/foods.html:26 (via foods.html:4, base.html:50)
    116          if index > 0 and (index + 1) % 3 == 0:  # partial/foods.html:26 (via foods.html:4, base.html:50)
    117              _append('\n<div class="clearfix"></div>\n')  # partial/foods.html:28 (via foods.html:4, base.html:50)
    118          _append('\n')  # partial/foods.html:30 (via foods.html:4, base.html:50)
    119      _append('\n')  # partial/foods.html:31 (via foods.html:4, base.html:50)
    120      page_type = 'foods'  # partial/foods.html:31 (via foods.html:4, base.html:50)
    121      _append('\n')  # partial/foods.html:32 (via foods.html:4, base.html:50)
    122      _append('\n')  # partial/pagination.html:3 (via partial/foods.html:32, foods.html:4, base.html:50)
    123      from macros.macro import ADDITIVES_PER_PAGE, USERS_PER_PAGE  # partial/pagination.html:3 (via partial/foods.html:32, foods.html:4, base.html:50)
    124      _append('\n')  # partial/pagination.html:4 (via partial/foods.html:32, foods.html:4, base.html:50)
    125      import math  # partial/pagination.html:4 (via partial/foods.html:32, foods.html:4, base.html:50)
    126      _append('\n')  # partial/pagination.html:6 (via partial/foods.html:32, foods.html:4, base.html:50)
    127      if page_type == 'additives':  # partial/pagination.html:6 (via partial/foods.html:32, foods.html:4, base.html:50)
    128          _append('\n')  # partial/pagination.html:7 (via partial/foods.html:32, foods.html:4, base.html:50)
    129          items_per_page = ADDITIVES_PER_PAGE  # partial/pagination.html:7 (via partial/foods.html:32, foods.html:4, base.html:50)
    130          _append('\n')  # partial/pagination.html:8 (via partial/foods.html:32, foods.html:4, base.html:50)
    131      else:  # partial/pagination.html:8 (via partial/foods.html:32, foods.html:4, base.html:50)
    132          _append('\n')  # partial/pagination.html:9 (via partial/foods.html:32, foods.html:4, base.html:50)
    133          items_per_page = USERS_PER_PAGE  # partial/pagination.html:9 (via partial/foods.html:32, foods.html:4, base.html:50)
    134          _append('\n')  # partial/pagination.html:10 (via partial/foods.html:32, foods.html:4, base.html:50)
    135      _append('\n')  # partial/pagination.html:12 (via partial/foods.html:32, foods.html:4, base.html:50)
    136      total_page = int(math.ceil(float(total_items) / items_per_page))  # partial/pagination.html:12 (via partial/foods.html:32, foods.html:4, base.html:50)
    137      _append('\n')  # partial/pagination.html:14 (via partial/foods.html:32, foods.html:4, base.html:50)
    138      current_page = int(handler.get_argument('page', 1))  # partial/pagination.html:14 (via partial/foods.html:32, foods.html:4, base.html:50)
    139      _append('\n')  # partial/pagination.html:16 (via partial/foods.html:32, foods.html:4, base.html:50)
    140      if current_page <=6:  # partial/pagination.html:16 (via partial/foods.html:32, foods.html:4, base.html:50)
    141          _append('\n')  # partial/pagination.html:17 (via partial/foods.html:32, foods.html:4, base.html:50)
    142          end_page = min(total_page, 10)  # partial/pagination.html:17 (via partial/foods.html:32, foods.html:4, base.html:50)
    143          _append('\n')  # partial/pagination.html:18 (via partial/foods.html:32, foods.html:4, base.html:50)
    144          start_page = 1  # partial/pagination.html:18 (via partial/foods.html:32, foods.html:4, base.html:50)
    145          _append('\n')  # partial/pagination.html:19 (via partial/foods.html:32, foods.html:4, base.html:50)
    146      else:  # partial/pagination.html:19 (via partial/foods.html:32, foods.html:4, base.html:50)
    147          _append('\n')  # partial/pagination.html:20 (via partial/foods.html:32, foods.html:4, base.html:50)
    148          end_page = min(total_page, current_page+4)  # partial/pagination.html:20 (via partial/foods.html:32, foods.html:4, base.html:50)
    149          _append('\n')  # partial/pagination.html:21 (via partial/foods.html:32, foods.html:4, base.html:50)
    150          start_page = current_page - 5  # partial/pagination.html:21 (via partial/foods.html:32, foods.html:4, base.html:50)
    151          _append('\n')  # partial/pagination.html:22 (via partial/foods.html:32, foods.html:4, base.html:50)
    152      _append('\n')  # partial/pagination.html:24 (via partial/foods.html:32, foods.html:4, base.html:50)
    153      if total_page > 1:  # partial/pagination.html:24 (via partial/foods.html:32, foods.html:4, base.html:50)
    154          _append('\n<div class="pagination">\n<ul>\n')  # partial/pagination.html:27 (via partial/foods.html:32, foods.html:4, base.html:50)
    155          if current_page == 1:  # partial/pagination.html:27 (via partial/foods.html:32, foods.html:4, base.html:50)
    156              _append('\n<li class="disabled">\xe2\x86\x90 </li>\n')  # partial/pagination.html:29 (via partial/foods.html:32, foods.html:4, base.html:50)
    157          else:  # partial/pagination.html:29 (via partial/foods.html:32, foods.html:4, base.html:50)
    158              _append('\n<li><a href="')  # partial/pagination.html:30 (via partial/foods.html:32, foods.html:4, base.html:50)
    159              _tmp = page_path  # partial/pagination.html:30 (via partial/foods.html:32, foods.html:4, base.html:50)
    160              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:30 (via partial/foods.html:32, foods.html:4, base.html:50)
    161              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:30 (via partial/foods.html:32, foods.html:4, base.html:50)
    162              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:30 (via partial/foods.html:32, foods.html:4, base.html:50)
    163              _append(_tmp)  # partial/pagination.html:30 (via partial/foods.html:32, foods.html:4, base.html:50)
    164              _append('?page=1">\xe2\x86\x90 </a></li>\n')  # partial/pagination.html:31 (via partial/foods.html:32, foods.html:4, base.html:50)
    165          _append('\n')  # partial/pagination.html:33 (via partial/foods.html:32, foods.html:4, base.html:50)
    166          for i in range(start_page, end_page + 1):  # partial/pagination.html:33 (via partial/foods.html:32, foods.html:4, base.html:50)
    167              _append('\n<li ')  # partial/pagination.html:34 (via partial/foods.html:32, foods.html:4, base.html:50)
    168              if current_page == i:  # partial/pagination.html:34 (via partial/foods.html:32, foods.html:4, base.html:50)
    169                  _append('class="active"')  # partial/pagination.html:34 (via partial/foods.html:32, foods.html:4, base.html:50)
    170              _append('>\n<a href="')  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    171              _tmp = page_path  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    172              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    173              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    174              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    175              _append(_tmp)  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    176              _append('?page=')  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    177              _tmp = i  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    178              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    179              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    180              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    181              _append(_tmp)  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    182              _append('">')  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    183              _tmp = i  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    184              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    185              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    186              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    187              _append(_tmp)  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    188              _append('</a>\n</li>\n')  # partial/pagination.html:37 (via partial/foods.html:32, foods.html:4, base.html:50)
    189          _append('\n')  # partial/pagination.html:39 (via partial/foods.html:32, foods.html:4, base.html:50)
    190          if current_page == total_page:  # partial/pagination.html:39 (via partial/foods.html:32, foods.html:4, base.html:50)
    191              _append('\n<li class="disabled">\xe2\x86\x92 </li>\n')  # partial/pagination.html:41 (via partial/foods.html:32, foods.html:4, base.html:50)
    192          else:  # partial/pagination.html:41 (via partial/foods.html:32, foods.html:4, base.html:50)
    193              _append('\n<li><a href="')  # partial/pagination.html:42 (via partial/foods.html:32, foods.html:4, base.html:50)
    194              _tmp = page_path  # partial/pagination.html:42 (via partial/foods.html:32, foods.html:4, base.html:50)
    195              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:42 (via partial/foods.html:32, foods.html:4, base.html:50)
    196              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:42 (via partial/foods.html:32, foods.html:4, base.html:50)
    197              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:42 (via partial/foods.html:32, foods.html:4, base.html:50)
    198              _append(_tmp)  # partial/pagination.html:42 (via partial/foods.html:32, foods.html:4, base.html:50)
    199              _append('?page=')  # partial/pagination.html:42 (via partial/foods.html:32, foods.html:4, base.html:50)
    200              _tmp = current_page+1  # partial/pagination.html:42 (via partial/foods.html:32, foods.html:4, base.html:50)
    201              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:42 (via partial/foods.html:32, foods.html:4, base.html:50)
    202              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:42 (via partial/foods.html:32, foods.html:4, base.html:50)
    203              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:42 (via partial/foods.html:32, foods.html:4, base.html:50)
    204              _append(_tmp)  # partial/pagination.html:42 (via partial/foods.html:32, foods.html:4, base.html:50)
    205              _append('">\xe2\x86\x92 </a></li>\n')  # partial/pagination.html:43 (via partial/foods.html:32, foods.html:4, base.html:50)
    206          _append('\n</ul>\n</div>\n')  # partial/pagination.html:46 (via partial/foods.html:32, foods.html:4, base.html:50)
    207      _append('\n')  # partial/pagination.html:47 (via partial/foods.html:32, foods.html:4, base.html:50)
    208      _append('\n</div>\n</div>\n')  # partial/foods.html:35 (via foods.html:4, base.html:50)
    209      _append('\n')  # foods.html:5 (via base.html:50)
    210      _append('\n</div>\n<div id="sidebar">\n')  # base.html:54
    211      _append('\n')  # foods.html:8 (via base.html:54)
    212      if current_user:  # partial/sidebar_global.html:1 (via foods.html:8, base.html:54)
    213          _append('\n')  # partial/sidebar_global.html:2 (via foods.html:8, base.html:54)
    214          _append('<div class="upload item ')  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    215          if not current_user.left_upload_count:  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    216              _append('disabled')  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    217          _append('" data-url="/photo/upload" data-title="\xe9\x87\x87\xe9\x9b\x86\xe7\x85\xa7\xe7\x89\x87" >\n<div class="left"></div>\n<div class="center">\n')  # partial/sidebar_upload.html:5 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    218          if current_user.left_upload_count:  # partial/sidebar_upload.html:5 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    219              _append('\n\xe9\x87\x87\xe9\x9b\x86\xe7\x85\xa7\xe7\x89\x87(\xe6\x9c\xac\xe5\x91\xa8\xe8\xbf\x98\xe5\x89\xa9')  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    220              _tmp = current_user.left_upload_count  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    221              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    222              else: _tmp = _utf8(str(_tmp))  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    223              _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    224              _append(_tmp)  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    225              _append('\xe5\xbc\xa0)\n')  # partial/sidebar_upload.html:7 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    226          else:  # partial/sidebar_upload.html:7 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    227              _append('\n\xe6\x9c\xac\xe5\x91\xa8\xe7\x9a\x84\xe9\x87\x87\xe9\x9b\x86\xe4\xbd\x99\xe9\xa2\x9d\xe5\xb7\xb2\xe7\x94\xa8\xe5\xae\x8c\xe4\xba\x86\n')  # partial/sidebar_upload.html:9 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    228          _append('\n</div>\n<div class="right"></div>\n</div>\n')  # partial/sidebar_upload.html:13 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    229          _append('\n')  # partial/sidebar_global.html:3 (via foods.html:8, base.html:54)
    230          _append('<div class="box" id="panel-me">\n<div class="header"><a class="right" href="/logout">\xe7\x99\xbb\xe5\x87\xba</a>\xe6\x88\x91\xe7\x9a\x84\xe4\xbf\xa1\xe6\x81\xaf</div>\n<div class="body">\n<div class="me">\n<a class="settings item" href="/settings" data-title="\xe8\xae\xbe\xe7\xbd\xae" data-url="/settings">\xe8\xae\xbe\xe7\xbd\xae</a>\n<a href="/user/')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    231          _tmp = current_user.username  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    232          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    233          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    234          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    235          _append(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    236          _append('"><img class="avatar" src="')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    237          _tmp = get_avatar_url(current_user, 's')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    238          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    239          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    240          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    241          _append(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    242          _append('" /></a>\n<a href="/user/')  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    243          _tmp = current_user.username  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    244          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    245          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    246          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    247          _append(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    248          _append('">')  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    249          _tmp = current_user.fullname  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    250          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    251          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    252          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    253          _append(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    254          _append('</a>\n<i class="level icon-level')  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    255          _tmp = current_user.level  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    256          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    257          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    258          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    259          _append(_tmp)  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    260          _append('"></i>\n</div>\n<div class="follow">\n<div class="following item" data-title="\xe6\x88\x91\xe5\x85\xb3\xe6\xb3\xa8\xe7\x9a\x84\xe4\xba\xba" data-url="/mine/following">\n<h3 class="anchor">')  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    261          _tmp = current_user.following_count  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    262          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    263          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    264          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    265          _append(_tmp)  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    266          _append('</h3>\n<span>following</span>\n</div>\n<div class="follower item" data-title="\xe5\x85\xb3\xe6\xb3\xa8\xe6\x88\x91\xe7\x9a\x84\xe4\xba\xba" data-url="/mine/follower">\n<h3 class="anchor">')  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    267          _tmp = current_user.follower_count  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    268          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    269          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    270          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    271          _append(_tmp)  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    272          _append('</h3>\n<span>followers</span>\n</div>\n</div>\n<ul>\n<li class="item" data-url="/mine/invite" data-title="\xe9\x82\x80\xe8\xaf\xb7\xe6\x9c\x8b\xe5\x8f\x8b\xe5\x8a\xa0\xe5\x85\xa5"> <span class="num">')  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    273          _tmp = current_user.unused_invite_key_count  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    274          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    275          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    276          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    277          _append(_tmp)  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    278          _append('</span><span class="anchor">\xe9\x82\x80\xe8\xaf\xb7\xe6\x9c\x8b\xe5\x8f\x8b\xe5\x8a\xa0\xe5\x85\xa5</span></li>\n<li class="item" data-title="\xe6\x88\x91\xe6\xb7\xbb\xe5\x8a\xa0\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87" data-url="/mine/photos"> <span class="num">')  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    279          _tmp = current_user.photo_count  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    280          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    281          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    282          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    283          _append(_tmp)  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    284          _append('</span><span class="anchor">\xe6\x88\x91\xe6\xb7\xbb\xe5\x8a\xa0\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87</span></li>\n<li class="item" data-title="\xe6\x88\x91\xe5\x96\x9c\xe6\xac\xa2\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87" data-url="/mine/likes_photos"><span class="num">')  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    285          _tmp = current_user.likes_count  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    286          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    287          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    288          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    289          _append(_tmp)  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    290          _append('</span><span class="anchor">\xe6\x88\x91\xe5\x96\x9c\xe6\xac\xa2\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87</span> </li>\n</ul>\n</div>\n</div>\n')  # partial/sidebar_me.html:27 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    291          _append('\n')  # partial/sidebar_global.html:4 (via foods.html:8, base.html:54)
    292      else:  # partial/sidebar_global.html:4 (via foods.html:8, base.html:54)
    293          _append('\n')  # partial/sidebar_global.html:5 (via foods.html:8, base.html:54)
    294          _append('<div class="box" id="panel-about">\n<div class="header">\xe5\x85\xb3\xe4\xba\x8e\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</div>\n<div class="body">\n<p>\xe5\x85\xb3\xe6\xb3\xa8\xe9\xa3\x9f\xe5\x93\x81\xe5\xae\x89\xe5\x85\xa8\xef\xbc\x8c\xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe4\xb8\x96\xe7\x95\x8c</p>\n<p>\xe6\x89\x80\xe6\x9c\x89\xe9\xa3\x9f\xe5\x93\x81\xe5\x92\x8c\xe6\xb7\xbb\xe5\x8a\xa0\xe5\x89\x82\xe8\xb5\x84\xe6\x96\x99\xe6\x9d\xa5\xe8\x87\xaa\xe4\xba\x8eiearth-\xe7\x88\xb1\xe5\x9c\xb0\xe7\x90\x83\xe7\x8e\xaf\xe4\xbf\x9d\xe6\x9c\xba\xe6\x9e\x84</p>\n</div>\n</div>\n')  # partial/sidebar_about.html:8 (via partial/sidebar_global.html:5, foods.html:8, base.html:54)
    295          _append('\n')  # partial/sidebar_global.html:6 (via foods.html:8, base.html:54)
    296          _append('<div class="box" id="panel-login">\n<div class="header">\xe7\x99\xbb\xe5\x85\xa5\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</div>\n<div class="body">\n<form action="/login" method="POST">\n<div class="section">\n<input type="TEXT" name="username" placeholder="\xe7\x94\xa8\xe6\x88\xb7\xe5\x90\x8d/Email" />\n</div>\n<div class="section">\n<input type="PASSWORD" name="password" placeholder="\xe5\xaf\x86\xe7\xa0\x81" />\n</div>\n<div class="section">\n<input type="SUBMIT" value="\xe7\x99\xbb\xe5\x85\xa5" class="btn primary-btn" />\n<span class="tip">\xe4\xbc\x9a\xe8\xae\xb0\xe4\xbd\x8f\xe7\x99\xbb\xe5\x85\xa5\xe4\xb8\x80\xe4\xb8\xaa\xe6\x9c\x88</span>\n</div>\n</form>\n<div class="alert alert-info">\xe5\x86\x85\xe6\xb5\x8b\xe4\xb8\xad\xef\xbc\x8c\xe5\x8f\xaa\xe6\x8e\xa5\xe5\x8f\x97\xe9\x82\x80\xe8\xaf\xb7\xe6\xb3\xa8\xe5\x86\x8c</div>\n</div>\n</div>\n')  # partial/sidebar_login.html:19 (via partial/sidebar_global.html:6, foods.html:8, base.html:54)
    297          _append('\n')  # partial/sidebar_global.html:8 (via foods.html:8, base.html:54)
    298      _append('\n')  # partial/sidebar_global.html:10 (via foods.html:8, base.html:54)
    299      _append('<div class="box">\n<div class="header">\xe6\xb5\x8f\xe8\xa7\x88\xe9\xa3\x9f\xe5\x93\x81</div>\n<div class="body">\n<ul>\n<a href="/foods/hot">\n<li data-title="\xe7\x83\xad\xe9\x97\xa8\xe9\xa3\x9f\xe5\x93\x81"><span class="anchor">\xe7\x83\xad\xe9\x97\xa8\xe9\xa3\x9f\xe5\x93\x81</span></li>\n</a>\n<a href="/foods/latest">\n<li data-title="\xe6\x9c\x80\xe6\x96\xb0\xe9\xa3\x9f\xe5\x93\x81"><span class="anchor">\xe6\x9c\x80\xe6\x96\xb0\xe9\xa3\x9f\xe5\x93\x81</span></li>\n</a>\n</ul>\n</div>\n</div>\n')  # partial/sidebar_food_nav.html:15 (via partial/sidebar_global.html:10, foods.html:8, base.html:54)
    300      _append('\n')  # partial/sidebar_global.html:11 (via foods.html:8, base.html:54)
    301      import models  # partial/sidebar_hot_searchs.html:1 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    302      _append('\n')  # partial/sidebar_hot_searchs.html:2 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    303      hot_searchs = models.Additive_Search().hot_searchs  # partial/sidebar_hot_searchs.html:2 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    304      _append('\n<div class="box" id="panel-searchs">\n<div class="header">\xe7\x83\xad\xe9\x97\xa8\xe6\x90\x9c\xe7\xb4\xa2</div>\n<div class="body">\n<ul>\n')  # partial/sidebar_hot_searchs.html:8 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    305      for search in hot_searchs:  # partial/sidebar_hot_searchs.html:8 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    306          _append('\n<!--\n<a class="avatar" href="/additive/')  # partial/sidebar_hot_searchs.html:10 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    307          _tmp = search[1]  # partial/sidebar_hot_searchs.html:10 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    308          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_hot_searchs.html:10 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    309          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_hot_searchs.html:10 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    310          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_hot_searchs.html:10 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    311          _append(_tmp)  # partial/sidebar_hot_searchs.html:10 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    312          _append('">\n-->\n<a class="avatar" href="/additive/')  # partial/sidebar_hot_searchs.html:12 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    313          _tmp = search[1]  # partial/sidebar_hot_searchs.html:12 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    314          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_hot_searchs.html:12 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    315          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_hot_searchs.html:12 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    316          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_hot_searchs.html:12 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    317          _append(_tmp)  # partial/sidebar_hot_searchs.html:12 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    318          _append('">\n<li>\n')  # partial/sidebar_hot_searchs.html:14 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    319          _tmp = search[0]  # partial/sidebar_hot_searchs.html:14 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    320          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_hot_searchs.html:14 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    321          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_hot_searchs.html:14 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    322          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_hot_searchs.html:14 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    323          _append(_tmp)  # partial/sidebar_hot_searchs.html:14 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    324          _append('\n</li>\n<!--\n<li class="item">\n<span class="anchor">')  # partial/sidebar_hot_searchs.html:18 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    325          _tmp = search[0]  # partial/sidebar_hot_searchs.html:18 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    326          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_hot_searchs.html:18 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    327          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_hot_searchs.html:18 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    328          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_hot_searchs.html:18 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    329          _append(_tmp)  # partial/sidebar_hot_searchs.html:18 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    330          _append('</span>\n</li>\n-->\n</a>\n')  # partial/sidebar_hot_searchs.html:22 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    331      _append('\n</ul>\n</div>\n</div>\n')  # partial/sidebar_hot_searchs.html:26 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    332      _append('\n')  # partial/sidebar_global.html:12 (via foods.html:8, base.html:54)
    333      _append('\n')  # foods.html:9 (via base.html:54)
    334      _append('\n</div>\n</div>\n</div>\n<div id="footer">\n<div class="inner">\n<div class="right">\n<span class="belief">make the world a little better and easier</span>\n</div>\n<div class="left">\n<ul>\n<li><a href="/about">\xe5\x85\xb3\xe4\xba\x8e</a> <!--<span class="divider">/</span>--></li>\n<!--<li><a href="/feedback">\xe5\x8f\x8d\xe9\xa6\x88</a> <span class="divider">/</span></li>-->\n<!--<li><a href="/blog">\xe6\x97\xa5\xe5\xbf\x97</a></li>-->\n</ul>\n</div>\n</div>\n</div>\n<script type="text/javascript">\nvar _gaq = _gaq || [];\n_gaq.push([\'_setAccount\', \'UA-1281124-23\']);\n_gaq.push([\'_trackPageview\']);\n(function() {\nvar ga = document.createElement(\'script\'); ga.type = \'text/javascript\'; ga.async = true;\nga.src = (\'https:\' == document.location.protocol ? \'https://ssl\' : \'http://www\') + \'.google-analytics.com/ga.js\';\nvar s = document.getElementsByTagName(\'script\')[0]; s.parentNode.insertBefore(ga, s);\n})();\n</script>\n<!-- love your mom! -->\n</body>\n<meta name="description" content="\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - " />\n')  # base.html:89
    335      return _utf8('').join(_buffer)  # base.html:0
[E 120723 08:40:22 web:1031] Uncaught exception GET /foods/hot (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/foods/hot', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.100', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cookie': '__utma=148685175.1070362998.1342935208.1342948559.1343001966.4; __utmb=148685175.15.10.1343001966; __utmc=148685175; __utmz=148685175.1342935208.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)', 'X-Real-Ip': '192.168.0.100', 'Referer': 'http://192.168.0.189/'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "src/sites/www/handlers/food.py", line 115, in get
        return self._render('hot')
      File "src/sites/www/handlers/base.py", line 161, in _render
        current_food = food,
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 474, in render
        html = self.render_string(template_name, **kwargs)
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 586, in render_string
        return t.generate(**args)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 253, in generate
        return execute()
      File "foods_html.generated.py", line 94, in _execute
        for index, food_part in enumerate(food_parts):  # partial/foods.html:11 (via foods.html:4, base.html:50)
    NameError: global name 'food_parts' is not defined
[E 120723 08:40:22 web:1393] 500 GET /foods/hot (127.0.0.1) 512.29ms
[W 120723 08:40:22 web:1393] 404 GET /favicon.ico (127.0.0.1) 4.00ms
[I 120723 08:42:59 web:1393] 200 GET / (127.0.0.1) 1444.81ms
[E 120723 08:43:02 template:256] foods.html code:
      1  def _execute():  # base.html:0
      2      _buffer = []  # base.html:0
      3      _append = _buffer.append  # base.html:0
      4      _append('<!doctype html>\n<head>\n<meta charset="UTF-8" />\n<meta content="True" name="HandheldFriendly" />\n<meta content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0; name=\'viewport\'" />\n<title>\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - \xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81')  # base.html:6
      5      _append('</title>\n<link rel="stylesheet" type="text/css" media="screen" href="/static/css/vendor/jquery.fancybox.css" />\n<link rel="stylesheet" type="text/css" media="screen" href="/static/css/main.css" />\n<link rel="shortcut icon" href="/static/img/favicon.ico" />\n<link rel="canonical" href="http://wuditoo.com/" />\n<meta name="description" content="\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - \xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81" />\n<script src="/static/js/vendor/jquery.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.history.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.fancybox.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.scrollTo.min.js" type="text/javascript"></script>\n')  # base.html:16
      6      _append('\n<script type="text/javascript">\n')  # foods.html:13 (via base.html:16)
      7      if current_food:  # foods.html:13 (via base.html:16)
      8          _append('\nmeta_food = {\nurl: "/food/')  # foods.html:15 (via base.html:16)
      9          _tmp = current_food.id  # foods.html:15 (via base.html:16)
     10          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # foods.html:15 (via base.html:16)
     11          else: _tmp = _utf8(str(_tmp))  # foods.html:15 (via base.html:16)
     12          _tmp = _utf8(xhtml_escape(_tmp))  # foods.html:15 (via base.html:16)
     13          _append(_tmp)  # foods.html:15 (via base.html:16)
     14          _append('",\n}\n')  # foods.html:17 (via base.html:16)
     15      _append('\n</script>\n')  # foods.html:19 (via base.html:16)
     16      _append('\n<script src="/static/js/main.js" type="text/javascript"></script>\n</head>\n<!--[if IE 7 ]><body class="ie7"><![endif]-->\n<!--[if gt IE 7]><body class="ie"><![endif]-->\n<!--[if !IE]><body><![endif]-->\n<div id="header">\n<div class="inner">\n<div id="logo"><a href="/">\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</a></div>\n<div id="slogon">\xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81</div>\n<div id="witticism">')  # base.html:27
     17      _tmp = home_sentence()  # base.html:27
     18      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:27
     19      else: _tmp = _utf8(str(_tmp))  # base.html:27
     20      _tmp = _utf8(xhtml_escape(_tmp))  # base.html:27
     21      _append(_tmp)  # base.html:27
     22      _append('</div>\n<!--\n<ul class="nav-right">\n</ul>\n-->\n</div>\n</div>\n<div id="container">\n<div class="inner">\n<div class="message alert alert-warn">\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0\xe5\xad\x95\xe8\x82\xb2\xe4\xb8\xad\xef\xbc\x8c\xe6\x97\xb6\xe9\x97\xb4\xe5\xbe\x85\xe5\xae\x9a\xe3\x80\x82\xe8\xb0\xa2\xe8\xb0\xa2\xe6\x82\xa8\xe7\x9a\x84\xe5\x88\xb0\xe8\xae\xbf\xef\xbc\x9a\xef\xbc\x89</div>\n')  # base.html:38
     23      message = get_message()  # base.html:38
     24      _append('\n')  # base.html:39
     25      for message_type in ('error', 'success', 'info', 'warn'):  # base.html:39
     26          _append('\n')  # base.html:40
     27          if message and message_type == message[0]:  # base.html:40
     28              _append('\n<div id="')  # base.html:41
     29              _tmp = message_type  # base.html:41
     30              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     31              else: _tmp = _utf8(str(_tmp))  # base.html:41
     32              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     33              _append(_tmp)  # base.html:41
     34              _append('-message" class="message alert alert-')  # base.html:41
     35              _tmp = message_type  # base.html:41
     36              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     37              else: _tmp = _utf8(str(_tmp))  # base.html:41
     38              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     39              _append(_tmp)  # base.html:41
     40              _append('">')  # base.html:41
     41              _tmp = message[1]  # base.html:41
     42              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     43              else: _tmp = _utf8(str(_tmp))  # base.html:41
     44              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     45              _append(_tmp)  # base.html:41
     46              _append('</div>\n')  # base.html:42
     47          else:  # base.html:42
     48              _append('\n<div id="')  # base.html:43
     49              _tmp = message_type  # base.html:43
     50              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:43
     51              else: _tmp = _utf8(str(_tmp))  # base.html:43
     52              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:43
     53              _append(_tmp)  # base.html:43
     54              _append('-message" class="message alert alert-')  # base.html:43
     55              _tmp = message_type  # base.html:43
     56              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:43
     57              else: _tmp = _utf8(str(_tmp))  # base.html:43
     58              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:43
     59              _append(_tmp)  # base.html:43
     60              _append(' hide"></div>\n')  # base.html:44
     61          _append('\n')  # base.html:45
     62      _append('\n')  # base.html:47
     63      _append('\n<div id="main">\n')  # base.html:50
     64      _append('\n')  # foods.html:4 (via base.html:50)
     65      _append('<div class="box" id="foods">\n<div class="header">')  # partial/foods.html:2 (via foods.html:4, base.html:50)
     66      _tmp = foods_title  # partial/foods.html:2 (via foods.html:4, base.html:50)
     67      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/foods.html:2 (via foods.html:4, base.html:50)
     68      else: _tmp = _utf8(str(_tmp))  # partial/foods.html:2 (via foods.html:4, base.html:50)
     69      _tmp = _utf8(xhtml_escape(_tmp))  # partial/foods.html:2 (via foods.html:4, base.html:50)
     70      _append(_tmp)  # partial/foods.html:2 (via foods.html:4, base.html:50)
     71      _append('</div>\n<div class="body main ul">\n')  # partial/foods.html:4 (via foods.html:4, base.html:50)
     72      for index, food in enumerate(foods):  # partial/foods.html:4 (via foods.html:4, base.html:50)
     73          _append('\n')  # partial/foods.html:5 (via foods.html:4, base.html:50)
     74          creator = food.creator  # partial/foods.html:5 (via foods.html:4, base.html:50)
     75          _append('\n<div class="food-item">\n<div class="header">\n<a class="avatar" href="/food/')  # partial/foods.html:8 (via foods.html:4, base.html:50)
     76          _tmp = food.id  # partial/foods.html:8 (via foods.html:4, base.html:50)
     77          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/foods.html:8 (via foods.html:4, base.html:50)
     78          else: _tmp = _utf8(str(_tmp))  # partial/foods.html:8 (via foods.html:4, base.html:50)
     79          _tmp = _utf8(xhtml_escape(_tmp))  # partial/foods.html:8 (via foods.html:4, base.html:50)
     80          _append(_tmp)  # partial/foods.html:8 (via foods.html:4, base.html:50)
     81          _append('"><img src="')  # partial/foods.html:8 (via foods.html:4, base.html:50)
     82          _tmp = get_avatar_url(creator, 's')  # partial/foods.html:8 (via foods.html:4, base.html:50)
     83          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/foods.html:8 (via foods.html:4, base.html:50)
     84          else: _tmp = _utf8(str(_tmp))  # partial/foods.html:8 (via foods.html:4, base.html:50)
     85          _tmp = _utf8(xhtml_escape(_tmp))  # partial/foods.html:8 (via foods.html:4, base.html:50)
     86          _append(_tmp)  # partial/foods.html:8 (via foods.html:4, base.html:50)
     87          _append('" /> ')  # partial/foods.html:8 (via foods.html:4, base.html:50)
     88          _tmp = food.name  # partial/foods.html:8 (via foods.html:4, base.html:50)
     89          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/foods.html:8 (via foods.html:4, base.html:50)
     90          else: _tmp = _utf8(str(_tmp))  # partial/foods.html:8 (via foods.html:4, base.html:50)
     91          _tmp = _utf8(xhtml_escape(_tmp))  # partial/foods.html:8 (via foods.html:4, base.html:50)
     92          _append(_tmp)  # partial/foods.html:8 (via foods.html:4, base.html:50)
     93          _append('</a>\n</div>\n<div class="body">\n')  # partial/foods.html:11 (via foods.html:4, base.html:50)
     94          for index, food_part in enumerate(food_parts):  # partial/foods.html:11 (via foods.html:4, base.html:50)
     95              _append('\n<div class="food_part">')  # partial/foods.html:12 (via foods.html:4, base.html:50)
     96              _tmp = food_part.name  # partial/foods.html:12 (via foods.html:4, base.html:50)
     97              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/foods.html:12 (via foods.html:4, base.html:50)
     98              else: _tmp = _utf8(str(_tmp))  # partial/foods.html:12 (via foods.html:4, base.html:50)
     99              _tmp = _utf8(xhtml_escape(_tmp))  # partial/foods.html:12 (via foods.html:4, base.html:50)
    100              _append(_tmp)  # partial/foods.html:12 (via foods.html:4, base.html:50)
    101              _append('</div>\n')  # partial/foods.html:13 (via foods.html:4, base.html:50)
    102          _append('\n</div>\n<div class="footer">\n<span class="meta">\n<li><i class="icon-view"></i> ')  # partial/foods.html:18 (via foods.html:4, base.html:50)
    103          _tmp = food.views_count  # partial/foods.html:18 (via foods.html:4, base.html:50)
    104          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/foods.html:18 (via foods.html:4, base.html:50)
    105          else: _tmp = _utf8(str(_tmp))  # partial/foods.html:18 (via foods.html:4, base.html:50)
    106          _tmp = _utf8(xhtml_escape(_tmp))  # partial/foods.html:18 (via foods.html:4, base.html:50)
    107          _append(_tmp)  # partial/foods.html:18 (via foods.html:4, base.html:50)
    108          _append(' | Created:')  # partial/foods.html:18 (via foods.html:4, base.html:50)
    109          _tmp = timesince(food.created)  # partial/foods.html:18 (via foods.html:4, base.html:50)
    110          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/foods.html:18 (via foods.html:4, base.html:50)
    111          else: _tmp = _utf8(str(_tmp))  # partial/foods.html:18 (via foods.html:4, base.html:50)
    112          _tmp = _utf8(xhtml_escape(_tmp))  # partial/foods.html:18 (via foods.html:4, base.html:50)
    113          _append(_tmp)  # partial/foods.html:18 (via foods.html:4, base.html:50)
    114          _append('</li>\n</span>\n<span class="created">\n</span>\n</div>\n</div>\n')  # partial/foods.html:25 (via foods.html:4, base.html:50)
    115          _append('\n')  # partial/foods.html:26 (via foods.html:4, base.html:50)
    116          if index > 0 and (index + 1) % 3 == 0:  # partial/foods.html:26 (via foods.html:4, base.html:50)
    117              _append('\n<div class="clearfix"></div>\n')  # partial/foods.html:28 (via foods.html:4, base.html:50)
    118          _append('\n')  # partial/foods.html:30 (via foods.html:4, base.html:50)
    119      _append('\n')  # partial/foods.html:31 (via foods.html:4, base.html:50)
    120      page_type = 'foods'  # partial/foods.html:31 (via foods.html:4, base.html:50)
    121      _append('\n')  # partial/foods.html:32 (via foods.html:4, base.html:50)
    122      _append('\n')  # partial/pagination.html:3 (via partial/foods.html:32, foods.html:4, base.html:50)
    123      from macros.macro import ADDITIVES_PER_PAGE, USERS_PER_PAGE  # partial/pagination.html:3 (via partial/foods.html:32, foods.html:4, base.html:50)
    124      _append('\n')  # partial/pagination.html:4 (via partial/foods.html:32, foods.html:4, base.html:50)
    125      import math  # partial/pagination.html:4 (via partial/foods.html:32, foods.html:4, base.html:50)
    126      _append('\n')  # partial/pagination.html:6 (via partial/foods.html:32, foods.html:4, base.html:50)
    127      if page_type == 'additives':  # partial/pagination.html:6 (via partial/foods.html:32, foods.html:4, base.html:50)
    128          _append('\n')  # partial/pagination.html:7 (via partial/foods.html:32, foods.html:4, base.html:50)
    129          items_per_page = ADDITIVES_PER_PAGE  # partial/pagination.html:7 (via partial/foods.html:32, foods.html:4, base.html:50)
    130          _append('\n')  # partial/pagination.html:8 (via partial/foods.html:32, foods.html:4, base.html:50)
    131      else:  # partial/pagination.html:8 (via partial/foods.html:32, foods.html:4, base.html:50)
    132          _append('\n')  # partial/pagination.html:9 (via partial/foods.html:32, foods.html:4, base.html:50)
    133          items_per_page = USERS_PER_PAGE  # partial/pagination.html:9 (via partial/foods.html:32, foods.html:4, base.html:50)
    134          _append('\n')  # partial/pagination.html:10 (via partial/foods.html:32, foods.html:4, base.html:50)
    135      _append('\n')  # partial/pagination.html:12 (via partial/foods.html:32, foods.html:4, base.html:50)
    136      total_page = int(math.ceil(float(total_items) / items_per_page))  # partial/pagination.html:12 (via partial/foods.html:32, foods.html:4, base.html:50)
    137      _append('\n')  # partial/pagination.html:14 (via partial/foods.html:32, foods.html:4, base.html:50)
    138      current_page = int(handler.get_argument('page', 1))  # partial/pagination.html:14 (via partial/foods.html:32, foods.html:4, base.html:50)
    139      _append('\n')  # partial/pagination.html:16 (via partial/foods.html:32, foods.html:4, base.html:50)
    140      if current_page <=6:  # partial/pagination.html:16 (via partial/foods.html:32, foods.html:4, base.html:50)
    141          _append('\n')  # partial/pagination.html:17 (via partial/foods.html:32, foods.html:4, base.html:50)
    142          end_page = min(total_page, 10)  # partial/pagination.html:17 (via partial/foods.html:32, foods.html:4, base.html:50)
    143          _append('\n')  # partial/pagination.html:18 (via partial/foods.html:32, foods.html:4, base.html:50)
    144          start_page = 1  # partial/pagination.html:18 (via partial/foods.html:32, foods.html:4, base.html:50)
    145          _append('\n')  # partial/pagination.html:19 (via partial/foods.html:32, foods.html:4, base.html:50)
    146      else:  # partial/pagination.html:19 (via partial/foods.html:32, foods.html:4, base.html:50)
    147          _append('\n')  # partial/pagination.html:20 (via partial/foods.html:32, foods.html:4, base.html:50)
    148          end_page = min(total_page, current_page+4)  # partial/pagination.html:20 (via partial/foods.html:32, foods.html:4, base.html:50)
    149          _append('\n')  # partial/pagination.html:21 (via partial/foods.html:32, foods.html:4, base.html:50)
    150          start_page = current_page - 5  # partial/pagination.html:21 (via partial/foods.html:32, foods.html:4, base.html:50)
    151          _append('\n')  # partial/pagination.html:22 (via partial/foods.html:32, foods.html:4, base.html:50)
    152      _append('\n')  # partial/pagination.html:24 (via partial/foods.html:32, foods.html:4, base.html:50)
    153      if total_page > 1:  # partial/pagination.html:24 (via partial/foods.html:32, foods.html:4, base.html:50)
    154          _append('\n<div class="pagination">\n<ul>\n')  # partial/pagination.html:27 (via partial/foods.html:32, foods.html:4, base.html:50)
    155          if current_page == 1:  # partial/pagination.html:27 (via partial/foods.html:32, foods.html:4, base.html:50)
    156              _append('\n<li class="disabled">\xe2\x86\x90 </li>\n')  # partial/pagination.html:29 (via partial/foods.html:32, foods.html:4, base.html:50)
    157          else:  # partial/pagination.html:29 (via partial/foods.html:32, foods.html:4, base.html:50)
    158              _append('\n<li><a href="')  # partial/pagination.html:30 (via partial/foods.html:32, foods.html:4, base.html:50)
    159              _tmp = page_path  # partial/pagination.html:30 (via partial/foods.html:32, foods.html:4, base.html:50)
    160              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:30 (via partial/foods.html:32, foods.html:4, base.html:50)
    161              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:30 (via partial/foods.html:32, foods.html:4, base.html:50)
    162              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:30 (via partial/foods.html:32, foods.html:4, base.html:50)
    163              _append(_tmp)  # partial/pagination.html:30 (via partial/foods.html:32, foods.html:4, base.html:50)
    164              _append('?page=1">\xe2\x86\x90 </a></li>\n')  # partial/pagination.html:31 (via partial/foods.html:32, foods.html:4, base.html:50)
    165          _append('\n')  # partial/pagination.html:33 (via partial/foods.html:32, foods.html:4, base.html:50)
    166          for i in range(start_page, end_page + 1):  # partial/pagination.html:33 (via partial/foods.html:32, foods.html:4, base.html:50)
    167              _append('\n<li ')  # partial/pagination.html:34 (via partial/foods.html:32, foods.html:4, base.html:50)
    168              if current_page == i:  # partial/pagination.html:34 (via partial/foods.html:32, foods.html:4, base.html:50)
    169                  _append('class="active"')  # partial/pagination.html:34 (via partial/foods.html:32, foods.html:4, base.html:50)
    170              _append('>\n<a href="')  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    171              _tmp = page_path  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    172              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    173              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    174              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    175              _append(_tmp)  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    176              _append('?page=')  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    177              _tmp = i  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    178              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    179              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    180              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    181              _append(_tmp)  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    182              _append('">')  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    183              _tmp = i  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    184              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    185              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    186              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    187              _append(_tmp)  # partial/pagination.html:35 (via partial/foods.html:32, foods.html:4, base.html:50)
    188              _append('</a>\n</li>\n')  # partial/pagination.html:37 (via partial/foods.html:32, foods.html:4, base.html:50)
    189          _append('\n')  # partial/pagination.html:39 (via partial/foods.html:32, foods.html:4, base.html:50)
    190          if current_page == total_page:  # partial/pagination.html:39 (via partial/foods.html:32, foods.html:4, base.html:50)
    191              _append('\n<li class="disabled">\xe2\x86\x92 </li>\n')  # partial/pagination.html:41 (via partial/foods.html:32, foods.html:4, base.html:50)
    192          else:  # partial/pagination.html:41 (via partial/foods.html:32, foods.html:4, base.html:50)
    193              _append('\n<li><a href="')  # partial/pagination.html:42 (via partial/foods.html:32, foods.html:4, base.html:50)
    194              _tmp = page_path  # partial/pagination.html:42 (via partial/foods.html:32, foods.html:4, base.html:50)
    195              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:42 (via partial/foods.html:32, foods.html:4, base.html:50)
    196              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:42 (via partial/foods.html:32, foods.html:4, base.html:50)
    197              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:42 (via partial/foods.html:32, foods.html:4, base.html:50)
    198              _append(_tmp)  # partial/pagination.html:42 (via partial/foods.html:32, foods.html:4, base.html:50)
    199              _append('?page=')  # partial/pagination.html:42 (via partial/foods.html:32, foods.html:4, base.html:50)
    200              _tmp = current_page+1  # partial/pagination.html:42 (via partial/foods.html:32, foods.html:4, base.html:50)
    201              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:42 (via partial/foods.html:32, foods.html:4, base.html:50)
    202              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:42 (via partial/foods.html:32, foods.html:4, base.html:50)
    203              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:42 (via partial/foods.html:32, foods.html:4, base.html:50)
    204              _append(_tmp)  # partial/pagination.html:42 (via partial/foods.html:32, foods.html:4, base.html:50)
    205              _append('">\xe2\x86\x92 </a></li>\n')  # partial/pagination.html:43 (via partial/foods.html:32, foods.html:4, base.html:50)
    206          _append('\n</ul>\n</div>\n')  # partial/pagination.html:46 (via partial/foods.html:32, foods.html:4, base.html:50)
    207      _append('\n')  # partial/pagination.html:47 (via partial/foods.html:32, foods.html:4, base.html:50)
    208      _append('\n</div>\n</div>\n')  # partial/foods.html:35 (via foods.html:4, base.html:50)
    209      _append('\n')  # foods.html:5 (via base.html:50)
    210      _append('\n</div>\n<div id="sidebar">\n')  # base.html:54
    211      _append('\n')  # foods.html:8 (via base.html:54)
    212      if current_user:  # partial/sidebar_global.html:1 (via foods.html:8, base.html:54)
    213          _append('\n')  # partial/sidebar_global.html:2 (via foods.html:8, base.html:54)
    214          _append('<div class="upload item ')  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    215          if not current_user.left_upload_count:  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    216              _append('disabled')  # partial/sidebar_upload.html:1 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    217          _append('" data-url="/photo/upload" data-title="\xe9\x87\x87\xe9\x9b\x86\xe7\x85\xa7\xe7\x89\x87" >\n<div class="left"></div>\n<div class="center">\n')  # partial/sidebar_upload.html:5 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    218          if current_user.left_upload_count:  # partial/sidebar_upload.html:5 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    219              _append('\n\xe9\x87\x87\xe9\x9b\x86\xe7\x85\xa7\xe7\x89\x87(\xe6\x9c\xac\xe5\x91\xa8\xe8\xbf\x98\xe5\x89\xa9')  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    220              _tmp = current_user.left_upload_count  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    221              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    222              else: _tmp = _utf8(str(_tmp))  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    223              _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    224              _append(_tmp)  # partial/sidebar_upload.html:6 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    225              _append('\xe5\xbc\xa0)\n')  # partial/sidebar_upload.html:7 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    226          else:  # partial/sidebar_upload.html:7 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    227              _append('\n\xe6\x9c\xac\xe5\x91\xa8\xe7\x9a\x84\xe9\x87\x87\xe9\x9b\x86\xe4\xbd\x99\xe9\xa2\x9d\xe5\xb7\xb2\xe7\x94\xa8\xe5\xae\x8c\xe4\xba\x86\n')  # partial/sidebar_upload.html:9 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    228          _append('\n</div>\n<div class="right"></div>\n</div>\n')  # partial/sidebar_upload.html:13 (via partial/sidebar_global.html:2, foods.html:8, base.html:54)
    229          _append('\n')  # partial/sidebar_global.html:3 (via foods.html:8, base.html:54)
    230          _append('<div class="box" id="panel-me">\n<div class="header"><a class="right" href="/logout">\xe7\x99\xbb\xe5\x87\xba</a>\xe6\x88\x91\xe7\x9a\x84\xe4\xbf\xa1\xe6\x81\xaf</div>\n<div class="body">\n<div class="me">\n<a class="settings item" href="/settings" data-title="\xe8\xae\xbe\xe7\xbd\xae" data-url="/settings">\xe8\xae\xbe\xe7\xbd\xae</a>\n<a href="/user/')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    231          _tmp = current_user.username  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    232          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    233          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    234          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    235          _append(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    236          _append('"><img class="avatar" src="')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    237          _tmp = get_avatar_url(current_user, 's')  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    238          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    239          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    240          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    241          _append(_tmp)  # partial/sidebar_me.html:6 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    242          _append('" /></a>\n<a href="/user/')  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    243          _tmp = current_user.username  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    244          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    245          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    246          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    247          _append(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    248          _append('">')  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    249          _tmp = current_user.fullname  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    250          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    251          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    252          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    253          _append(_tmp)  # partial/sidebar_me.html:7 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    254          _append('</a>\n<i class="level icon-level')  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    255          _tmp = current_user.level  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    256          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    257          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    258          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    259          _append(_tmp)  # partial/sidebar_me.html:8 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    260          _append('"></i>\n</div>\n<div class="follow">\n<div class="following item" data-title="\xe6\x88\x91\xe5\x85\xb3\xe6\xb3\xa8\xe7\x9a\x84\xe4\xba\xba" data-url="/mine/following">\n<h3 class="anchor">')  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    261          _tmp = current_user.following_count  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    262          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    263          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    264          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    265          _append(_tmp)  # partial/sidebar_me.html:12 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    266          _append('</h3>\n<span>following</span>\n</div>\n<div class="follower item" data-title="\xe5\x85\xb3\xe6\xb3\xa8\xe6\x88\x91\xe7\x9a\x84\xe4\xba\xba" data-url="/mine/follower">\n<h3 class="anchor">')  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    267          _tmp = current_user.follower_count  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    268          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    269          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    270          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    271          _append(_tmp)  # partial/sidebar_me.html:16 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    272          _append('</h3>\n<span>followers</span>\n</div>\n</div>\n<ul>\n<li class="item" data-url="/mine/invite" data-title="\xe9\x82\x80\xe8\xaf\xb7\xe6\x9c\x8b\xe5\x8f\x8b\xe5\x8a\xa0\xe5\x85\xa5"> <span class="num">')  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    273          _tmp = current_user.unused_invite_key_count  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    274          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    275          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    276          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    277          _append(_tmp)  # partial/sidebar_me.html:21 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    278          _append('</span><span class="anchor">\xe9\x82\x80\xe8\xaf\xb7\xe6\x9c\x8b\xe5\x8f\x8b\xe5\x8a\xa0\xe5\x85\xa5</span></li>\n<li class="item" data-title="\xe6\x88\x91\xe6\xb7\xbb\xe5\x8a\xa0\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87" data-url="/mine/photos"> <span class="num">')  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    279          _tmp = current_user.photo_count  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    280          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    281          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    282          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    283          _append(_tmp)  # partial/sidebar_me.html:22 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    284          _append('</span><span class="anchor">\xe6\x88\x91\xe6\xb7\xbb\xe5\x8a\xa0\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87</span></li>\n<li class="item" data-title="\xe6\x88\x91\xe5\x96\x9c\xe6\xac\xa2\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87" data-url="/mine/likes_photos"><span class="num">')  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    285          _tmp = current_user.likes_count  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    286          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    287          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    288          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    289          _append(_tmp)  # partial/sidebar_me.html:23 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    290          _append('</span><span class="anchor">\xe6\x88\x91\xe5\x96\x9c\xe6\xac\xa2\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87</span> </li>\n</ul>\n</div>\n</div>\n')  # partial/sidebar_me.html:27 (via partial/sidebar_global.html:3, foods.html:8, base.html:54)
    291          _append('\n')  # partial/sidebar_global.html:4 (via foods.html:8, base.html:54)
    292      else:  # partial/sidebar_global.html:4 (via foods.html:8, base.html:54)
    293          _append('\n')  # partial/sidebar_global.html:5 (via foods.html:8, base.html:54)
    294          _append('<div class="box" id="panel-about">\n<div class="header">\xe5\x85\xb3\xe4\xba\x8e\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</div>\n<div class="body">\n<p>\xe5\x85\xb3\xe6\xb3\xa8\xe9\xa3\x9f\xe5\x93\x81\xe5\xae\x89\xe5\x85\xa8\xef\xbc\x8c\xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe4\xb8\x96\xe7\x95\x8c</p>\n<p>\xe6\x89\x80\xe6\x9c\x89\xe9\xa3\x9f\xe5\x93\x81\xe5\x92\x8c\xe6\xb7\xbb\xe5\x8a\xa0\xe5\x89\x82\xe8\xb5\x84\xe6\x96\x99\xe6\x9d\xa5\xe8\x87\xaa\xe4\xba\x8eiearth-\xe7\x88\xb1\xe5\x9c\xb0\xe7\x90\x83\xe7\x8e\xaf\xe4\xbf\x9d\xe6\x9c\xba\xe6\x9e\x84</p>\n</div>\n</div>\n')  # partial/sidebar_about.html:8 (via partial/sidebar_global.html:5, foods.html:8, base.html:54)
    295          _append('\n')  # partial/sidebar_global.html:6 (via foods.html:8, base.html:54)
    296          _append('<div class="box" id="panel-login">\n<div class="header">\xe7\x99\xbb\xe5\x85\xa5\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</div>\n<div class="body">\n<form action="/login" method="POST">\n<div class="section">\n<input type="TEXT" name="username" placeholder="\xe7\x94\xa8\xe6\x88\xb7\xe5\x90\x8d/Email" />\n</div>\n<div class="section">\n<input type="PASSWORD" name="password" placeholder="\xe5\xaf\x86\xe7\xa0\x81" />\n</div>\n<div class="section">\n<input type="SUBMIT" value="\xe7\x99\xbb\xe5\x85\xa5" class="btn primary-btn" />\n<span class="tip">\xe4\xbc\x9a\xe8\xae\xb0\xe4\xbd\x8f\xe7\x99\xbb\xe5\x85\xa5\xe4\xb8\x80\xe4\xb8\xaa\xe6\x9c\x88</span>\n</div>\n</form>\n<div class="alert alert-info">\xe5\x86\x85\xe6\xb5\x8b\xe4\xb8\xad\xef\xbc\x8c\xe5\x8f\xaa\xe6\x8e\xa5\xe5\x8f\x97\xe9\x82\x80\xe8\xaf\xb7\xe6\xb3\xa8\xe5\x86\x8c</div>\n</div>\n</div>\n')  # partial/sidebar_login.html:19 (via partial/sidebar_global.html:6, foods.html:8, base.html:54)
    297          _append('\n')  # partial/sidebar_global.html:8 (via foods.html:8, base.html:54)
    298      _append('\n')  # partial/sidebar_global.html:10 (via foods.html:8, base.html:54)
    299      _append('<div class="box">\n<div class="header">\xe6\xb5\x8f\xe8\xa7\x88\xe9\xa3\x9f\xe5\x93\x81</div>\n<div class="body">\n<ul>\n<a href="/foods/hot">\n<li data-title="\xe7\x83\xad\xe9\x97\xa8\xe9\xa3\x9f\xe5\x93\x81"><span class="anchor">\xe7\x83\xad\xe9\x97\xa8\xe9\xa3\x9f\xe5\x93\x81</span></li>\n</a>\n<a href="/foods/latest">\n<li data-title="\xe6\x9c\x80\xe6\x96\xb0\xe9\xa3\x9f\xe5\x93\x81"><span class="anchor">\xe6\x9c\x80\xe6\x96\xb0\xe9\xa3\x9f\xe5\x93\x81</span></li>\n</a>\n</ul>\n</div>\n</div>\n')  # partial/sidebar_food_nav.html:15 (via partial/sidebar_global.html:10, foods.html:8, base.html:54)
    300      _append('\n')  # partial/sidebar_global.html:11 (via foods.html:8, base.html:54)
    301      import models  # partial/sidebar_hot_searchs.html:1 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    302      _append('\n')  # partial/sidebar_hot_searchs.html:2 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    303      hot_searchs = models.Additive_Search().hot_searchs  # partial/sidebar_hot_searchs.html:2 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    304      _append('\n<div class="box" id="panel-searchs">\n<div class="header">\xe7\x83\xad\xe9\x97\xa8\xe6\x90\x9c\xe7\xb4\xa2</div>\n<div class="body">\n<ul>\n')  # partial/sidebar_hot_searchs.html:8 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    305      for search in hot_searchs:  # partial/sidebar_hot_searchs.html:8 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    306          _append('\n<!--\n<a class="avatar" href="/additive/')  # partial/sidebar_hot_searchs.html:10 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    307          _tmp = search[1]  # partial/sidebar_hot_searchs.html:10 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    308          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_hot_searchs.html:10 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    309          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_hot_searchs.html:10 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    310          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_hot_searchs.html:10 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    311          _append(_tmp)  # partial/sidebar_hot_searchs.html:10 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    312          _append('">\n-->\n<a class="avatar" href="/additive/')  # partial/sidebar_hot_searchs.html:12 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    313          _tmp = search[1]  # partial/sidebar_hot_searchs.html:12 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    314          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_hot_searchs.html:12 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    315          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_hot_searchs.html:12 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    316          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_hot_searchs.html:12 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    317          _append(_tmp)  # partial/sidebar_hot_searchs.html:12 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    318          _append('">\n<li>\n')  # partial/sidebar_hot_searchs.html:14 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    319          _tmp = search[0]  # partial/sidebar_hot_searchs.html:14 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    320          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_hot_searchs.html:14 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    321          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_hot_searchs.html:14 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    322          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_hot_searchs.html:14 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    323          _append(_tmp)  # partial/sidebar_hot_searchs.html:14 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    324          _append('\n</li>\n<!--\n<li class="item">\n<span class="anchor">')  # partial/sidebar_hot_searchs.html:18 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    325          _tmp = search[0]  # partial/sidebar_hot_searchs.html:18 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    326          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_hot_searchs.html:18 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    327          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_hot_searchs.html:18 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    328          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_hot_searchs.html:18 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    329          _append(_tmp)  # partial/sidebar_hot_searchs.html:18 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    330          _append('</span>\n</li>\n-->\n</a>\n')  # partial/sidebar_hot_searchs.html:22 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    331      _append('\n</ul>\n</div>\n</div>\n')  # partial/sidebar_hot_searchs.html:26 (via partial/sidebar_global.html:11, foods.html:8, base.html:54)
    332      _append('\n')  # partial/sidebar_global.html:12 (via foods.html:8, base.html:54)
    333      _append('\n')  # foods.html:9 (via base.html:54)
    334      _append('\n</div>\n</div>\n</div>\n<div id="footer">\n<div class="inner">\n<div class="right">\n<span class="belief">make the world a little better and easier</span>\n</div>\n<div class="left">\n<ul>\n<li><a href="/about">\xe5\x85\xb3\xe4\xba\x8e</a> <!--<span class="divider">/</span>--></li>\n<!--<li><a href="/feedback">\xe5\x8f\x8d\xe9\xa6\x88</a> <span class="divider">/</span></li>-->\n<!--<li><a href="/blog">\xe6\x97\xa5\xe5\xbf\x97</a></li>-->\n</ul>\n</div>\n</div>\n</div>\n<script type="text/javascript">\nvar _gaq = _gaq || [];\n_gaq.push([\'_setAccount\', \'UA-1281124-23\']);\n_gaq.push([\'_trackPageview\']);\n(function() {\nvar ga = document.createElement(\'script\'); ga.type = \'text/javascript\'; ga.async = true;\nga.src = (\'https:\' == document.location.protocol ? \'https://ssl\' : \'http://www\') + \'.google-analytics.com/ga.js\';\nvar s = document.getElementsByTagName(\'script\')[0]; s.parentNode.insertBefore(ga, s);\n})();\n</script>\n<!-- love your mom! -->\n</body>\n<meta name="description" content="\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - " />\n')  # base.html:89
    335      return _utf8('').join(_buffer)  # base.html:0
[E 120723 08:43:02 web:1031] Uncaught exception GET /foods/hot (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/foods/hot', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.100', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cookie': '__utma=148685175.1070362998.1342935208.1342948559.1343001966.4; __utmb=148685175.17.10.1343001966; __utmc=148685175; __utmz=148685175.1342935208.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)', 'X-Real-Ip': '192.168.0.100', 'Referer': 'http://192.168.0.189/'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "src/sites/www/handlers/food.py", line 115, in get
        return self._render('hot')
      File "src/sites/www/handlers/base.py", line 161, in _render
        current_food = food,
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 474, in render
        html = self.render_string(template_name, **kwargs)
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 586, in render_string
        return t.generate(**args)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 253, in generate
        return execute()
      File "foods_html.generated.py", line 94, in _execute
        for index, food_part in enumerate(food_parts):  # partial/foods.html:11 (via foods.html:4, base.html:50)
    NameError: global name 'food_parts' is not defined
[E 120723 08:43:02 web:1393] 500 GET /foods/hot (127.0.0.1) 416.23ms
[W 120723 08:43:03 web:1393] 404 GET /favicon.ico (127.0.0.1) 4.00ms
[E 120723 08:50:18 web:1031] Uncaught exception GET /foods/hot (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/foods/hot', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.100', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cookie': '__utma=148685175.1070362998.1342935208.1342948559.1343001966.4; __utmb=148685175.18.10.1343001966; __utmc=148685175; __utmz=148685175.1342935208.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)', 'X-Real-Ip': '192.168.0.100', 'Referer': 'http://192.168.0.189/'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "src/sites/www/handlers/food.py", line 115, in get
        return self._render('hot')
      File "src/sites/www/handlers/base.py", line 161, in _render
        current_food = food,
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 474, in render
        html = self.render_string(template_name, **kwargs)
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 573, in render_string
        t = loader.load(template_name)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 323, in load
        self.templates[name] = self._create_template(name)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 354, in _create_template
        template = Template(f.read(), name=name, loader=self)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 213, in __init__
        self.code = self._generate_python(loader, compress_whitespace)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 267, in _generate_python
        ancestor.find_named_blocks(loader, named_blocks)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 386, in find_named_blocks
        child.find_named_blocks(loader, named_blocks)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 386, in find_named_blocks
        child.find_named_blocks(loader, named_blocks)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 437, in find_named_blocks
        _Node.find_named_blocks(self, loader, named_blocks)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 386, in find_named_blocks
        child.find_named_blocks(loader, named_blocks)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 386, in find_named_blocks
        child.find_named_blocks(loader, named_blocks)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 452, in find_named_blocks
        included = loader.load(self.name, self.template_name)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 323, in load
        self.templates[name] = self._create_template(name)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 354, in _create_template
        template = Template(f.read(), name=name, loader=self)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 212, in __init__
        self.file = _File(self, _parse(reader, self))
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 811, in _parse
        block_body = _parse(reader, template, operator)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 826, in _parse
        raise ParseError("unknown operator: %r" % operator)
    ParseError: unknown operator: 'food_parts'
[E 120723 08:50:18 web:1393] 500 GET /foods/hot (127.0.0.1) 948.53ms
[W 120723 08:50:18 web:1393] 404 GET /favicon.ico (127.0.0.1) 4.00ms
[I 120723 09:13:11 web:1393] 304 GET / (127.0.0.1) 1632.92ms
[E 120723 09:13:13 web:1031] Uncaught exception GET /foods/hot (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/foods/hot', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.100', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cookie': '__utma=148685175.1070362998.1342935208.1342948559.1343001966.4; __utmb=148685175.20.10.1343001966; __utmc=148685175; __utmz=148685175.1342935208.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)', 'X-Real-Ip': '192.168.0.100', 'Referer': 'http://192.168.0.189/'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "src/sites/www/handlers/food.py", line 115, in get
        return self._render('hot')
      File "src/sites/www/handlers/base.py", line 161, in _render
        current_food = food,
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 474, in render
        html = self.render_string(template_name, **kwargs)
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 573, in render_string
        t = loader.load(template_name)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 323, in load
        self.templates[name] = self._create_template(name)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 354, in _create_template
        template = Template(f.read(), name=name, loader=self)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 213, in __init__
        self.code = self._generate_python(loader, compress_whitespace)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 267, in _generate_python
        ancestor.find_named_blocks(loader, named_blocks)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 386, in find_named_blocks
        child.find_named_blocks(loader, named_blocks)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 386, in find_named_blocks
        child.find_named_blocks(loader, named_blocks)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 437, in find_named_blocks
        _Node.find_named_blocks(self, loader, named_blocks)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 386, in find_named_blocks
        child.find_named_blocks(loader, named_blocks)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 386, in find_named_blocks
        child.find_named_blocks(loader, named_blocks)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 452, in find_named_blocks
        included = loader.load(self.name, self.template_name)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 323, in load
        self.templates[name] = self._create_template(name)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 354, in _create_template
        template = Template(f.read(), name=name, loader=self)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 212, in __init__
        self.file = _File(self, _parse(reader, self))
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 811, in _parse
        block_body = _parse(reader, template, operator)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 826, in _parse
        raise ParseError("unknown operator: %r" % operator)
    ParseError: unknown operator: 'food_parts'
[E 120723 09:13:13 web:1393] 500 GET /foods/hot (127.0.0.1) 112.06ms
[W 120723 09:13:13 web:1393] 404 GET /favicon.ico (127.0.0.1) 4.00ms
[I 120723 09:15:10 autoreload:133] src/sites/www/handlers/food.py modified; restarting server
[I 120723 09:15:25 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/food.py modified; restarting server
[I 120723 09:15:45 web:1393] 200 GET / (127.0.0.1) 1736.98ms
[E 120723 09:15:48 web:1031] Uncaught exception GET /foods/hot (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/foods/hot', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.100', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cookie': '__utma=148685175.1070362998.1342935208.1342948559.1343001966.4; __utmb=148685175.22.10.1343001966; __utmc=148685175; __utmz=148685175.1342935208.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)', 'X-Real-Ip': '192.168.0.100', 'Referer': 'http://192.168.0.189/'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "src/sites/www/handlers/food.py", line 114, in get
        return self._render('hot')
      File "src/sites/www/handlers/base.py", line 161, in _render
        current_food = food,
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 474, in render
        html = self.render_string(template_name, **kwargs)
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 573, in render_string
        t = loader.load(template_name)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 323, in load
        self.templates[name] = self._create_template(name)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 354, in _create_template
        template = Template(f.read(), name=name, loader=self)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 213, in __init__
        self.code = self._generate_python(loader, compress_whitespace)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 267, in _generate_python
        ancestor.find_named_blocks(loader, named_blocks)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 386, in find_named_blocks
        child.find_named_blocks(loader, named_blocks)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 386, in find_named_blocks
        child.find_named_blocks(loader, named_blocks)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 437, in find_named_blocks
        _Node.find_named_blocks(self, loader, named_blocks)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 386, in find_named_blocks
        child.find_named_blocks(loader, named_blocks)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 386, in find_named_blocks
        child.find_named_blocks(loader, named_blocks)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 452, in find_named_blocks
        included = loader.load(self.name, self.template_name)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 323, in load
        self.templates[name] = self._create_template(name)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 354, in _create_template
        template = Template(f.read(), name=name, loader=self)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 212, in __init__
        self.file = _File(self, _parse(reader, self))
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 811, in _parse
        block_body = _parse(reader, template, operator)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 826, in _parse
        raise ParseError("unknown operator: %r" % operator)
    ParseError: unknown operator: 'food_parts'
[E 120723 09:15:48 web:1393] 500 GET /foods/hot (127.0.0.1) 116.07ms
[W 120723 09:15:48 web:1393] 404 GET /favicon.ico (127.0.0.1) 4.00ms
[I 120723 09:17:22 web:1393] 304 GET / (127.0.0.1) 1656.93ms
[E 120723 09:17:29 web:1031] Uncaught exception GET /foods/hot (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/foods/hot', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.100', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cookie': '__utma=148685175.1070362998.1342935208.1342948559.1343001966.4; __utmb=148685175.23.10.1343001966; __utmc=148685175; __utmz=148685175.1342935208.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)', 'X-Real-Ip': '192.168.0.100', 'Referer': 'http://192.168.0.189/'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "src/sites/www/handlers/food.py", line 114, in get
        return self._render('hot')
      File "src/sites/www/handlers/base.py", line 161, in _render
        current_food = food,
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 474, in render
        html = self.render_string(template_name, **kwargs)
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 573, in render_string
        t = loader.load(template_name)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 323, in load
        self.templates[name] = self._create_template(name)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 354, in _create_template
        template = Template(f.read(), name=name, loader=self)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 213, in __init__
        self.code = self._generate_python(loader, compress_whitespace)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 267, in _generate_python
        ancestor.find_named_blocks(loader, named_blocks)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 386, in find_named_blocks
        child.find_named_blocks(loader, named_blocks)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 386, in find_named_blocks
        child.find_named_blocks(loader, named_blocks)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 437, in find_named_blocks
        _Node.find_named_blocks(self, loader, named_blocks)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 386, in find_named_blocks
        child.find_named_blocks(loader, named_blocks)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 386, in find_named_blocks
        child.find_named_blocks(loader, named_blocks)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 452, in find_named_blocks
        included = loader.load(self.name, self.template_name)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 323, in load
        self.templates[name] = self._create_template(name)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 354, in _create_template
        template = Template(f.read(), name=name, loader=self)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 212, in __init__
        self.file = _File(self, _parse(reader, self))
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 811, in _parse
        block_body = _parse(reader, template, operator)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 826, in _parse
        raise ParseError("unknown operator: %r" % operator)
    ParseError: unknown operator: 'food_parts'
[E 120723 09:17:29 web:1393] 500 GET /foods/hot (127.0.0.1) 124.07ms
[W 120723 09:17:30 web:1393] 404 GET /favicon.ico (127.0.0.1) 8.00ms
[E 120723 09:30:40 web:1031] Uncaught exception GET /foods/hot (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/foods/hot', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.100', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cookie': '__utma=148685175.1070362998.1342935208.1342948559.1343001966.4; __utmb=148685175.23.10.1343001966; __utmc=148685175; __utmz=148685175.1342935208.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)', 'Cache-Control': 'max-age=0', 'X-Real-Ip': '192.168.0.100'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "src/sites/www/handlers/food.py", line 114, in get
        return self._render('hot')
      File "src/sites/www/handlers/base.py", line 161, in _render
        current_food = food,
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 474, in render
        html = self.render_string(template_name, **kwargs)
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 573, in render_string
        t = loader.load(template_name)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 323, in load
        self.templates[name] = self._create_template(name)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 354, in _create_template
        template = Template(f.read(), name=name, loader=self)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 212, in __init__
        self.file = _File(self, _parse(reader, self))
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 811, in _parse
        block_body = _parse(reader, template, operator)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 673, in _parse
        def _parse(reader, template, in_block=None):
      File "/usr/lib/python2.7/bdb.py", line 50, in trace_dispatch
        return self.dispatch_call(frame, arg)
      File "/usr/lib/python2.7/bdb.py", line 80, in dispatch_call
        if self.quitting: raise BdbQuit
    BdbQuit
[E 120723 09:30:40 web:1393] 500 GET /foods/hot (127.0.0.1) 608702.20ms
[W 120723 09:30:40 web:1393] 404 GET /favicon.ico (127.0.0.1) 0.00ms
[I 120723 09:30:54 web:1393] 200 GET /foods/hot (127.0.0.1) 1732.98ms
[I 120723 15:41:20 web:1393] 200 GET / (127.0.0.1) 2288.85ms
[I 120723 15:41:27 web:1393] 200 GET /foods/hot (127.0.0.1) 559.45ms
[I 120723 15:46:12 web:1393] 304 GET / (127.0.0.1) 449.67ms
[I 120723 15:46:15 web:1393] 200 GET /foods/hot (127.0.0.1) 441.00ms
[I 120723 15:46:19 web:1393] 200 GET /additives/hot (127.0.0.1) 504.69ms
[I 120723 15:46:27 web:1393] 200 GET /foods/hot (127.0.0.1) 405.83ms
[I 120723 15:46:50 web:1393] 304 GET /additives/hot (127.0.0.1) 487.12ms
[I 120723 15:47:03 web:1393] 200 GET /foods/latest (127.0.0.1) 428.60ms
[I 120723 15:47:08 web:1393] 200 GET /additives/latest (127.0.0.1) 462.14ms
[I 120723 15:47:16 web:1393] 200 GET /foods/hot (127.0.0.1) 387.74ms
[W 120723 15:47:22 web:1393] 404 GET /food/1 (127.0.0.1) 72.32ms
[W 120723 15:47:22 web:1393] 404 GET /favicon.ico (127.0.0.1) 6.65ms
[W 120723 15:47:29 web:1393] 404 GET /food/1 (127.0.0.1) 4.75ms
[W 120723 15:47:29 web:1393] 404 GET /favicon.ico (127.0.0.1) 4.85ms
[I 120723 15:48:37 autoreload:133] src/sites/www/routes.py modified; restarting server
[I 120723 15:49:18 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/food.py modified; restarting server
[I 120723 15:49:33 web:1393] 200 GET /foods/hot (127.0.0.1) 235.51ms
[E 120723 15:49:36 web:1031] Uncaught exception GET /food/1 (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/food/1', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.103', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cookie': '__utma=148685175.1070362998.1342935208.1343013106.1343029280.6; __utmb=148685175.13.10.1343029280; __utmc=148685175; __utmz=148685175.1342935208.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)', 'X-Real-Ip': '192.168.0.103', 'Referer': 'http://192.168.0.189/foods/hot'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "/home/dk/work/python/safood/src/sites/www/handlers/food.py", line 29, in get
        food_parts = models.Food_Part().find(food_id),
      File "/home/dk/work/python/safood/src/thing/thing/thing.py", line 140, in __init__
        self._init_env()
      File "/home/dk/work/python/safood/src/thing/thing/thing.py", line 156, in _init_env
        self._selected_fields = [self.table]
      File "/home/dk/work/python/safood/src/thing/thing/thing.py", line 378, in table
        Thing._table_schemas[self._tablename] = Table(self._tablename, MetaData(), autoload = True, autoload_with = conn)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/schema.py", line 314, in __new__
        table._init(name, metadata, *args, **kw)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/schema.py", line 377, in _init
        self._autoload(metadata, autoload_with, include_columns)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/schema.py", line 393, in _autoload
        self, include_columns, exclude_columns
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py", line 1968, in run_callable
        return callable_(self, *args, **kwargs)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/default.py", line 260, in reflecttable
        return insp.reflecttable(table, include_columns, exclude_columns)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/reflection.py", line 350, in reflecttable
        tbl_opts = self.get_table_options(table_name, schema, **table.kwargs)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/reflection.py", line 178, in get_table_options
        **kw)
      File "<string>", line 1, in <lambda>
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/reflection.py", line 47, in cache
        ret = fn(self, con, *args, **kw)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/dialects/mysql/base.py", line 2039, in get_table_options
        parsed_state = self._parsed_state_or_create(connection, table_name, schema, **kw)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/dialects/mysql/base.py", line 2138, in _parsed_state_or_create
        info_cache=kw.get('info_cache', None)
      File "<string>", line 1, in <lambda>
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/reflection.py", line 47, in cache
        ret = fn(self, con, *args, **kw)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/dialects/mysql/base.py", line 2163, in _setup_parser
        full_name=full_name)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/dialects/mysql/base.py", line 2250, in _show_create_table
        raise exc.NoSuchTableError(full_name)
    NoSuchTableError: `food_part`
[E 120723 15:49:37 web:1393] 500 GET /food/1 (127.0.0.1) 385.08ms
[E 120723 15:49:37 web:1031] Uncaught exception GET /food/1 (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/food/1', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.103', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cookie': '__utma=148685175.1070362998.1342935208.1343013106.1343029280.6; __utmb=148685175.13.10.1343029280; __utmc=148685175; __utmz=148685175.1342935208.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)', 'X-Real-Ip': '192.168.0.103', 'Referer': 'http://192.168.0.189/foods/hot'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "/home/dk/work/python/safood/src/sites/www/handlers/food.py", line 29, in get
        food_parts = models.Food_Part().find(food_id),
      File "/home/dk/work/python/safood/src/thing/thing/thing.py", line 140, in __init__
        self._init_env()
      File "/home/dk/work/python/safood/src/thing/thing/thing.py", line 156, in _init_env
        self._selected_fields = [self.table]
      File "/home/dk/work/python/safood/src/thing/thing/thing.py", line 378, in table
        Thing._table_schemas[self._tablename] = Table(self._tablename, MetaData(), autoload = True, autoload_with = conn)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/schema.py", line 314, in __new__
        table._init(name, metadata, *args, **kw)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/schema.py", line 377, in _init
        self._autoload(metadata, autoload_with, include_columns)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/schema.py", line 393, in _autoload
        self, include_columns, exclude_columns
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py", line 1968, in run_callable
        return callable_(self, *args, **kwargs)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/default.py", line 260, in reflecttable
        return insp.reflecttable(table, include_columns, exclude_columns)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/reflection.py", line 350, in reflecttable
        tbl_opts = self.get_table_options(table_name, schema, **table.kwargs)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/reflection.py", line 178, in get_table_options
        **kw)
      File "<string>", line 1, in <lambda>
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/reflection.py", line 47, in cache
        ret = fn(self, con, *args, **kw)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/dialects/mysql/base.py", line 2039, in get_table_options
        parsed_state = self._parsed_state_or_create(connection, table_name, schema, **kw)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/dialects/mysql/base.py", line 2138, in _parsed_state_or_create
        info_cache=kw.get('info_cache', None)
      File "<string>", line 1, in <lambda>
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/reflection.py", line 47, in cache
        ret = fn(self, con, *args, **kw)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/dialects/mysql/base.py", line 2163, in _setup_parser
        full_name=full_name)
      File "/usr/local/lib/python2.7/dist-packages/sqlalchemy/dialects/mysql/base.py", line 2250, in _show_create_table
        raise exc.NoSuchTableError(full_name)
    NoSuchTableError: `food_part`
[E 120723 15:49:37 web:1393] 500 GET /food/1 (127.0.0.1) 30.54ms
[W 120723 15:49:37 web:1393] 404 GET /favicon.ico (127.0.0.1) 2.36ms
[E 120723 15:51:08 template:256] partial/food.html code:
      1  def _execute():  # base.html:0
      2      _buffer = []  # base.html:0
      3      _append = _buffer.append  # base.html:0
      4      _append('<!doctype html>\n<head>\n<meta charset="UTF-8" />\n<meta content="True" name="HandheldFriendly" />\n<meta content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0; name=\'viewport\'" />\n<title>\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - \xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81')  # base.html:6
      5      _append('</title>\n<link rel="stylesheet" type="text/css" media="screen" href="/static/css/vendor/jquery.fancybox.css" />\n<link rel="stylesheet" type="text/css" media="screen" href="/static/css/main.css" />\n<link rel="shortcut icon" href="/static/img/favicon.ico" />\n<link rel="canonical" href="http://wuditoo.com/" />\n<meta name="description" content="\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - \xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81" />\n<script src="/static/js/vendor/jquery.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.history.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.fancybox.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.scrollTo.min.js" type="text/javascript"></script>\n')  # base.html:16
      6      _append('\n<script src="/static/js/main.js" type="text/javascript"></script>\n</head>\n<!--[if IE 7 ]><body class="ie7"><![endif]-->\n<!--[if gt IE 7]><body class="ie"><![endif]-->\n<!--[if !IE]><body><![endif]-->\n<div id="header">\n<div class="inner">\n<div id="logo"><a href="/">\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</a></div>\n<div id="slogon">\xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81</div>\n<div id="witticism">')  # base.html:27
      7      _tmp = home_sentence()  # base.html:27
      8      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:27
      9      else: _tmp = _utf8(str(_tmp))  # base.html:27
     10      _tmp = _utf8(xhtml_escape(_tmp))  # base.html:27
     11      _append(_tmp)  # base.html:27
     12      _append('</div>\n<!--\n<ul class="nav-right">\n</ul>\n-->\n</div>\n</div>\n<div id="container">\n<div class="inner">\n<div class="message alert alert-warn">\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0\xe5\xad\x95\xe8\x82\xb2\xe4\xb8\xad\xef\xbc\x8c\xe6\x97\xb6\xe9\x97\xb4\xe5\xbe\x85\xe5\xae\x9a\xe3\x80\x82\xe8\xb0\xa2\xe8\xb0\xa2\xe6\x82\xa8\xe7\x9a\x84\xe5\x88\xb0\xe8\xae\xbf\xef\xbc\x9a\xef\xbc\x89</div>\n')  # base.html:38
     13      message = get_message()  # base.html:38
     14      _append('\n')  # base.html:39
     15      for message_type in ('error', 'success', 'info', 'warn'):  # base.html:39
     16          _append('\n')  # base.html:40
     17          if message and message_type == message[0]:  # base.html:40
     18              _append('\n<div id="')  # base.html:41
     19              _tmp = message_type  # base.html:41
     20              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     21              else: _tmp = _utf8(str(_tmp))  # base.html:41
     22              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     23              _append(_tmp)  # base.html:41
     24              _append('-message" class="message alert alert-')  # base.html:41
     25              _tmp = message_type  # base.html:41
     26              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     27              else: _tmp = _utf8(str(_tmp))  # base.html:41
     28              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     29              _append(_tmp)  # base.html:41
     30              _append('">')  # base.html:41
     31              _tmp = message[1]  # base.html:41
     32              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     33              else: _tmp = _utf8(str(_tmp))  # base.html:41
     34              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     35              _append(_tmp)  # base.html:41
     36              _append('</div>\n')  # base.html:42
     37          else:  # base.html:42
     38              _append('\n<div id="')  # base.html:43
     39              _tmp = message_type  # base.html:43
     40              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:43
     41              else: _tmp = _utf8(str(_tmp))  # base.html:43
     42              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:43
     43              _append(_tmp)  # base.html:43
     44              _append('-message" class="message alert alert-')  # base.html:43
     45              _tmp = message_type  # base.html:43
     46              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:43
     47              else: _tmp = _utf8(str(_tmp))  # base.html:43
     48              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:43
     49              _append(_tmp)  # base.html:43
     50              _append(' hide"></div>\n')  # base.html:44
     51          _append('\n')  # base.html:45
     52      _append('\n')  # base.html:47
     53      _append('\n<div id="main">\n')  # base.html:50
     54      _append('\n')  # partial/food.html:4 (via base.html:50)
     55      creator = food.creator  # partial/food.html:4 (via base.html:50)
     56      _append('\n<div id="food">\n')  # partial/food.html:6 (via base.html:50)
     57      _append('\n</div>\n<div id="food-extra">\n<div class="bar noneselectable">\n<i class="icon-slideup"></i>\n<h4>\xe9\xa3\x9f\xe7\x89\xa9\xe8\xaf\xa6\xe6\x83\x85:')  # partial/food.html:11 (via base.html:50)
     58      _tmp = food.name  # partial/food.html:11 (via base.html:50)
     59      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/food.html:11 (via base.html:50)
     60      else: _tmp = _utf8(str(_tmp))  # partial/food.html:11 (via base.html:50)
     61      _tmp = _utf8(xhtml_escape(_tmp))  # partial/food.html:11 (via base.html:50)
     62      _append(_tmp)  # partial/food.html:11 (via base.html:50)
     63      _append('</h4>\n</div>\n<table border="1">\n<tr>\n<th>\xe5\xb1\x9e\xe6\x80\xa7</th>\n<th>\xe5\xb1\x9e\xe6\x80\xa7\xe5\x80\xbc</th>\n</tr>\n<tr>\n<td>\xe5\x85\xb6\xe4\xbb\x96\xe5\x90\x8d\xe7\xa7\xb0</td>\n<td>')  # partial/food.html:21 (via base.html:50)
     64      _tmp = food.name if food.name else u""  # partial/food.html:21 (via base.html:50)
     65      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/food.html:21 (via base.html:50)
     66      else: _tmp = _utf8(str(_tmp))  # partial/food.html:21 (via base.html:50)
     67      _tmp = _utf8(xhtml_escape(_tmp))  # partial/food.html:21 (via base.html:50)
     68      _append(_tmp)  # partial/food.html:21 (via base.html:50)
     69      _append('</td>\n</tr>\n<tr>\n<td>CNS\xe5\x8f\xb7</td>\n<td>')  # partial/food.html:26 (via base.html:50)
     70      _tmp = food.cns if food.cns else u""  # partial/food.html:26 (via base.html:50)
     71      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/food.html:26 (via base.html:50)
     72      else: _tmp = _utf8(str(_tmp))  # partial/food.html:26 (via base.html:50)
     73      _tmp = _utf8(xhtml_escape(_tmp))  # partial/food.html:26 (via base.html:50)
     74      _append(_tmp)  # partial/food.html:26 (via base.html:50)
     75      _append('</td>\n</tr>\n<tr>\n<td>INS\xe5\x8f\xb7</td>\n<td>')  # partial/food.html:31 (via base.html:50)
     76      _tmp = food.ins if food.ins else u""  # partial/food.html:31 (via base.html:50)
     77      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/food.html:31 (via base.html:50)
     78      else: _tmp = _utf8(str(_tmp))  # partial/food.html:31 (via base.html:50)
     79      _tmp = _utf8(xhtml_escape(_tmp))  # partial/food.html:31 (via base.html:50)
     80      _append(_tmp)  # partial/food.html:31 (via base.html:50)
     81      _append('</td>\n</tr>\n<tr>\n<td>\xe5\x8a\x9f\xe8\x83\xbd</td>\n<td>')  # partial/food.html:36 (via base.html:50)
     82      _tmp = food.effect if food.effect else u""  # partial/food.html:36 (via base.html:50)
     83      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/food.html:36 (via base.html:50)
     84      else: _tmp = _utf8(str(_tmp))  # partial/food.html:36 (via base.html:50)
     85      _tmp = _utf8(xhtml_escape(_tmp))  # partial/food.html:36 (via base.html:50)
     86      _append(_tmp)  # partial/food.html:36 (via base.html:50)
     87      _append('</td>\n</tr>\n<tr>\n<td>ADI</td>\n<td>')  # partial/food.html:41 (via base.html:50)
     88      _tmp = food_detail.adi if food_detail.adi else u""  # partial/food.html:41 (via base.html:50)
     89      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/food.html:41 (via base.html:50)
     90      else: _tmp = _utf8(str(_tmp))  # partial/food.html:41 (via base.html:50)
     91      _tmp = _utf8(xhtml_escape(_tmp))  # partial/food.html:41 (via base.html:50)
     92      _append(_tmp)  # partial/food.html:41 (via base.html:50)
     93      _append('</td>\n</tr>\n<tr>\n<td>LD50</td>\n<td>')  # partial/food.html:45 (via base.html:50)
     94      _tmp = food_detail.ld50 if food_detail.ld50 else u""  # partial/food.html:45 (via base.html:50)
     95      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/food.html:45 (via base.html:50)
     96      else: _tmp = _utf8(str(_tmp))  # partial/food.html:45 (via base.html:50)
     97      _tmp = _utf8(xhtml_escape(_tmp))  # partial/food.html:45 (via base.html:50)
     98      _append(_tmp)  # partial/food.html:45 (via base.html:50)
     99      _append('</td>\n</tr>\n<tr>\n<td>\xe5\xba\x94\xe7\x94\xa8\xe8\x8c\x83\xe5\x9b\xb4</td>\n<td>')  # partial/food.html:49 (via base.html:50)
    100      _tmp = food_detail.apply_range if food_detail.apply_range else u""  # partial/food.html:49 (via base.html:50)
    101      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/food.html:49 (via base.html:50)
    102      else: _tmp = _utf8(str(_tmp))  # partial/food.html:49 (via base.html:50)
    103      _tmp = _utf8(xhtml_escape(_tmp))  # partial/food.html:49 (via base.html:50)
    104      _append(_tmp)  # partial/food.html:49 (via base.html:50)
    105      _append('</td>\n</tr>\n<tr>\n<td>\xe5\xae\x89\xe5\x85\xa8\xe6\x83\x85\xe5\x86\xb5</td>\n<td>')  # partial/food.html:53 (via base.html:50)
    106      _tmp = food_detail.safe_status if food_detail.safe_status else u""  # partial/food.html:53 (via base.html:50)
    107      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/food.html:53 (via base.html:50)
    108      else: _tmp = _utf8(str(_tmp))  # partial/food.html:53 (via base.html:50)
    109      _tmp = _utf8(xhtml_escape(_tmp))  # partial/food.html:53 (via base.html:50)
    110      _append(_tmp)  # partial/food.html:53 (via base.html:50)
    111      _append('</td>\n</tr>\n<tr>\n<td>\xe5\x88\xb6\xe6\xb3\x95</td>\n<td>')  # partial/food.html:57 (via base.html:50)
    112      _tmp = food_detail.preparation if food_detail.preparation else u""  # partial/food.html:57 (via base.html:50)
    113      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/food.html:57 (via base.html:50)
    114      else: _tmp = _utf8(str(_tmp))  # partial/food.html:57 (via base.html:50)
    115      _tmp = _utf8(xhtml_escape(_tmp))  # partial/food.html:57 (via base.html:50)
    116      _append(_tmp)  # partial/food.html:57 (via base.html:50)
    117      _append('</td>\n</tr>\n<tr>\n<td>\xe7\xae\x80\xe6\xb4\x81\xe5\x88\xb6\xe6\xb3\x95</td>\n<td>')  # partial/food.html:61 (via base.html:50)
    118      _tmp = food_detail.preparation_short if food_detail.preparation_short else u""  # partial/food.html:61 (via base.html:50)
    119      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/food.html:61 (via base.html:50)
    120      else: _tmp = _utf8(str(_tmp))  # partial/food.html:61 (via base.html:50)
    121      _tmp = _utf8(xhtml_escape(_tmp))  # partial/food.html:61 (via base.html:50)
    122      _append(_tmp)  # partial/food.html:61 (via base.html:50)
    123      _append('</td>\n</tr>\n</table>\n</div>\n')  # partial/food.html:66 (via base.html:50)
    124      _append('\n</div>\n<div id="sidebar">\n')  # base.html:54
    125      _append('\n')  # base.html:55 (via base.html:54)
    126      _append('\n</div>\n</div>\n</div>\n<div id="footer">\n<div class="inner">\n<div class="right">\n<span class="belief">make the world a little better and easier</span>\n</div>\n<div class="left">\n<ul>\n<li><a href="/about">\xe5\x85\xb3\xe4\xba\x8e</a> <!--<span class="divider">/</span>--></li>\n<!--<li><a href="/feedback">\xe5\x8f\x8d\xe9\xa6\x88</a> <span class="divider">/</span></li>-->\n<!--<li><a href="/blog">\xe6\x97\xa5\xe5\xbf\x97</a></li>-->\n</ul>\n</div>\n</div>\n</div>\n<script type="text/javascript">\nvar _gaq = _gaq || [];\n_gaq.push([\'_setAccount\', \'UA-1281124-23\']);\n_gaq.push([\'_trackPageview\']);\n(function() {\nvar ga = document.createElement(\'script\'); ga.type = \'text/javascript\'; ga.async = true;\nga.src = (\'https:\' == document.location.protocol ? \'https://ssl\' : \'http://www\') + \'.google-analytics.com/ga.js\';\nvar s = document.getElementsByTagName(\'script\')[0]; s.parentNode.insertBefore(ga, s);\n})();\n</script>\n<!-- love your mom! -->\n</body>\n<meta name="description" content="\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - " />\n')  # base.html:89
    127      return _utf8('').join(_buffer)  # base.html:0
[E 120723 15:51:08 web:1031] Uncaught exception GET /food/2 (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/food/2', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.103', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cookie': 'viewed_food_ids="\\0541"; __utma=148685175.1070362998.1342935208.1343013106.1343029280.6; __utmb=148685175.14.10.1343029280; __utmc=148685175; __utmz=148685175.1342935208.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)', 'X-Real-Ip': '192.168.0.103', 'Referer': 'http://192.168.0.189/foods/hot'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "/home/dk/work/python/safood/src/sites/www/handlers/food.py", line 29, in get
        food_parts = models.Food_Part().find(food_id),
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 474, in render
        html = self.render_string(template_name, **kwargs)
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 586, in render_string
        return t.generate(**args)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 253, in generate
        return execute()
      File "partial/food_html.generated.py", line 70, in _execute
        _tmp = food.cns if food.cns else u""  # partial/food.html:26 (via base.html:50)
      File "/home/dk/work/python/safood/src/thing/thing/thing.py", line 215, in __getattr__
        raise ThingException('key:{key} not found'.format(key = key))
    ThingException: key:cns not found
[E 120723 15:51:08 web:1393] 500 GET /food/2 (127.0.0.1) 303.47ms
[W 120723 15:51:09 web:1393] 404 GET /favicon.ico (127.0.0.1) 2.64ms
[I 120723 15:51:58 web:1393] 304 GET / (127.0.0.1) 1545.72ms
[I 120723 15:52:02 web:1393] 200 GET /foods/hot (127.0.0.1) 506.11ms
[E 120723 15:52:04 template:256] partial/food.html code:
      1  def _execute():  # base.html:0
      2      _buffer = []  # base.html:0
      3      _append = _buffer.append  # base.html:0
      4      _append('<!doctype html>\n<head>\n<meta charset="UTF-8" />\n<meta content="True" name="HandheldFriendly" />\n<meta content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0; name=\'viewport\'" />\n<title>\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - \xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81')  # base.html:6
      5      _append('</title>\n<link rel="stylesheet" type="text/css" media="screen" href="/static/css/vendor/jquery.fancybox.css" />\n<link rel="stylesheet" type="text/css" media="screen" href="/static/css/main.css" />\n<link rel="shortcut icon" href="/static/img/favicon.ico" />\n<link rel="canonical" href="http://wuditoo.com/" />\n<meta name="description" content="\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - \xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81" />\n<script src="/static/js/vendor/jquery.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.history.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.fancybox.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.scrollTo.min.js" type="text/javascript"></script>\n')  # base.html:16
      6      _append('\n<script src="/static/js/main.js" type="text/javascript"></script>\n</head>\n<!--[if IE 7 ]><body class="ie7"><![endif]-->\n<!--[if gt IE 7]><body class="ie"><![endif]-->\n<!--[if !IE]><body><![endif]-->\n<div id="header">\n<div class="inner">\n<div id="logo"><a href="/">\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</a></div>\n<div id="slogon">\xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81</div>\n<div id="witticism">')  # base.html:27
      7      _tmp = home_sentence()  # base.html:27
      8      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:27
      9      else: _tmp = _utf8(str(_tmp))  # base.html:27
     10      _tmp = _utf8(xhtml_escape(_tmp))  # base.html:27
     11      _append(_tmp)  # base.html:27
     12      _append('</div>\n<!--\n<ul class="nav-right">\n</ul>\n-->\n</div>\n</div>\n<div id="container">\n<div class="inner">\n<div class="message alert alert-warn">\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0\xe5\xad\x95\xe8\x82\xb2\xe4\xb8\xad\xef\xbc\x8c\xe6\x97\xb6\xe9\x97\xb4\xe5\xbe\x85\xe5\xae\x9a\xe3\x80\x82\xe8\xb0\xa2\xe8\xb0\xa2\xe6\x82\xa8\xe7\x9a\x84\xe5\x88\xb0\xe8\xae\xbf\xef\xbc\x9a\xef\xbc\x89</div>\n')  # base.html:38
     13      message = get_message()  # base.html:38
     14      _append('\n')  # base.html:39
     15      for message_type in ('error', 'success', 'info', 'warn'):  # base.html:39
     16          _append('\n')  # base.html:40
     17          if message and message_type == message[0]:  # base.html:40
     18              _append('\n<div id="')  # base.html:41
     19              _tmp = message_type  # base.html:41
     20              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     21              else: _tmp = _utf8(str(_tmp))  # base.html:41
     22              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     23              _append(_tmp)  # base.html:41
     24              _append('-message" class="message alert alert-')  # base.html:41
     25              _tmp = message_type  # base.html:41
     26              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     27              else: _tmp = _utf8(str(_tmp))  # base.html:41
     28              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     29              _append(_tmp)  # base.html:41
     30              _append('">')  # base.html:41
     31              _tmp = message[1]  # base.html:41
     32              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     33              else: _tmp = _utf8(str(_tmp))  # base.html:41
     34              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     35              _append(_tmp)  # base.html:41
     36              _append('</div>\n')  # base.html:42
     37          else:  # base.html:42
     38              _append('\n<div id="')  # base.html:43
     39              _tmp = message_type  # base.html:43
     40              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:43
     41              else: _tmp = _utf8(str(_tmp))  # base.html:43
     42              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:43
     43              _append(_tmp)  # base.html:43
     44              _append('-message" class="message alert alert-')  # base.html:43
     45              _tmp = message_type  # base.html:43
     46              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:43
     47              else: _tmp = _utf8(str(_tmp))  # base.html:43
     48              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:43
     49              _append(_tmp)  # base.html:43
     50              _append(' hide"></div>\n')  # base.html:44
     51          _append('\n')  # base.html:45
     52      _append('\n')  # base.html:47
     53      _append('\n<div id="main">\n')  # base.html:50
     54      _append('\n')  # partial/food.html:4 (via base.html:50)
     55      creator = food.creator  # partial/food.html:4 (via base.html:50)
     56      _append('\n<div id="food">\n')  # partial/food.html:6 (via base.html:50)
     57      _append('\n</div>\n<div id="food-extra">\n<div class="bar noneselectable">\n<i class="icon-slideup"></i>\n<h4>\xe9\xa3\x9f\xe7\x89\xa9\xe8\xaf\xa6\xe6\x83\x85:')  # partial/food.html:11 (via base.html:50)
     58      _tmp = food.name  # partial/food.html:11 (via base.html:50)
     59      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/food.html:11 (via base.html:50)
     60      else: _tmp = _utf8(str(_tmp))  # partial/food.html:11 (via base.html:50)
     61      _tmp = _utf8(xhtml_escape(_tmp))  # partial/food.html:11 (via base.html:50)
     62      _append(_tmp)  # partial/food.html:11 (via base.html:50)
     63      _append('</h4>\n</div>\n<table border="1">\n<tr>\n<th>\xe5\xb1\x9e\xe6\x80\xa7</th>\n<th>\xe5\xb1\x9e\xe6\x80\xa7\xe5\x80\xbc</th>\n</tr>\n<tr>\n<td>\xe5\x85\xb6\xe4\xbb\x96\xe5\x90\x8d\xe7\xa7\xb0</td>\n<td>')  # partial/food.html:21 (via base.html:50)
     64      _tmp = food.name if food.name else u""  # partial/food.html:21 (via base.html:50)
     65      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/food.html:21 (via base.html:50)
     66      else: _tmp = _utf8(str(_tmp))  # partial/food.html:21 (via base.html:50)
     67      _tmp = _utf8(xhtml_escape(_tmp))  # partial/food.html:21 (via base.html:50)
     68      _append(_tmp)  # partial/food.html:21 (via base.html:50)
     69      _append('</td>\n</tr>\n<tr>\n<td>CNS\xe5\x8f\xb7</td>\n<td>')  # partial/food.html:26 (via base.html:50)
     70      _tmp = food.cns if food.cns else u""  # partial/food.html:26 (via base.html:50)
     71      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/food.html:26 (via base.html:50)
     72      else: _tmp = _utf8(str(_tmp))  # partial/food.html:26 (via base.html:50)
     73      _tmp = _utf8(xhtml_escape(_tmp))  # partial/food.html:26 (via base.html:50)
     74      _append(_tmp)  # partial/food.html:26 (via base.html:50)
     75      _append('</td>\n</tr>\n<tr>\n<td>INS\xe5\x8f\xb7</td>\n<td>')  # partial/food.html:31 (via base.html:50)
     76      _tmp = food.ins if food.ins else u""  # partial/food.html:31 (via base.html:50)
     77      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/food.html:31 (via base.html:50)
     78      else: _tmp = _utf8(str(_tmp))  # partial/food.html:31 (via base.html:50)
     79      _tmp = _utf8(xhtml_escape(_tmp))  # partial/food.html:31 (via base.html:50)
     80      _append(_tmp)  # partial/food.html:31 (via base.html:50)
     81      _append('</td>\n</tr>\n<tr>\n<td>\xe5\x8a\x9f\xe8\x83\xbd</td>\n<td>')  # partial/food.html:36 (via base.html:50)
     82      _tmp = food.effect if food.effect else u""  # partial/food.html:36 (via base.html:50)
     83      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/food.html:36 (via base.html:50)
     84      else: _tmp = _utf8(str(_tmp))  # partial/food.html:36 (via base.html:50)
     85      _tmp = _utf8(xhtml_escape(_tmp))  # partial/food.html:36 (via base.html:50)
     86      _append(_tmp)  # partial/food.html:36 (via base.html:50)
     87      _append('</td>\n</tr>\n<tr>\n<td>ADI</td>\n<td>')  # partial/food.html:41 (via base.html:50)
     88      _tmp = food_detail.adi if food_detail.adi else u""  # partial/food.html:41 (via base.html:50)
     89      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/food.html:41 (via base.html:50)
     90      else: _tmp = _utf8(str(_tmp))  # partial/food.html:41 (via base.html:50)
     91      _tmp = _utf8(xhtml_escape(_tmp))  # partial/food.html:41 (via base.html:50)
     92      _append(_tmp)  # partial/food.html:41 (via base.html:50)
     93      _append('</td>\n</tr>\n<tr>\n<td>LD50</td>\n<td>')  # partial/food.html:45 (via base.html:50)
     94      _tmp = food_detail.ld50 if food_detail.ld50 else u""  # partial/food.html:45 (via base.html:50)
     95      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/food.html:45 (via base.html:50)
     96      else: _tmp = _utf8(str(_tmp))  # partial/food.html:45 (via base.html:50)
     97      _tmp = _utf8(xhtml_escape(_tmp))  # partial/food.html:45 (via base.html:50)
     98      _append(_tmp)  # partial/food.html:45 (via base.html:50)
     99      _append('</td>\n</tr>\n<tr>\n<td>\xe5\xba\x94\xe7\x94\xa8\xe8\x8c\x83\xe5\x9b\xb4</td>\n<td>')  # partial/food.html:49 (via base.html:50)
    100      _tmp = food_detail.apply_range if food_detail.apply_range else u""  # partial/food.html:49 (via base.html:50)
    101      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/food.html:49 (via base.html:50)
    102      else: _tmp = _utf8(str(_tmp))  # partial/food.html:49 (via base.html:50)
    103      _tmp = _utf8(xhtml_escape(_tmp))  # partial/food.html:49 (via base.html:50)
    104      _append(_tmp)  # partial/food.html:49 (via base.html:50)
    105      _append('</td>\n</tr>\n<tr>\n<td>\xe5\xae\x89\xe5\x85\xa8\xe6\x83\x85\xe5\x86\xb5</td>\n<td>')  # partial/food.html:53 (via base.html:50)
    106      _tmp = food_detail.safe_status if food_detail.safe_status else u""  # partial/food.html:53 (via base.html:50)
    107      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/food.html:53 (via base.html:50)
    108      else: _tmp = _utf8(str(_tmp))  # partial/food.html:53 (via base.html:50)
    109      _tmp = _utf8(xhtml_escape(_tmp))  # partial/food.html:53 (via base.html:50)
    110      _append(_tmp)  # partial/food.html:53 (via base.html:50)
    111      _append('</td>\n</tr>\n<tr>\n<td>\xe5\x88\xb6\xe6\xb3\x95</td>\n<td>')  # partial/food.html:57 (via base.html:50)
    112      _tmp = food_detail.preparation if food_detail.preparation else u""  # partial/food.html:57 (via base.html:50)
    113      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/food.html:57 (via base.html:50)
    114      else: _tmp = _utf8(str(_tmp))  # partial/food.html:57 (via base.html:50)
    115      _tmp = _utf8(xhtml_escape(_tmp))  # partial/food.html:57 (via base.html:50)
    116      _append(_tmp)  # partial/food.html:57 (via base.html:50)
    117      _append('</td>\n</tr>\n<tr>\n<td>\xe7\xae\x80\xe6\xb4\x81\xe5\x88\xb6\xe6\xb3\x95</td>\n<td>')  # partial/food.html:61 (via base.html:50)
    118      _tmp = food_detail.preparation_short if food_detail.preparation_short else u""  # partial/food.html:61 (via base.html:50)
    119      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/food.html:61 (via base.html:50)
    120      else: _tmp = _utf8(str(_tmp))  # partial/food.html:61 (via base.html:50)
    121      _tmp = _utf8(xhtml_escape(_tmp))  # partial/food.html:61 (via base.html:50)
    122      _append(_tmp)  # partial/food.html:61 (via base.html:50)
    123      _append('</td>\n</tr>\n</table>\n</div>\n')  # partial/food.html:66 (via base.html:50)
    124      _append('\n</div>\n<div id="sidebar">\n')  # base.html:54
    125      _append('\n')  # base.html:55 (via base.html:54)
    126      _append('\n</div>\n</div>\n</div>\n<div id="footer">\n<div class="inner">\n<div class="right">\n<span class="belief">make the world a little better and easier</span>\n</div>\n<div class="left">\n<ul>\n<li><a href="/about">\xe5\x85\xb3\xe4\xba\x8e</a> <!--<span class="divider">/</span>--></li>\n<!--<li><a href="/feedback">\xe5\x8f\x8d\xe9\xa6\x88</a> <span class="divider">/</span></li>-->\n<!--<li><a href="/blog">\xe6\x97\xa5\xe5\xbf\x97</a></li>-->\n</ul>\n</div>\n</div>\n</div>\n<script type="text/javascript">\nvar _gaq = _gaq || [];\n_gaq.push([\'_setAccount\', \'UA-1281124-23\']);\n_gaq.push([\'_trackPageview\']);\n(function() {\nvar ga = document.createElement(\'script\'); ga.type = \'text/javascript\'; ga.async = true;\nga.src = (\'https:\' == document.location.protocol ? \'https://ssl\' : \'http://www\') + \'.google-analytics.com/ga.js\';\nvar s = document.getElementsByTagName(\'script\')[0]; s.parentNode.insertBefore(ga, s);\n})();\n</script>\n<!-- love your mom! -->\n</body>\n<meta name="description" content="\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - " />\n')  # base.html:89
    127      return _utf8('').join(_buffer)  # base.html:0
[E 120723 15:52:04 web:1031] Uncaught exception GET /food/1 (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/food/1', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.103', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cookie': 'viewed_food_ids="\\0541\\0542"; __utma=148685175.1070362998.1342935208.1343013106.1343029280.6; __utmb=148685175.16.10.1343029280; __utmc=148685175; __utmz=148685175.1342935208.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)', 'X-Real-Ip': '192.168.0.103', 'Referer': 'http://192.168.0.189/foods/hot'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "src/sites/www/handlers/food.py", line 29, in get
        food_parts = models.Food_Part().find(food_id),
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 474, in render
        html = self.render_string(template_name, **kwargs)
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 586, in render_string
        return t.generate(**args)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 253, in generate
        return execute()
      File "partial/food_html.generated.py", line 70, in _execute
        _tmp = food.cns if food.cns else u""  # partial/food.html:26 (via base.html:50)
      File "/home/dk/work/python/safood/src/thing/thing/thing.py", line 215, in __getattr__
        raise ThingException('key:{key} not found'.format(key = key))
    ThingException: key:cns not found
[E 120723 15:52:04 web:1393] 500 GET /food/1 (127.0.0.1) 173.73ms
[W 120723 15:52:04 web:1393] 404 GET /favicon.ico (127.0.0.1) 4.48ms
[I 120723 15:56:14 autoreload:133] src/sites/www/handlers/food.py modified; restarting server
[I 120723 15:58:04 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/food.py modified; restarting server
[I 120723 16:06:23 web:1393] 200 GET /food/2 (127.0.0.1) 188.04ms
[I 120723 16:06:31 web:1393] 200 GET /food/1 (127.0.0.1) 23.70ms
[I 120723 16:09:15 web:1393] 200 GET /food/1 (127.0.0.1) 19917.04ms
[E 120723 16:15:45 web:1031] Uncaught exception GET /food/1 (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/food/1', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.103', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cookie': 'viewed_food_ids="\\0541\\0542"; __utma=148685175.1070362998.1342935208.1343013106.1343029280.6; __utmb=148685175.23.10.1343029280; __utmc=148685175; __utmz=148685175.1342935208.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)', 'Referer': 'http://192.168.0.189/foods/hot', 'X-Real-Ip': '192.168.0.103', 'If-None-Match': '"aba161e8fa9e218845a24a561e1a1abb4e05048d"'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "src/sites/www/handlers/food.py", line 28, in get
        food = food,
      File "src/sites/www/handlers/food.py", line 28, in get
        food = food,
      File "/usr/lib/python2.7/bdb.py", line 48, in trace_dispatch
        return self.dispatch_line(frame)
      File "/usr/lib/python2.7/bdb.py", line 67, in dispatch_line
        if self.quitting: raise BdbQuit
    BdbQuit
[E 120723 16:15:45 web:1393] 500 GET /food/1 (127.0.0.1) 306510.46ms
[W 120723 16:15:45 web:1393] 404 GET /favicon.ico (127.0.0.1) 0.96ms
[I 120723 16:15:58 web:1393] 200 GET /food/1 (127.0.0.1) 1035.07ms
[E 120723 16:22:43 web:1031] Uncaught exception GET /food/1 (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/food/1', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.103', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cookie': 'viewed_food_ids="\\0541\\0542"; __utma=148685175.1070362998.1342935208.1343013106.1343029280.6; __utmb=148685175.26.10.1343029280; __utmc=148685175; __utmz=148685175.1342935208.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)', 'Referer': 'http://192.168.0.189/foods/hot', 'X-Real-Ip': '192.168.0.103', 'If-None-Match': '"9fc32be7c63974a74baa863eede8f1bd51ec1702"'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "src/sites/www/handlers/food.py", line 27, in get
        return self.render('partial/food.html',
      File "src/sites/www/handlers/food.py", line 27, in get
        return self.render('partial/food.html',
      File "/usr/lib/python2.7/bdb.py", line 48, in trace_dispatch
        return self.dispatch_line(frame)
      File "/usr/lib/python2.7/bdb.py", line 67, in dispatch_line
        if self.quitting: raise BdbQuit
    BdbQuit
[E 120723 16:22:43 web:1393] 500 GET /food/1 (127.0.0.1) 345040.52ms
[I 120723 16:22:43 autoreload:133] src/sites/www/handlers/food.py modified; restarting server
[I 120723 16:22:53 web:1393] 200 GET /food/1 (127.0.0.1) 1029.86ms
[I 120723 16:30:59 web:1393] 200 GET /food/1 (127.0.0.1) 1210.03ms
[E 120723 16:32:16 web:1031] Uncaught exception GET /food/1 (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/food/1', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.103', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cookie': 'viewed_food_ids="\\0541\\0542"; __utma=148685175.1070362998.1342935208.1343013106.1343029280.6; __utmb=148685175.32.10.1343029280; __utmc=148685175; __utmz=148685175.1342935208.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)', 'Referer': 'http://192.168.0.189/foods/hot', 'X-Real-Ip': '192.168.0.103', 'If-None-Match': '"5d19ac3bf63d30f27fc81e1ef492f9228689ba73"'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "src/sites/www/handlers/food.py", line 27, in get
        return self.render('partial/food.html',
      File "src/sites/www/handlers/food.py", line 27, in get
        return self.render('partial/food.html',
      File "/usr/lib/python2.7/bdb.py", line 48, in trace_dispatch
        return self.dispatch_line(frame)
      File "/usr/lib/python2.7/bdb.py", line 67, in dispatch_line
        if self.quitting: raise BdbQuit
    BdbQuit
[E 120723 16:32:16 web:1393] 500 GET /food/1 (127.0.0.1) 55468.74ms
[I 120723 16:32:16 autoreload:133] src/sites/www/handlers/food.py modified; restarting server
[I 120723 16:32:32 web:1393] 200 GET /food/1 (127.0.0.1) 1069.49ms
[I 120723 16:32:32 web:1393] 200 GET /food/1 (127.0.0.1) 83.65ms
[I 120723 16:32:46 web:1393] 200 GET /food/2 (127.0.0.1) 92.41ms
[I 120723 16:32:52 web:1393] 200 GET /food/3 (127.0.0.1) 366.47ms
[I 120723 16:32:57 web:1393] 200 GET /food/1 (127.0.0.1) 95.15ms
[I 120723 16:33:50 web:1393] 200 GET /about (127.0.0.1) 59.16ms
[I 120723 16:37:42 web:1393] 200 GET /foods/hot (127.0.0.1) 587.79ms
[I 120723 16:37:51 web:1393] 200 GET /food/11 (127.0.0.1) 169.17ms
[I 120723 16:38:08 web:1393] 200 GET /food/6 (127.0.0.1) 159.74ms
[W 120723 16:51:40 web:1393] 404 GET /favicon.ico (127.0.0.1) 8.88ms
[I 120723 16:51:44 web:1393] 200 GET / (127.0.0.1) 1587.35ms
[I 120723 16:51:48 web:1393] 200 GET /foods/hot (127.0.0.1) 589.90ms
[I 120723 16:52:22 web:1393] 200 GET /foods/hot (127.0.0.1) 763.83ms
[W 120723 16:52:24 web:1393] 404 GET /favicon.ico (127.0.0.1) 11.43ms
[W 120723 16:52:26 web:1393] 404 GET /favicon.ico (127.0.0.1) 17.17ms
[I 120723 16:52:35 web:1393] 200 GET /food/2 (127.0.0.1) 264.72ms
[I 120723 16:52:41 web:1393] 200 GET /foods/hot (127.0.0.1) 510.54ms
[I 120723 16:53:31 web:1393] 200 GET /food/2 (127.0.0.1) 95.06ms
[I 120723 17:00:57 autoreload:133] src/sites/www/handlers/food.py modified; restarting server
[I 120723 17:07:08 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/food.py modified; restarting server
[I 120723 17:07:21 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/food.py modified; restarting server
[I 120723 17:07:41 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/food.py modified; restarting server
[I 120723 17:07:52 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/food.py modified; restarting server
[I 120723 17:10:00 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/food.py modified; restarting server
[I 120723 17:11:14 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/food.py modified; restarting server
[I 120723 17:19:29 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/food.py modified; restarting server
[E 120723 17:25:05 web:1031] Uncaught exception GET /food/2 (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/food/2', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.103', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cookie': 'viewed_food_ids="\\0541\\0542\\0543\\05411\\0546"; __utma=148685175.1070362998.1342935208.1343013106.1343029280.6; __utmb=148685175.53.10.1343029280; __utmc=148685175; __utmz=148685175.1342935208.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)', 'Referer': 'http://192.168.0.189/foods/hot', 'X-Real-Ip': '192.168.0.103', 'If-None-Match': '"0e139f8a67794d4c489cdfd68bcb5c17397ceef3"'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "src/sites/www/handlers/food.py", line 31, in get
        ingredients[part] = models.Ingredient().where('part_id', '=', part_id).findall()
      File "/usr/lib/python2.7/bdb.py", line 54, in trace_dispatch
        return self.dispatch_exception(frame, arg)
      File "/usr/lib/python2.7/bdb.py", line 92, in dispatch_exception
        if self.quitting: raise BdbQuit
    BdbQuit
[E 120723 17:25:05 web:1393] 500 GET /food/2 (127.0.0.1) 280116.72ms
[W 120723 17:25:05 web:1393] 404 GET /favicon.ico (127.0.0.1) 0.87ms
[I 120723 17:28:45 web:1393] 304 GET / (127.0.0.1) 1664.65ms
[I 120723 17:28:49 web:1393] 200 GET /foods/hot (127.0.0.1) 589.61ms
[E 120723 17:29:54 web:1031] Uncaught exception GET /food/1 (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/food/1', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.103', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cookie': 'viewed_food_ids="\\0541\\0542\\0543\\05411\\0546"; __utma=148685175.1070362998.1342935208.1343013106.1343029280.6; __utmb=148685175.55.10.1343029280; __utmc=148685175; __utmz=148685175.1342935208.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)', 'Referer': 'http://192.168.0.189/foods/hot', 'X-Real-Ip': '192.168.0.103', 'If-None-Match': '"39babecf1fecfb24c938723664783d7077675d34"'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "src/sites/www/handlers/food.py", line 27, in get
        food_parts = models.Food_Part().get(food_id)
      File "/usr/lib/python2.7/bdb.py", line 54, in trace_dispatch
        return self.dispatch_exception(frame, arg)
      File "/usr/lib/python2.7/bdb.py", line 92, in dispatch_exception
        if self.quitting: raise BdbQuit
    BdbQuit
[E 120723 17:29:54 web:1393] 500 GET /food/1 (127.0.0.1) 59645.12ms
[I 120723 17:29:54 autoreload:133] /home/dk/work/python/safood/src/common/models/ingredient.py modified; restarting server
[E 120723 17:30:30 web:1031] Uncaught exception GET /food/1 (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/food/1', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.103', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cookie': 'viewed_food_ids="\\0541\\0542\\0543\\05411\\0546"; __utma=148685175.1070362998.1342935208.1343013106.1343029280.6; __utmb=148685175.56.10.1343029280; __utmc=148685175; __utmz=148685175.1342935208.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)', 'X-Real-Ip': '192.168.0.103', 'Referer': 'http://192.168.0.189/foods/hot'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "src/sites/www/handlers/food.py", line 27, in get
        food_parts = models.Food_Part().get(food_id)
      File "/home/dk/work/python/safood/src/common/models/food_part.py", line 21, in get
        meta_dict[item.key] = item.value
      File "/home/dk/work/python/safood/src/thing/thing/thing.py", line 215, in __getattr__
        raise ThingException('key:{key} not found'.format(key = key))
    ThingException: key:value not found
[E 120723 17:30:30 web:1393] 500 GET /food/1 (127.0.0.1) 26268.10ms
[W 120723 17:30:30 web:1393] 404 GET /favicon.ico (127.0.0.1) 5.28ms
[E 120723 17:37:03 web:1031] Uncaught exception GET /food/1 (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/food/1', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.103', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cookie': 'viewed_food_ids="\\0541\\0542\\0543\\05411\\0546"; __utma=148685175.1070362998.1342935208.1343013106.1343029280.6; __utmb=148685175.57.10.1343029280; __utmc=148685175; __utmz=148685175.1342935208.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)', 'X-Real-Ip': '192.168.0.103', 'Referer': 'http://192.168.0.189/foods/hot'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "src/sites/www/handlers/food.py", line 27, in get
        food_parts = models.Food_Part().get(food_id)
      File "/home/dk/work/python/safood/src/common/models/food_part.py", line 20, in get
      File "/home/dk/work/python/safood/src/common/models/food_part.py", line 20, in get
      File "/usr/lib/python2.7/bdb.py", line 48, in trace_dispatch
        return self.dispatch_line(frame)
      File "/usr/lib/python2.7/bdb.py", line 67, in dispatch_line
        if self.quitting: raise BdbQuit
    BdbQuit
[E 120723 17:37:03 web:1393] 500 GET /food/1 (127.0.0.1) 324994.04ms
[I 120723 17:37:03 autoreload:133] /home/dk/work/python/safood/src/common/models/ingredient.py modified; restarting server
[E 120723 17:46:06 web:1031] Uncaught exception GET /food/1 (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/food/1', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.103', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cookie': 'viewed_food_ids="\\0541\\0542\\0543\\05411\\0546"; __utma=148685175.1070362998.1342935208.1343013106.1343029280.6; __utmb=148685175.58.10.1343029280; __utmc=148685175; __utmz=148685175.1342935208.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)', 'X-Real-Ip': '192.168.0.103', 'Referer': 'http://192.168.0.189/foods/hot'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "src/sites/www/handlers/food.py", line 32, in get
        return self.render('partial/food.html',
      File "src/sites/www/handlers/food.py", line 32, in get
        return self.render('partial/food.html',
      File "/usr/lib/python2.7/bdb.py", line 48, in trace_dispatch
        return self.dispatch_line(frame)
      File "/usr/lib/python2.7/bdb.py", line 67, in dispatch_line
        if self.quitting: raise BdbQuit
    BdbQuit
[E 120723 17:46:06 web:1393] 500 GET /food/1 (127.0.0.1) 528445.27ms
[W 120723 17:46:06 web:1393] 404 GET /favicon.ico (127.0.0.1) 1.11ms
[I 120723 17:56:29 web:1393] 200 GET / (127.0.0.1) 1640.21ms
[I 120723 17:56:33 web:1393] 200 GET /foods/hot (127.0.0.1) 653.51ms
[E 120723 18:07:25 web:1031] Uncaught exception GET /food/1 (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/food/1', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.103', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cookie': 'viewed_food_ids="\\0541\\0542\\0543\\05411\\0546"; __utma=148685175.1070362998.1342935208.1343013106.1343029280.6; __utmb=148685175.60.10.1343029280; __utmc=148685175; __utmz=148685175.1342935208.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)', 'X-Real-Ip': '192.168.0.103', 'Referer': 'http://192.168.0.189/foods/hot'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "src/sites/www/handlers/food.py", line 29, in get
        for part in food_parts:
      File "src/sites/www/handlers/food.py", line 29, in get
        for part in food_parts:
      File "/usr/lib/python2.7/bdb.py", line 48, in trace_dispatch
        return self.dispatch_line(frame)
      File "/usr/lib/python2.7/bdb.py", line 67, in dispatch_line
        if self.quitting: raise BdbQuit
    BdbQuit
[E 120723 18:07:26 web:1393] 500 GET /food/1 (127.0.0.1) 627481.55ms
[I 120723 18:07:26 autoreload:133] src/sites/www/handlers/food.py modified; restarting server
[E 120723 18:08:37 template:256] partial/food.html code:
     1  def _execute():  # base.html:0
     2      _buffer = []  # base.html:0
     3      _append = _buffer.append  # base.html:0
     4      _append('<!doctype html>\n<head>\n<meta charset="UTF-8" />\n<meta content="True" name="HandheldFriendly" />\n<meta content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0; name=\'viewport\'" />\n<title>\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - \xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81')  # base.html:6
     5      _append('</title>\n<link rel="stylesheet" type="text/css" media="screen" href="/static/css/vendor/jquery.fancybox.css" />\n<link rel="stylesheet" type="text/css" media="screen" href="/static/css/main.css" />\n<link rel="shortcut icon" href="/static/img/favicon.ico" />\n<link rel="canonical" href="http://wuditoo.com/" />\n<meta name="description" content="\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - \xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81" />\n<script src="/static/js/vendor/jquery.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.history.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.fancybox.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.scrollTo.min.js" type="text/javascript"></script>\n')  # base.html:16
     6      _append('\n<script src="/static/js/main.js" type="text/javascript"></script>\n</head>\n<!--[if IE 7 ]><body class="ie7"><![endif]-->\n<!--[if gt IE 7]><body class="ie"><![endif]-->\n<!--[if !IE]><body><![endif]-->\n<div id="header">\n<div class="inner">\n<div id="logo"><a href="/">\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</a></div>\n<div id="slogon">\xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81</div>\n<div id="witticism">')  # base.html:27
     7      _tmp = home_sentence()  # base.html:27
     8      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:27
     9      else: _tmp = _utf8(str(_tmp))  # base.html:27
    10      _tmp = _utf8(xhtml_escape(_tmp))  # base.html:27
    11      _append(_tmp)  # base.html:27
    12      _append('</div>\n<!--\n<ul class="nav-right">\n</ul>\n-->\n</div>\n</div>\n<div id="container">\n<div class="inner">\n<div class="message alert alert-warn">\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0\xe5\xad\x95\xe8\x82\xb2\xe4\xb8\xad\xef\xbc\x8c\xe6\x97\xb6\xe9\x97\xb4\xe5\xbe\x85\xe5\xae\x9a\xe3\x80\x82\xe8\xb0\xa2\xe8\xb0\xa2\xe6\x82\xa8\xe7\x9a\x84\xe5\x88\xb0\xe8\xae\xbf\xef\xbc\x9a\xef\xbc\x89</div>\n')  # base.html:38
    13      message = get_message()  # base.html:38
    14      _append('\n')  # base.html:39
    15      for message_type in ('error', 'success', 'info', 'warn'):  # base.html:39
    16          _append('\n')  # base.html:40
    17          if message and message_type == message[0]:  # base.html:40
    18              _append('\n<div id="')  # base.html:41
    19              _tmp = message_type  # base.html:41
    20              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
    21              else: _tmp = _utf8(str(_tmp))  # base.html:41
    22              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
    23              _append(_tmp)  # base.html:41
    24              _append('-message" class="message alert alert-')  # base.html:41
    25              _tmp = message_type  # base.html:41
    26              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
    27              else: _tmp = _utf8(str(_tmp))  # base.html:41
    28              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
    29              _append(_tmp)  # base.html:41
    30              _append('">')  # base.html:41
    31              _tmp = message[1]  # base.html:41
    32              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
    33              else: _tmp = _utf8(str(_tmp))  # base.html:41
    34              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
    35              _append(_tmp)  # base.html:41
    36              _append('</div>\n')  # base.html:42
    37          else:  # base.html:42
    38              _append('\n<div id="')  # base.html:43
    39              _tmp = message_type  # base.html:43
    40              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:43
    41              else: _tmp = _utf8(str(_tmp))  # base.html:43
    42              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:43
    43              _append(_tmp)  # base.html:43
    44              _append('-message" class="message alert alert-')  # base.html:43
    45              _tmp = message_type  # base.html:43
    46              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:43
    47              else: _tmp = _utf8(str(_tmp))  # base.html:43
    48              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:43
    49              _append(_tmp)  # base.html:43
    50              _append(' hide"></div>\n')  # base.html:44
    51          _append('\n')  # base.html:45
    52      _append('\n')  # base.html:47
    53      _append('\n<div id="main">\n')  # base.html:50
    54      _append('\n')  # partial/food.html:4 (via base.html:50)
    55      creator = food.creator  # partial/food.html:4 (via base.html:50)
    56      _append('\n<div id="food">\n')  # partial/food.html:6 (via base.html:50)
    57      _append('\n</div>\n<div id="food-extra">\n<div class="bar noneselectable">\n<i class="icon-slideup"></i>\n<h4>\xe9\xa3\x9f\xe7\x89\xa9\xe8\xaf\xa6\xe6\x83\x85:')  # partial/food.html:11 (via base.html:50)
    58      _tmp = food.name  # partial/food.html:11 (via base.html:50)
    59      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/food.html:11 (via base.html:50)
    60      else: _tmp = _utf8(str(_tmp))  # partial/food.html:11 (via base.html:50)
    61      _tmp = _utf8(xhtml_escape(_tmp))  # partial/food.html:11 (via base.html:50)
    62      _append(_tmp)  # partial/food.html:11 (via base.html:50)
    63      _append('</h4>\n</div>\n<table border="1">\n<tr>\n<th>\xe7\xbb\x84\xe6\x88\x90\xe9\x83\xa8\xe5\x88\x86</th>\n<th>\xe6\x89\x80\xe5\x90\xab\xe6\xb7\xbb\xe5\x8a\xa0\xe5\x89\x82</th>\n</tr>\n')  # partial/food.html:20 (via base.html:50)
    64      for food_part in food_parts:  # partial/food.html:20 (via base.html:50)
    65          _append('\n<tr>\n<td>')  # partial/food.html:22 (via base.html:50)
    66          _tmp = food_part.name  # partial/food.html:22 (via base.html:50)
    67          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/food.html:22 (via base.html:50)
    68          else: _tmp = _utf8(str(_tmp))  # partial/food.html:22 (via base.html:50)
    69          _tmp = _utf8(xhtml_escape(_tmp))  # partial/food.html:22 (via base.html:50)
    70          _append(_tmp)  # partial/food.html:22 (via base.html:50)
    71          _append('</td>\n<td>\xe6\x9c\xaa\xe7\x9f\xa5</td>\n</tr>\n')  # partial/food.html:25 (via base.html:50)
    72      _append('\n</table>\n</div>\n')  # partial/food.html:28 (via base.html:50)
    73      _append('\n</div>\n<div id="sidebar">\n')  # base.html:54
    74      _append('\n')  # base.html:55 (via base.html:54)
    75      _append('\n</div>\n</div>\n</div>\n<div id="footer">\n<div class="inner">\n<div class="right">\n<span class="belief">make the world a little better and easier</span>\n</div>\n<div class="left">\n<ul>\n<li><a href="/about">\xe5\x85\xb3\xe4\xba\x8e</a> <!--<span class="divider">/</span>--></li>\n<!--<li><a href="/feedback">\xe5\x8f\x8d\xe9\xa6\x88</a> <span class="divider">/</span></li>-->\n<!--<li><a href="/blog">\xe6\x97\xa5\xe5\xbf\x97</a></li>-->\n</ul>\n</div>\n</div>\n</div>\n<script type="text/javascript">\nvar _gaq = _gaq || [];\n_gaq.push([\'_setAccount\', \'UA-1281124-23\']);\n_gaq.push([\'_trackPageview\']);\n(function() {\nvar ga = document.createElement(\'script\'); ga.type = \'text/javascript\'; ga.async = true;\nga.src = (\'https:\' == document.location.protocol ? \'https://ssl\' : \'http://www\') + \'.google-analytics.com/ga.js\';\nvar s = document.getElementsByTagName(\'script\')[0]; s.parentNode.insertBefore(ga, s);\n})();\n</script>\n<!-- love your mom! -->\n</body>\n<meta name="description" content="\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - " />\n')  # base.html:89
    76      return _utf8('').join(_buffer)  # base.html:0
[E 120723 18:08:37 web:1031] Uncaught exception GET /food/1 (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/food/1', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.103', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cookie': 'viewed_food_ids="\\0541\\0542\\0543\\05411\\0546"; __utma=148685175.1070362998.1342935208.1343013106.1343029280.6; __utmb=148685175.60.10.1343029280; __utmc=148685175; __utmz=148685175.1342935208.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)', 'Cache-Control': 'max-age=0', 'X-Real-Ip': '192.168.0.103'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "src/sites/www/handlers/food.py", line 34, in get
        ingredients = ingredients
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 474, in render
        html = self.render_string(template_name, **kwargs)
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 586, in render_string
        return t.generate(**args)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 253, in generate
        return execute()
      File "partial/food_html.generated.py", line 64, in _execute
        for food_part in food_parts:  # partial/food.html:20 (via base.html:50)
    NameError: global name 'food_parts' is not defined
[E 120723 18:08:37 web:1393] 500 GET /food/1 (127.0.0.1) 40521.76ms
[I 120723 20:13:16 web:1393] 304 GET / (127.0.0.1) 2424.46ms
[I 120723 20:13:19 web:1393] 200 GET /foods/hot (127.0.0.1) 653.67ms
[I 120723 20:13:21 web:1393] 200 GET /food/1 (127.0.0.1) 282.16ms
[W 120723 20:13:33 web:1393] 404 GET /food/additive/5 (127.0.0.1) 84.63ms
[W 120723 20:13:34 web:1393] 404 GET /favicon.ico (127.0.0.1) 6.49ms
[W 120723 20:14:00 web:1393] 404 GET /food/additive/3 (127.0.0.1) 4.93ms
[W 120723 20:14:00 web:1393] 404 GET /favicon.ico (127.0.0.1) 6.26ms
[I 120723 20:14:03 web:1393] 200 GET / (127.0.0.1) 518.73ms
[I 120723 20:14:05 web:1393] 200 GET /foods/hot (127.0.0.1) 508.01ms
[I 120723 20:14:07 web:1393] 200 GET /food/1 (127.0.0.1) 114.20ms
[I 120723 20:14:09 web:1393] 200 GET /additive/1 (127.0.0.1) 407.23ms
[I 120723 20:14:18 web:1393] 200 GET /additive/5 (127.0.0.1) 195.28ms
[I 120723 20:14:54 web:1393] 200 GET /food/1 (127.0.0.1) 120.76ms
[I 120723 20:15:10 web:1393] 200 GET /food/1 (127.0.0.1) 130.02ms
[I 120723 20:15:17 web:1393] 200 GET /foods/hot (127.0.0.1) 578.79ms
[I 120723 20:15:20 web:1393] 304 GET /food/11 (127.0.0.1) 116.23ms
[I 120723 20:15:26 web:1393] 200 GET /food/2 (127.0.0.1) 120.07ms
[I 120723 21:16:44 web:1393] 200 GET / (127.0.0.1) 1723.19ms
[I 120723 21:16:46 web:1393] 200 GET /additive/1 (127.0.0.1) 213.56ms
[I 120723 21:16:53 web:1393] 200 GET /foods/latest (127.0.0.1) 588.51ms
[I 120723 21:16:58 web:1393] 200 GET /food/1 (127.0.0.1) 293.36ms
[I 120723 21:17:02 web:1393] 200 GET /additive/2 (127.0.0.1) 349.05ms
[I 120723 21:17:26 web:1393] 200 GET /additive/1 (127.0.0.1) 120.45ms
[I 120723 21:17:30 web:1393] 200 GET /additives/latest (127.0.0.1) 542.33ms
[I 120723 21:17:52 web:1393] 200 GET /food/11 (127.0.0.1) 105.54ms
[I 120723 21:17:56 web:1393] 200 GET /food/1 (127.0.0.1) 150.68ms
[I 120723 21:19:15 web:1393] 200 GET /additive/3 (127.0.0.1) 222.19ms
[I 120723 21:30:02 web:1393] 200 GET / (127.0.0.1) 527.21ms
[I 120723 21:30:05 web:1393] 200 GET /foods/hot (127.0.0.1) 527.29ms
[I 120723 21:30:11 web:1393] 200 GET /food/1 (127.0.0.1) 123.23ms
[I 120723 21:40:32 web:1393] 200 GET / (127.0.0.1) 573.64ms
[I 120723 21:40:35 web:1393] 200 GET /foods/hot (127.0.0.1) 560.45ms
[I 120723 21:42:02 autoreload:133] /home/dk/work/python/safood/src/common/macros/macro.py modified; restarting server
[I 120723 21:42:16 web:1393] 200 GET /additives/hot (127.0.0.1) 277.39ms
[I 120723 21:42:20 web:1393] 200 GET /additives/hot?page=2 (127.0.0.1) 37.34ms
[I 120723 21:42:28 web:1393] 200 GET /additives/hot?page=1 (127.0.0.1) 55.73ms
[I 120723 21:42:31 web:1393] 304 GET /additives/hot?page=2 (127.0.0.1) 32.93ms
[I 120723 21:42:33 web:1393] 304 GET /additives/hot?page=1 (127.0.0.1) 42.57ms
[E 120723 21:45:09 template:256] foods.html code:
      1  def _execute():  # base.html:0
      2      _buffer = []  # base.html:0
      3      _append = _buffer.append  # base.html:0
      4      _append('<!doctype html>\n<head>\n<meta charset="UTF-8" />\n<meta content="True" name="HandheldFriendly" />\n<meta content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0; name=\'viewport\'" />\n<title>\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - \xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81')  # base.html:6
      5      _append('</title>\n<link rel="stylesheet" type="text/css" media="screen" href="/static/css/vendor/jquery.fancybox.css" />\n<link rel="stylesheet" type="text/css" media="screen" href="/static/css/main.css" />\n<link rel="shortcut icon" href="/static/img/favicon.ico" />\n<link rel="canonical" href="http://wuditoo.com/" />\n<meta name="description" content="\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - \xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81" />\n<script src="/static/js/vendor/jquery.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.history.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.fancybox.min.js" type="text/javascript"></script>\n<script src="/static/js/vendor/jquery.scrollTo.min.js" type="text/javascript"></script>\n')  # base.html:16
      6      _append('\n<script type="text/javascript">\n')  # foods.html:13 (via base.html:16)
      7      if current_food:  # foods.html:13 (via base.html:16)
      8          _append('\nmeta_food = {\nurl: "/food/')  # foods.html:15 (via base.html:16)
      9          _tmp = current_food.id  # foods.html:15 (via base.html:16)
     10          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # foods.html:15 (via base.html:16)
     11          else: _tmp = _utf8(str(_tmp))  # foods.html:15 (via base.html:16)
     12          _tmp = _utf8(xhtml_escape(_tmp))  # foods.html:15 (via base.html:16)
     13          _append(_tmp)  # foods.html:15 (via base.html:16)
     14          _append('",\n}\n')  # foods.html:17 (via base.html:16)
     15      _append('\n</script>\n')  # foods.html:19 (via base.html:16)
     16      _append('\n<script src="/static/js/main.js" type="text/javascript"></script>\n</head>\n<!--[if IE 7 ]><body class="ie7"><![endif]-->\n<!--[if gt IE 7]><body class="ie"><![endif]-->\n<!--[if !IE]><body><![endif]-->\n<div id="header">\n<div class="inner">\n<div id="logo"><a href="/">\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</a></div>\n<div id="slogon">\xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe9\xa3\x9f\xe5\x93\x81</div>\n<div id="witticism">')  # base.html:27
     17      _tmp = home_sentence()  # base.html:27
     18      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:27
     19      else: _tmp = _utf8(str(_tmp))  # base.html:27
     20      _tmp = _utf8(xhtml_escape(_tmp))  # base.html:27
     21      _append(_tmp)  # base.html:27
     22      _append('</div>\n<!--\n<ul class="nav-right">\n</ul>\n-->\n</div>\n</div>\n<div id="container">\n<div class="inner">\n<div class="message alert alert-warn">\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0\xe5\xad\x95\xe8\x82\xb2\xe4\xb8\xad\xef\xbc\x8c\xe6\x97\xb6\xe9\x97\xb4\xe5\xbe\x85\xe5\xae\x9a\xe3\x80\x82\xe8\xb0\xa2\xe8\xb0\xa2\xe6\x82\xa8\xe7\x9a\x84\xe5\x88\xb0\xe8\xae\xbf\xef\xbc\x9a\xef\xbc\x89</div>\n')  # base.html:38
     23      message = get_message()  # base.html:38
     24      _append('\n')  # base.html:39
     25      for message_type in ('error', 'success', 'info', 'warn'):  # base.html:39
     26          _append('\n')  # base.html:40
     27          if message and message_type == message[0]:  # base.html:40
     28              _append('\n<div id="')  # base.html:41
     29              _tmp = message_type  # base.html:41
     30              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     31              else: _tmp = _utf8(str(_tmp))  # base.html:41
     32              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     33              _append(_tmp)  # base.html:41
     34              _append('-message" class="message alert alert-')  # base.html:41
     35              _tmp = message_type  # base.html:41
     36              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     37              else: _tmp = _utf8(str(_tmp))  # base.html:41
     38              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     39              _append(_tmp)  # base.html:41
     40              _append('">')  # base.html:41
     41              _tmp = message[1]  # base.html:41
     42              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:41
     43              else: _tmp = _utf8(str(_tmp))  # base.html:41
     44              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:41
     45              _append(_tmp)  # base.html:41
     46              _append('</div>\n')  # base.html:42
     47          else:  # base.html:42
     48              _append('\n<div id="')  # base.html:43
     49              _tmp = message_type  # base.html:43
     50              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:43
     51              else: _tmp = _utf8(str(_tmp))  # base.html:43
     52              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:43
     53              _append(_tmp)  # base.html:43
     54              _append('-message" class="message alert alert-')  # base.html:43
     55              _tmp = message_type  # base.html:43
     56              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # base.html:43
     57              else: _tmp = _utf8(str(_tmp))  # base.html:43
     58              _tmp = _utf8(xhtml_escape(_tmp))  # base.html:43
     59              _append(_tmp)  # base.html:43
     60              _append(' hide"></div>\n')  # base.html:44
     61          _append('\n')  # base.html:45
     62      _append('\n')  # base.html:47
     63      _append('\n<div id="main">\n')  # base.html:50
     64      _append('\n')  # foods.html:4 (via base.html:50)
     65      _append('<div class="box" id="foods">\n<div class="header">')  # partial/foods.html:2 (via foods.html:4, base.html:50)
     66      _tmp = foods_title  # partial/foods.html:2 (via foods.html:4, base.html:50)
     67      if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/foods.html:2 (via foods.html:4, base.html:50)
     68      else: _tmp = _utf8(str(_tmp))  # partial/foods.html:2 (via foods.html:4, base.html:50)
     69      _tmp = _utf8(xhtml_escape(_tmp))  # partial/foods.html:2 (via foods.html:4, base.html:50)
     70      _append(_tmp)  # partial/foods.html:2 (via foods.html:4, base.html:50)
     71      _append('</div>\n<div class="body main ul">\n')  # partial/foods.html:4 (via foods.html:4, base.html:50)
     72      for index, food in enumerate(foods):  # partial/foods.html:4 (via foods.html:4, base.html:50)
     73          _append('\n')  # partial/foods.html:5 (via foods.html:4, base.html:50)
     74          creator = food.creator  # partial/foods.html:5 (via foods.html:4, base.html:50)
     75          _append('\n<div class="food-item">\n<div class="header">\n<a class="avatar" href="/food/')  # partial/foods.html:8 (via foods.html:4, base.html:50)
     76          _tmp = food.id  # partial/foods.html:8 (via foods.html:4, base.html:50)
     77          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/foods.html:8 (via foods.html:4, base.html:50)
     78          else: _tmp = _utf8(str(_tmp))  # partial/foods.html:8 (via foods.html:4, base.html:50)
     79          _tmp = _utf8(xhtml_escape(_tmp))  # partial/foods.html:8 (via foods.html:4, base.html:50)
     80          _append(_tmp)  # partial/foods.html:8 (via foods.html:4, base.html:50)
     81          _append('"><img src="')  # partial/foods.html:8 (via foods.html:4, base.html:50)
     82          _tmp = get_food_avatar_url(creator, 's')  # partial/foods.html:8 (via foods.html:4, base.html:50)
     83          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/foods.html:8 (via foods.html:4, base.html:50)
     84          else: _tmp = _utf8(str(_tmp))  # partial/foods.html:8 (via foods.html:4, base.html:50)
     85          _tmp = _utf8(xhtml_escape(_tmp))  # partial/foods.html:8 (via foods.html:4, base.html:50)
     86          _append(_tmp)  # partial/foods.html:8 (via foods.html:4, base.html:50)
     87          _append('" /> ')  # partial/foods.html:8 (via foods.html:4, base.html:50)
     88          _tmp = food.name  # partial/foods.html:8 (via foods.html:4, base.html:50)
     89          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/foods.html:8 (via foods.html:4, base.html:50)
     90          else: _tmp = _utf8(str(_tmp))  # partial/foods.html:8 (via foods.html:4, base.html:50)
     91          _tmp = _utf8(xhtml_escape(_tmp))  # partial/foods.html:8 (via foods.html:4, base.html:50)
     92          _append(_tmp)  # partial/foods.html:8 (via foods.html:4, base.html:50)
     93          _append('</a>\n</div>\n<div class="footer">\n<span class="meta">\n<li><i class="icon-view"></i> ')  # partial/foods.html:13 (via foods.html:4, base.html:50)
     94          _tmp = food.views_count  # partial/foods.html:13 (via foods.html:4, base.html:50)
     95          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/foods.html:13 (via foods.html:4, base.html:50)
     96          else: _tmp = _utf8(str(_tmp))  # partial/foods.html:13 (via foods.html:4, base.html:50)
     97          _tmp = _utf8(xhtml_escape(_tmp))  # partial/foods.html:13 (via foods.html:4, base.html:50)
     98          _append(_tmp)  # partial/foods.html:13 (via foods.html:4, base.html:50)
     99          _append(' | Created:')  # partial/foods.html:13 (via foods.html:4, base.html:50)
    100          _tmp = timesince(food.created)  # partial/foods.html:13 (via foods.html:4, base.html:50)
    101          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/foods.html:13 (via foods.html:4, base.html:50)
    102          else: _tmp = _utf8(str(_tmp))  # partial/foods.html:13 (via foods.html:4, base.html:50)
    103          _tmp = _utf8(xhtml_escape(_tmp))  # partial/foods.html:13 (via foods.html:4, base.html:50)
    104          _append(_tmp)  # partial/foods.html:13 (via foods.html:4, base.html:50)
    105          _append('</li>\n</span>\n</div>\n</div>\n')  # partial/foods.html:17 (via foods.html:4, base.html:50)
    106          _append('\n')  # partial/foods.html:18 (via foods.html:4, base.html:50)
    107          if index > 0 and (index + 1) % 3 == 0:  # partial/foods.html:18 (via foods.html:4, base.html:50)
    108              _append('\n<div class="clearfix"></div>\n')  # partial/foods.html:20 (via foods.html:4, base.html:50)
    109          _append('\n')  # partial/foods.html:22 (via foods.html:4, base.html:50)
    110      _append('\n')  # partial/foods.html:23 (via foods.html:4, base.html:50)
    111      page_type = 'foods'  # partial/foods.html:23 (via foods.html:4, base.html:50)
    112      _append('\n')  # partial/foods.html:24 (via foods.html:4, base.html:50)
    113      _append('\n')  # partial/pagination.html:3 (via partial/foods.html:24, foods.html:4, base.html:50)
    114      from macros.macro import ADDITIVES_PER_PAGE, USERS_PER_PAGE  # partial/pagination.html:3 (via partial/foods.html:24, foods.html:4, base.html:50)
    115      _append('\n')  # partial/pagination.html:4 (via partial/foods.html:24, foods.html:4, base.html:50)
    116      import math  # partial/pagination.html:4 (via partial/foods.html:24, foods.html:4, base.html:50)
    117      _append('\n')  # partial/pagination.html:6 (via partial/foods.html:24, foods.html:4, base.html:50)
    118      if page_type == 'additives':  # partial/pagination.html:6 (via partial/foods.html:24, foods.html:4, base.html:50)
    119          _append('\n')  # partial/pagination.html:7 (via partial/foods.html:24, foods.html:4, base.html:50)
    120          items_per_page = ADDITIVES_PER_PAGE  # partial/pagination.html:7 (via partial/foods.html:24, foods.html:4, base.html:50)
    121          _append('\n')  # partial/pagination.html:8 (via partial/foods.html:24, foods.html:4, base.html:50)
    122      elif page_type == 'foods':  # partial/pagination.html:8 (via partial/foods.html:24, foods.html:4, base.html:50)
    123          _append('\n')  # partial/pagination.html:9 (via partial/foods.html:24, foods.html:4, base.html:50)
    124          items_per_page = FOODS_PER_PAGE  # partial/pagination.html:9 (via partial/foods.html:24, foods.html:4, base.html:50)
    125          _append('\n')  # partial/pagination.html:10 (via partial/foods.html:24, foods.html:4, base.html:50)
    126      else:  # partial/pagination.html:10 (via partial/foods.html:24, foods.html:4, base.html:50)
    127          _append('\n')  # partial/pagination.html:11 (via partial/foods.html:24, foods.html:4, base.html:50)
    128          items_per_page = USERS_PER_PAGE  # partial/pagination.html:11 (via partial/foods.html:24, foods.html:4, base.html:50)
    129          _append('\n')  # partial/pagination.html:12 (via partial/foods.html:24, foods.html:4, base.html:50)
    130      _append('\n')  # partial/pagination.html:14 (via partial/foods.html:24, foods.html:4, base.html:50)
    131      total_page = int(math.ceil(float(total_items) / items_per_page))  # partial/pagination.html:14 (via partial/foods.html:24, foods.html:4, base.html:50)
    132      _append('\n')  # partial/pagination.html:16 (via partial/foods.html:24, foods.html:4, base.html:50)
    133      current_page = int(handler.get_argument('page', 1))  # partial/pagination.html:16 (via partial/foods.html:24, foods.html:4, base.html:50)
    134      _append('\n')  # partial/pagination.html:18 (via partial/foods.html:24, foods.html:4, base.html:50)
    135      if current_page <=6:  # partial/pagination.html:18 (via partial/foods.html:24, foods.html:4, base.html:50)
    136          _append('\n')  # partial/pagination.html:19 (via partial/foods.html:24, foods.html:4, base.html:50)
    137          end_page = min(total_page, 10)  # partial/pagination.html:19 (via partial/foods.html:24, foods.html:4, base.html:50)
    138          _append('\n')  # partial/pagination.html:20 (via partial/foods.html:24, foods.html:4, base.html:50)
    139          start_page = 1  # partial/pagination.html:20 (via partial/foods.html:24, foods.html:4, base.html:50)
    140          _append('\n')  # partial/pagination.html:21 (via partial/foods.html:24, foods.html:4, base.html:50)
    141      else:  # partial/pagination.html:21 (via partial/foods.html:24, foods.html:4, base.html:50)
    142          _append('\n')  # partial/pagination.html:22 (via partial/foods.html:24, foods.html:4, base.html:50)
    143          end_page = min(total_page, current_page+4)  # partial/pagination.html:22 (via partial/foods.html:24, foods.html:4, base.html:50)
    144          _append('\n')  # partial/pagination.html:23 (via partial/foods.html:24, foods.html:4, base.html:50)
    145          start_page = current_page - 5  # partial/pagination.html:23 (via partial/foods.html:24, foods.html:4, base.html:50)
    146          _append('\n')  # partial/pagination.html:24 (via partial/foods.html:24, foods.html:4, base.html:50)
    147      _append('\n')  # partial/pagination.html:26 (via partial/foods.html:24, foods.html:4, base.html:50)
    148      if total_page > 1:  # partial/pagination.html:26 (via partial/foods.html:24, foods.html:4, base.html:50)
    149          _append('\n<div class="pagination">\n<ul>\n')  # partial/pagination.html:29 (via partial/foods.html:24, foods.html:4, base.html:50)
    150          if current_page == 1:  # partial/pagination.html:29 (via partial/foods.html:24, foods.html:4, base.html:50)
    151              _append('\n<li class="disabled">\xe2\x86\x90 </li>\n')  # partial/pagination.html:31 (via partial/foods.html:24, foods.html:4, base.html:50)
    152          else:  # partial/pagination.html:31 (via partial/foods.html:24, foods.html:4, base.html:50)
    153              _append('\n<li><a href="')  # partial/pagination.html:32 (via partial/foods.html:24, foods.html:4, base.html:50)
    154              _tmp = page_path  # partial/pagination.html:32 (via partial/foods.html:24, foods.html:4, base.html:50)
    155              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:32 (via partial/foods.html:24, foods.html:4, base.html:50)
    156              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:32 (via partial/foods.html:24, foods.html:4, base.html:50)
    157              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:32 (via partial/foods.html:24, foods.html:4, base.html:50)
    158              _append(_tmp)  # partial/pagination.html:32 (via partial/foods.html:24, foods.html:4, base.html:50)
    159              _append('?page=1">\xe2\x86\x90 </a></li>\n')  # partial/pagination.html:33 (via partial/foods.html:24, foods.html:4, base.html:50)
    160          _append('\n')  # partial/pagination.html:35 (via partial/foods.html:24, foods.html:4, base.html:50)
    161          for i in range(start_page, end_page + 1):  # partial/pagination.html:35 (via partial/foods.html:24, foods.html:4, base.html:50)
    162              _append('\n<li ')  # partial/pagination.html:36 (via partial/foods.html:24, foods.html:4, base.html:50)
    163              if current_page == i:  # partial/pagination.html:36 (via partial/foods.html:24, foods.html:4, base.html:50)
    164                  _append('class="active"')  # partial/pagination.html:36 (via partial/foods.html:24, foods.html:4, base.html:50)
    165              _append('>\n<a href="')  # partial/pagination.html:37 (via partial/foods.html:24, foods.html:4, base.html:50)
    166              _tmp = page_path  # partial/pagination.html:37 (via partial/foods.html:24, foods.html:4, base.html:50)
    167              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:37 (via partial/foods.html:24, foods.html:4, base.html:50)
    168              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:37 (via partial/foods.html:24, foods.html:4, base.html:50)
    169              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:37 (via partial/foods.html:24, foods.html:4, base.html:50)
    170              _append(_tmp)  # partial/pagination.html:37 (via partial/foods.html:24, foods.html:4, base.html:50)
    171              _append('?page=')  # partial/pagination.html:37 (via partial/foods.html:24, foods.html:4, base.html:50)
    172              _tmp = i  # partial/pagination.html:37 (via partial/foods.html:24, foods.html:4, base.html:50)
    173              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:37 (via partial/foods.html:24, foods.html:4, base.html:50)
    174              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:37 (via partial/foods.html:24, foods.html:4, base.html:50)
    175              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:37 (via partial/foods.html:24, foods.html:4, base.html:50)
    176              _append(_tmp)  # partial/pagination.html:37 (via partial/foods.html:24, foods.html:4, base.html:50)
    177              _append('">')  # partial/pagination.html:37 (via partial/foods.html:24, foods.html:4, base.html:50)
    178              _tmp = i  # partial/pagination.html:37 (via partial/foods.html:24, foods.html:4, base.html:50)
    179              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:37 (via partial/foods.html:24, foods.html:4, base.html:50)
    180              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:37 (via partial/foods.html:24, foods.html:4, base.html:50)
    181              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:37 (via partial/foods.html:24, foods.html:4, base.html:50)
    182              _append(_tmp)  # partial/pagination.html:37 (via partial/foods.html:24, foods.html:4, base.html:50)
    183              _append('</a>\n</li>\n')  # partial/pagination.html:39 (via partial/foods.html:24, foods.html:4, base.html:50)
    184          _append('\n')  # partial/pagination.html:41 (via partial/foods.html:24, foods.html:4, base.html:50)
    185          if current_page == total_page:  # partial/pagination.html:41 (via partial/foods.html:24, foods.html:4, base.html:50)
    186              _append('\n<li class="disabled">\xe2\x86\x92 </li>\n')  # partial/pagination.html:43 (via partial/foods.html:24, foods.html:4, base.html:50)
    187          else:  # partial/pagination.html:43 (via partial/foods.html:24, foods.html:4, base.html:50)
    188              _append('\n<li><a href="')  # partial/pagination.html:44 (via partial/foods.html:24, foods.html:4, base.html:50)
    189              _tmp = page_path  # partial/pagination.html:44 (via partial/foods.html:24, foods.html:4, base.html:50)
    190              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:44 (via partial/foods.html:24, foods.html:4, base.html:50)
    191              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:44 (via partial/foods.html:24, foods.html:4, base.html:50)
    192              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:44 (via partial/foods.html:24, foods.html:4, base.html:50)
    193              _append(_tmp)  # partial/pagination.html:44 (via partial/foods.html:24, foods.html:4, base.html:50)
    194              _append('?page=')  # partial/pagination.html:44 (via partial/foods.html:24, foods.html:4, base.html:50)
    195              _tmp = current_page+1  # partial/pagination.html:44 (via partial/foods.html:24, foods.html:4, base.html:50)
    196              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/pagination.html:44 (via partial/foods.html:24, foods.html:4, base.html:50)
    197              else: _tmp = _utf8(str(_tmp))  # partial/pagination.html:44 (via partial/foods.html:24, foods.html:4, base.html:50)
    198              _tmp = _utf8(xhtml_escape(_tmp))  # partial/pagination.html:44 (via partial/foods.html:24, foods.html:4, base.html:50)
    199              _append(_tmp)  # partial/pagination.html:44 (via partial/foods.html:24, foods.html:4, base.html:50)
    200              _append('">\xe2\x86\x92 </a></li>\n')  # partial/pagination.html:45 (via partial/foods.html:24, foods.html:4, base.html:50)
    201          _append('\n</ul>\n</div>\n')  # partial/pagination.html:48 (via partial/foods.html:24, foods.html:4, base.html:50)
    202      _append('\n')  # partial/pagination.html:49 (via partial/foods.html:24, foods.html:4, base.html:50)
    203      _append('\n</div>\n</div>\n')  # partial/foods.html:27 (via foods.html:4, base.html:50)
    204      _append('\n')  # foods.html:5 (via base.html:50)
    205      _append('\n</div>\n<div id="sidebar">\n')  # base.html:54
    206      _append('\n')  # foods.html:8 (via base.html:54)
    207      if current_user:  # partial/foods_sidebar_global.html:1 (via foods.html:8, base.html:54)
    208          _append('\n')  # partial/foods_sidebar_global.html:2 (via foods.html:8, base.html:54)
    209          _append('<div class="upload item ')  # partial/sidebar_upload.html:1 (via partial/foods_sidebar_global.html:2, foods.html:8, base.html:54)
    210          if not current_user.left_upload_count:  # partial/sidebar_upload.html:1 (via partial/foods_sidebar_global.html:2, foods.html:8, base.html:54)
    211              _append('disabled')  # partial/sidebar_upload.html:1 (via partial/foods_sidebar_global.html:2, foods.html:8, base.html:54)
    212          _append('" data-url="/photo/upload" data-title="\xe9\x87\x87\xe9\x9b\x86\xe7\x85\xa7\xe7\x89\x87" >\n<div class="left"></div>\n<div class="center">\n')  # partial/sidebar_upload.html:5 (via partial/foods_sidebar_global.html:2, foods.html:8, base.html:54)
    213          if current_user.left_upload_count:  # partial/sidebar_upload.html:5 (via partial/foods_sidebar_global.html:2, foods.html:8, base.html:54)
    214              _append('\n\xe9\x87\x87\xe9\x9b\x86\xe7\x85\xa7\xe7\x89\x87(\xe6\x9c\xac\xe5\x91\xa8\xe8\xbf\x98\xe5\x89\xa9')  # partial/sidebar_upload.html:6 (via partial/foods_sidebar_global.html:2, foods.html:8, base.html:54)
    215              _tmp = current_user.left_upload_count  # partial/sidebar_upload.html:6 (via partial/foods_sidebar_global.html:2, foods.html:8, base.html:54)
    216              if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_upload.html:6 (via partial/foods_sidebar_global.html:2, foods.html:8, base.html:54)
    217              else: _tmp = _utf8(str(_tmp))  # partial/sidebar_upload.html:6 (via partial/foods_sidebar_global.html:2, foods.html:8, base.html:54)
    218              _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_upload.html:6 (via partial/foods_sidebar_global.html:2, foods.html:8, base.html:54)
    219              _append(_tmp)  # partial/sidebar_upload.html:6 (via partial/foods_sidebar_global.html:2, foods.html:8, base.html:54)
    220              _append('\xe5\xbc\xa0)\n')  # partial/sidebar_upload.html:7 (via partial/foods_sidebar_global.html:2, foods.html:8, base.html:54)
    221          else:  # partial/sidebar_upload.html:7 (via partial/foods_sidebar_global.html:2, foods.html:8, base.html:54)
    222              _append('\n\xe6\x9c\xac\xe5\x91\xa8\xe7\x9a\x84\xe9\x87\x87\xe9\x9b\x86\xe4\xbd\x99\xe9\xa2\x9d\xe5\xb7\xb2\xe7\x94\xa8\xe5\xae\x8c\xe4\xba\x86\n')  # partial/sidebar_upload.html:9 (via partial/foods_sidebar_global.html:2, foods.html:8, base.html:54)
    223          _append('\n</div>\n<div class="right"></div>\n</div>\n')  # partial/sidebar_upload.html:13 (via partial/foods_sidebar_global.html:2, foods.html:8, base.html:54)
    224          _append('\n')  # partial/foods_sidebar_global.html:3 (via foods.html:8, base.html:54)
    225          _append('<div class="box" id="panel-me">\n<div class="header"><a class="right" href="/logout">\xe7\x99\xbb\xe5\x87\xba</a>\xe6\x88\x91\xe7\x9a\x84\xe4\xbf\xa1\xe6\x81\xaf</div>\n<div class="body">\n<div class="me">\n<a class="settings item" href="/settings" data-title="\xe8\xae\xbe\xe7\xbd\xae" data-url="/settings">\xe8\xae\xbe\xe7\xbd\xae</a>\n<a href="/user/')  # partial/sidebar_me.html:6 (via partial/foods_sidebar_global.html:3, foods.html:8, base.html:54)
    226          _tmp = current_user.username  # partial/sidebar_me.html:6 (via partial/foods_sidebar_global.html:3, foods.html:8, base.html:54)
    227          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:6 (via partial/foods_sidebar_global.html:3, foods.html:8, base.html:54)
    228          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:6 (via partial/foods_sidebar_global.html:3, foods.html:8, base.html:54)
    229          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:6 (via partial/foods_sidebar_global.html:3, foods.html:8, base.html:54)
    230          _append(_tmp)  # partial/sidebar_me.html:6 (via partial/foods_sidebar_global.html:3, foods.html:8, base.html:54)
    231          _append('"><img class="avatar" src="')  # partial/sidebar_me.html:6 (via partial/foods_sidebar_global.html:3, foods.html:8, base.html:54)
    232          _tmp = get_avatar_url(current_user, 's')  # partial/sidebar_me.html:6 (via partial/foods_sidebar_global.html:3, foods.html:8, base.html:54)
    233          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:6 (via partial/foods_sidebar_global.html:3, foods.html:8, base.html:54)
    234          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:6 (via partial/foods_sidebar_global.html:3, foods.html:8, base.html:54)
    235          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:6 (via partial/foods_sidebar_global.html:3, foods.html:8, base.html:54)
    236          _append(_tmp)  # partial/sidebar_me.html:6 (via partial/foods_sidebar_global.html:3, foods.html:8, base.html:54)
    237          _append('" /></a>\n<a href="/user/')  # partial/sidebar_me.html:7 (via partial/foods_sidebar_global.html:3, foods.html:8, base.html:54)
    238          _tmp = current_user.username  # partial/sidebar_me.html:7 (via partial/foods_sidebar_global.html:3, foods.html:8, base.html:54)
    239          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:7 (via partial/foods_sidebar_global.html:3, foods.html:8, base.html:54)
    240          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:7 (via partial/foods_sidebar_global.html:3, foods.html:8, base.html:54)
    241          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:7 (via partial/foods_sidebar_global.html:3, foods.html:8, base.html:54)
    242          _append(_tmp)  # partial/sidebar_me.html:7 (via partial/foods_sidebar_global.html:3, foods.html:8, base.html:54)
    243          _append('">')  # partial/sidebar_me.html:7 (via partial/foods_sidebar_global.html:3, foods.html:8, base.html:54)
    244          _tmp = current_user.fullname  # partial/sidebar_me.html:7 (via partial/foods_sidebar_global.html:3, foods.html:8, base.html:54)
    245          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:7 (via partial/foods_sidebar_global.html:3, foods.html:8, base.html:54)
    246          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:7 (via partial/foods_sidebar_global.html:3, foods.html:8, base.html:54)
    247          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:7 (via partial/foods_sidebar_global.html:3, foods.html:8, base.html:54)
    248          _append(_tmp)  # partial/sidebar_me.html:7 (via partial/foods_sidebar_global.html:3, foods.html:8, base.html:54)
    249          _append('</a>\n<i class="level icon-level')  # partial/sidebar_me.html:8 (via partial/foods_sidebar_global.html:3, foods.html:8, base.html:54)
    250          _tmp = current_user.level  # partial/sidebar_me.html:8 (via partial/foods_sidebar_global.html:3, foods.html:8, base.html:54)
    251          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:8 (via partial/foods_sidebar_global.html:3, foods.html:8, base.html:54)
    252          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:8 (via partial/foods_sidebar_global.html:3, foods.html:8, base.html:54)
    253          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:8 (via partial/foods_sidebar_global.html:3, foods.html:8, base.html:54)
    254          _append(_tmp)  # partial/sidebar_me.html:8 (via partial/foods_sidebar_global.html:3, foods.html:8, base.html:54)
    255          _append('"></i>\n</div>\n<div class="follow">\n<div class="following item" data-title="\xe6\x88\x91\xe5\x85\xb3\xe6\xb3\xa8\xe7\x9a\x84\xe4\xba\xba" data-url="/mine/following">\n<h3 class="anchor">')  # partial/sidebar_me.html:12 (via partial/foods_sidebar_global.html:3, foods.html:8, base.html:54)
    256          _tmp = current_user.following_count  # partial/sidebar_me.html:12 (via partial/foods_sidebar_global.html:3, foods.html:8, base.html:54)
    257          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:12 (via partial/foods_sidebar_global.html:3, foods.html:8, base.html:54)
    258          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:12 (via partial/foods_sidebar_global.html:3, foods.html:8, base.html:54)
    259          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:12 (via partial/foods_sidebar_global.html:3, foods.html:8, base.html:54)
    260          _append(_tmp)  # partial/sidebar_me.html:12 (via partial/foods_sidebar_global.html:3, foods.html:8, base.html:54)
    261          _append('</h3>\n<span>following</span>\n</div>\n<div class="follower item" data-title="\xe5\x85\xb3\xe6\xb3\xa8\xe6\x88\x91\xe7\x9a\x84\xe4\xba\xba" data-url="/mine/follower">\n<h3 class="anchor">')  # partial/sidebar_me.html:16 (via partial/foods_sidebar_global.html:3, foods.html:8, base.html:54)
    262          _tmp = current_user.follower_count  # partial/sidebar_me.html:16 (via partial/foods_sidebar_global.html:3, foods.html:8, base.html:54)
    263          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:16 (via partial/foods_sidebar_global.html:3, foods.html:8, base.html:54)
    264          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:16 (via partial/foods_sidebar_global.html:3, foods.html:8, base.html:54)
    265          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:16 (via partial/foods_sidebar_global.html:3, foods.html:8, base.html:54)
    266          _append(_tmp)  # partial/sidebar_me.html:16 (via partial/foods_sidebar_global.html:3, foods.html:8, base.html:54)
    267          _append('</h3>\n<span>followers</span>\n</div>\n</div>\n<ul>\n<li class="item" data-url="/mine/invite" data-title="\xe9\x82\x80\xe8\xaf\xb7\xe6\x9c\x8b\xe5\x8f\x8b\xe5\x8a\xa0\xe5\x85\xa5"> <span class="num">')  # partial/sidebar_me.html:21 (via partial/foods_sidebar_global.html:3, foods.html:8, base.html:54)
    268          _tmp = current_user.unused_invite_key_count  # partial/sidebar_me.html:21 (via partial/foods_sidebar_global.html:3, foods.html:8, base.html:54)
    269          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:21 (via partial/foods_sidebar_global.html:3, foods.html:8, base.html:54)
    270          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:21 (via partial/foods_sidebar_global.html:3, foods.html:8, base.html:54)
    271          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:21 (via partial/foods_sidebar_global.html:3, foods.html:8, base.html:54)
    272          _append(_tmp)  # partial/sidebar_me.html:21 (via partial/foods_sidebar_global.html:3, foods.html:8, base.html:54)
    273          _append('</span><span class="anchor">\xe9\x82\x80\xe8\xaf\xb7\xe6\x9c\x8b\xe5\x8f\x8b\xe5\x8a\xa0\xe5\x85\xa5</span></li>\n<li class="item" data-title="\xe6\x88\x91\xe6\xb7\xbb\xe5\x8a\xa0\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87" data-url="/mine/photos"> <span class="num">')  # partial/sidebar_me.html:22 (via partial/foods_sidebar_global.html:3, foods.html:8, base.html:54)
    274          _tmp = current_user.photo_count  # partial/sidebar_me.html:22 (via partial/foods_sidebar_global.html:3, foods.html:8, base.html:54)
    275          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:22 (via partial/foods_sidebar_global.html:3, foods.html:8, base.html:54)
    276          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:22 (via partial/foods_sidebar_global.html:3, foods.html:8, base.html:54)
    277          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:22 (via partial/foods_sidebar_global.html:3, foods.html:8, base.html:54)
    278          _append(_tmp)  # partial/sidebar_me.html:22 (via partial/foods_sidebar_global.html:3, foods.html:8, base.html:54)
    279          _append('</span><span class="anchor">\xe6\x88\x91\xe6\xb7\xbb\xe5\x8a\xa0\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87</span></li>\n<li class="item" data-title="\xe6\x88\x91\xe5\x96\x9c\xe6\xac\xa2\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87" data-url="/mine/likes_photos"><span class="num">')  # partial/sidebar_me.html:23 (via partial/foods_sidebar_global.html:3, foods.html:8, base.html:54)
    280          _tmp = current_user.likes_count  # partial/sidebar_me.html:23 (via partial/foods_sidebar_global.html:3, foods.html:8, base.html:54)
    281          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_me.html:23 (via partial/foods_sidebar_global.html:3, foods.html:8, base.html:54)
    282          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_me.html:23 (via partial/foods_sidebar_global.html:3, foods.html:8, base.html:54)
    283          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_me.html:23 (via partial/foods_sidebar_global.html:3, foods.html:8, base.html:54)
    284          _append(_tmp)  # partial/sidebar_me.html:23 (via partial/foods_sidebar_global.html:3, foods.html:8, base.html:54)
    285          _append('</span><span class="anchor">\xe6\x88\x91\xe5\x96\x9c\xe6\xac\xa2\xe7\x9a\x84\xe7\x85\xa7\xe7\x89\x87</span> </li>\n</ul>\n</div>\n</div>\n')  # partial/sidebar_me.html:27 (via partial/foods_sidebar_global.html:3, foods.html:8, base.html:54)
    286          _append('\n')  # partial/foods_sidebar_global.html:4 (via foods.html:8, base.html:54)
    287      else:  # partial/foods_sidebar_global.html:4 (via foods.html:8, base.html:54)
    288          _append('\n')  # partial/foods_sidebar_global.html:5 (via foods.html:8, base.html:54)
    289          _append('<div class="box" id="panel-about">\n<div class="header">\xe5\x85\xb3\xe4\xba\x8e\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</div>\n<div class="body">\n<p>\xe5\x85\xb3\xe6\xb3\xa8\xe9\xa3\x9f\xe5\x93\x81\xe5\xae\x89\xe5\x85\xa8\xef\xbc\x8c\xe8\xbf\x98\xe5\x8e\x9f\xe7\x9c\x9f\xe5\xae\x9e\xe7\x9a\x84\xe4\xb8\x96\xe7\x95\x8c</p>\n<p>\xe6\x89\x80\xe6\x9c\x89\xe9\xa3\x9f\xe5\x93\x81\xe5\x92\x8c\xe6\xb7\xbb\xe5\x8a\xa0\xe5\x89\x82\xe8\xb5\x84\xe6\x96\x99\xe6\x9d\xa5\xe8\x87\xaa\xe4\xba\x8eiearth-\xe7\x88\xb1\xe5\x9c\xb0\xe7\x90\x83\xe7\x8e\xaf\xe4\xbf\x9d\xe6\x9c\xba\xe6\x9e\x84</p>\n</div>\n</div>\n')  # partial/sidebar_about.html:8 (via partial/foods_sidebar_global.html:5, foods.html:8, base.html:54)
    290          _append('\n')  # partial/foods_sidebar_global.html:6 (via foods.html:8, base.html:54)
    291          _append('<div class="box" id="panel-login">\n<div class="header">\xe7\x99\xbb\xe5\x85\xa5\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0</div>\n<div class="body">\n<form action="/login" method="POST">\n<div class="section">\n<input type="TEXT" name="username" placeholder="\xe7\x94\xa8\xe6\x88\xb7\xe5\x90\x8d/Email" />\n</div>\n<div class="section">\n<input type="PASSWORD" name="password" placeholder="\xe5\xaf\x86\xe7\xa0\x81" />\n</div>\n<div class="section">\n<input type="SUBMIT" value="\xe7\x99\xbb\xe5\x85\xa5" class="btn primary-btn" />\n<span class="tip">\xe4\xbc\x9a\xe8\xae\xb0\xe4\xbd\x8f\xe7\x99\xbb\xe5\x85\xa5\xe4\xb8\x80\xe4\xb8\xaa\xe6\x9c\x88</span>\n</div>\n</form>\n<div class="alert alert-info">\xe5\x86\x85\xe6\xb5\x8b\xe4\xb8\xad\xef\xbc\x8c\xe5\x8f\xaa\xe6\x8e\xa5\xe5\x8f\x97\xe9\x82\x80\xe8\xaf\xb7\xe6\xb3\xa8\xe5\x86\x8c</div>\n</div>\n</div>\n')  # partial/sidebar_login.html:19 (via partial/foods_sidebar_global.html:6, foods.html:8, base.html:54)
    292          _append('\n')  # partial/foods_sidebar_global.html:8 (via foods.html:8, base.html:54)
    293      _append('\n')  # partial/foods_sidebar_global.html:10 (via foods.html:8, base.html:54)
    294      _append('<div class="box">\n<div class="header">\xe6\xb5\x8f\xe8\xa7\x88\xe6\xb7\xbb\xe5\x8a\xa0\xe5\x89\x82</div>\n<div class="body">\n<ul>\n<a href="/additives/hot">\n<li data-title="\xe7\x83\xad\xe9\x97\xa8\xe6\xb7\xbb\xe5\x8a\xa0\xe5\x89\x82"><span class="anchor">\xe7\x83\xad\xe9\x97\xa8\xe6\xb7\xbb\xe5\x8a\xa0\xe5\x89\x82</span></li>\n</a>\n<a href="/additives/latest">\n<li data-title="\xe6\x9c\x80\xe6\x96\xb0\xe6\xb7\xbb\xe5\x8a\xa0\xe5\x89\x82"><span class="anchor">\xe6\x9c\x80\xe6\x96\xb0\xe6\xb7\xbb\xe5\x8a\xa0\xe5\x89\x82</span></li>\n</a>\n</ul>\n</div>\n</div>\n')  # partial/sidebar_additive_nav.html:15 (via partial/foods_sidebar_global.html:10, foods.html:8, base.html:54)
    295      _append('\n')  # partial/foods_sidebar_global.html:11 (via foods.html:8, base.html:54)
    296      import models  # partial/sidebar_hot_searchs.html:1 (via partial/foods_sidebar_global.html:11, foods.html:8, base.html:54)
    297      _append('\n')  # partial/sidebar_hot_searchs.html:2 (via partial/foods_sidebar_global.html:11, foods.html:8, base.html:54)
    298      hot_searchs = models.Additive_Search().hot_searchs  # partial/sidebar_hot_searchs.html:2 (via partial/foods_sidebar_global.html:11, foods.html:8, base.html:54)
    299      _append('\n<div class="box" id="panel-searchs">\n<div class="header">\xe7\x83\xad\xe9\x97\xa8\xe6\x90\x9c\xe7\xb4\xa2</div>\n<div class="body">\n<ul>\n')  # partial/sidebar_hot_searchs.html:8 (via partial/foods_sidebar_global.html:11, foods.html:8, base.html:54)
    300      for search in hot_searchs:  # partial/sidebar_hot_searchs.html:8 (via partial/foods_sidebar_global.html:11, foods.html:8, base.html:54)
    301          _append('\n<!--\n<a class="avatar" href="/additive/')  # partial/sidebar_hot_searchs.html:10 (via partial/foods_sidebar_global.html:11, foods.html:8, base.html:54)
    302          _tmp = search[1]  # partial/sidebar_hot_searchs.html:10 (via partial/foods_sidebar_global.html:11, foods.html:8, base.html:54)
    303          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_hot_searchs.html:10 (via partial/foods_sidebar_global.html:11, foods.html:8, base.html:54)
    304          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_hot_searchs.html:10 (via partial/foods_sidebar_global.html:11, foods.html:8, base.html:54)
    305          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_hot_searchs.html:10 (via partial/foods_sidebar_global.html:11, foods.html:8, base.html:54)
    306          _append(_tmp)  # partial/sidebar_hot_searchs.html:10 (via partial/foods_sidebar_global.html:11, foods.html:8, base.html:54)
    307          _append('">\n-->\n<a class="avatar" href="/additive/')  # partial/sidebar_hot_searchs.html:12 (via partial/foods_sidebar_global.html:11, foods.html:8, base.html:54)
    308          _tmp = search[1]  # partial/sidebar_hot_searchs.html:12 (via partial/foods_sidebar_global.html:11, foods.html:8, base.html:54)
    309          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_hot_searchs.html:12 (via partial/foods_sidebar_global.html:11, foods.html:8, base.html:54)
    310          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_hot_searchs.html:12 (via partial/foods_sidebar_global.html:11, foods.html:8, base.html:54)
    311          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_hot_searchs.html:12 (via partial/foods_sidebar_global.html:11, foods.html:8, base.html:54)
    312          _append(_tmp)  # partial/sidebar_hot_searchs.html:12 (via partial/foods_sidebar_global.html:11, foods.html:8, base.html:54)
    313          _append('">\n<li>\n')  # partial/sidebar_hot_searchs.html:14 (via partial/foods_sidebar_global.html:11, foods.html:8, base.html:54)
    314          _tmp = search[0]  # partial/sidebar_hot_searchs.html:14 (via partial/foods_sidebar_global.html:11, foods.html:8, base.html:54)
    315          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_hot_searchs.html:14 (via partial/foods_sidebar_global.html:11, foods.html:8, base.html:54)
    316          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_hot_searchs.html:14 (via partial/foods_sidebar_global.html:11, foods.html:8, base.html:54)
    317          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_hot_searchs.html:14 (via partial/foods_sidebar_global.html:11, foods.html:8, base.html:54)
    318          _append(_tmp)  # partial/sidebar_hot_searchs.html:14 (via partial/foods_sidebar_global.html:11, foods.html:8, base.html:54)
    319          _append('\n</li>\n<!--\n<li class="item">\n<span class="anchor">')  # partial/sidebar_hot_searchs.html:18 (via partial/foods_sidebar_global.html:11, foods.html:8, base.html:54)
    320          _tmp = search[0]  # partial/sidebar_hot_searchs.html:18 (via partial/foods_sidebar_global.html:11, foods.html:8, base.html:54)
    321          if isinstance(_tmp, _string_types): _tmp = _utf8(_tmp)  # partial/sidebar_hot_searchs.html:18 (via partial/foods_sidebar_global.html:11, foods.html:8, base.html:54)
    322          else: _tmp = _utf8(str(_tmp))  # partial/sidebar_hot_searchs.html:18 (via partial/foods_sidebar_global.html:11, foods.html:8, base.html:54)
    323          _tmp = _utf8(xhtml_escape(_tmp))  # partial/sidebar_hot_searchs.html:18 (via partial/foods_sidebar_global.html:11, foods.html:8, base.html:54)
    324          _append(_tmp)  # partial/sidebar_hot_searchs.html:18 (via partial/foods_sidebar_global.html:11, foods.html:8, base.html:54)
    325          _append('</span>\n</li>\n-->\n</a>\n')  # partial/sidebar_hot_searchs.html:22 (via partial/foods_sidebar_global.html:11, foods.html:8, base.html:54)
    326      _append('\n</ul>\n</div>\n</div>\n')  # partial/sidebar_hot_searchs.html:26 (via partial/foods_sidebar_global.html:11, foods.html:8, base.html:54)
    327      _append('\n')  # partial/foods_sidebar_global.html:12 (via foods.html:8, base.html:54)
    328      _append('\n')  # foods.html:9 (via base.html:54)
    329      _append('\n</div>\n</div>\n</div>\n<div id="footer">\n<div class="inner">\n<div class="right">\n<span class="belief">make the world a little better and easier</span>\n</div>\n<div class="left">\n<ul>\n<li><a href="/about">\xe5\x85\xb3\xe4\xba\x8e</a> <!--<span class="divider">/</span>--></li>\n<!--<li><a href="/feedback">\xe5\x8f\x8d\xe9\xa6\x88</a> <span class="divider">/</span></li>-->\n<!--<li><a href="/blog">\xe6\x97\xa5\xe5\xbf\x97</a></li>-->\n</ul>\n</div>\n</div>\n</div>\n<script type="text/javascript">\nvar _gaq = _gaq || [];\n_gaq.push([\'_setAccount\', \'UA-1281124-23\']);\n_gaq.push([\'_trackPageview\']);\n(function() {\nvar ga = document.createElement(\'script\'); ga.type = \'text/javascript\'; ga.async = true;\nga.src = (\'https:\' == document.location.protocol ? \'https://ssl\' : \'http://www\') + \'.google-analytics.com/ga.js\';\nvar s = document.getElementsByTagName(\'script\')[0]; s.parentNode.insertBefore(ga, s);\n})();\n</script>\n<!-- love your mom! -->\n</body>\n<meta name="description" content="\xe6\x9f\xa5\xe6\xb7\xbb\xe5\x8a\xa0 - " />\n')  # base.html:89
    330      return _utf8('').join(_buffer)  # base.html:0
[E 120723 21:45:09 web:1031] Uncaught exception GET /foods/hot (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/foods/hot', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.100', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cookie': 'viewed_food_ids="\\0541\\0542\\0543\\05411\\0546"; viewed_additive_ids="\\0541\\0545\\0542\\0543"; __utma=148685175.1070362998.1342935208.1343045595.1343049404.8; __utmb=148685175.26.10.1343049404; __utmc=148685175; __utmz=148685175.1342935208.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)', 'Referer': 'http://192.168.0.189/additives/hot?page=1', 'X-Real-Ip': '192.168.0.100', 'If-None-Match': '"ebe4f071aac27135473e1be290accf536a2d57d6"'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "/home/dk/work/python/safood/src/sites/www/handlers/food.py", line 110, in get
        return self._render('hot')
      File "/home/dk/work/python/safood/src/sites/www/handlers/base.py", line 161, in _render
        current_food = food,
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 474, in render
        html = self.render_string(template_name, **kwargs)
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 586, in render_string
        return t.generate(**args)
      File "/usr/local/lib/python2.7/dist-packages/tornado/template.py", line 253, in generate
        return execute()
      File "foods_html.generated.py", line 124, in _execute
        items_per_page = FOODS_PER_PAGE  # partial/pagination.html:9 (via partial/foods.html:24, foods.html:4, base.html:50)
    NameError: global name 'FOODS_PER_PAGE' is not defined
[E 120723 21:45:09 web:1393] 500 GET /foods/hot (127.0.0.1) 297.61ms
[W 120723 21:45:09 web:1393] 404 GET /favicon.ico (127.0.0.1) 2.24ms
[I 120723 21:45:45 web:1393] 200 GET /foods/hot (127.0.0.1) 143.76ms
[I 120723 21:45:49 web:1393] 200 GET /foods/hot?page=2 (127.0.0.1) 33.72ms
[I 120723 21:45:53 web:1393] 200 GET /foods/hot?page=1 (127.0.0.1) 103.75ms
[I 120723 21:45:58 web:1393] 200 GET /food/6 (127.0.0.1) 43.82ms
[W 120723 21:46:00 web:1393] 404 GET /favicon.ico (127.0.0.1) 2.22ms
[W 120723 21:46:07 web:1393] 404 GET /favicon.ico (127.0.0.1) 2.42ms
[W 120723 21:46:09 web:1393] 404 GET /favicon.ico (127.0.0.1) 1.39ms
[W 120723 21:46:11 web:1393] 404 GET /favicon.ico (127.0.0.1) 1.73ms
[W 120723 21:46:11 web:1393] 404 GET /favicon.ico (127.0.0.1) 1.36ms
[I 120723 21:47:42 web:1393] 200 GET /foods/hot?page=1 (127.0.0.1) 164.97ms
[I 120723 21:48:09 web:1393] 200 GET /foods/hot?page=2 (127.0.0.1) 33.01ms
[I 120723 21:48:13 web:1393] 200 GET /foods/hot?page=1 (127.0.0.1) 142.64ms
[I 120723 21:48:17 web:1393] 200 GET /foods/hot?page=2 (127.0.0.1) 34.20ms
[I 120723 21:48:28 web:1393] 200 GET /additives/hot (127.0.0.1) 128.16ms
[I 120723 21:48:32 web:1393] 304 GET /additives/hot?page=2 (127.0.0.1) 35.76ms
[I 120723 21:48:39 web:1393] 304 GET /additives/hot?page=1 (127.0.0.1) 46.70ms
[I 120723 21:48:57 autoreload:133] /home/dk/work/python/safood/src/common/macros/macro.py modified; restarting server
[I 120723 21:50:58 web:1393] 200 GET /foods/hot (127.0.0.1) 367.81ms
[I 120723 21:51:04 web:1393] 304 GET /food/1 (127.0.0.1) 72.38ms
[I 120723 21:51:17 web:1393] 200 GET /food/1 (127.0.0.1) 49.34ms
[I 120723 21:52:59 web:1393] 200 GET / (127.0.0.1) 132.10ms
[I 120723 21:55:45 web:1393] 200 GET /foods/hot (127.0.0.1) 190.50ms
[I 120723 21:55:56 web:1393] 200 GET /additives/hot (127.0.0.1) 120.15ms
[I 120724 07:04:28 web:1393] 200 GET / (127.0.0.1) 2651.47ms
[I 120724 07:05:52 web:1393] 200 GET /additive/1 (127.0.0.1) 426.25ms
[I 120724 07:09:36 autoreload:133] src/sites/www/routes.py modified; restarting server
[I 120724 07:12:17 autoreload:133] /home/dk/work/python/safood/src/sites/www/routes.py modified; restarting server
[W 120724 07:21:44 web:1393] 404 GET /api/additive/ (127.0.0.1) 22.34ms
[W 120724 07:23:07 web:1393] 404 GET /api/additive/ (127.0.0.1) 8.69ms
[W 120724 07:23:31 web:1393] 404 GET /api/additive/ (127.0.0.1) 4.73ms
[I 120724 07:24:59 autoreload:133] src/sites/www/routes.py modified; restarting server
[W 120724 08:21:12 web:1393] 404 GET /api/additive/ (127.0.0.1) 7.73ms
[I 120724 08:21:20 web:1393] 200 GET /api/additive/hot (127.0.0.1) 3228.75ms
[I 120724 08:22:35 autoreload:133] src/sites/www/routes.py modified; restarting server
[I 120724 08:22:47 web:1393] 200 GET /api/additive/hot (127.0.0.1) 1583.82ms
[I 120724 08:23:08 autoreload:133] src/sites/www/handlers/additive_api.py modified; restarting server
[I 120724 08:23:26 web:1393] 200 GET /api/additive/hot (127.0.0.1) 906.40ms
[E 120724 08:28:17 web:1031] Uncaught exception GET /api/additive/hot (127.0.0.1)
    HTTPRequest(protocol='http', host='localhost', method='GET', uri='/api/additive/hot', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Host': 'localhost', 'X-Real-Ip': '127.0.0.1', 'X-Forwarded-For': '127.0.0.1', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': '*/*', 'User-Agent': 'curl/7.21.3 (i686-pc-linux-gnu) libcurl/7.21.3 OpenSSL/0.9.8o zlib/1.2.3.4 libidn/1.18'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "src/sites/www/handlers/additive_api.py", line 113, in get
        return self._write('hot')
      File "src/sites/www/handlers/base.py", line 102, in _write
        result['additives'] = additives.to_dict()
      File "/home/dk/work/python/safood/src/thing/thing/thing.py", line 537, in to_dict
        for column_name in self.table.columns.keys():
      File "/home/dk/work/python/safood/src/thing/thing/thing.py", line 537, in to_dict
        for column_name in self.table.columns.keys():
      File "/usr/lib/python2.7/bdb.py", line 48, in trace_dispatch
        return self.dispatch_line(frame)
      File "/usr/lib/python2.7/bdb.py", line 67, in dispatch_line
        if self.quitting: raise BdbQuit
    BdbQuit
[E 120724 08:28:17 web:1393] 500 GET /api/additive/hot (127.0.0.1) 126290.93ms
[E 120724 08:56:43 web:1031] Uncaught exception GET /api/additive/hot (127.0.0.1)
    HTTPRequest(protocol='http', host='localhost', method='GET', uri='/api/additive/hot', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Host': 'localhost', 'X-Real-Ip': '127.0.0.1', 'X-Forwarded-For': '127.0.0.1', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': '*/*', 'User-Agent': 'curl/7.21.3 (i686-pc-linux-gnu) libcurl/7.21.3 OpenSSL/0.9.8o zlib/1.2.3.4 libidn/1.18'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "src/sites/www/handlers/additive_api.py", line 113, in get
        return self._write('hot')
      File "src/sites/www/handlers/base.py", line 103, in _write
        if kind == 'latest':
      File "src/sites/www/handlers/base.py", line 103, in _write
        if kind == 'latest':
      File "/usr/lib/python2.7/bdb.py", line 48, in trace_dispatch
        return self.dispatch_line(frame)
      File "/usr/lib/python2.7/bdb.py", line 67, in dispatch_line
        if self.quitting: raise BdbQuit
    BdbQuit
[E 120724 08:56:43 web:1393] 500 GET /api/additive/hot (127.0.0.1) 1322076.59ms
[I 120724 08:56:43 autoreload:133] src/sites/www/handlers/base.py modified; restarting server
[E 120724 08:56:53 web:1031] Uncaught exception GET /api/additive/hot (127.0.0.1)
    HTTPRequest(protocol='http', host='localhost', method='GET', uri='/api/additive/hot', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Host': 'localhost', 'X-Real-Ip': '127.0.0.1', 'X-Forwarded-For': '127.0.0.1', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': '*/*', 'User-Agent': 'curl/7.21.3 (i686-pc-linux-gnu) libcurl/7.21.3 OpenSSL/0.9.8o zlib/1.2.3.4 libidn/1.18'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "src/sites/www/handlers/additive_api.py", line 113, in get
        return self._write('hot')
      File "src/sites/www/handlers/base.py", line 102, in _write
        result['additives'] = additives.to_dict_list()
      File "/home/dk/work/python/safood/src/thing/thing/thing.py", line 559, in to_dict_list
        d[column_name] = result.column_name
    AttributeError: Could not locate column in row for column 'column_name'
[E 120724 08:56:53 web:1393] 500 GET /api/additive/hot (127.0.0.1) 975.01ms
[E 120724 09:00:44 web:1031] Uncaught exception GET /api/additive/hot (127.0.0.1)
    HTTPRequest(protocol='http', host='localhost', method='GET', uri='/api/additive/hot', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Host': 'localhost', 'X-Real-Ip': '127.0.0.1', 'X-Forwarded-For': '127.0.0.1', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': '*/*', 'User-Agent': 'curl/7.21.3 (i686-pc-linux-gnu) libcurl/7.21.3 OpenSSL/0.9.8o zlib/1.2.3.4 libidn/1.18'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "src/sites/www/handlers/additive_api.py", line 113, in get
        return self._write('hot')
      File "src/sites/www/handlers/base.py", line 102, in _write
        result['additives'] = additives.to_dict_list()
      File "/home/dk/work/python/safood/src/thing/thing/thing.py", line 559, in to_dict_list
        d[column_name] = getattr(result, column_name)
      File "/home/dk/work/python/safood/src/thing/thing/thing.py", line 559, in to_dict_list
        d[column_name] = getattr(result, column_name)
      File "/usr/lib/python2.7/bdb.py", line 48, in trace_dispatch
        return self.dispatch_line(frame)
      File "/usr/lib/python2.7/bdb.py", line 67, in dispatch_line
        if self.quitting: raise BdbQuit
    BdbQuit
[E 120724 09:00:44 web:1393] 500 GET /api/additive/hot (127.0.0.1) 156772.76ms
[I 120724 09:00:44 autoreload:133] /home/dk/work/python/safood/src/thing/thing/thing.py modified; restarting server
[I 120724 09:00:58 web:1393] 200 GET /api/additive/hot (127.0.0.1) 984.69ms
[I 120724 09:58:47 web:1393] 200 GET /api/additive/hot (127.0.0.1) 1431.95ms
[W 120724 09:58:54 web:1393] 404 GET /api/additive/latest (127.0.0.1) 73.15ms
[I 120724 09:59:27 autoreload:133] src/sites/www/routes.py modified; restarting server
[I 120724 09:59:36 web:1393] 200 GET /api/additive/latest (127.0.0.1) 124.72ms
[I 120724 10:00:41 autoreload:133] /home/dk/work/python/safood/src/sites/www/routes.py modified; restarting server
[E 120724 10:06:08 web:1031] Uncaught exception GET /api/food/latest (127.0.0.1)
    HTTPRequest(protocol='http', host='localhost', method='GET', uri='/api/food/latest', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Host': 'localhost', 'X-Real-Ip': '127.0.0.1', 'X-Forwarded-For': '127.0.0.1', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': '*/*', 'User-Agent': 'curl/7.21.3 (i686-pc-linux-gnu) libcurl/7.21.3 OpenSSL/0.9.8o zlib/1.2.3.4 libidn/1.18'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "src/sites/www/handlers/food_api.py", line 114, in get
        return self._write('latest')
      File "src/sites/www/handlers/base.py", line 195, in _write
        result['title'] = u''
    NameError: global name 'result' is not defined
[E 120724 10:06:08 web:1393] 500 GET /api/food/latest (127.0.0.1) 162.44ms
[I 120724 10:06:23 autoreload:133] src/sites/www/handlers/base.py modified; restarting server
[E 120724 10:06:27 web:1031] Uncaught exception GET /api/food/latest (127.0.0.1)
    HTTPRequest(protocol='http', host='localhost', method='GET', uri='/api/food/latest', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Host': 'localhost', 'X-Real-Ip': '127.0.0.1', 'X-Forwarded-For': '127.0.0.1', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': '*/*', 'User-Agent': 'curl/7.21.3 (i686-pc-linux-gnu) libcurl/7.21.3 OpenSSL/0.9.8o zlib/1.2.3.4 libidn/1.18'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "/home/dk/work/python/safood/src/sites/www/handlers/food_api.py", line 114, in get
        return self._write('latest')
      File "/home/dk/work/python/safood/src/sites/www/handlers/base.py", line 203, in _write
        return self.write(
    TypeError: write() takes exactly 2 arguments (1 given)
[E 120724 10:06:27 web:1393] 500 GET /api/food/latest (127.0.0.1) 128.78ms
[I 120724 10:06:41 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/base.py modified; restarting server
[I 120724 10:06:45 web:1393] 200 GET /api/food/latest (127.0.0.1) 124.66ms
[I 120724 10:06:58 web:1393] 200 GET /api/food/hot (127.0.0.1) 9.67ms
[I 120724 10:08:56 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/base.py modified; restarting server
[I 120724 10:09:00 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/base.py modified; restarting server
[I 120724 10:09:15 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/base.py modified; restarting server
[I 120724 10:11:25 autoreload:133] /home/dk/work/python/safood/src/sites/www/routes.py modified; restarting server
[I 120724 10:11:33 autoreload:133] /home/dk/work/python/safood/src/sites/www/routes.py modified; restarting server
[I 120724 10:13:33 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/additive_api.py modified; restarting server
[I 120724 10:13:45 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/additive_api.py modified; restarting server
[I 120724 10:14:03 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/additive_api.py modified; restarting server
[I 120724 10:14:22 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/additive_api.py modified; restarting server
[I 120724 10:14:38 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/additive_api.py modified; restarting server
[I 120724 10:15:46 web:1393] 200 GET /api/additive/1 (127.0.0.1) 331.97ms
[I 120724 10:15:53 web:1393] 200 GET /api/additive/2 (127.0.0.1) 73.74ms
[I 120724 10:17:02 web:1393] 200 GET /api/additive/56 (127.0.0.1) 199.95ms
[I 120724 10:18:10 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/additive_api.py modified; restarting server
[I 120724 10:18:15 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/additive_api.py modified; restarting server
[I 120724 10:19:17 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/additive_api.py modified; restarting server
[I 120724 10:19:25 web:1393] 200 GET /api/additive/56 (127.0.0.1) 120.17ms
[I 120724 10:19:36 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/additive_api.py modified; restarting server
[I 120724 10:19:48 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/additive_api.py modified; restarting server
[I 120724 10:23:10 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/additive_api.py modified; restarting server
[I 120724 10:23:17 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/additive_api.py modified; restarting server
[I 120724 10:23:27 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/additive_api.py modified; restarting server
[I 120724 10:33:55 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/additive_api.py modified; restarting server
[I 120724 10:33:59 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/additive_api.py modified; restarting server
[E 120724 10:34:16 web:1031] Uncaught exception GET /api/additive/2 (127.0.0.1)
    HTTPRequest(protocol='http', host='localhost', method='GET', uri='/api/additive/2', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Host': 'localhost', 'X-Real-Ip': '127.0.0.1', 'X-Forwarded-For': '127.0.0.1', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': '*/*', 'User-Agent': 'curl/7.21.3 (i686-pc-linux-gnu) libcurl/7.21.3 OpenSSL/0.9.8o zlib/1.2.3.4 libidn/1.18'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "/home/dk/work/python/safood/src/sites/www/handlers/additive_api.py", line 29, in get
        result.update(details)
    ValueError: dictionary update sequence element #0 has length 11; 2 is required
[E 120724 10:34:16 web:1393] 500 GET /api/additive/2 (127.0.0.1) 240.65ms
[E 120724 10:48:10 web:1031] Uncaught exception GET /api/additive/2 (127.0.0.1)
    HTTPRequest(protocol='http', host='localhost', method='GET', uri='/api/additive/2', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Host': 'localhost', 'X-Real-Ip': '127.0.0.1', 'X-Forwarded-For': '127.0.0.1', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': '*/*', 'User-Agent': 'curl/7.21.3 (i686-pc-linux-gnu) libcurl/7.21.3 OpenSSL/0.9.8o zlib/1.2.3.4 libidn/1.18'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "src/sites/www/handlers/additive_api.py", line 29, in get
        if details:
      File "src/sites/www/handlers/additive_api.py", line 29, in get
        if details:
      File "/usr/lib/python2.7/bdb.py", line 48, in trace_dispatch
        return self.dispatch_line(frame)
      File "/usr/lib/python2.7/bdb.py", line 67, in dispatch_line
        if self.quitting: raise BdbQuit
    BdbQuit
[E 120724 10:48:10 web:1393] 500 GET /api/additive/2 (127.0.0.1) 333542.74ms
[I 120724 10:48:10 autoreload:133] src/sites/www/handlers/additive_api.py modified; restarting server
[I 120724 10:48:29 web:1393] 200 GET /additive/1 (127.0.0.1) 1356.91ms
[I 120724 10:48:29 web:1393] 200 GET /additive/1 (127.0.0.1) 134.99ms
[I 120724 10:49:00 web:1393] 200 GET /api/additive/2 (127.0.0.1) 131.03ms
[E 120724 10:51:00 web:1031] Uncaught exception GET /api/additive/2 (127.0.0.1)
    HTTPRequest(protocol='http', host='localhost', method='GET', uri='/api/additive/2', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Host': 'localhost', 'X-Real-Ip': '127.0.0.1', 'X-Forwarded-For': '127.0.0.1', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': '*/*', 'User-Agent': 'curl/7.21.3 (i686-pc-linux-gnu) libcurl/7.21.3 OpenSSL/0.9.8o zlib/1.2.3.4 libidn/1.18'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "src/sites/www/handlers/additive_api.py", line 28, in get
        details = models.Additive_Detail().find(additive_id)
      File "src/sites/www/handlers/additive_api.py", line 28, in get
        details = models.Additive_Detail().find(additive_id)
      File "/usr/lib/python2.7/bdb.py", line 48, in trace_dispatch
        return self.dispatch_line(frame)
      File "/usr/lib/python2.7/bdb.py", line 67, in dispatch_line
        if self.quitting: raise BdbQuit
    BdbQuit
[E 120724 10:51:00 web:1393] 500 GET /api/additive/2 (127.0.0.1) 39793.90ms
[I 120724 10:54:07 web:1393] 200 GET /api/additive/2 (127.0.0.1) 1215.40ms
[I 120724 10:57:03 autoreload:133] src/sites/www/handlers/additive_api.py modified; restarting server
[I 120724 10:57:34 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/additive_api.py modified; restarting server
[I 120724 10:58:58 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/additive_api.py modified; restarting server
[I 120724 10:59:12 web:1393] 200 GET /api/additive/2 (127.0.0.1) 220.81ms
[I 120724 11:22:51 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/food_api.py modified; restarting server
[I 120724 11:23:15 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/food_api.py modified; restarting server
[I 120724 11:36:18 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/food_api.py modified; restarting server
[I 120724 11:36:54 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/food_api.py modified; restarting server
[W 120724 11:37:09 web:1393] 404 GET /api/food/1 (127.0.0.1) 5.56ms
[I 120724 11:37:48 autoreload:133] /home/dk/work/python/safood/src/sites/www/routes.py modified; restarting server
[E 120724 11:37:57 web:1031] Uncaught exception GET /api/food/1 (127.0.0.1)
    HTTPRequest(protocol='http', host='localhost', method='GET', uri='/api/food/1', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Host': 'localhost', 'X-Real-Ip': '127.0.0.1', 'X-Forwarded-For': '127.0.0.1', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': '*/*', 'User-Agent': 'curl/7.21.3 (i686-pc-linux-gnu) libcurl/7.21.3 OpenSSL/0.9.8o zlib/1.2.3.4 libidn/1.18'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "/home/dk/work/python/safood/src/sites/www/handlers/food_api.py", line 33, in get
        return self.write(resutl)
    NameError: global name 'resutl' is not defined
[E 120724 11:37:57 web:1393] 500 GET /api/food/1 (127.0.0.1) 244.71ms
[I 120724 11:38:11 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/food_api.py modified; restarting server
[I 120724 11:38:13 web:1393] 200 GET /api/food/1 (127.0.0.1) 256.02ms
[I 120724 12:56:16 web:1393] 200 GET /api/additive/2 (127.0.0.1) 98.68ms
[I 120724 12:56:39 web:1393] 200 GET /api/food/2 (127.0.0.1) 72.28ms
[I 120724 12:56:46 web:1393] 200 GET /api/food/3 (127.0.0.1) 70.86ms
[I 120724 12:57:26 web:1393] 200 GET /api/food/1 (127.0.0.1) 158.55ms
[I 120724 12:59:16 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/food_api.py modified; restarting server
[I 120724 13:45:12 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/food_api.py modified; restarting server
[I 120724 13:45:29 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/food_api.py modified; restarting server
[I 120724 13:45:49 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/food_api.py modified; restarting server
[I 120724 13:46:01 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/food_api.py modified; restarting server
[I 120724 13:46:18 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/food_api.py modified; restarting server
[I 120724 13:46:23 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/food_api.py modified; restarting server
[I 120724 13:46:29 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/food_api.py modified; restarting server
[I 120724 13:48:06 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/food_api.py modified; restarting server
[I 120724 13:48:23 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/food_api.py modified; restarting server
[I 120724 13:49:16 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/food_api.py modified; restarting server
[I 120724 13:49:58 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/food_api.py modified; restarting server
[I 120724 13:50:14 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/food_api.py modified; restarting server
[I 120724 13:50:34 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/food_api.py modified; restarting server
[I 120724 13:50:42 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/food_api.py modified; restarting server
[I 120724 13:51:01 web:1393] 200 GET /api/food/1 (127.0.0.1) 257.31ms
[I 120724 15:23:24 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/food_api.py modified; restarting server
[I 120724 15:34:04 web:1393] 200 GET /api/food/1 (127.0.0.1) 1238.58ms
[W 120724 15:40:08 web:1393] 404 GET /api/food/ (127.0.0.1) 5.56ms
[E 120724 15:40:10 web:1031] Uncaught exception GET /api/food (127.0.0.1)
    HTTPRequest(protocol='http', host='localhost', method='GET', uri='/api/food', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Host': 'localhost', 'X-Real-Ip': '127.0.0.1', 'X-Forwarded-For': '127.0.0.1', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': '*/*', 'User-Agent': 'curl/7.21.3 (i686-pc-linux-gnu) libcurl/7.21.3 OpenSSL/0.9.8o zlib/1.2.3.4 libidn/1.18'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
    TypeError: get() takes exactly 2 arguments (1 given)
[E 120724 15:40:10 web:1393] 500 GET /api/food (127.0.0.1) 6.71ms
[I 120724 15:40:33 web:1393] 200 GET /api/food/hot (127.0.0.1) 44.31ms
[I 120724 15:45:36 web:1393] 200 GET /api/food/hot?page=1 (127.0.0.1) 43.01ms
[I 120724 15:45:40 web:1393] 200 GET /api/food/hot?page=2 (127.0.0.1) 41.50ms
[I 120724 16:08:36 web:1393] 200 GET /api/additive/hot?page=1 (127.0.0.1) 89.16ms
[I 120724 16:08:40 web:1393] 200 GET /api/additive/hot?page=2 (127.0.0.1) 26.42ms
[I 120724 16:13:00 autoreload:133] src/sites/www/handlers/base.py modified; restarting server
[I 120724 16:13:10 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/base.py modified; restarting server
[I 120724 16:17:46 web:1393] 200 GET /api/food/2 (127.0.0.1) 259.37ms
[I 120724 16:24:16 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/food_api.py modified; restarting server
[W 120724 16:25:26 web:1393] 404 GET /api/food/ingredients?id=2 (127.0.0.1) 8.40ms
[I 120724 16:25:36 web:1393] 200 GET /api/food?id=2 (127.0.0.1) 1411.48ms
[I 120724 16:29:57 autoreload:133] src/sites/www/handlers/food_api.py modified; restarting server
[I 120724 16:30:03 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/food_api.py modified; restarting server
[I 120724 16:30:34 web:1393] 200 GET /api/food?id=2 (127.0.0.1) 246.67ms
[I 120724 16:38:12 autoreload:133] /home/dk/work/python/safood/src/sites/www/routes.py modified; restarting server
[I 120724 16:38:16 autoreload:133] /home/dk/work/python/safood/src/sites/www/routes.py modified; restarting server
[I 120724 16:39:13 web:1393] 200 GET /api/additives/hot (127.0.0.1) 134.21ms
[I 120724 16:39:18 web:1393] 200 GET /api/foods/hot (127.0.0.1) 18.70ms
[I 120724 17:20:48 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/food_api.py modified; restarting server
[I 120724 17:20:54 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/food_api.py modified; restarting server
[I 120724 17:21:47 autoreload:133] /home/dk/work/python/safood/src/sites/www/routes.py modified; restarting server
[I 120724 17:22:05 autoreload:133] /home/dk/work/python/safood/src/sites/www/routes.py modified; restarting server
[I 120724 17:22:16 autoreload:133] /home/dk/work/python/safood/src/sites/www/routes.py modified; restarting server
[I 120724 17:22:32 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/food_api.py modified; restarting server
[I 120724 17:22:45 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/food_api.py modified; restarting server
[I 120724 17:31:38 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/food_api.py modified; restarting server
[I 120724 17:34:17 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/food_api.py modified; restarting server
[I 120724 17:34:48 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/food_api.py modified; restarting server
[I 120724 18:07:53 autoreload:133] /home/dk/work/python/safood/src/thing/thing/thing.py modified; restarting server
[W 120724 20:32:47 web:1393] 404 GET /api/additive/search?q= (127.0.0.1) 22.37ms
[I 120724 20:34:02 autoreload:133] src/sites/www/routes.py modified; restarting server
[I 120724 20:34:12 autoreload:133] /home/dk/work/python/safood/src/sites/www/routes.py modified; restarting server
[E 120724 20:34:30 web:1031] Uncaught exception GET /api/additive/search?q= (127.0.0.1)
    HTTPRequest(protocol='http', host='localhost', method='GET', uri='/api/additive/search?q=\xc3\xa6\xc2\xb5\xc2\x8b\xc3\xa8\xc2\xaf\xc2\x95', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Host': 'localhost', 'X-Real-Ip': '127.0.0.1', 'X-Forwarded-For': '127.0.0.1', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': '*/*', 'User-Agent': 'curl/7.21.3 (i686-pc-linux-gnu) libcurl/7.21.3 OpenSSL/0.9.8o zlib/1.2.3.4 libidn/1.18'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
    TypeError: get() takes exactly 2 arguments (1 given)
[E 120724 20:34:30 web:1393] 500 GET /api/additive/search?q= (127.0.0.1) 7.30ms
[I 120724 20:34:42 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/additive_api.py modified; restarting server
[I 120724 20:35:23 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/additive_api.py modified; restarting server
[I 120724 20:35:34 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/additive_api.py modified; restarting server
[I 120724 20:35:44 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/additive_api.py modified; restarting server
[E 120724 20:35:49 web:1031] Uncaught exception GET /api/additive/search?q= (127.0.0.1)
    HTTPRequest(protocol='http', host='localhost', method='GET', uri='/api/additive/search?q=\xc3\xa6\xc2\xb5\xc2\x8b\xc3\xa8\xc2\xaf\xc2\x95', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Host': 'localhost', 'X-Real-Ip': '127.0.0.1', 'X-Forwarded-For': '127.0.0.1', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': '*/*', 'User-Agent': 'curl/7.21.3 (i686-pc-linux-gnu) libcurl/7.21.3 OpenSSL/0.9.8o zlib/1.2.3.4 libidn/1.18'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "/home/dk/work/python/safood/src/sites/www/handlers/additive_api.py", line 52, in get
        additives = models.Additive().search('%{0}%'.format(val))
    UnicodeEncodeError: 'ascii' codec can't encode characters in position 0-5: ordinal not in range(128)
[E 120724 20:35:49 web:1393] 500 GET /api/additive/search?q= (127.0.0.1) 545.81ms
[I 120724 20:36:17 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/additive_api.py modified; restarting server
[E 120724 20:36:19 web:1031] Uncaught exception GET /api/additive/search?q= (127.0.0.1)
    HTTPRequest(protocol='http', host='localhost', method='GET', uri='/api/additive/search?q=\xc3\xa6\xc2\xb5\xc2\x8b\xc3\xa8\xc2\xaf\xc2\x95', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Host': 'localhost', 'X-Real-Ip': '127.0.0.1', 'X-Forwarded-For': '127.0.0.1', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': '*/*', 'User-Agent': 'curl/7.21.3 (i686-pc-linux-gnu) libcurl/7.21.3 OpenSSL/0.9.8o zlib/1.2.3.4 libidn/1.18'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "/home/dk/work/python/safood/src/sites/www/handlers/additive_api.py", line 52, in get
        additives = models.Additive().search(u'%{0}%'.format(val))
      File "/home/dk/work/python/safood/src/common/models/additive.py", line 39, in search
        .where('cns', 'like', val)\
      File "/home/dk/work/python/safood/src/thing/thing/thing.py", line 482, in or_find
        if val:
    NameError: global name 'val' is not defined
[E 120724 20:36:19 web:1393] 500 GET /api/additive/search?q= (127.0.0.1) 190.23ms
[I 120724 20:36:41 autoreload:133] /home/dk/work/python/safood/src/common/models/additive.py modified; restarting server
[I 120724 20:37:11 autoreload:133] /home/dk/work/python/safood/src/thing/thing/thing.py modified; restarting server
[E 120724 20:37:54 web:1031] Uncaught exception GET /api/additive/search?q= (127.0.0.1)
    HTTPRequest(protocol='http', host='localhost', method='GET', uri='/api/additive/search?q=\xc3\xa6\xc2\xb5\xc2\x8b\xc3\xa8\xc2\xaf\xc2\x95', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Host': 'localhost', 'X-Real-Ip': '127.0.0.1', 'X-Forwarded-For': '127.0.0.1', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': '*/*', 'User-Agent': 'curl/7.21.3 (i686-pc-linux-gnu) libcurl/7.21.3 OpenSSL/0.9.8o zlib/1.2.3.4 libidn/1.18'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "/home/dk/work/python/safood/src/sites/www/handlers/additive_api.py", line 52, in get
        additives = models.Additive().search(u'%{0}%'.format(val))
      File "/home/dk/work/python/safood/src/common/models/additive.py", line 39, in search
        .where('cns', 'like', val)\
      File "/home/dk/work/python/safood/src/thing/thing/thing.py", line 530, in or_findall
        query = query(or_(*self._filters)) if self._filters else query()
    NameError: global name 'or_' is not defined
[E 120724 20:37:54 web:1393] 500 GET /api/additive/search?q= (127.0.0.1) 124.07ms
[I 120724 20:38:10 autoreload:133] /home/dk/work/python/safood/src/thing/thing/thing.py modified; restarting server
[E 120724 20:38:15 web:1031] Uncaught exception GET /api/additive/search?q= (127.0.0.1)
    HTTPRequest(protocol='http', host='localhost', method='GET', uri='/api/additive/search?q=\xc3\xa6\xc2\xb5\xc2\x8b\xc3\xa8\xc2\xaf\xc2\x95', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Host': 'localhost', 'X-Real-Ip': '127.0.0.1', 'X-Forwarded-For': '127.0.0.1', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': '*/*', 'User-Agent': 'curl/7.21.3 (i686-pc-linux-gnu) libcurl/7.21.3 OpenSSL/0.9.8o zlib/1.2.3.4 libidn/1.18'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "/home/dk/work/python/safood/src/sites/www/handlers/additive_api.py", line 53, in get
        return self.write(additives)
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 469, in write
        chunk = utf8(chunk)
      File "/usr/local/lib/python2.7/dist-packages/tornado/escape.py", line 161, in utf8
        assert isinstance(value, unicode)
    AssertionError
[E 120724 20:38:15 web:1393] 500 GET /api/additive/search?q= (127.0.0.1) 205.72ms
[I 120724 20:39:08 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/additive_api.py modified; restarting server
[I 120724 20:39:10 web:1393] 200 GET /api/additive/search?q= (127.0.0.1) 126.22ms
[I 120724 20:39:14 web:1393] 200 GET /api/additive/search?q= (127.0.0.1) 5.82ms
[I 120724 21:36:46 web:1393] 200 GET /api/additive/search?q=2 (127.0.0.1) 4.47ms
[E 120724 21:40:07 web:1031] Uncaught exception GET /api/additive/search?q=2 (127.0.0.1)
    HTTPRequest(protocol='http', host='localhost', method='GET', uri='/api/additive/search?q=2', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Host': 'localhost', 'X-Real-Ip': '127.0.0.1', 'X-Forwarded-For': '127.0.0.1', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': '*/*', 'User-Agent': 'curl/7.21.3 (i686-pc-linux-gnu) libcurl/7.21.3 OpenSSL/0.9.8o zlib/1.2.3.4 libidn/1.18'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "src/sites/www/handlers/additive_api.py", line 53, in get
        return self.write(additives.to_dict())
      File "src/sites/www/handlers/additive_api.py", line 53, in get
        return self.write(additives.to_dict())
      File "/usr/lib/python2.7/bdb.py", line 48, in trace_dispatch
        return self.dispatch_line(frame)
      File "/usr/lib/python2.7/bdb.py", line 67, in dispatch_line
        if self.quitting: raise BdbQuit
    BdbQuit
[E 120724 21:40:07 web:1393] 500 GET /api/additive/search?q=2 (127.0.0.1) 130231.45ms
[I 120724 21:42:07 web:1393] 200 GET /api/additive/search?q=2 (127.0.0.1) 841.37ms
[I 120724 21:42:34 web:1393] 200 GET /api/additive/search?q=2 (127.0.0.1) 16.14ms
[I 120724 21:42:39 web:1393] 200 GET /api/additive/search?q=3 (127.0.0.1) 22.01ms
[I 120724 21:42:43 web:1393] 200 GET /api/additive/search?q= (127.0.0.1) 16.08ms
[I 120724 21:43:11 web:1393] 200 GET /api/additive/search?q= (127.0.0.1) 917.34ms
[I 120724 21:44:14 web:1393] 200 GET /api/additive/search?q= (127.0.0.1) 845.21ms
[I 120724 21:46:56 web:1393] 200 GET /api/additive/search?q= (127.0.0.1) 109662.00ms
[I 120724 21:48:57 web:1393] 200 GET /api/additive/search?q=2 (127.0.0.1) 3752.85ms
[I 120724 21:55:40 web:1393] 200 GET /api/additive/search?q= (127.0.0.1) 92883.87ms
[I 120724 21:56:49 web:1393] 200 GET /api/additive/search?q=%E6%B5%8B%E8%AF%95 (127.0.0.1) 3047.64ms
[W 120724 21:56:51 web:1393] 404 GET /favicon.ico (127.0.0.1) 10.57ms
[I 120724 21:57:05 web:1393] 200 GET /api/additive/search?q=%E6%B5%8B%E8%AF%953 (127.0.0.1) 1383.07ms
[W 120724 21:57:06 web:1393] 404 GET /favicon.ico (127.0.0.1) 10.39ms
[I 120724 22:03:36 web:1393] 200 GET /api/additive/search?q= (127.0.0.1) 4676.22ms
[I 120725 06:56:26 web:1393] 304 GET /api/additive/search?q=%E6%B5%8B%E8%AF%95 (127.0.0.1) 1448.51ms
[W 120725 06:56:26 web:1393] 404 GET /favicon.ico (127.0.0.1) 129.26ms
[I 120725 06:57:31 web:1393] 200 GET /api/additive/search?q=2 (127.0.0.1) 24.91ms
[I 120725 06:57:41 web:1393] 200 GET /api/additive/search?q=2 (127.0.0.1) 23.61ms
[I 120725 06:59:12 autoreload:133] src/sites/www/handlers/additive_api.py modified; restarting server
[E 120725 06:59:24 web:1031] Uncaught exception GET /api/additive?1 (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/api/additive?1', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.100', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cookie': '__utma=148685175.1070362998.1342935208.1343084176.1343098109.10; __utmz=148685175.1342935208.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)', 'X-Real-Ip': '192.168.0.100'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
    TypeError: get() takes exactly 2 arguments (1 given)
[E 120725 06:59:24 web:1393] 500 GET /api/additive?1 (127.0.0.1) 17.55ms
[W 120725 06:59:24 web:1393] 404 GET /favicon.ico (127.0.0.1) 1.07ms
[E 120725 06:59:32 web:1031] Uncaught exception GET /api/additive?id=1 (127.0.0.1)
    HTTPRequest(protocol='http', host='192.168.0.189', method='GET', uri='/api/additive?id=1', version='HTTP/1.0', remote_ip='127.0.0.1', body='', headers={'Accept-Language': 'zh-CN,zh;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '192.168.0.100', 'X-Scheme': 'http', 'Connection': 'close', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11', 'Accept-Charset': 'GBK,utf-8;q=0.7,*;q=0.3', 'Host': '192.168.0.189', 'Cookie': '__utma=148685175.1070362998.1342935208.1343084176.1343098109.10; __utmz=148685175.1342935208.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)', 'X-Real-Ip': '192.168.0.100'})
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 988, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
    TypeError: get() takes exactly 2 arguments (1 given)
[E 120725 06:59:32 web:1393] 500 GET /api/additive?id=1 (127.0.0.1) 1.99ms
[W 120725 06:59:32 web:1393] 404 GET /favicon.ico (127.0.0.1) 1.09ms
[I 120725 06:59:41 web:1393] 200 GET /api/food?id=1 (127.0.0.1) 373.17ms
[W 120725 06:59:41 web:1393] 404 GET /favicon.ico (127.0.0.1) 1.02ms
[I 120725 07:00:17 autoreload:133] /home/dk/work/python/safood/src/sites/www/routes.py modified; restarting server
[I 120725 07:01:57 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/additive_api.py modified; restarting server
[I 120725 07:02:14 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/additive_api.py modified; restarting server
[I 120725 07:02:27 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/additive_api.py modified; restarting server
[W 120725 07:03:00 web:1393] 404 GET /favicon.ico (127.0.0.1) 5.99ms
[I 120725 07:03:02 web:1393] 200 GET /api/additive?id=1 (127.0.0.1) 140.59ms
[W 120725 07:03:02 web:1393] 404 GET /favicon.ico (127.0.0.1) 1.08ms
[I 120725 07:03:20 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/additive_api.py modified; restarting server
[I 120725 07:03:25 web:1393] 200 GET /api/additive?id=1 (127.0.0.1) 233.91ms
[W 120725 07:03:25 web:1393] 404 GET /favicon.ico (127.0.0.1) 2.90ms
[I 120725 07:04:52 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/additive_api.py modified; restarting server
[I 120725 07:05:20 web:1393] 304 GET /api/additive?id=1 (127.0.0.1) 1272.14ms
[W 120725 07:05:21 web:1393] 404 GET /favicon.ico (127.0.0.1) 16.30ms
[I 120725 07:12:13 autoreload:133] src/sites/www/handlers/food_api.py modified; restarting server
[I 120725 07:12:49 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/food_api.py modified; restarting server
[I 120725 07:12:55 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/food_api.py modified; restarting server
[I 120725 07:13:44 autoreload:133] /home/dk/work/python/safood/src/sites/www/handlers/food_api.py modified; restarting server
[I 120725 07:14:35 autoreload:133] /home/dk/work/python/safood/src/common/models/food.py modified; restarting server
[I 120725 07:14:42 autoreload:133] /home/dk/work/python/safood/src/common/models/food.py modified; restarting server
[I 120725 07:15:08 autoreload:133] /home/dk/work/python/safood/src/common/models/food.py modified; restarting server
[I 120725 07:15:35 web:1393] 304 GET /api/food?id=1 (127.0.0.1) 669.71ms
[W 120725 07:15:35 web:1393] 404 GET /favicon.ico (127.0.0.1) 2.24ms
[I 120725 07:15:48 web:1393] 200 GET /api/food/search?q=1 (127.0.0.1) 11.42ms
[W 120725 07:15:48 web:1393] 404 GET /favicon.ico (127.0.0.1) 1.08ms
[I 120725 07:15:55 web:1393] 200 GET /api/food/search?q=%E9%9D%A2 (127.0.0.1) 10.31ms
[W 120725 07:15:56 web:1393] 404 GET /favicon.ico (127.0.0.1) 1.02ms
[I 120725 07:16:03 web:1393] 200 GET /api/food/search?q=%E9%9D%A2%E5%8C%85 (127.0.0.1) 10.94ms
[W 120725 07:16:03 web:1393] 404 GET /favicon.ico (127.0.0.1) 1.33ms
[W 120725 07:21:10 web:1393] 404 GET /favicon.ico (127.0.0.1) 2.43ms
[W 120725 07:21:10 web:1393] 404 GET /favicon.ico (127.0.0.1) 1.14ms
[W 120725 07:21:11 web:1393] 404 GET /favicon.ico (127.0.0.1) 1.10ms
[W 120725 07:21:12 web:1393] 404 GET /favicon.ico (127.0.0.1) 1.17ms
[W 120725 07:21:13 web:1393] 404 GET /favicon.ico (127.0.0.1) 1.26ms
[W 120725 07:21:14 web:1393] 404 GET /favicon.ico (127.0.0.1) 0.98ms
[I 120725 07:23:18 web:1393] 200 GET /api/additive/search?q=%E8%BF%B7%E8%BF%AD%E9%A6%99 (127.0.0.1) 15.08ms
[W 120725 07:23:18 web:1393] 404 GET /favicon.ico (127.0.0.1) 0.97ms
[I 120725 08:34:51 web:1393] 304 GET /api/food/search?q=%E9%9D%A2 (127.0.0.1) 5.42ms
[W 120725 08:34:51 web:1393] 404 GET /favicon.ico (127.0.0.1) 1.11ms
[W 120725 11:02:40 web:1393] 404 GET /favicon.ico (127.0.0.1) 20.88ms
[W 120725 11:02:46 web:1393] 404 GET /api/food/latest (127.0.0.1) 9.53ms
[W 120725 11:02:46 web:1393] 404 GET /favicon.ico (127.0.0.1) 7.24ms
[I 120725 11:03:17 web:1393] 200 GET /api/foods/latest (127.0.0.1) 1547.82ms
[W 120725 11:03:17 web:1393] 404 GET /favicon.ico (127.0.0.1) 4.14ms
[I 120725 11:03:33 web:1393] 200 GET /api/additives/latest (127.0.0.1) 98.07ms
[W 120725 11:03:33 web:1393] 404 GET /favicon.ico (127.0.0.1) 4.54ms
[I 120725 11:07:38 web:1393] 200 GET /api/additive?id=1 (127.0.0.1) 228.50ms
[W 120725 11:07:39 web:1393] 404 GET /favicon.ico (127.0.0.1) 3.72ms
[I 120725 14:58:10 web:1393] 200 GET /api/foods/hot?page=1 (127.0.0.1) 1280.39ms
[W 120725 14:58:10 web:1393] 404 GET /favicon.ico (127.0.0.1) 33.23ms
[I 120725 14:58:22 web:1393] 200 GET /api/foods/hot?page=1&callback=jQuery16405335031063295901_1343199498784&_=1343199498831 (127.0.0.1) 38.83ms
[I 120725 14:58:39 web:1393] 304 GET /api/foods/hot?page=1 (127.0.0.1) 157.08ms
[W 120725 14:58:40 web:1393] 404 GET /favicon.ico (127.0.0.1) 4.46ms
[I 120725 14:59:28 web:1393] 200 GET /api/foods/hot?page=1&callback=jQuery164035655200527980924_1343199564984&_=1343199565030 (127.0.0.1) 33.91ms
[I 120725 15:01:35 web:1393] 200 GET /api/foods/hot?page=1&callback=jQuery164011000855779275298_1343199691799&_=1343199691848 (127.0.0.1) 39.32ms
[I 120725 15:03:18 web:1393] 200 GET /api/foods/hot?page=1&callback=jQuery164010185254504904151_1343199794983&_=1343199795026 (127.0.0.1) 38.19ms
[I 120725 15:04:31 web:1393] 200 GET /api/foods/hot?page=1&callback=jQuery164010185254504904151_1343199794983&_=1343199795026 (127.0.0.1) 55.04ms
[W 120725 15:04:32 web:1393] 404 GET /favicon.ico (127.0.0.1) 4.99ms
[I 120725 15:04:35 web:1393] 200 GET /api/foods/hot?page=1&callback=jQuery164010185254504904151_1343199794983&_=1343199795026%20(127.0.0.1)%2038.19ms (127.0.0.1) 33.55ms
[W 120725 15:04:35 web:1393] 404 GET /favicon.ico (127.0.0.1) 4.14ms
[I 120725 15:04:39 web:1393] 304 GET /api/foods/hot?page=1&callback=jQuery164010185254504904151_1343199794983&_=1343199795026%20(127.0.0.1)%2038.19ms (127.0.0.1) 45.97ms
[W 120725 15:04:39 web:1393] 404 GET /favicon.ico (127.0.0.1) 6.02ms
[I 120725 15:04:40 web:1393] 304 GET /api/foods/hot?page=1&callback=jQuery164010185254504904151_1343199794983&_=1343199795026%20(127.0.0.1)%2038.19ms (127.0.0.1) 47.94ms
[W 120725 15:04:40 web:1393] 404 GET /favicon.ico (127.0.0.1) 5.27ms
[I 120725 15:04:41 web:1393] 304 GET /api/foods/hot?page=1&callback=jQuery164010185254504904151_1343199794983&_=1343199795026%20(127.0.0.1)%2038.19ms (127.0.0.1) 42.03ms
[W 120725 15:04:41 web:1393] 404 GET /favicon.ico (127.0.0.1) 4.03ms
[I 120725 15:04:47 web:1393] 304 GET /api/foods/hot?page=1&callback=jQuery164010185254504904151_1343199794983&_=1343199795026%20(127.0.0.1)%2038.19ms (127.0.0.1) 42.86ms
[W 120725 15:04:47 web:1393] 404 GET /favicon.ico (127.0.0.1) 4.41ms
[I 120725 15:04:48 web:1393] 304 GET /api/foods/hot?page=1&callback=jQuery164010185254504904151_1343199794983&_=1343199795026%20(127.0.0.1)%2038.19ms (127.0.0.1) 42.72ms
[W 120725 15:04:48 web:1393] 404 GET /favicon.ico (127.0.0.1) 7.29ms
[I 120725 15:05:34 web:1393] 200 GET /api/foods/hot?page=1&callback=jQuery1640793772381497547_1343199930691&_=1343199930737 (127.0.0.1) 36.07ms
[I 120725 15:05:47 web:1393] 200 GET /api/foods/hot?page=1&callback=jQuery16407433919804170728_1343199944290&_=1343199944336 (127.0.0.1) 35.01ms
[I 120725 15:05:52 web:1393] 200 GET /api/foods/hot?page=1&callback=jQuery16409921203304547817_1343199948738&_=1343199948769 (127.0.0.1) 36.07ms
[I 120725 15:20:31 web:1393] 304 GET /api/foods/hot?page=1 (127.0.0.1) 38.04ms
[I 120725 15:20:36 web:1393] 304 GET /api/foods/hot?page=1 (127.0.0.1) 38.99ms
[I 120725 15:20:38 web:1393] 304 GET /api/foods/hot?page=1 (127.0.0.1) 38.80ms
[I 120725 15:20:50 web:1393] 304 GET /api/foods/hot?page=1 (127.0.0.1) 39.14ms
[I 120725 15:24:26 web:1393] 200 GET /api/foods/hot?page=1&callback=jQuery164042664730455726385_1343201063651&_=1343201063702 (127.0.0.1) 36.68ms
[I 120725 15:24:33 web:1393] 200 GET /api/foods/hot?page=1&callback=jQuery16401375759409274906_1343201070660&_=1343201070703 (127.0.0.1) 38.82ms
[I 120725 15:24:52 web:1393] 304 GET /api/foods/hot?page=1 (127.0.0.1) 35.31ms
[I 120725 15:26:12 web:1393] 304 GET /api/foods/hot?page=1 (127.0.0.1) 36.38ms
[I 120725 15:26:16 web:1393] 304 GET /api/foods/hot?page=1 (127.0.0.1) 38.24ms
[I 120725 15:27:49 web:1393] 304 GET /api/foods/hot?page=1 (127.0.0.1) 38.57ms
[I 120725 15:27:53 web:1393] 304 GET /api/foods/hot?page=1&callback=jQuery164010185254504904151_1343199794983&_=1343199795026%20(127.0.0.1)%2038.19ms (127.0.0.1) 37.93ms
[W 120725 15:27:53 web:1393] 404 GET /favicon.ico (127.0.0.1) 4.24ms
[I 120725 15:27:54 web:1393] 304 GET /api/foods/hot?page=1&callback=jQuery164010185254504904151_1343199794983&_=1343199795026%20(127.0.0.1)%2038.19ms (127.0.0.1) 36.72ms
[W 120725 15:27:54 web:1393] 404 GET /favicon.ico (127.0.0.1) 4.90ms
[I 120725 15:28:08 web:1393] 304 GET /api/foods/hot?page=1 (127.0.0.1) 38.59ms
[I 120725 15:28:20 web:1393] 304 GET /api/foods/hot?page=1 (127.0.0.1) 38.63ms
[I 120725 15:35:51 web:1393] 304 GET /api/foods/hot?page=1 (127.0.0.1) 37.98ms
[I 120725 15:35:53 web:1393] 304 GET /api/foods/hot?page=1 (127.0.0.1) 39.26ms
[I 120725 15:35:55 web:1393] 304 GET /api/foods/hot?page=1 (127.0.0.1) 38.44ms
[I 120725 15:35:57 web:1393] 304 GET /api/foods/hot?page=1 (127.0.0.1) 37.30ms
[I 120725 15:35:58 web:1393] 304 GET /api/foods/hot?page=1 (127.0.0.1) 39.01ms
[I 120725 15:36:01 web:1393] 304 GET /api/foods/hot?page=1 (127.0.0.1) 38.12ms
[I 120725 15:36:04 web:1393] 304 GET /api/foods/hot?page=1 (127.0.0.1) 39.68ms
[I 120725 15:36:06 web:1393] 304 GET /api/foods/hot?page=1 (127.0.0.1) 38.52ms
[I 120725 15:36:08 web:1393] 304 GET /api/foods/hot?page=1 (127.0.0.1) 38.20ms
[I 120725 15:39:27 web:1393] 304 GET /api/foods/hot?page=1 (127.0.0.1) 37.58ms
[I 120725 15:39:30 web:1393] 304 GET /api/foods/hot?page=1 (127.0.0.1) 33.17ms
[I 120725 15:47:22 web:1393] 304 GET /api/foods/hot?page=1 (127.0.0.1) 31.59ms
[I 120725 15:47:26 web:1393] 304 GET /api/foods/hot?page=1 (127.0.0.1) 38.09ms
[I 120725 15:47:29 web:1393] 304 GET /api/foods/hot?page=1 (127.0.0.1) 37.81ms
[I 120725 15:48:12 web:1393] 304 GET /api/foods/hot?page=1 (127.0.0.1) 37.32ms
[I 120725 15:48:14 web:1393] 304 GET /api/foods/hot?page=1 (127.0.0.1) 39.72ms
[I 120725 15:48:16 web:1393] 304 GET /api/foods/hot?page=1 (127.0.0.1) 38.34ms
[I 120725 15:52:10 web:1393] 304 GET /api/foods/hot?page=1 (127.0.0.1) 38.61ms
[I 120725 15:57:24 web:1393] 304 GET /api/foods/hot?page=1 (127.0.0.1) 38.77ms
[I 120725 15:57:27 web:1393] 304 GET /api/foods/hot?page=1 (127.0.0.1) 38.15ms
[I 120725 15:57:43 web:1393] 304 GET /api/foods/hot?page=1 (127.0.0.1) 37.63ms
[I 120725 16:04:18 web:1393] 304 GET /api/foods/hot?page=1 (127.0.0.1) 37.35ms
[I 120725 16:04:20 web:1393] 304 GET /api/foods/hot?page=1 (127.0.0.1) 38.15ms
[I 120725 16:04:22 web:1393] 304 GET /api/foods/hot?page=1 (127.0.0.1) 37.92ms
[I 120725 16:04:26 web:1393] 304 GET /api/foods/hot?page=1 (127.0.0.1) 38.88ms
[I 120725 16:04:28 web:1393] 304 GET /api/foods/hot?page=1 (127.0.0.1) 36.71ms
[I 120725 16:04:30 web:1393] 304 GET /api/foods/hot?page=1 (127.0.0.1) 36.22ms
[I 120725 16:08:21 web:1393] 304 GET /api/foods/hot?page=1 (127.0.0.1) 37.69ms
[I 120725 16:08:37 web:1393] 304 GET /api/foods/hot?page=1 (127.0.0.1) 42.38ms
[I 120725 16:08:38 web:1393] 304 GET /api/foods/hot?page=1 (127.0.0.1) 37.46ms
[I 120725 16:11:58 web:1393] 304 GET /api/foods/hot?page=1 (127.0.0.1) 35.26ms
[I 120725 16:12:59 web:1393] 304 GET /api/foods/hot?page=1 (127.0.0.1) 37.26ms
[I 120725 16:13:45 web:1393] 304 GET /api/foods/hot?page=1 (127.0.0.1) 35.85ms
[I 120725 16:13:47 web:1393] 304 GET /api/foods/hot?page=1 (127.0.0.1) 35.50ms
[I 120725 16:14:09 web:1393] 304 GET /api/foods/hot?page=1 (127.0.0.1) 36.68ms
[I 120725 16:14:37 web:1393] 304 GET /api/foods/hot?page=1 (127.0.0.1) 38.14ms
[I 120725 16:14:40 web:1393] 304 GET /api/foods/hot?page=1 (127.0.0.1) 36.71ms
[I 120725 16:17:30 web:1393] 304 GET /api/foods/hot?page=1 (127.0.0.1) 39.39ms
[I 120725 16:28:59 web:1393] 200 GET /api/foods/hot?page=1&callback=jQuery164005348205449990928_1343204937723&_=1343204938800 (127.0.0.1) 36.37ms
[I 120725 16:30:24 web:1393] 200 GET /api/foods/hot?page=1&callback=jQuery16405411341907456517_1343205022330&_=1343205023377 (127.0.0.1) 36.68ms
[I 120725 16:30:49 web:1393] 200 GET /api/foods/hot?page=1&callback=jQuery164005348205449990928_1343204937724&_=1343205048489 (127.0.0.1) 34.36ms
[I 120725 16:31:41 web:1393] 200 GET /api/foods/hot?page=1&callback=jQuery16408205065811052918_1343205100288&_=1343205101015 (127.0.0.1) 38.50ms
[I 120725 16:32:12 web:1393] 200 GET /api/foods/hot?page=1&callback=jQuery16408205065811052918_1343205100289&_=1343205131696 (127.0.0.1) 37.83ms
[I 120725 16:32:17 web:1393] 200 GET /api/foods/hot?page=1&callback=jQuery16408205065811052918_1343205100290&_=1343205136609 (127.0.0.1) 36.42ms
[I 120725 16:36:07 web:1393] 200 GET /api/foods/hot?page=1&callback=jQuery16403436015355400741_1343205364410&{}&_=1343205365223 (127.0.0.1) 276.11ms
[I 120725 16:38:17 web:1393] 200 GET /api/foods/hot?page=1&{} (127.0.0.1) 35.23ms
[I 120725 16:38:44 web:1393] 200 GET /api/foods/hot?page=1&callback=jQuery164008296684175729752_1343205522839&{}&_=1343205523902 (127.0.0.1) 34.82ms
[I 120725 16:41:16 web:1393] 200 GET /api/foods/hot?page=1&callback=jQuery16409699372451286763_1343205675269&{}&_=1343205676385 (127.0.0.1) 40.48ms
[I 120725 16:50:18 web:1393] 200 GET /api/foods/hot?page=1 (127.0.0.1) 34.69ms
[I 120725 17:03:05 web:1393] 200 GET /api/foods/hot?page=1 (127.0.0.1) 38.67ms
[I 120725 17:03:10 web:1393] 200 GET /api/foods/hot?page=1 (127.0.0.1) 39.11ms
[I 120725 17:03:17 web:1393] 200 GET /api/foods/hot?page=1 (127.0.0.1) 39.59ms
[I 120725 17:03:35 web:1393] 200 GET /api/foods/hot?page=1 (127.0.0.1) 37.19ms
[I 120725 17:03:45 web:1393] 200 GET /api/foods/hot?page=1 (127.0.0.1) 44.27ms
[I 120725 17:04:11 web:1393] 200 GET /api/foods/hot?page=1 (127.0.0.1) 38.25ms
[I 120725 17:13:06 web:1393] 304 GET /api/foods/hot?page=1 (127.0.0.1) 39.24ms
[I 120725 17:15:06 web:1393] 304 GET /api/foods/hot?page=1 (127.0.0.1) 36.04ms
[I 120725 17:15:10 web:1393] 304 GET /api/foods/hot?page=1 (127.0.0.1) 39.31ms
[I 120725 17:15:17 web:1393] 304 GET /api/foods/hot?page=1 (127.0.0.1) 36.60ms
[I 120725 17:18:57 web:1393] 304 GET /api/foods/hot?page=1 (127.0.0.1) 37.99ms
[I 120725 17:19:02 web:1393] 304 GET /api/foods/hot?page=1 (127.0.0.1) 38.81ms
[I 120725 17:19:06 web:1393] 304 GET /api/foods/hot?page=1 (127.0.0.1) 37.68ms
[I 120725 17:21:54 web:1393] 304 GET /api/foods/hot?page=1 (127.0.0.1) 38.19ms
[I 120725 17:21:56 web:1393] 304 GET /api/foods/hot?page=1 (127.0.0.1) 41.71ms
[I 120725 17:21:57 web:1393] 304 GET /api/foods/hot?page=1 (127.0.0.1) 40.13ms
[I 120725 17:21:58 web:1393] 304 GET /api/foods/hot?page=1 (127.0.0.1) 32.25ms
[I 120725 17:22:20 web:1393] 304 GET /api/foods/hot?page=1 (127.0.0.1) 38.18ms
[I 120725 17:23:30 web:1393] 200 GET /api/foods/hot?page=1 (127.0.0.1) 39.78ms
[I 120725 17:24:18 autoreload:133] src/sites/www/handlers/__init__.py modified; restarting server
